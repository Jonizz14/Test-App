[{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\public\\sw.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'payload' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":302,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":302,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"payload"},"fix":{"range":[9119,9128],"text":""},"desc":"Remove unused variable 'payload'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Service Worker for API Caching and Offline Support\r\nconst CACHE_NAME = 'testapp-cache-v1';\r\nconst API_CACHE_NAME = 'testapp-api-cache-v1';\r\n\r\n// Cache duration settings (in milliseconds)\r\nconst CACHE_DURATIONS = {\r\n  // Cache static assets for 30 days\r\n  STATIC: 30 * 24 * 60 * 60 * 1000,\r\n  \r\n  // Cache API responses for different durations based on endpoint\r\n  API: {\r\n    // User data - cache for 5 minutes\r\n    '/users/': 5 * 60 * 1000,\r\n    '/users/me/': 5 * 60 * 1000,\r\n    '/users/profile/': 5 * 60 * 1000,\r\n    \r\n    // Test data - cache for 10 minutes\r\n    '/tests/': 10 * 60 * 1000,\r\n    '/questions/': 10 * 60 * 1000,\r\n    '/attempts/': 10 * 60 * 1000,\r\n    \r\n    // Session data - cache for 2 minutes (more dynamic)\r\n    '/sessions/': 2 * 60 * 1000,\r\n    \r\n    // Static data - cache for 30 minutes\r\n    '/pricing/': 30 * 60 * 1000,\r\n    '/star-packages/': 30 * 60 * 1000,\r\n    '/gifts/': 30 * 60 * 1000,\r\n    \r\n    // Statistics - cache for 1 minute\r\n    '/statistics/': 1 * 60 * 1000,\r\n    '/stats/': 1 * 60 * 1000,\r\n    \r\n    // Default API cache duration\r\n    DEFAULT: 5 * 60 * 1000\r\n  }\r\n};\r\n\r\n// Endpoints that should never be cached\r\nconst NO_CACHE_ENDPOINTS = [\r\n  '/login/',\r\n  '/register/',\r\n  '/token/refresh/',\r\n  '/sessions/start_session/',\r\n  '/sessions/complete_session/',\r\n  '/users/ban_user/',\r\n  '/users/unban_user/',\r\n  '/attempts/create/'\r\n];\r\n\r\n// Install event - cache essential files\r\nself.addEventListener('install', (event) => {\r\n  console.log('[SW] Installing service worker...');\r\n  \r\n  event.waitUntil(\r\n    caches.open(CACHE_NAME)\r\n      .then((cache) => {\r\n        // Cache the app shell and essential files\r\n        return cache.addAll([\r\n          '/',\r\n          '/index.html',\r\n          '/manifest.json'\r\n        ]);\r\n      })\r\n      .then(() => {\r\n        console.log('[SW] Essential files cached');\r\n        return self.skipWaiting();\r\n      })\r\n  );\r\n});\r\n\r\n// Activate event - clean up old caches\r\nself.addEventListener('activate', (event) => {\r\n  console.log('[SW] Activating service worker...');\r\n  \r\n  event.waitUntil(\r\n    caches.keys()\r\n      .then((cacheNames) => {\r\n        return Promise.all(\r\n          cacheNames.map((cacheName) => {\r\n            if (cacheName !== CACHE_NAME && cacheName !== API_CACHE_NAME) {\r\n              console.log('[SW] Deleting old cache:', cacheName);\r\n              return caches.delete(cacheName);\r\n            }\r\n          })\r\n        );\r\n      })\r\n      .then(() => {\r\n        console.log('[SW] Service worker activated');\r\n        return self.clients.claim();\r\n      })\r\n  );\r\n});\r\n\r\n// Fetch event - handle requests with caching strategy\r\nself.addEventListener('fetch', (event) => {\r\n  const { request } = event;\r\n  const url = new URL(request.url);\r\n  \r\n  // Skip non-HTTP requests\r\n  if (!request.url.startsWith('http')) {\r\n    return;\r\n  }\r\n  \r\n  // Handle API requests\r\n  if (url.pathname.includes('/api/')) {\r\n    event.respondWith(handleApiRequest(request));\r\n    return;\r\n  }\r\n  \r\n  // Handle static assets and pages\r\n  event.respondWith(handleStaticRequest(request));\r\n});\r\n\r\n// Handle API requests with cache-first strategy for GET, network-first for others\r\nasync function handleApiRequest(request) {\r\n  const url = new URL(request.url);\r\n  const pathname = url.pathname;\r\n  \r\n  // Skip caching for POST, PUT, PATCH, DELETE requests\r\n  if (request.method !== 'GET') {\r\n    try {\r\n      return await fetch(request);\r\n    } catch (error) {\r\n      console.error('[SW] Network request failed:', error);\r\n      return new Response(JSON.stringify({ error: 'Network request failed' }), {\r\n        status: 503,\r\n        statusText: 'Service Unavailable',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n  }\r\n  \r\n  // Skip caching for specific endpoints\r\n  if (NO_CACHE_ENDPOINTS.some(endpoint => pathname.includes(endpoint))) {\r\n    try {\r\n      return await fetch(request);\r\n    } catch (error) {\r\n      console.error('[SW] Network request failed:', error);\r\n      return new Response(JSON.stringify({ error: 'Network request failed' }), {\r\n        status: 503,\r\n        statusText: 'Service Unavailable',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n  }\r\n  \r\n  const cacheKey = `${request.method}-${pathname}`;\r\n  const cache = await caches.open(API_CACHE_NAME);\r\n  \r\n  try {\r\n    // Check cache first\r\n    const cachedResponse = await cache.match(cacheKey);\r\n    \r\n    if (cachedResponse) {\r\n      // Check if cache is still valid\r\n      const cachedTime = new Date(cachedResponse.headers.get('sw-cached-time')).getTime();\r\n      const now = Date.now();\r\n      const cacheDuration = getCacheDuration(pathname);\r\n      \r\n      if (now - cachedTime < cacheDuration) {\r\n        console.log('[SW] Serving from cache:', pathname);\r\n        \r\n        // Return cached response with cache info\r\n        const response = cachedResponse.clone();\r\n        response.headers.set('X-Served-From', 'cache');\r\n        return response;\r\n      } else {\r\n        console.log('[SW] Cache expired, removing:', pathname);\r\n        await cache.delete(cacheKey);\r\n      }\r\n    }\r\n    \r\n    // Fetch from network\r\n    console.log('[SW] Fetching from network:', pathname);\r\n    const networkResponse = await fetch(request);\r\n    \r\n    if (networkResponse.ok) {\r\n      // Clone and cache the response\r\n      const responseToCache = networkResponse.clone();\r\n      const headers = new Headers(responseToCache.headers);\r\n      headers.set('sw-cached-time', new Date().toISOString());\r\n      \r\n      const cachedResponse = new Response(responseToCache.body, {\r\n        status: responseToCache.status,\r\n        statusText: responseToCache.statusText,\r\n        headers: headers\r\n      });\r\n      \r\n      await cache.put(cacheKey, cachedResponse);\r\n      console.log('[SW] Cached response:', pathname);\r\n    }\r\n    \r\n    return networkResponse;\r\n  } catch (error) {\r\n    console.error('[SW] Request failed:', error);\r\n    \r\n    // Try to serve from cache as fallback\r\n    const cachedResponse = await cache.match(cacheKey);\r\n    if (cachedResponse) {\r\n      console.log('[SW] Serving stale cache as fallback:', pathname);\r\n      const response = cachedResponse.clone();\r\n      response.headers.set('X-Served-From', 'stale-cache');\r\n      return response;\r\n    }\r\n    \r\n    // Return offline response\r\n    return new Response(JSON.stringify({ \r\n      error: 'Network unavailable',\r\n      offline: true,\r\n      message: 'Ma\\'lumotlar internet aloqasi yo\\'qligi sababli yuklanmadi'\r\n    }), {\r\n      status: 503,\r\n      statusText: 'Service Unavailable',\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n}\r\n\r\n// Handle static requests (pages, assets) with cache-first strategy\r\nasync function handleStaticRequest(request) {\r\n  const cache = await caches.open(CACHE_NAME);\r\n  \r\n  try {\r\n    // Check cache first\r\n    const cachedResponse = await cache.match(request);\r\n    if (cachedResponse) {\r\n      return cachedResponse;\r\n    }\r\n    \r\n    // Fetch from network\r\n    const networkResponse = await fetch(request);\r\n    \r\n    if (networkResponse.ok) {\r\n      // Cache successful responses\r\n      await cache.put(request, networkResponse.clone());\r\n    }\r\n    \r\n    return networkResponse;\r\n  } catch (error) {\r\n    console.error('[SW] Static request failed:', error);\r\n    \r\n    // Return cached version if available\r\n    const cachedResponse = await cache.match(request);\r\n    if (cachedResponse) {\r\n      return cachedResponse;\r\n    }\r\n    \r\n    // Return offline page for navigation requests\r\n    if (request.mode === 'navigate') {\r\n      const offlineResponse = await cache.match('/');\r\n      if (offlineResponse) {\r\n        return offlineResponse;\r\n      }\r\n    }\r\n    \r\n    // Return generic offline response\r\n    return new Response('Offline - Internet aloqasi yo\\'q', {\r\n      status: 503,\r\n      statusText: 'Service Unavailable',\r\n      headers: { 'Content-Type': 'text/plain' }\r\n    });\r\n  }\r\n}\r\n\r\n// Get cache duration for a specific endpoint\r\nfunction getCacheDuration(pathname) {\r\n  // Find matching endpoint\r\n  for (const [endpoint, duration] of Object.entries(CACHE_DURATIONS.API)) {\r\n    if (pathname.includes(endpoint)) {\r\n      return duration;\r\n    }\r\n  }\r\n  \r\n  return CACHE_DURATIONS.API.DEFAULT;\r\n}\r\n\r\n// Handle cache cleanup and maintenance\r\nasync function cleanupCache() {\r\n  const cache = await caches.open(API_CACHE_NAME);\r\n  const cacheKeys = await cache.keys();\r\n  const now = Date.now();\r\n  \r\n  for (const request of cacheKeys) {\r\n    const response = await cache.match(request);\r\n    const cachedTime = new Date(response.headers.get('sw-cached-time')).getTime();\r\n    const pathname = new URL(request.url).pathname;\r\n    const cacheDuration = getCacheDuration(pathname);\r\n    \r\n    if (now - cachedTime > cacheDuration) {\r\n      console.log('[SW] Cleaning expired cache:', pathname);\r\n      await cache.delete(request);\r\n    }\r\n  }\r\n}\r\n\r\n// Run cache cleanup periodically\r\nsetInterval(cleanupCache, 15 * 60 * 1000); // Every 15 minutes\r\n\r\n// Handle messages from the main thread\r\nself.addEventListener('message', (event) => {\r\n  const { type, payload } = event.data;\r\n  \r\n  switch (type) {\r\n    case 'SKIP_WAITING':\r\n      self.skipWaiting();\r\n      break;\r\n      \r\n    case 'CLEAR_CACHE':\r\n      caches.delete(CACHE_NAME);\r\n      caches.delete(API_CACHE_NAME);\r\n      console.log('[SW] All caches cleared');\r\n      break;\r\n      \r\n    case 'CLEAR_API_CACHE':\r\n      caches.delete(API_CACHE_NAME);\r\n      console.log('[SW] API cache cleared');\r\n      break;\r\n      \r\n    case 'GET_CACHE_STATUS':\r\n      getCacheStatus().then(status => {\r\n        event.ports[0].postMessage(status);\r\n      });\r\n      break;\r\n      \r\n    default:\r\n      console.log('[SW] Unknown message type:', type);\r\n  }\r\n});\r\n\r\n// Get cache status for debugging\r\nasync function getCacheStatus() {\r\n  const cache = await caches.open(API_CACHE_NAME);\r\n  const cacheKeys = await cache.keys();\r\n  const now = Date.now();\r\n  \r\n  const cacheInfo = cacheKeys.map(request => {\r\n    const url = new URL(request.url);\r\n    const response = cache.match(request);\r\n    return {\r\n      url: url.pathname,\r\n      method: request.method,\r\n      cachedTime: response.headers.get('sw-cached-time'),\r\n      age: now - new Date(response.headers.get('sw-cached-time')).getTime()\r\n    };\r\n  });\r\n  \r\n  return {\r\n    cacheName: API_CACHE_NAME,\r\n    totalEntries: cacheKeys.length,\r\n    entries: cacheInfo\r\n  };\r\n}\r\n\r\nconsole.log('[SW] Service worker loaded');","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\scripts\\optimize-images.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\AIChat.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\ActiveTestBanner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\BannedStudentsModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\CustomLoader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\GlobalLoader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\GradientPicker.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":151,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":151,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[4101,4108],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  IconButton,\r\n  Grid,\r\n} from '@mui/material';\r\nimport { Close as CloseIcon, Palette as PaletteIcon } from '@mui/icons-material';\r\n\r\nconst GRADIENT_PRESETS = [\r\n  {\r\n    id: 'default',\r\n    name: 'Standart',\r\n    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n    colors: ['#667eea', '#764ba2']\r\n  },\r\n  {\r\n    id: 'sunset',\r\n    name: 'Quyosh botishi',\r\n    gradient: 'linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ff4757 100%)',\r\n    colors: ['#ff6b35', '#f7931e', '#ff4757']\r\n  },\r\n  {\r\n    id: 'ocean',\r\n    name: 'Okean',\r\n    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #4facfe 100%)',\r\n    colors: ['#667eea', '#764ba2', '#4facfe']\r\n  },\r\n  {\r\n    id: 'forest',\r\n    name: 'O\\'rmon',\r\n    gradient: 'linear-gradient(135deg, #134e5e 0%, #71b280 100%)',\r\n    colors: ['#134e5e', '#71b280']\r\n  },\r\n  {\r\n    id: 'cherry',\r\n    name: 'Olcha',\r\n    gradient: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%)',\r\n    colors: ['#ff9a9e', '#fecfef']\r\n  },\r\n  {\r\n    id: 'royal',\r\n    name: 'Qirollik',\r\n    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',\r\n    colors: ['#667eea', '#764ba2', '#f093fb']\r\n  },\r\n  {\r\n    id: 'fire',\r\n    name: 'Olov',\r\n    gradient: 'linear-gradient(135deg, #ff6b35 0%, #ff4757 50%, #ff3838 100%)',\r\n    colors: ['#ff6b35', '#ff4757', '#ff3838']\r\n  },\r\n  {\r\n    id: 'ice',\r\n    name: 'Muz',\r\n    gradient: 'linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #6c5ce7 100%)',\r\n    colors: ['#74b9ff', '#0984e3', '#6c5ce7']\r\n  },\r\n  {\r\n    id: 'sunrise',\r\n    name: 'Quyosh chiqishi',\r\n    gradient: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)',\r\n    colors: ['#ffecd2', '#fcb69f']\r\n  },\r\n  {\r\n    id: 'galaxy',\r\n    name: 'Galaktika',\r\n    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',\r\n    colors: ['#667eea', '#764ba2', '#f093fb']\r\n  },\r\n  {\r\n    id: 'mint',\r\n    name: 'Yalpiz',\r\n    gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',\r\n    colors: ['#a8edea', '#fed6e3']\r\n  },\r\n  {\r\n    id: 'purple',\r\n    name: 'Binafsha',\r\n    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',\r\n    colors: ['#667eea', '#764ba2', '#f093fb']\r\n  },\r\n  {\r\n    id: 'neon',\r\n    name: 'Neo\\'n',\r\n    gradient: 'linear-gradient(135deg, #ff006e 0%, #8338ec 50%, #3a86ff 100%)',\r\n    colors: ['#ff006e', '#8338ec', '#3a86ff']\r\n  },\r\n  {\r\n    id: 'tropical',\r\n    name: 'Tropik',\r\n    gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\r\n    colors: ['#fa709a', '#fee140']\r\n  },\r\n  {\r\n    id: 'cosmic',\r\n    name: 'Kosmik',\r\n    gradient: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\r\n    colors: ['#4facfe', '#00f2fe']\r\n  }\r\n];\r\n\r\nconst GradientPicker = ({ open, onClose, selectedGradient, onGradientSelect }) => {\r\n  const handleGradientClick = (gradient) => {\r\n    // Pass the full gradient object with name and css properties\r\n    onGradientSelect({\r\n      name: gradient.name,\r\n      css: gradient.gradient\r\n    });\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"md\"\r\n      fullWidth\r\n      sx={{\r\n        '& .MuiDialog-paper': {\r\n          borderRadius: '20px',\r\n          maxHeight: '80vh'\r\n        }\r\n      }}\r\n    >\r\n      <DialogTitle sx={{\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        pb: 1\r\n      }}>\r\n        <Typography component=\"h2\" variant=\"h6\" sx={{ fontWeight: 700, color: '#1e293b' }}>\r\n          ЁЯОи Gradient tanlang\r\n        </Typography>\r\n        <IconButton onClick={onClose} size=\"small\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n\r\n      <DialogContent sx={{ pb: 1 }}>\r\n        <Typography variant=\"body2\" sx={{ mb: 3, color: '#64748b' }}>\r\n          Premium profilingiz uchun chiroyli gradient tanlang\r\n        </Typography>\r\n\r\n        <Grid container spacing={2}>\r\n          {GRADIENT_PRESETS.map((gradient, index) => (\r\n            <Grid item xs={12} sm={6} md={4} key={gradient.id}>\r\n              <Box\r\n                onClick={() => handleGradientClick(gradient)}\r\n                sx={{\r\n                  position: 'relative',\r\n                  height: '80px',\r\n                  borderRadius: '12px',\r\n                  background: `linear-gradient(45deg, ${gradient.colors[0]} 0%, ${gradient.colors[gradient.colors.length - 1]} 100%)`,\r\n                  cursor: 'pointer',\r\n                  border: selectedGradient && selectedGradient.name === gradient.name ? '2px solid #2563eb' : '2px solid rgba(255, 255, 255, 0.3)',\r\n                  boxShadow: selectedGradient && selectedGradient.name === gradient.name ? '0 0 0 3px rgba(37, 99, 235, 0.1), 0 8px 25px rgba(0, 0, 0, 0.2)' : '0 4px 12px rgba(0, 0, 0, 0.15)',\r\n                  transition: 'all 0.3s ease',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  px: 3,\r\n                  overflow: 'hidden',\r\n                  '&:hover': {\r\n                    transform: 'translateY(-3px)',\r\n                    boxShadow: '0 12px 35px rgba(0, 0, 0, 0.25)',\r\n                    border: '2px solid rgba(255, 255, 255, 0.5)'\r\n                  }\r\n                }}\r\n              >\r\n                <Typography variant=\"h6\" sx={{ \r\n                  fontWeight: 700, \r\n                  fontSize: '1rem',\r\n                  color: 'rgba(255, 255, 255, 0.95)',\r\n                  flex: 1,\r\n                  textShadow: '0 2px 4px rgba(0, 0, 0, 0.3)',\r\n                  backdropFilter: 'blur(2px)'\r\n                }}>\r\n                  {gradient.name}\r\n                </Typography>\r\n                \r\n                {selectedGradient && selectedGradient.name === gradient.name && (\r\n                  <Box sx={{\r\n                    backgroundColor: '#2563eb',\r\n                    borderRadius: '50%',\r\n                    width: '32px',\r\n                    height: '32px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    boxShadow: '0 2px 8px rgba(37, 99, 235, 0.3)',\r\n                    ml: 2\r\n                  }}>\r\n                    <PaletteIcon sx={{ fontSize: '18px', color: '#ffffff' }} />\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </DialogContent>\r\n\r\n      <DialogActions sx={{ p: 3, pt: 1 }}>\r\n        <Button onClick={onClose} sx={{ color: '#64748b' }}>\r\n          Bekor qilish\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default GradientPicker;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\Header.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'showWarning' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"showWarning"},"fix":{"range":[530,586],"text":""},"desc":"Remove unused variable 'showWarning'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleHeaderClick' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":502,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":502,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleHeaderClick"},"fix":{"range":[18228,18360],"text":""},"desc":"Remove unused variable 'handleHeaderClick'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":502,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":502,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"e"},"fix":{"range":[18255,18256],"text":""},"desc":"Remove unused variable 'e'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { Tooltip } from 'antd';\r\nimport '../styles/Header.css';\r\nimport 'animate.css';\r\nimport { useSavedItems } from '../context/SavedItemsContext';\r\nimport { useSentMessages } from '../context/SentMessagesContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSettings } from '../context/SettingsContext';\r\nimport { useServerTest } from '../context/ServerTestContext';\r\nimport { showWarning } from '../utils/antdNotification';\r\n\r\n\r\nconst Header = ({ demoMode = false }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const headerRef = React.useRef(null);\r\n  const { savedItems, removeItem, clearItems, toggleSidebar } = useSavedItems();\r\n  const { sentMessages, removeMessage, clearMessages } = useSentMessages();\r\n  const { currentUser, isAuthenticated, logout } = useAuth();\r\n  const { settings } = useSettings();\r\n  const { sessionStarted, timeRemaining, formatTime } = useServerTest();\r\n\r\n  const { t, i18n } = useTranslation();\r\n  const [showSaved, setShowSaved] = React.useState(false);\r\n  const [showMessages, setShowMessages] = React.useState(false);\r\n  const [showNotifications, setShowNotifications] = React.useState(false);\r\n  const [showLanguages, setShowLanguages] = React.useState(false);\r\n  const [showSearch, setShowSearch] = React.useState(false);\r\n  const [activeDropdown, setActiveDropdown] = React.useState(null);\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n  const [isMobile, setIsMobile] = React.useState(window.innerWidth <= 768);\r\n\r\n  React.useEffect(() => {\r\n    const handleResize = () => setIsMobile(window.innerWidth <= 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n\r\n  // Search Data\r\n  // Enhanced Search Data with \"Content\" simulation\r\n  // Enhanced Search Data with \"Content\" simulation for all pages\r\n  const getSearchData = (t) => [\r\n    // Pages\r\n    {\r\n      id: 'home',\r\n      title: t('nav.search.results.home.title'),\r\n      path: '/',\r\n      icon: 'home',\r\n      category: t('nav.home') || 'Page',\r\n      description: t('nav.search.results.home.desc'),\r\n      content: t('nav.search.results.home.content')\r\n    },\r\n    {\r\n      id: 'contact',\r\n      title: t('nav.search.results.contact.title'),\r\n      path: '/contact',\r\n      icon: 'contact_support',\r\n      category: t('nav.contact') || 'Page',\r\n      description: t('nav.search.results.contact.desc'),\r\n      content: t('nav.search.results.contact.content')\r\n    },\r\n    {\r\n      id: 'login',\r\n      title: t('nav.search.results.login.title'),\r\n      path: '/login',\r\n      icon: 'login',\r\n      category: t('nav.login') || 'Auth',\r\n      description: t('nav.search.results.login.desc'),\r\n      content: t('nav.search.results.login.content')\r\n    },\r\n    {\r\n      id: 'welcome',\r\n      title: t('nav.search.results.welcome.title'),\r\n      path: '/welcome',\r\n      icon: 'waving_hand',\r\n      category: 'Intro',\r\n      description: t('nav.search.results.welcome.desc'),\r\n      content: t('nav.search.results.welcome.content')\r\n    },\r\n\r\n    // Admin Pages\r\n    {\r\n      id: 'dashboard-admin',\r\n      title: t('nav.search.results.adminDashboard.title'),\r\n      path: '/admin',\r\n      icon: 'dashboard',\r\n      category: t('nav.dashboard') || 'Admin',\r\n      description: t('nav.search.results.adminDashboard.desc'),\r\n      content: t('nav.search.results.adminDashboard.content')\r\n    },\r\n    {\r\n      id: 'admin-teachers',\r\n      title: t('nav.search.results.adminTeachers.title'),\r\n      path: '/admin/teachers',\r\n      icon: 'school',\r\n      category: t('nav.teachers') || 'Admin',\r\n      description: t('nav.search.results.adminTeachers.desc'),\r\n      content: t('nav.search.results.adminTeachers.content')\r\n    },\r\n    {\r\n      id: 'admin-students',\r\n      title: t('nav.search.results.adminStudents.title'),\r\n      path: '/admin/students',\r\n      icon: 'face',\r\n      category: t('nav.students') || 'Admin',\r\n      description: t('nav.search.results.adminStudents.desc'),\r\n      content: t('nav.search.results.adminStudents.content')\r\n    },\r\n\r\n    // Teacher Pages\r\n    {\r\n      id: 'teacher-classes',\r\n      title: t('nav.search.results.teacherClasses.title'),\r\n      path: '/teacher/classes',\r\n      icon: 'groups',\r\n      category: t('nav.classes') || 'Teacher',\r\n      description: t('nav.search.results.teacherClasses.desc'),\r\n      content: t('nav.search.results.teacherClasses.content')\r\n    },\r\n    {\r\n      id: 'teacher-tests',\r\n      title: t('nav.search.results.teacherTests.title'),\r\n      path: '/teacher/tests',\r\n      icon: 'quiz',\r\n      category: t('nav.tests') || 'Teacher',\r\n      description: t('nav.search.results.teacherTests.desc'),\r\n      content: t('nav.search.results.teacherTests.content')\r\n    },\r\n\r\n    // Student Pages\r\n    {\r\n      id: 'student-tests',\r\n      title: t('nav.search.results.studentTests.title'),\r\n      path: '/student/tests',\r\n      icon: 'assignment',\r\n      category: t('nav.tests') || 'Student',\r\n      description: t('nav.search.results.studentTests.desc'),\r\n      content: t('nav.search.results.studentTests.content')\r\n    },\r\n    {\r\n      id: 'student-results',\r\n      title: t('nav.search.results.studentResults.title'),\r\n      path: '/student/results',\r\n      icon: 'bar_chart',\r\n      category: t('nav.results') || 'Student',\r\n      description: t('nav.search.results.studentResults.desc'),\r\n      content: t('nav.search.results.studentResults.content')\r\n    },\r\n\r\n    // User & System\r\n    {\r\n      id: 'profile',\r\n      title: t('nav.search.results.profile.title'),\r\n      path: '/profile',\r\n      icon: 'person',\r\n      category: t('nav.profile') || 'User',\r\n      description: t('nav.search.results.profile.desc'),\r\n      content: t('nav.search.results.profile.content')\r\n    },\r\n    {\r\n      id: 'ai-help',\r\n      title: t('nav.search.results.aiHelp.title'),\r\n      path: '#',\r\n      icon: 'smart_toy',\r\n      category: 'AI',\r\n      description: t('nav.search.results.aiHelp.desc'),\r\n      content: t('nav.search.results.aiHelp.content')\r\n    }\r\n  ];\r\n\r\n  const searchData = React.useMemo(() => getSearchData(t), [t]);\r\n\r\n  const filteredSearchResults = React.useMemo(() => {\r\n    if (!searchQuery.trim()) return [];\r\n\r\n    const query = searchQuery.toLowerCase();\r\n\r\n    return searchData.filter(item => {\r\n      const titleMatch = item.title.toLowerCase().includes(query);\r\n      const descMatch = item.description.toLowerCase().includes(query);\r\n      const contentMatch = item.content.toLowerCase().includes(query);\r\n      return titleMatch || descMatch || contentMatch;\r\n    });\r\n  }, [searchQuery, searchData]);\r\n\r\n  // Helper to highlight matching text\r\n  const HighlightedText = ({ text, highlight }) => {\r\n    if (!highlight.trim() || !text) {\r\n      return <span>{text}</span>;\r\n    }\r\n    const regex = new RegExp(`(${highlight.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\r\n    const parts = text.split(regex);\r\n    return (\r\n      <span>\r\n        {parts.map((part, i) =>\r\n          part.toLowerCase() === highlight.toLowerCase() ? (\r\n            <span key={i} className=\"search-highlight\">{part}</span>\r\n          ) : (\r\n            part\r\n          )\r\n        )}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  // Helper to render content snippet with match\r\n  const renderSearchSnippet = (content, query) => {\r\n    if (!content || !query || query.length < 2) return null;\r\n\r\n    const lowerContent = content.toLowerCase();\r\n    const lowerQuery = query.toLowerCase();\r\n    const index = lowerContent.indexOf(lowerQuery);\r\n\r\n    if (index === -1) return null;\r\n\r\n    const start = Math.max(0, index - 35);\r\n    const end = Math.min(content.length, index + query.length + 35);\r\n    let snippet = content.slice(start, end);\r\n\r\n    if (start > 0) snippet = '...' + snippet;\r\n    if (end < content.length) snippet = snippet + '...';\r\n\r\n    return (\r\n      <p className=\"search-content-snippet\">\r\n        <HighlightedText text={snippet} highlight={query} />\r\n      </p>\r\n    );\r\n  };\r\n\r\n\r\n  const [activeNotifications, setActiveNotifications] = React.useState([]);\r\n  const [headerHeight, setHeaderHeight] = React.useState(64);\r\n\r\n  // Dashboard state\r\n  const isDashboard = ['/admin', '/headadmin', '/teacher', '/student', '/seller'].some(path =>\r\n    location.pathname.startsWith(path)\r\n  );\r\n  const [isDashboardExpanded, setIsDashboardExpanded] = React.useState(false);\r\n\r\n  const isSellerOrHeadAdmin = location.pathname.startsWith('/seller') || location.pathname.startsWith('/headadmin') || (location.pathname.startsWith('/student') && currentUser?.role === 'student');\r\n\r\n  // Calculate Dynamic Header Height for Smooth Transitions\r\n  React.useEffect(() => {\r\n    let newHeight = 64; // Base height\r\n\r\n    const isExpanded =\r\n      (showSaved && savedItems.length > 0) ||\r\n      (showMessages && sentMessages.length > 0) ||\r\n      (showNotifications) ||\r\n      (showLanguages && (!isDashboard || isSellerOrHeadAdmin)) ||\r\n      (showSearch && (!isDashboard || isSellerOrHeadAdmin));\r\n\r\n    if (isExpanded) {\r\n      if (showLanguages && (!isDashboard || isSellerOrHeadAdmin)) newHeight = 140;\r\n      else if (showSearch && (!isDashboard || isSellerOrHeadAdmin)) newHeight = 380;\r\n      else newHeight = 380; // Default for expanded storage/messages\r\n    }\r\n\r\n    // Add height for notifications\r\n    const visibleNotificationsCount = activeNotifications.filter(n => n.isVisible).length;\r\n    if (visibleNotificationsCount > 0) {\r\n      newHeight += (visibleNotificationsCount * 64);\r\n    }\r\n\r\n    setHeaderHeight(newHeight);\r\n  }, [activeNotifications, showSaved, showMessages, showNotifications, showLanguages, showSearch, isDashboard, isSellerOrHeadAdmin, savedItems.length, sentMessages.length]);\r\n\r\n  // Handle Body Scroll Lock when header is expanded or mobile menu is open\r\n  React.useEffect(() => {\r\n    const isExpanded =\r\n      (showSaved && savedItems.length > 0) ||\r\n      (showMessages && sentMessages.length > 0) ||\r\n      (showNotifications) ||\r\n      (showLanguages && (!isDashboard || isSellerOrHeadAdmin)) ||\r\n      (showSearch && (!isDashboard || isSellerOrHeadAdmin)) ||\r\n      (activeDropdown === 'mobile-menu');\r\n\r\n    if (isExpanded) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = '';\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [showSaved, showMessages, showNotifications, showLanguages, showSearch, isDashboard, isSellerOrHeadAdmin, savedItems.length, sentMessages.length, activeDropdown]);\r\n\r\n  // Listen for custom 'itemSaved' event\r\n  const handleNotification = React.useCallback((data) => {\r\n    const id = Date.now() + Math.random();\r\n    const newNotification = { ...data, id, isVisible: false };\r\n\r\n    setActiveNotifications(prev => [...prev, newNotification]);\r\n\r\n    setTimeout(() => {\r\n      setActiveNotifications(prev => prev.map(n => n.id === id ? { ...n, isVisible: true } : n));\r\n    }, 10);\r\n\r\n    setTimeout(() => {\r\n      setActiveNotifications(prev => prev.map(n => n.id === id ? { ...n, isVisible: false } : n));\r\n      setTimeout(() => {\r\n        setActiveNotifications(prev => prev.filter(n => n.id !== id));\r\n      }, 700);\r\n    }, 3000);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    const handleItemSaved = (e) => handleNotification(e.detail);\r\n    const handleSaveError = (e) => handleNotification({ ...e.detail, isError: true });\r\n\r\n    window.addEventListener('itemSaved', handleItemSaved);\r\n    window.addEventListener('saveError', handleSaveError);\r\n    return () => {\r\n      window.removeEventListener('itemSaved', handleItemSaved);\r\n      window.removeEventListener('saveError', handleSaveError);\r\n    };\r\n  }, [handleNotification]);\r\n\r\n  // Enforce onboarding for new users\r\n  React.useEffect(() => {\r\n    const hasSeen = localStorage.getItem('hasSeenOnboarding');\r\n    const isPublicPath = ['/welcome', '/test', '/health'].some(path =>\r\n      location.pathname.startsWith(path)\r\n    );\r\n\r\n    // Special check for demoMode (onboarding page) to avoid infinite loop\r\n    if (!hasSeen && !demoMode && !isPublicPath) {\r\n      navigate('/welcome');\r\n    }\r\n  }, [demoMode, location.pathname, navigate]);\r\n\r\n  // Close dropdowns on click outside\r\n  React.useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (headerRef.current && !headerRef.current.contains(event.target)) {\r\n        setShowNotifications(false);\r\n        setShowSaved(false);\r\n        setShowMessages(false);\r\n        setShowLanguages(false);\r\n        setShowSearch(false);\r\n      }\r\n    };\r\n\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n\r\n\r\n  // Auto-close empty lists\r\n  React.useEffect(() => {\r\n    if (savedItems.length === 0) setShowSaved(false);\r\n  }, [savedItems.length]);\r\n\r\n  React.useEffect(() => {\r\n    if (sentMessages.length === 0) setShowMessages(false);\r\n  }, [sentMessages.length]);\r\n\r\n  // Dynamic links based on route\r\n  const getNavLinks = () => {\r\n    if (location.pathname.startsWith('/headadmin')) {\r\n      const headadminLinks = [\r\n        { label: 'Umumiy', path: '/headadmin' },\r\n        { label: 'Adminlar', path: '/headadmin/admins' },\r\n        { label: 'Yangilanishlar', path: '/headadmin/updates' },\r\n        { label: 'Xabarlar', path: '/headadmin/messages' },\r\n        { label: 'Sozlamalar', path: '/headadmin/settings' },\r\n      ];\r\n      return headadminLinks;\r\n    }\r\n    if (location.pathname.startsWith('/admin')) {\r\n      return [\r\n        { label: t('nav.dashboard'), path: '/admin' },\r\n        { label: t('nav.teachers'), path: '/admin/teachers' },\r\n        { label: t('nav.students'), path: '/admin/students' },\r\n        {\r\n          label: t('nav.statistics'),\r\n          children: [\r\n            { label: t('nav.total'), path: '/admin/statistics' },\r\n            { label: t('nav.classes'), path: '/admin/classes' },\r\n            { label: t('nav.students'), path: '/admin/students-page' },\r\n            { label: t('nav.tests'), path: '/admin/tests-page' }\r\n          ]\r\n        },\r\n        {\r\n          label: t('nav.ratings'),\r\n          children: [\r\n            { label: t('nav.classes'), path: '/admin/class-stats' },\r\n            { label: t('nav.students'), path: '/admin/student-ratings' },\r\n            { label: t('nav.tests'), path: '/admin/test-stats' }\r\n          ]\r\n        }\r\n      ];\r\n    }\r\n    if (location.pathname.startsWith('/teacher')) {\r\n      return [\r\n        { label: t('nav.cabinet'), path: '/teacher' },\r\n        { label: t('nav.classes'), path: '/teacher/classes' },\r\n        { label: t('nav.tests'), path: '/teacher/tests' }\r\n      ];\r\n    }\r\n    if (location.pathname.startsWith('/seller')) {\r\n      return [\r\n        { label: 'Umumiy', path: '/seller' },\r\n        { label: \"O'quvchilar\", path: '/seller/students' },\r\n        { label: 'Narxlar', path: '/seller/prices' }\r\n      ];\r\n    }\r\n    if (location.pathname.startsWith('/student')) {\r\n      return [\r\n        { label: 'Asosiy', path: '/student' },\r\n        {\r\n          label: 'Hamjamiyat',\r\n          children: [\r\n            { label: 'O\\'qituvchilar', path: '/student/search' },\r\n            { label: 'Sinfdoshlar', path: '/student/classmates' }\r\n          ]\r\n        },\r\n        {\r\n          label: 'O\\'quv jarayoni',\r\n          children: [\r\n            { label: 'Test topshirish', path: '/student/take-test' },\r\n            { label: 'Natijalarim', path: '/student/results' },\r\n            { label: 'Darslar', path: '/student/lessons' }\r\n          ]\r\n        },\r\n        {\r\n          label: 'Statistika',\r\n          children: [\r\n            { label: 'Mening statistikam', path: '/student/statistics' },\r\n            { label: 'Sinf statistikasi', path: '/student/my-class-statistics' }\r\n          ]\r\n        },\r\n        {\r\n          label: 'Reytinglar',\r\n          children: [\r\n            { label: 'O\\'quvchilar reytingi', path: '/student/students-rating' },\r\n            { label: 'Sinflar reytingi', path: '/student/classes-rating' }\r\n          ]\r\n        }\r\n      ];\r\n    }\r\n    // Default Home Links\r\n    return [\r\n      { label: t('nav.home'), path: '/', isAction: true },\r\n      { label: t('nav.news') || 'Yangilanishlar', path: '/updates' },\r\n      { label: t('nav.schoolSite'), href: 'https://sergelitim.uz', isExternal: true },\r\n      { label: t('nav.contact'), path: '/contact', isAction: true }\r\n    ];\r\n  };\r\n\r\n  const navLinks = getNavLinks();\r\n\r\n  const handleLinkClick = (link) => {\r\n    if (currentUser?.role === 'student' && sessionStarted && link.path !== '/student/take-test') {\r\n      handleNotification({\r\n        title: \"Test topshirish jarayonida boshqa sahifaga o'ta olmaysiz!\",\r\n        isError: true,\r\n        icon: 'warning',\r\n        isFullMessage: true\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (link.isExternal) {\r\n      if (!demoMode) window.open(link.href, '_blank', 'noopener,noreferrer');\r\n    } else if (link.path) {\r\n      if (!demoMode) navigate(link.path);\r\n    }\r\n  };\r\n\r\n\r\n  const getHeaderClass = () => {\r\n    let classes = ['header'];\r\n    if (i18n.language) classes.push(`lang-${i18n.language.split('-')[0]}`);\r\n\r\n    const hasExpandedContent =\r\n      (showSaved && savedItems.length > 0) ||\r\n      (showMessages && sentMessages.length > 0) ||\r\n      (showNotifications) ||\r\n      (showLanguages && (!isDashboard || isSellerOrHeadAdmin)) ||\r\n      (showSearch && (!isDashboard || isSellerOrHeadAdmin));\r\n\r\n    if (activeNotifications.length > 0 && !hasExpandedContent) classes.push('expanding-down');\r\n    if (showSaved && savedItems.length > 0) classes.push('storage-expanded');\r\n    if (showMessages && sentMessages.length > 0) classes.push('messages-expanded');\r\n    if (showNotifications) classes.push('messages-expanded'); // Reuse expanded style\r\n    if (showLanguages && (!isDashboard || isSellerOrHeadAdmin)) classes.push('lang-expanded');\r\n    if (showSearch && (!isDashboard || isSellerOrHeadAdmin)) classes.push('search-expanded');\r\n\r\n\r\n    if (demoMode) classes.push('demo-mode');\r\n\r\n    return classes.join(' ');\r\n  };\r\n\r\n  const handleHeaderClick = (e) => {\r\n    if (isDashboard && !isDashboardExpanded) {\r\n      setIsDashboardExpanded(true);\r\n    }\r\n  };\r\n\r\n  const handleCollapse = (e) => {\r\n    e.stopPropagation();\r\n    setShowSaved(false);\r\n    setShowMessages(false);\r\n    setShowNotifications(false);\r\n    setShowLanguages(false);\r\n    setShowSearch(false);\r\n\r\n  };\r\n\r\n  const toggleSaved = () => {\r\n    if (savedItems.length > 0) {\r\n      setShowSaved(!showSaved);\r\n      setShowMessages(false);\r\n      setShowNotifications(false);\r\n      setShowLanguages(false);\r\n      setShowSearch(false);\r\n\r\n    }\r\n  };\r\n\r\n  const toggleMessages = () => {\r\n    if (sentMessages.length > 0) {\r\n      setShowMessages(!showMessages);\r\n      setShowSaved(false);\r\n      setShowNotifications(false);\r\n      setShowLanguages(false);\r\n      setShowSearch(false);\r\n\r\n    }\r\n  };\r\n\r\n  const toggleNotifications = () => {\r\n    setShowNotifications(!showNotifications);\r\n    setShowSaved(false);\r\n    setShowMessages(false);\r\n    setShowLanguages(false);\r\n    setShowSearch(false);\r\n\r\n  };\r\n\r\n  const toggleLanguages = () => {\r\n    setShowLanguages(!showLanguages);\r\n    setShowSaved(false);\r\n    setShowMessages(false);\r\n    setShowNotifications(false);\r\n    setShowSearch(false);\r\n\r\n  };\r\n\r\n  const toggleSearch = () => {\r\n    setShowSearch(!showSearch);\r\n    setShowSaved(false);\r\n    setShowMessages(false);\r\n    setShowNotifications(false);\r\n    setShowLanguages(false);\r\n    if (!showSearch) {\r\n      setTimeout(() => document.getElementById('global-search-input')?.focus(), 100);\r\n\r\n    }\r\n  };\r\n\r\n  const handleProfileClick = () => {\r\n    if (currentUser) {\r\n      const roles = {\r\n        head_admin: '/headadmin',\r\n        admin: '/admin',\r\n        teacher: '/teacher',\r\n        student: '/student',\r\n        seller: '/seller'\r\n      };\r\n      navigate(roles[currentUser.role] || '/');\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <header\r\n        className={getHeaderClass()}\r\n        ref={headerRef}\r\n        style={{ height: `${headerHeight}px` }}\r\n      >\r\n        {/* Collapse Button Removed per request */}\r\n\r\n        <div className=\"layout-container\">\r\n          <div className=\"layout-content-container\">\r\n            <nav className=\"nav-desktop\">\r\n              <div className=\"logo-section\" onClick={(e) => { if (demoMode) e.preventDefault(); else navigate('/'); }} style={{ cursor: demoMode ? 'default' : 'pointer' }}>\r\n                <h2 className=\"logo-text\">Examify Prep</h2>\r\n              </div>\r\n              <div className=\"nav-links\">\r\n                {navLinks.map((link, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className={`nav-item ${link.children ? 'has-dropdown' : ''} ${isMobile ? 'hidden-desktop-nav' : ''}`} // Hide in CSS if needed, or filter here\r\n                    style={{ display: isMobile ? 'none' : 'flex' }}\r\n                    onMouseEnter={() => !isMobile && link.children && setActiveDropdown(index)}\r\n                    onMouseLeave={() => !isMobile && link.children && setActiveDropdown(null)}\r\n                  >\r\n                    <a\r\n                      className={`nav-link ${link.children ? 'dropdown-trigger' : ''}`}\r\n                      onClick={(e) => {\r\n                        if (link.children) e.preventDefault();\r\n                        else if (demoMode) e.preventDefault();\r\n                        else handleLinkClick(link);\r\n                      }}\r\n                      style={{ cursor: demoMode ? 'default' : 'pointer' }}\r\n                    >\r\n                      {link.label}\r\n                      {link.children && <span className=\"material-symbols-outlined dropdown-icon\">expand_more</span>}\r\n                    </a>\r\n\r\n                    {/* Dropdown Menu */}\r\n                    {link.children && (\r\n                      <div className={`nav-dropdown-menu ${activeDropdown === index ? 'visible' : ''}`}>\r\n                        {link.children.map((child, childIndex) => (\r\n                          <div\r\n                            key={childIndex}\r\n                            className=\"dropdown-item\"\r\n                            onClick={() => {\r\n                              handleLinkClick(child);\r\n                              setActiveDropdown(null);\r\n                            }}\r\n                          >\r\n                            {child.label}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"nav-buttons\">\r\n                {isDashboard ? (\r\n                  <>\r\n                    {currentUser?.role === 'student' && sessionStarted && (\r\n                      <div className=\"test-timer-header animate__animated animate__fadeInRight\" style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '8px',\r\n                        backgroundColor: '#4f46e5',\r\n                        color: '#fff',\r\n                        padding: '6px 16px',\r\n                        borderRadius: '12px',\r\n                        marginRight: '16px',\r\n                        fontWeight: '900',\r\n                        fontSize: '1rem',\r\n                        border: '2px solid #000',\r\n                        boxShadow: '4px 4px 0px #000',\r\n                        cursor: 'default'\r\n                      }}>\r\n                        <span className=\"material-symbols-outlined\" style={{ animation: 'pulse 1s infinite' }}>timer</span>\r\n                        <span style={{ fontFamily: 'monospace', fontSize: '1.2rem', letterSpacing: '1px' }}>\r\n                          {formatTime ? formatTime(timeRemaining) : '00:00'}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    <button className=\"btn-secondary\" onClick={logout} style={{ background: '#ff4757', color: 'white' }}>{t('nav.logout')}</button>\r\n\r\n                    {/* Seller, HeadAdmin & Student Icons */}\r\n                    {isSellerOrHeadAdmin && !isMobile && (\r\n                      <>\r\n                        <div\r\n                          className={`storage-icon-container message-icon ${sentMessages.length > 0 ? 'is-visible' : ''} ${showMessages ? 'active' : ''}`}\r\n                          onClick={toggleMessages}\r\n                          id=\"header-message-icon\"\r\n                          title={t('nav.sentMessages')}\r\n                        >\r\n                          <span className=\"material-symbols-outlined\">forum</span>\r\n                          <span className=\"item-count msg-count\">{sentMessages.length}</span>\r\n                        </div>\r\n                        <div\r\n                          className={`storage-icon-container has-items ${savedItems.length > 0 ? 'is-visible' : ''} ${showSaved ? 'active' : ''}`}\r\n                          onClick={toggleSaved}\r\n                          id=\"header-storage-bin\"\r\n                          title={t('nav.savedData')}\r\n                        >\r\n                          <span className=\"material-symbols-outlined\">notes</span>\r\n                          <span className=\"item-count\">{savedItems.length}</span>\r\n                        </div>\r\n                        <div\r\n                          className={`storage-icon-container search-icon ${showSearch ? 'active' : ''}`}\r\n                          onClick={toggleSearch}\r\n                          id=\"header-search-icon\"\r\n                          title=\"Qidirish\"\r\n                          style={{ width: '44px', opacity: 1, transform: 'scale(1)', overflow: 'visible' }}\r\n                        >\r\n                          <span className=\"material-symbols-outlined\">search</span>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {currentUser?.role === 'student' && (\r\n                      <div\r\n                        className=\"storage-icon-container is-visible\"\r\n                        onClick={() => navigate('/student/profile')}\r\n                        title={t('nav.profile')}\r\n                        style={{ marginLeft: '8px', cursor: 'pointer' }}\r\n                      >\r\n                        <span className=\"material-symbols-outlined\">person</span>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Dashboard Notification Icon */}\r\n                    <div\r\n                      className={`storage-icon-container message-icon is-visible ${showNotifications ? 'active' : ''}`}\r\n                      onClick={toggleNotifications}\r\n                      style={{ width: '44px', opacity: 1, transform: 'scale(1)', overflow: 'visible', marginLeft: '8px' }}\r\n                    >\r\n                      <span className=\"material-symbols-outlined\">notifications</span>\r\n                      <span className=\"item-count msg-count\">0</span>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {(isAuthenticated || demoMode) ? (\r\n                      !isMobile ? (\r\n                        <button className=\"btn-secondary\" onClick={(e) => { if (demoMode) e.preventDefault(); else handleProfileClick(); }} style={{ cursor: demoMode ? 'default' : 'pointer' }}>{t('nav.profile')}</button>\r\n                      ) : (\r\n                        <div\r\n                          className=\"storage-icon-container is-visible\"\r\n                          onClick={(e) => { if (demoMode) e.preventDefault(); else handleProfileClick(); }}\r\n                          id=\"header-profile-icon\"\r\n                          title={t('nav.profile')}\r\n                          style={{ cursor: demoMode ? 'default' : 'pointer', marginLeft: '0.4rem' }}\r\n                        >\r\n                          <span className=\"material-symbols-outlined\">person</span>\r\n                        </div>\r\n                      )\r\n                    ) : (\r\n                      !isMobile ? (\r\n                        <button className=\"btn-secondary\" onClick={() => !demoMode && navigate('/login')} style={{ cursor: demoMode ? 'default' : 'pointer' }}>{t('nav.login')}</button>\r\n                      ) : (\r\n                        <div\r\n                          className=\"storage-icon-container is-visible\"\r\n                          onClick={() => !demoMode && navigate('/login')}\r\n                          title={t('nav.login')}\r\n                          style={{ cursor: demoMode ? 'default' : 'pointer', marginLeft: '0.4rem' }}\r\n                        >\r\n                          <span className=\"material-symbols-outlined\">login</span>\r\n                        </div>\r\n                      )\r\n                    )}\r\n\r\n\r\n\r\n                    {/* Content Search Icon */}\r\n                    {settings.header.search && (\r\n                      <div\r\n                        className={`storage-icon-container search-icon ${showSearch ? 'active' : ''}`}\r\n                        onClick={toggleSearch}\r\n                        id=\"header-search-icon\"\r\n                        title=\"Qidirish\"\r\n                        style={{ width: '44px', opacity: 1, transform: 'scale(1)', overflow: 'visible', marginRight: 0 }}\r\n                      >\r\n                        <span className=\"material-symbols-outlined\">search</span>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Language Switcher */}\r\n                    {settings.header.language && (\r\n                      <div\r\n                        className={`storage-icon-container lang-icon ${showLanguages ? 'active' : ''}`}\r\n                        onClick={toggleLanguages}\r\n                        id=\"header-lang-icon\"\r\n                        title={t('nav.changeLanguage')}\r\n                      >\r\n                        <span className=\"material-symbols-outlined\">language</span>\r\n                        <span className=\"current-lang-code\">{i18n.language ? i18n.language.split('-')[0].toUpperCase() : 'UZ'}</span>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Messages Icon */}\r\n                    {settings.header.messages && !isMobile && (\r\n                      <div\r\n                        className={`storage-icon-container message-icon ${sentMessages.length > 0 ? 'is-visible' : ''} ${showMessages ? 'active' : ''}`}\r\n                        onClick={toggleMessages}\r\n                        id=\"header-message-icon\"\r\n                        title={t('nav.sentMessages')}\r\n                      >\r\n                        <span className=\"material-symbols-outlined\">forum</span>\r\n                        <span className=\"item-count msg-count\">{sentMessages.length}</span>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Storage Icon */}\r\n                    {settings.header.storage && !isMobile && (\r\n                      <div\r\n                        className={`storage-icon-container has-items ${savedItems.length > 0 ? 'is-visible' : ''} ${showSaved ? 'active' : ''}`}\r\n                        onClick={toggleSaved}\r\n                        id=\"header-storage-bin\"\r\n                        title={t('nav.savedData')}\r\n                      >\r\n                        <span className=\"material-symbols-outlined\">notes</span>\r\n                        <span className=\"item-count\">{savedItems.length}</span>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n\r\n                {/* Mobile Menu Button - Shown only on Mobile */}\r\n                {isMobile && (\r\n                  <div\r\n                    className=\"nav-item has-dropdown mobile-menu-container\"\r\n                    onClick={() => setActiveDropdown(activeDropdown === 'mobile-menu' ? null : 'mobile-menu')}\r\n                    style={{ marginLeft: '0.4rem' }}\r\n                  >\r\n                    <div className=\"storage-icon-container is-visible\" style={{ width: '36px', height: '36px', margin: 0 }}>\r\n                      <span className=\"material-symbols-outlined\" style={{ fontSize: '20px' }}>menu</span>\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`nav-dropdown-menu ${activeDropdown === 'mobile-menu' ? 'visible' : ''}`}\r\n                      style={{\r\n                        minWidth: '200px',\r\n                        right: '0',\r\n                        left: 'auto',\r\n                        transform: 'translateY(10px)',\r\n                        padding: '8px'\r\n                      }}\r\n                    >\r\n                      {navLinks.map((link, index) => (\r\n                        <div key={index}>\r\n                          <div\r\n                            className=\"dropdown-item\"\r\n                            style={{ padding: '8px 12px', fontSize: '0.8rem' }}\r\n                            onClick={(e) => {\r\n                              if (link.children) {\r\n                                e.stopPropagation();\r\n                                return;\r\n                              }\r\n                              if (!demoMode) handleLinkClick(link);\r\n                              setActiveDropdown(null);\r\n                            }}\r\n                          >\r\n                            {link.label}\r\n                          </div>\r\n                          {link.children && link.children.map((child, cIdx) => (\r\n                            <div\r\n                              key={`c-${cIdx}`}\r\n                              className=\"dropdown-item\"\r\n                              style={{ padding: '6px 12px 6px 24px', opacity: 0.7, fontSize: '0.75rem' }}\r\n                              onClick={() => {\r\n                                handleLinkClick(child);\r\n                                setActiveDropdown(null);\r\n                              }}\r\n                            >\r\n                              {child.label}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </nav>\r\n\r\n\r\n          </div>\r\n        </div>\r\n\r\n        {/* Integrated Storage Area (Dashboard Notifications) */}\r\n        <div className={`header-storage-area ${showNotifications && isDashboard ? 'visible' : ''}`}>\r\n          <div className=\"storage-content-wrapper\">\r\n            <div className=\"storage-header\">\r\n              <h3>{t('nav.notifications')}</h3>\r\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n\r\n                <button className=\"clear-minimal-btn\" onClick={() => setShowNotifications(false)}>{t('nav.close')}</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"saved-items-grid\" data-lenis-prevent>\r\n              <div className=\"saved-item-row\">\r\n                <div className=\"item-main\">\r\n                  <span className=\"material-symbols-outlined\">info</span>\r\n                  <div className=\"item-text\">\r\n                    <h4>{t('nav.systemMessages')}</h4>\r\n                    <p>{t('nav.noNewMessages')}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Integrated Storage Area (Normal Mode) */}\r\n        <div className={`header-storage-area ${showSaved && savedItems.length > 0 && (!isDashboard || isSellerOrHeadAdmin) ? 'visible' : ''}`}>\r\n          <div className=\"storage-content-wrapper\">\r\n            <div className=\"storage-header\">\r\n              <h3>{t('nav.savedData')}</h3>\r\n              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\r\n                <span\r\n                  className=\"material-symbols-outlined\"\r\n                  style={{ color: 'rgba(255,255,255,0.5)', fontSize: '1.5rem', cursor: 'pointer' }}\r\n                  onClick={() => {\r\n                    toggleSidebar(true);\r\n                    handleCollapse(new Event('click'));\r\n                  }}\r\n                >view_sidebar</span>\r\n\r\n                <button className=\"clear-minimal-btn\" onClick={() => {\r\n                  clearItems();\r\n                  setShowSaved(false);\r\n\r\n                }}>{t('nav.clearAll')}</button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"saved-items-grid\" data-lenis-prevent>\r\n              {savedItems.map(item => (\r\n                <div key={item.id} className=\"saved-item-row\">\r\n                  <div className=\"item-main\">\r\n                    <span className=\"material-symbols-outlined\">{item.icon}</span>\r\n                    <div className=\"item-text\">\r\n                      <h4>{item.title}</h4>\r\n                      <p>{item.description || 'System data'}</p>\r\n                    </div>\r\n                  </div>\r\n                  <button className=\"item-remove-btn\" onClick={() => removeItem(item.id)}>\r\n                    <span className=\"material-symbols-outlined\">delete</span>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Integrated Messages Area (Normal Mode) */}\r\n        <div className={`header-storage-area header-messages-area ${showMessages && sentMessages.length > 0 && (!isDashboard || isSellerOrHeadAdmin) ? 'visible' : ''}`}>\r\n          <div className=\"storage-content-wrapper\">\r\n            <div className=\"storage-header\">\r\n              <h3>{t('nav.sentMessages')}</h3>\r\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n\r\n                <button className=\"clear-minimal-btn\" onClick={() => {\r\n                  clearMessages();\r\n                  setShowMessages(false);\r\n\r\n                }}>{t('nav.clear')}</button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"saved-items-grid\" data-lenis-prevent>\r\n              {sentMessages.map(msg => (\r\n                <div key={msg.id} className=\"saved-item-row msg-row\">\r\n                  <div className=\"item-main\">\r\n                    <span className=\"material-symbols-outlined\">mail</span>\r\n                    <div className=\"item-text\">\r\n                      <h4>{msg.subject || t('nav.noSubject')}</h4>\r\n                      <p className=\"msg-preview\">{msg.message}</p>\r\n                      <span className=\"msg-date\">{new Date(msg.date).toLocaleDateString('uz-UZ')}</span>\r\n                    </div>\r\n                  </div>\r\n                  <button className=\"item-remove-btn\" onClick={() => removeMessage(msg.id)}>\r\n                    <span className=\"material-symbols-outlined\">delete</span>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Language Selection Area */}\r\n        <div className={`header-storage-area header-lang-area ${showLanguages && !isDashboard ? 'visible' : ''}`}>\r\n          <div className=\"storage-content-wrapper\" style={{ justifyContent: 'center' }}>\r\n            <div className=\"lang-options\">\r\n              <button\r\n                className={`lang-option ${i18n.language?.startsWith('uz') ? 'active' : ''}`}\r\n                onClick={() => {\r\n                  i18n.changeLanguage('uz');\r\n                }}\r\n              >\r\n                <span>ЁЯЗ║ЁЯЗ┐</span> O'zbekcha\r\n              </button>\r\n              <button\r\n                className={`lang-option ${i18n.language?.startsWith('ru') ? 'active' : ''}`}\r\n                onClick={() => {\r\n                  i18n.changeLanguage('ru');\r\n                }}\r\n              >\r\n                <span>ЁЯЗ╖ЁЯЗ║</span> ╨а╤Г╤Б╤Б╨║╨╕╨╣\r\n              </button>\r\n              <button\r\n                className={`lang-option ${i18n.language?.startsWith('en') ? 'active' : ''}`}\r\n                onClick={() => {\r\n                  i18n.changeLanguage('en');\r\n                }}\r\n              >\r\n                <span>ЁЯЗ║ЁЯЗ╕</span> English\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Integrated Search Area */}\r\n        <div className={`header-storage-area header-search-area ${showSearch && (!isDashboard || isSellerOrHeadAdmin) ? 'visible' : ''}`}>\r\n          <div className=\"storage-content-wrapper\">\r\n            <div className=\"search-input-container\">\r\n              <span className=\"material-symbols-outlined search-input-icon\">search</span>\r\n              <input\r\n                id=\"global-search-input\"\r\n                type=\"text\"\r\n                className=\"global-search-input\"\r\n                placeholder={t('nav.search.placeholder')}\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n              />\r\n              {searchQuery && (\r\n                <button className=\"clear-search-btn\" onClick={() => setSearchQuery('')}>\r\n                  <span className=\"material-symbols-outlined\">close</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"saved-items-grid search-results-grid\" data-lenis-prevent>\r\n              {searchQuery.trim() === '' ? (\r\n                <div className=\"no-results\" style={{ padding: '2rem' }}>\r\n                  <span className=\"material-symbols-outlined\" style={{ fontSize: '3rem', marginBottom: '1rem', opacity: 0.5 }}>manage_search</span>\r\n                  <p>{t('nav.search.typeToSearch')}</p>\r\n                </div>\r\n              ) : filteredSearchResults.length > 0 ? (\r\n                filteredSearchResults.map((result, index) => (\r\n                  <div\r\n                    key={result.id} // Use stable ID for better animation\r\n                    className=\"saved-item-row search-result-row\"\r\n                    style={{ animationDelay: `${index * 0.05}s` }} // Inline delay for dynamic list\r\n                    onClick={() => {\r\n                      navigate(result.path);\r\n                      setShowSearch(false);\r\n                    }}\r\n                  >\r\n                    <div className=\"item-main\">\r\n                      <span className=\"material-symbols-outlined\">{result.icon}</span>\r\n                      <div className=\"item-text\">\r\n                        <h4>\r\n                          <HighlightedText text={result.title} highlight={searchQuery} />\r\n                          <span className=\"search-category-tag\">{result.category}</span>\r\n                        </h4>\r\n                        <p>\r\n                          <HighlightedText text={result.description} highlight={searchQuery} />\r\n                        </p>\r\n                        {/* Show content snippet if query matches content */}\r\n                        {renderSearchSnippet(result.content, searchQuery)}\r\n                      </div>\r\n                    </div>\r\n                    <span className=\"material-symbols-outlined arrow-icon\">arrow_forward</span>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"no-results\">\r\n                  <p>{t('nav.search.noResults')}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Notification Area(s) */}\r\n        <div className=\"notifications-stack\">\r\n          {activeNotifications.map(notification => (\r\n            <div key={notification.id} className={`header-notification-area ${notification.isVisible ? 'visible' : ''} ${notification.isError ? 'is-error' : ''}`}>\r\n              <div className=\"notification-content\">\r\n                <span className=\"material-symbols-outlined\">{notification.icon}</span>\r\n                {notification.isError || notification.isFullMessage ? (\r\n                  <span className=\"save-title\">{notification.message || notification.title}</span>\r\n                ) : (\r\n                  <>\r\n                    <span className=\"save-title\">{notification.title}</span>\r\n                    <span className=\"save-text\"> {t('nav.saved')}</span>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n\r\n\r\n      </header>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\HelpButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\LaTeXPreview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'variant' is assigned a value but never used.","line":6,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"variant"},"fix":{"range":[205,225],"text":""},"desc":"Remove unused variable 'variant'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'latexContent' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":24,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"latexContent"},"fix":{"range":[749,773],"text":""},"desc":"Remove unused variable 'latexContent'."}]},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n  28 |       const parts = text.split('$');\n  29 |       return (\n> 30 |         <Box sx={sx}>\n     |         ^^^^^^^^^^^^^\n> 31 |           {parts.map((part, index) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 32 |             if (index % 2 === 1) {\n     тАж\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |           })}\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |         </Box>\n     | ^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  47 |       );\n  48 |     }\n  49 |","line":30,"column":9,"nodeType":null,"endLine":46,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":38,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":29},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n  52 |       const parts = text.split('$$');\n  53 |       return (\n> 54 |         <Box sx={sx}>\n     |         ^^^^^^^^^^^^^\n> 55 |           {parts.map((part, index) => {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 56 |             if (index % 2 === 1) {\n     тАж\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |           })}\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |         </Box>\n     | ^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  73 |       );\n  74 |     }\n  75 |","line":54,"column":9,"nodeType":null,"endLine":72,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":64,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":29},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n  78 |       try {\n  79 |         return (\n> 80 |           <Box sx={sx}>\n     |           ^^^^^^^^^^^^^\n> 81 |             <InlineMath math={text} />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 82 |           </Box>\n     | ^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  83 |         );\n  84 |       } catch (error) {\n  85 |         return (","line":80,"column":11,"nodeType":null,"endLine":82,"endColumn":17},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n  79 |         return (\n  80 |           <Box sx={sx}>\n> 81 |             <InlineMath math={text} />\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  82 |           </Box>\n  83 |         );\n  84 |       } catch (error) {","line":81,"column":13,"nodeType":null,"endLine":81,"endColumn":39},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":84,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":21},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n  84 |       } catch (error) {\n  85 |         return (\n> 86 |           <Typography variant=\"body2\" sx={{ color: '#64748b', fontStyle: 'italic', ...sx }}>\n     |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 87 |             {text}\n     | ^^^^^^^^^^^^^^^^^^\n> 88 |           </Typography>\n     | ^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  89 |         );\n  90 |       }\n  91 |     }","line":86,"column":11,"nodeType":null,"endLine":88,"endColumn":24},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n   93 |     // Fallback to regular text\n   94 |     return (\n>  95 |       <Typography variant=\"body2\" sx={{ color: '#64748b', fontStyle: 'italic', ...sx }}>\n      |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  96 |         {text}\n      | ^^^^^^^^^^^^^^\n>  97 |       </Typography>\n      | ^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n   98 |     );\n   99 |\n  100 |   } catch (error) {","line":95,"column":7,"nodeType":null,"endLine":97,"endColumn":20}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Box, Typography, Paper } from '@mui/material';\r\nimport { InlineMath, BlockMath } from 'react-katex';\r\nimport 'katex/dist/katex.min.css';\r\n\r\nconst LaTeXPreview = ({ text, variant = 'inline', sx = {} }) => {\r\n  if (!text || text.trim() === '') {\r\n    return null;\r\n  }\r\n\r\n  // Check if text contains LaTeX (starts and ends with $ or contains LaTeX commands)\r\n  const hasLaTeX = text.includes('$') || text.includes('\\\\') || /[{}[\\]]/.test(text);\r\n\r\n  if (!hasLaTeX) {\r\n    return (\r\n      <Typography variant=\"body2\" sx={{ color: '#64748b', fontStyle: 'italic', ...sx }}>\r\n        {text}\r\n      </Typography>\r\n    );\r\n  }\r\n\r\n  try {\r\n    // Extract LaTeX content from $ delimiters or treat whole text as LaTeX\r\n    let latexContent = text;\r\n\r\n    // Handle inline math: $...$\r\n    if (text.includes('$')) {\r\n      const parts = text.split('$');\r\n      return (\r\n        <Box sx={sx}>\r\n          {parts.map((part, index) => {\r\n            if (index % 2 === 1) {\r\n              // Odd indices are LaTeX content\r\n              try {\r\n                return (\r\n                  <InlineMath key={index} math={part} />\r\n                );\r\n              } catch (error) {\r\n                return <span key={index}>{part}</span>;\r\n              }\r\n            } else {\r\n              // Even indices are regular text\r\n              return <span key={index}>{part}</span>;\r\n            }\r\n          })}\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    // Handle block math: $$...$$ or just LaTeX commands\r\n    if (text.includes('$$')) {\r\n      const parts = text.split('$$');\r\n      return (\r\n        <Box sx={sx}>\r\n          {parts.map((part, index) => {\r\n            if (index % 2 === 1) {\r\n              // Odd indices are LaTeX content\r\n              try {\r\n                return (\r\n                  <Box key={index} sx={{ my: 1 }}>\r\n                    <BlockMath math={part} />\r\n                  </Box>\r\n                );\r\n              } catch (error) {\r\n                return <span key={index}>{part}</span>;\r\n              }\r\n            } else {\r\n              // Even indices are regular text\r\n              return <span key={index}>{part}</span>;\r\n            }\r\n          })}\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    // Treat as inline LaTeX if it contains LaTeX commands\r\n    if (text.includes('\\\\') || /[{}[\\]]/.test(text)) {\r\n      try {\r\n        return (\r\n          <Box sx={sx}>\r\n            <InlineMath math={text} />\r\n          </Box>\r\n        );\r\n      } catch (error) {\r\n        return (\r\n          <Typography variant=\"body2\" sx={{ color: '#64748b', fontStyle: 'italic', ...sx }}>\r\n            {text}\r\n          </Typography>\r\n        );\r\n      }\r\n    }\r\n\r\n    // Fallback to regular text\r\n    return (\r\n      <Typography variant=\"body2\" sx={{ color: '#64748b', fontStyle: 'italic', ...sx }}>\r\n        {text}\r\n      </Typography>\r\n    );\r\n\r\n  } catch (error) {\r\n    console.error('LaTeX rendering error:', error);\r\n    return (\r\n      <Typography variant=\"body2\" sx={{ color: '#ef4444', fontStyle: 'italic', ...sx }}>\r\n        LaTeX xatolik: {text}\r\n      </Typography>\r\n    );\r\n  }\r\n};\r\n\r\nexport default LaTeXPreview;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\Layout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\LoadingComponents.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'disabled' is defined but never used.","line":159,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":159,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"disabled"},"fix":{"range":[4710,4724],"text":""},"desc":"Remove unused variable 'disabled'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'variant' is assigned a value but never used.","line":160,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":160,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"variant"},"fix":{"range":[4724,4750],"text":""},"desc":"Remove unused variable 'variant'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'size' is assigned a value but never used.","line":162,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":162,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"size"},"fix":{"range":[4772,4792],"text":""},"desc":"Remove unused variable 'size'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'props' is defined but never used.","line":163,"column":6,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"props"},"fix":{"range":[4792,4805],"text":""},"desc":"Remove unused variable 'props'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Box, CircularProgress, LinearProgress, Typography, Skeleton } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\n\r\n// Styled components for enhanced loading visuals\r\nconst LoadingContainer = styled(Box)(({ theme, fullScreen }) => ({\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  padding: theme.spacing(2),\r\n  minHeight: fullScreen ? '100vh' : '200px',\r\n  gap: theme.spacing(2),\r\n}));\r\n\r\nconst SpinnerContainer = styled(Box)(({ theme }) => ({\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n  gap: theme.spacing(2),\r\n}));\r\n\r\n// Basic spinner component\r\nexport const LoadingSpinner = ({ \r\n  size = 40, \r\n  color = 'primary', \r\n  thickness = 4,\r\n  message = 'Yuklanmoqda...',\r\n  fullScreen = false \r\n}) => (\r\n  <LoadingContainer fullScreen={fullScreen}>\r\n    <CircularProgress \r\n      size={size} \r\n      color={color} \r\n      thickness={thickness}\r\n      sx={{ mb: message ? 1 : 0 }}\r\n    />\r\n    {message && (\r\n      <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\r\n        {message}\r\n      </Typography>\r\n    )}\r\n  </LoadingContainer>\r\n);\r\n\r\n// Linear progress component with message\r\nexport const LoadingProgress = ({ \r\n  message = 'Yuklanmoqda...', \r\n  fullScreen = false,\r\n  color = 'primary',\r\n  variant = 'indeterminate'\r\n}) => (\r\n  <LoadingContainer fullScreen={fullScreen}>\r\n    <Box sx={{ width: '100%', maxWidth: 300 }}>\r\n      <LinearProgress color={color} variant={variant} />\r\n    </Box>\r\n    {message && (\r\n      <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\r\n        {message}\r\n      </Typography>\r\n    )}\r\n  </LoadingContainer>\r\n);\r\n\r\n// Skeleton loader for cards\r\nexport const CardSkeleton = ({ count = 1, height = 120 }) => (\r\n  <Box>\r\n    {Array.from({ length: count }).map((_, index) => (\r\n      <Box key={index} sx={{ mb: 2 }}>\r\n        <Skeleton \r\n          variant=\"rectangular\" \r\n          height={height} \r\n          sx={{ borderRadius: 1, mb: 1 }}\r\n        />\r\n        <Skeleton variant=\"text\" height={20} width=\"80%\" />\r\n        <Skeleton variant=\"text\" height={20} width=\"60%\" />\r\n      </Box>\r\n    ))}\r\n  </Box>\r\n);\r\n\r\n// Skeleton loader for lists\r\nexport const ListSkeleton = ({ count = 5, showAvatar = true }) => (\r\n  <Box>\r\n    {Array.from({ length: count }).map((_, index) => (\r\n      <Box key={index} sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\r\n        {showAvatar && (\r\n          <Skeleton \r\n            variant=\"circular\" \r\n            width={40} \r\n            height={40} \r\n            sx={{ mr: 2 }}\r\n          />\r\n        )}\r\n        <Box sx={{ flex: 1 }}>\r\n          <Skeleton variant=\"text\" height={20} width=\"70%\" />\r\n          <Skeleton variant=\"text\" height={16} width=\"50%\" />\r\n        </Box>\r\n      </Box>\r\n    ))}\r\n  </Box>\r\n);\r\n\r\n// Skeleton loader for tables\r\nexport const TableSkeleton = ({ rows = 5, columns = 4 }) => (\r\n  <Box>\r\n    {/* Header skeleton */}\r\n    <Box sx={{ display: 'grid', gridTemplateColumns: `repeat(${columns}, 1fr)`, mb: 1 }}>\r\n      {Array.from({ length: columns }).map((_, index) => (\r\n        <Skeleton key={index} variant=\"text\" height={20} />\r\n      ))}\r\n    </Box>\r\n    {/* Row skeletons */}\r\n    {Array.from({ length: rows }).map((_, rowIndex) => (\r\n      <Box key={rowIndex} sx={{ display: 'grid', gridTemplateColumns: `repeat(${columns}, 1fr)`, mb: 1 }}>\r\n        {Array.from({ length: columns }).map((_, colIndex) => (\r\n          <Skeleton key={colIndex} variant=\"text\" height={16} />\r\n        ))}\r\n      </Box>\r\n    ))}\r\n  </Box>\r\n);\r\n\r\n// Dashboard skeleton for main dashboard pages\r\nexport const DashboardSkeleton = () => (\r\n  <Box>\r\n    {/* Page header */}\r\n    <Box sx={{ mb: 3 }}>\r\n      <Skeleton variant=\"text\" height={32} width=\"40%\" />\r\n      <Skeleton variant=\"text\" height={20} width=\"60%\" />\r\n    </Box>\r\n    \r\n    {/* Stats cards */}\r\n    <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: 2, mb: 3 }}>\r\n      {Array.from({ length: 4 }).map((_, index) => (\r\n        <Box key={index} sx={{ p: 2, border: '1px solid #eee', borderRadius: 1 }}>\r\n          <Skeleton variant=\"text\" height={24} width=\"60%\" />\r\n          <Skeleton variant=\"text\" height={32} width=\"40%\" />\r\n        </Box>\r\n      ))}\r\n    </Box>\r\n    \r\n    {/* Main content */}\r\n    <Box sx={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: 2 }}>\r\n      <Box>\r\n        <CardSkeleton count={2} height={150} />\r\n      </Box>\r\n      <Box>\r\n        <ListSkeleton count={6} />\r\n      </Box>\r\n    </Box>\r\n  </Box>\r\n);\r\n\r\n// Button with loading state\r\nexport const LoadingButton = ({ \r\n  loading = false, \r\n  children, \r\n  disabled,\r\n  variant = 'contained',\r\n  color = 'primary',\r\n  size = 'medium',\r\n  ...props \r\n}) => (\r\n  <Box sx={{ position: 'relative', display: 'inline-block' }}>\r\n    <Box\r\n      sx={{\r\n        opacity: loading ? 0.6 : 1,\r\n        pointerEvents: loading ? 'none' : 'auto',\r\n      }}\r\n    >\r\n      {children}\r\n    </Box>\r\n    {loading && (\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n        }}\r\n      >\r\n        <CircularProgress size={20} color={color} />\r\n      </Box>\r\n    )}\r\n  </Box>\r\n);\r\n\r\n// Page loading overlay\r\nexport const PageLoadingOverlay = ({ \r\n  isLoading, \r\n  message = 'Yuklanmoqda...',\r\n  children \r\n}) => {\r\n  if (!isLoading) return children;\r\n  \r\n  return (\r\n    <Box sx={{ position: 'relative' }}>\r\n      {children}\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000,\r\n        }}\r\n      >\r\n        <SpinnerContainer>\r\n          <CircularProgress size={50} />\r\n          <Typography variant=\"body1\" color=\"text.secondary\">\r\n            {message}\r\n          </Typography>\r\n        </SpinnerContainer>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\n// Inline loading indicator for smaller components\r\nexport const InlineLoading = ({ size = 20, color = 'inherit' }) => (\r\n  <CircularProgress size={size} color={color} sx={{ mr: 1 }} />\r\n);\r\n\r\n// Pulse loading animation for text content\r\nexport const PulseSkeleton = ({ width = '100%', height = 20 }) => (\r\n  <Skeleton\r\n    variant=\"text\"\r\n    width={width}\r\n    height={height}\r\n    animation=\"pulse\"\r\n  />\r\n);\r\n\r\n// Full screen loading component\r\nexport const FullScreenLoader = ({ message = 'Yuklanmoqda...', color = 'primary' }) => (\r\n  <Box\r\n    sx={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n      zIndex: 9999,\r\n    }}\r\n  >\r\n    <SpinnerContainer>\r\n      <CircularProgress size={60} color={color} />\r\n      <Typography variant=\"h6\" color=\"text.secondary\" sx={{ mt: 2 }}>\r\n        {message}\r\n      </Typography>\r\n    </SpinnerContainer>\r\n  </Box>\r\n);\r\n\r\nexport default {\r\n  LoadingSpinner,\r\n  LoadingProgress,\r\n  CardSkeleton,\r\n  ListSkeleton,\r\n  TableSkeleton,\r\n  DashboardSkeleton,\r\n  LoadingButton,\r\n  PageLoadingOverlay,\r\n  InlineLoading,\r\n  PulseSkeleton,\r\n  FullScreenLoader\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\MacModalCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\MathSymbols.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\MobileRestrictor.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\NotesSidebar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\NotificationCenter.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  29 |     if (currentUser) {\n  30 |       const userNotifications = getNotificationsForUser(currentUser);\n> 31 |       setNotifications(userNotifications);\n     |       ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  32 |       setUnreadCount(userNotifications.filter(n => !n.isRead).length);\n  33 |     }\n  34 |   }, [currentUser]);","line":31,"column":7,"nodeType":null,"endLine":31,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Dropdown,\r\n  Typography,\r\n  Space,\r\n  Tag,\r\n  Divider,\r\n  Empty,\r\n} from 'antd';\r\nimport {\r\n  BellOutlined,\r\n  BankOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { getNotificationsForUser, markNotificationAsRead } from '../utils/notificationService';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nconst NotificationCenter = () => {\r\n  const { currentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      const userNotifications = getNotificationsForUser(currentUser);\r\n      setNotifications(userNotifications);\r\n      setUnreadCount(userNotifications.filter(n => !n.isRead).length);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const markAsRead = (notificationId) => {\r\n    markNotificationAsRead(notificationId);\r\n    // Reload notifications\r\n    if (currentUser) {\r\n      const userNotifications = getNotificationsForUser(currentUser);\r\n      setNotifications(userNotifications);\r\n      setUnreadCount(userNotifications.filter(n => !n.isRead).length);\r\n    }\r\n  };\r\n\r\n  const handleNotificationClick = (notification) => {\r\n    markAsRead(notification.id);\r\n    // Navigate based on notification type\r\n    if (notification.type === 'lesson_reminder') {\r\n      navigate('/student/lessons');\r\n    } else if (notification.type === 'admin_registration' || notification.type === 'admin_plan_selection') {\r\n      // Navigate to head admin manage admins page\r\n      navigate('/headadmin/admins');\r\n    }\r\n  };\r\n\r\n  const notificationMenu = (\r\n    <div style={{ \r\n      width: 450, \r\n      maxHeight: 500, \r\n      overflowY: 'auto',\r\n      backgroundColor: '#ffffff',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\r\n    }}>\r\n      <div style={{ \r\n        padding: '16px', \r\n        borderBottom: '1px solid #f0f0f0',\r\n        borderRadius: '8px 8px 0 0'\r\n      }}>\r\n        <Title level={5} style={{ margin: 0, color: '#1f2937' }}>\r\n          Bildirishnomalar\r\n        </Title>\r\n      </div>\r\n\r\n      {notifications.length === 0 ? (\r\n        <div style={{ padding: '40px 20px', textAlign: 'center' }}>\r\n          <Empty \r\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\r\n            description=\"Bildirishnomalar yo'q\"\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {notifications.slice(0, 10).map((notification, index) => (\r\n            <div key={notification.id}>\r\n              <div\r\n                onClick={() => handleNotificationClick(notification)}\r\n                style={{\r\n                  padding: '12px 16px',\r\n                  backgroundColor: notification.isRead ? 'transparent' : '#f0f8ff',\r\n                  cursor: 'pointer',\r\n                  borderBottom: index < notifications.slice(0, 10).length - 1 ? '1px solid #f0f0f0' : 'none',\r\n                  transition: 'background-color 0.2s'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  if (!notification.isRead) {\r\n                    e.target.style.backgroundColor = '#e6f7ff';\r\n                  }\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.target.style.backgroundColor = notification.isRead ? 'transparent' : '#f0f8ff';\r\n                }}\r\n              >\r\n                <div style={{ width: '100%', wordWrap: 'break-word' }}>\r\n                  <div style={{ \r\n                    display: 'flex', \r\n                    alignItems: 'center', \r\n                    justifyContent: 'space-between', \r\n                    marginBottom: '4px' \r\n                  }}>\r\n                    <div style={{ \r\n                      display: 'flex', \r\n                      alignItems: 'center', \r\n                      flex: 1,\r\n                      minWidth: 0\r\n                    }}>\r\n                      {notification.type === 'admin_registration' || notification.type === 'admin_plan_selection' ? (\r\n                        <BankOutlined \r\n                          style={{ \r\n                            marginRight: '8px', \r\n                            color: '#faad14', \r\n                            fontSize: '16px' \r\n                          }} \r\n                        />\r\n                      ) : (\r\n                        <BankOutlined \r\n                          style={{ \r\n                            marginRight: '8px', \r\n                            color: '#1890ff', \r\n                            fontSize: '16px' \r\n                          }} \r\n                        />\r\n                      )}\r\n                      <Text \r\n                        strong \r\n                        style={{ \r\n                          fontSize: '14px', \r\n                          lineHeight: 1.2,\r\n                          color: '#1f2937',\r\n                          margin: 0\r\n                        }}\r\n                      >\r\n                        {notification.title}\r\n                      </Text>\r\n                    </div>\r\n                    {!notification.isRead && (\r\n                      <Tag \r\n                        color={notification.type === 'admin_registration' || notification.type === 'admin_plan_selection' ? 'orange' : 'blue'}\r\n                        size=\"small\"\r\n                        style={{ marginLeft: '8px', fontSize: '10px', height: '20px', lineHeight: '18px' }}\r\n                      >\r\n                        Yangi\r\n                      </Tag>\r\n                    )}\r\n                  </div>\r\n\r\n                  <Text \r\n                    style={{ \r\n                      fontSize: '13px', \r\n                      color: '#6b7280', \r\n                      lineHeight: 1.3,\r\n                      display: 'block',\r\n                      marginBottom: '4px'\r\n                    }}\r\n                  >\r\n                    {notification.message}\r\n                  </Text>\r\n\r\n                  <Text \r\n                    type=\"secondary\" \r\n                    style={{ fontSize: '11px' }}\r\n                  >\r\n                    {new Date(notification.createdAt).toLocaleDateString('uz-UZ')} тАв \r\n                    {notification.type === 'admin_registration' || notification.type === 'admin_plan_selection' \r\n                      ? notification.adminName \r\n                      : notification.teacherName}\r\n                  </Text>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </>\r\n      )}\r\n\r\n      {notifications.length > 10 && (\r\n        <div style={{ \r\n          padding: '12px 16px', \r\n          textAlign: 'center',\r\n          borderTop: '1px solid #f0f0f0'\r\n        }}>\r\n          <Text type=\"secondary\" style={{ fontSize: '12px' }}>\r\n            Ko'proq bildirishnomalar...\r\n          </Text>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Dropdown\r\n      overlay={notificationMenu}\r\n      trigger={['click']}\r\n      placement=\"bottomRight\"\r\n    >\r\n      <Button \r\n        type=\"text\" \r\n        icon={\r\n          <Badge count={unreadCount} size=\"small\">\r\n            <BellOutlined style={{ fontSize: '18px', color: '#ffffff' }} />\r\n          </Badge>\r\n        }\r\n        style={{ \r\n          marginRight: '8px',\r\n          height: '40px',\r\n          width: '40px',\r\n          padding: 0\r\n        }}\r\n      />\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nexport default NotificationCenter;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\NotificationTest.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\OnboardingExitGhost.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\PremiumModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\RouteLoadingIndicator.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'threshold' is assigned a value but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"threshold"},"fix":{"range":[413,433],"text":""},"desc":"Remove unused variable 'threshold'."}]},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":122,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":122,"endColumn":30},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":160,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":160,"endColumn":29},{"ruleId":"no-unused-vars","severity":2,"message":"'color' is assigned a value but never used.","line":189,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"color"},"fix":{"range":[5396,5418],"text":""},"desc":"Remove unused variable 'color'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useLoading } from '../context/LoadingContext';\r\nimport { LoadingSpinner, FullScreenLoader } from './LoadingComponents';\r\n\r\n// Route-based loading indicator that shows different loading states\r\n// based on the current route and loading context\r\nconst RouteLoadingIndicator = ({ \r\n  showFullScreen = false,\r\n  customMessages = {},\r\n  threshold = 500 // Minimum time to show loader (prevents flashing)\r\n}) => {\r\n  const location = useLocation();\r\n  const { isLoading, hasAnyLoading } = useLoading();\r\n  \r\n  // Define route-specific loading messages\r\n  const routeMessages = {\r\n    '/admin': 'Admin ma\\'lumotlari yuklanmoqda...',\r\n    '/admin/teachers': 'O\\'qituvchilar ro\\'yxati yuklanmoqda...',\r\n    '/admin/students': 'O\\'quvchilar ro\\'yxati yuklanmoqda...',\r\n    '/admin/test-stats': 'Test statistikasi yuklanmoqda...',\r\n    '/student': 'O\\'quvchi ma\\'lumotlari yuklanmoqda...',\r\n    '/student/take-test': 'Test tayyorlanmoqda...',\r\n    '/student/results': 'Natijalar yuklanmoqda...',\r\n    '/teacher': 'O\\'qituvchi ma\\'lumotlari yuklanmoqda...',\r\n    '/seller': 'Sotuvchi ma\\'lumotlari yuklanmoqda...',\r\n    '/headadmin': 'Head admin ma\\'lumotlari yuklanmoqda...',\r\n    ...customMessages\r\n  };\r\n\r\n  // Get loading message for current route\r\n  const getCurrentMessage = () => {\r\n    const path = location.pathname;\r\n    \r\n    // Find the most specific matching route\r\n    for (const [route, message] of Object.entries(routeMessages)) {\r\n      if (path.startsWith(route)) {\r\n        return message;\r\n      }\r\n    }\r\n    \r\n    // Default message\r\n    return 'Yuklanmoqda...';\r\n  };\r\n\r\n  // Check if current route should show loading\r\n  const shouldShowLoading = () => {\r\n    const path = location.pathname;\r\n    \r\n    // Routes that typically show loading\r\n    const loadingRoutes = [\r\n      '/admin',\r\n      '/student', \r\n      '/teacher',\r\n      '/seller',\r\n      '/headadmin'\r\n    ];\r\n    \r\n    return loadingRoutes.some(route => path.startsWith(route));\r\n  };\r\n\r\n  // Get loading state for current route\r\n  const getRouteLoadingState = () => {\r\n    const path = location.pathname;\r\n    \r\n    // Map routes to loading state keys\r\n    const routeLoadingMap = {\r\n      '/admin': 'admin_dashboard',\r\n      '/admin/teachers': 'teachers_list',\r\n      '/admin/students': 'students_list',\r\n      '/admin/test-stats': 'test_statistics',\r\n      '/student': 'student_dashboard',\r\n      '/student/take-test': 'test_loading',\r\n      '/student/results': 'results_loading',\r\n      '/teacher': 'teacher_dashboard',\r\n      '/seller': 'seller_dashboard',\r\n      '/headadmin': 'head_admin_dashboard'\r\n    };\r\n    \r\n    for (const [route, loadingKey] of Object.entries(routeLoadingMap)) {\r\n      if (path.startsWith(route)) {\r\n        return isLoading(loadingKey) || isLoading('route_navigation');\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  };\r\n\r\n  // Show loading if route should have loading and there's actual loading\r\n  const shouldShow = shouldShowLoading() && (getRouteLoadingState() || hasAnyLoading());\r\n\r\n  // Don't render anything if not needed\r\n  if (!shouldShow) {\r\n    return null;\r\n  }\r\n\r\n  const message = getCurrentMessage();\r\n  const loadingState = getRouteLoadingState();\r\n\r\n  // Full screen loader for major page transitions\r\n  if (showFullScreen && (loadingState || hasAnyLoading())) {\r\n    return (\r\n      <FullScreenLoader \r\n        message={message}\r\n        color=\"primary\"\r\n      />\r\n    );\r\n  }\r\n\r\n  // Inline loading indicator for content areas\r\n  return (\r\n    <LoadingSpinner \r\n      size={30}\r\n      color=\"primary\"\r\n      message={message}\r\n      fullScreen={false}\r\n    />\r\n  );\r\n};\r\n\r\n// Higher-order component to wrap routes with loading indicator\r\nexport const withRouteLoading = (WrappedComponent, options = {}) => {\r\n  return function RouteLoadingWrapper(props) {\r\n    return (\r\n      <>\r\n        <RouteLoadingIndicator {...options} />\r\n        <WrappedComponent {...props} />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\n// Component for page-level loading with skeleton\r\nexport const PageLoadingWrapper = ({ \r\n  children, \r\n  isLoading, \r\n  skeleton = null,\r\n  message = 'Yuklanmoqda...',\r\n  minHeight = '200px'\r\n}) => {\r\n  if (isLoading) {\r\n    return (\r\n      <div style={{ minHeight, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        {skeleton || (\r\n          <LoadingSpinner \r\n            size={40}\r\n            color=\"primary\"\r\n            message={message}\r\n            fullScreen={false}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return children;\r\n};\r\n\r\n// Loading state hook for route-based loading\r\nexport const useRouteLoading = () => {\r\n  const { isLoading, setLoading } = useLoading();\r\n  \r\n  const startRouteLoading = React.useCallback((route) => {\r\n    setLoading(`route_${route}`, true);\r\n  }, [setLoading]);\r\n  \r\n  const stopRouteLoading = React.useCallback((route) => {\r\n    setLoading(`route_${route}`, false);\r\n  }, [setLoading]);\r\n  \r\n  const isRouteLoading = React.useCallback((route) => {\r\n    return isLoading(`route_${route}`);\r\n  }, [isLoading]);\r\n  \r\n  return {\r\n    startRouteLoading,\r\n    stopRouteLoading,\r\n    isRouteLoading,\r\n    setLoading,\r\n    isLoading\r\n  };\r\n};\r\n\r\n// Loading progress bar for long-running operations\r\nexport const LoadingProgressBar = ({ \r\n  progress = 0, \r\n  show = false, \r\n  message = 'Yuklanmoqda...',\r\n  color = 'primary' \r\n}) => {\r\n  if (!show) return null;\r\n  \r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      zIndex: 9999,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n      borderBottom: '1px solid #e0e0e0',\r\n      padding: '8px 16px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px',\r\n      fontSize: '14px',\r\n      color: '#666'\r\n    }}>\r\n      <div style={{\r\n        width: '20px',\r\n        height: '20px',\r\n        border: '2px solid #f3f3f3',\r\n        borderTop: `2px solid var(--mui-palette-primary-main, #1976d2)`,\r\n        borderRadius: '50%',\r\n        animation: 'spin 1s linear infinite'\r\n      }} />\r\n      <span>{message}</span>\r\n      {progress > 0 && (\r\n        <div style={{\r\n          flex: 1,\r\n          height: '4px',\r\n          backgroundColor: '#f0f0f0',\r\n          borderRadius: '2px',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <div style={{\r\n            width: `${progress}%`,\r\n            height: '100%',\r\n            backgroundColor: 'var(--mui-palette-primary-main, #1976d2)',\r\n            transition: 'width 0.3s ease'\r\n          }} />\r\n        </div>\r\n      )}\r\n      {progress > 0 && <span>{Math.round(progress)}%</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Global loading overlay for critical operations\r\nexport const GlobalLoadingOverlay = ({ \r\n  isVisible, \r\n  message = 'Iltimos kuting...',\r\n  progress = null,\r\n  canCancel = false,\r\n  onCancel = null \r\n}) => {\r\n  if (!isVisible) return null;\r\n  \r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 10000,\r\n      backdropFilter: 'blur(2px)'\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        padding: '32px',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)',\r\n        textAlign: 'center',\r\n        maxWidth: '400px',\r\n        width: '90%'\r\n      }}>\r\n        <div style={{\r\n          width: '48px',\r\n          height: '48px',\r\n          border: '4px solid #f3f3f3',\r\n          borderTop: '4px solid #1976d2',\r\n          borderRadius: '50%',\r\n          animation: 'spin 1s linear infinite',\r\n          margin: '0 auto 16px'\r\n        }} />\r\n        <h3 style={{ margin: '0 0 8px 0', color: '#333' }}>\r\n          {message}\r\n        </h3>\r\n        {progress !== null && (\r\n          <div style={{\r\n            margin: '16px 0',\r\n            height: '6px',\r\n            backgroundColor: '#f0f0f0',\r\n            borderRadius: '3px',\r\n            overflow: 'hidden'\r\n          }}>\r\n            <div style={{\r\n              width: `${progress}%`,\r\n              height: '100%',\r\n              backgroundColor: '#1976d2',\r\n              transition: 'width 0.3s ease'\r\n            }} />\r\n          </div>\r\n        )}\r\n        {canCancel && onCancel && (\r\n          <button \r\n            onClick={onCancel}\r\n            style={{\r\n              marginTop: '16px',\r\n              padding: '8px 16px',\r\n              backgroundColor: '#f5f5f5',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: '14px'\r\n            }}\r\n          >\r\n            Bekor qilish\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RouteLoadingIndicator;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\ScrollToTop.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\SendLessonModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'success' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":29,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"success"},"fix":{"range":[558,565],"text":""},"desc":"Remove unused variable 'success'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Button,\r\n  Typography,\r\n  Space,\r\n  Alert,\r\n  Card,\r\n  Row,\r\n  Col,\r\n  message,\r\n  ConfigProvider,\r\n} from 'antd';\r\nimport {\r\n  SendOutlined,\r\n  BankOutlined,\r\n} from '@ant-design/icons';\r\n\r\nconst { Text, Title } = Typography;\r\nconst { TextArea } = Input;\r\nconst { Option } = Select;\r\n\r\nconst SendLessonModal = ({ open, onClose, student, testResult, teacherInfo }) => {\r\n  const [form] = Form.useForm();\r\n  const [sending, setSending] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const subjects = [\r\n    'Matematika',\r\n    'Algebra',\r\n    'Geometriya',\r\n    'SI',\r\n    'Robototexnika',\r\n    'Fizika',\r\n    'Kimyo',\r\n    'Biologiya',\r\n    'Tarix',\r\n    'Geografiya',\r\n    'O\\'zbek tili',\r\n    'Ingliz tili',\r\n    'Adabiyot',\r\n    'Informatika',\r\n  ];\r\n\r\n  const initialValues = {\r\n    subject: testResult?.test?.subject || '',\r\n    room: '',\r\n    lessonDate: '',\r\n    lessonTime: '',\r\n    topic: '',\r\n    description: '',\r\n    difficulty: 'medium',\r\n    estimatedTime: 60,\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      \r\n      if (!values.room || !values.lessonDate || !values.lessonTime || !values.topic || !values.description) {\r\n        return;\r\n      }\r\n\r\n      setSending(true);\r\n\r\n      // Simulate API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      // Create notification for student\r\n      const notification = {\r\n        id: `lesson-${Date.now()}`,\r\n        studentId: student.id,\r\n        studentName: student?.name || student?.fullName || student?.display_name || `${student?.first_name || ''} ${student?.last_name || ''}`.trim() || 'O\\'quvchi',\r\n        studentClass: student?.class_group || student?.class || student?.grade || '',\r\n        teacherId: teacherInfo?.id || 'current-teacher-id',\r\n        teacherName: teacherInfo?.fullName || teacherInfo?.name || \"O'qituvchi\",\r\n        type: 'lesson_reminder',\r\n        title: \"Qo'shimcha dars belgilandi\",\r\n        message: `${teacherInfo?.fullName || teacherInfo?.name || \"O'qituvchi\"} sizni ${values.lessonDate} kuni ${values.lessonTime}da \"${values.topic}\" mavzusida qo'shimcha darsga taklif qiladi.\\n\\nFan: ${values.subject}\\nQiyinlik: ${values.difficulty === 'easy' ? 'Oson' : values.difficulty === 'medium' ? \"O'rtacha\" : 'Qiyin'}\\nDavomiyligi: ${values.estimatedTime} daqiqa\\nHona: ${values.room}\\nTafsilot: ${values.description}`,\r\n        testId: testResult?.test?.id,\r\n        testTitle: testResult?.test?.title,\r\n        subject: values.subject,\r\n        room: values.room,\r\n        lessonDate: values.lessonDate,\r\n        lessonTime: values.lessonTime,\r\n        lessonTopic: values.topic,\r\n        lessonDescription: values.description,\r\n        difficulty: values.difficulty,\r\n        estimatedTime: values.estimatedTime,\r\n        createdAt: new Date().toISOString(),\r\n        isRead: false\r\n      };\r\n\r\n      // Save notification to database\r\n      const existingNotifications = JSON.parse(localStorage.getItem('notifications') || '[]');\r\n      existingNotifications.push(notification);\r\n      localStorage.setItem('notifications', JSON.stringify(existingNotifications));\r\n\r\n      setSuccess(true);\r\n      message.success('Dars muvaffaqiyatli yuborildi! Talaba bildirishnoma oladi.');\r\n      \r\n      setTimeout(() => {\r\n        setSuccess(false);\r\n        onClose();\r\n        form.resetFields();\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      console.error('Error sending lesson:', error);\r\n      message.error('Dars yuborishda xatolik yuz berdi');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    form.resetFields();\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <Space>\r\n          <BankOutlined style={{ color: '#000', fontSize: '20px' }} />\r\n          <Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase' }}>\r\n            Qo'shimcha dars yuborish\r\n          </Title>\r\n        </Space>\r\n      }\r\n      open={open}\r\n      onCancel={handleCancel}\r\n      width={800}\r\n      footer={[\r\n        <Button key=\"cancel\" onClick={handleCancel} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800 }}>\r\n          BEKOR QILISH\r\n        </Button>,\r\n        <Button\r\n          key=\"send\"\r\n          type=\"primary\"\r\n          icon={<SendOutlined />}\r\n          loading={sending}\r\n          onClick={handleSend}\r\n          disabled={sending}\r\n          style={{ borderRadius: 0, border: '2px solid #000', backgroundColor: '#000', color: '#fff', fontWeight: 900 }}\r\n        >\r\n          {sending ? 'YUBORILMOQDA...' : 'DARSNI YUBORISH'}\r\n        </Button>,\r\n      ]}\r\n      style={{ top: 20 }}\r\n      styles={{\r\n        content: {\r\n          border: '6px solid #000',\r\n          borderRadius: 0,\r\n          boxShadow: '15px 15px 0px #000',\r\n        },\r\n        body: { padding: '24px' }\r\n      }}\r\n    >\r\n      <div style={{ marginBottom: '16px' }}>\r\n        <Text type=\"secondary\">\r\n          {student?.name || student?.fullName || `${student?.first_name || ''} ${student?.last_name || ''}`.trim()} uchun individual dars\r\n        </Text>\r\n      </div>\r\n\r\n      {testResult && (\r\n        <Card size=\"small\" style={{ marginBottom: '16px', backgroundColor: '#f5f5f5' }}>\r\n          <Text strong>Test natijasi asosida:</Text>\r\n          <div style={{ marginTop: '8px' }}>\r\n            <Space>\r\n              <span style={{\r\n                padding: '4px 8px',\r\n                backgroundColor: testResult.score >= 70 ? '#f6ffed' : '#fff2e8',\r\n                border: `1px solid ${testResult.score >= 70 ? '#b7eb8f' : '#ffd591'}`,\r\n                borderRadius: '4px',\r\n                color: testResult.score >= 70 ? '#389e0d' : '#d46b08',\r\n                fontWeight: 'bold'\r\n              }}>\r\n                {testResult.score}%\r\n              </span>\r\n              <Text type=\"secondary\">{testResult.test?.title}</Text>\r\n            </Space>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      <ConfigProvider\r\n        theme={{\r\n          token: {\r\n            borderRadius: 0,\r\n            colorPrimary: '#000',\r\n          },\r\n        }}\r\n      >\r\n        <Form\r\n          form={form}\r\n          layout=\"vertical\"\r\n          initialValues={initialValues}\r\n        >\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"subject\"\r\n                label={<Text style={{ fontWeight: 900 }}>FAN</Text>}\r\n                rules={[{ required: true, message: 'Fan tanlang!' }]}\r\n              >\r\n                <Select placeholder=\"Fanni tanlang\" style={{ borderRadius: 0 }}>\r\n                  {subjects.map(subject => (\r\n                    <Option key={subject} value={subject}>{subject}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"room\"\r\n                label={<Text style={{ fontWeight: 900 }}>HONA</Text>}\r\n                rules={[{ required: true, message: 'Hona raqamini kiriting!' }]}\r\n              >\r\n                <Input placeholder=\"Masalan: 101, V-5\" style={{ borderRadius: 0, border: '2px solid #000' }} />\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"lessonDate\"\r\n                label={<Text style={{ fontWeight: 900 }}>DARS SANASI</Text>}\r\n                rules={[{ required: true, message: 'Dars sanasini tanlang!' }]}\r\n              >\r\n                <Input type=\"date\" style={{ borderRadius: 0, border: '2px solid #000' }} />\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"lessonTime\"\r\n                label={<Text style={{ fontWeight: 900 }}>DARS VAQTI</Text>}\r\n                rules={[{ required: true, message: 'Dars vaqtini tanlang!' }]}\r\n              >\r\n                <Input type=\"time\" style={{ borderRadius: 0, border: '2px solid #000' }} />\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"difficulty\"\r\n                label={<Text style={{ fontWeight: 900 }}>QIYINLIK DARAJASI</Text>}\r\n                rules={[{ required: true, message: 'Qiyinlik darajasini tanlang!' }]}\r\n              >\r\n                <Select style={{ borderRadius: 0 }}>\r\n                  <Option value=\"easy\">OSON</Option>\r\n                  <Option value=\"medium\">O'RTACHA</Option>\r\n                  <Option value=\"hard\">QIYIN</Option>\r\n                </Select>\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={12}>\r\n              <Form.Item\r\n                name=\"estimatedTime\"\r\n                label={<Text style={{ fontWeight: 900 }}>DARS DAVOMIYLIGI (DAQIQA)</Text>}\r\n                rules={[{ required: true, message: 'Davomiylikni kiriting!' }]}\r\n              >\r\n                <Input type=\"number\" placeholder=\"Masalan: 60\" min=\"15\" max=\"180\" style={{ borderRadius: 0, border: '2px solid #000' }} />\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={24}>\r\n              <Form.Item\r\n                name=\"topic\"\r\n                label={<Text style={{ fontWeight: 900 }}>MAVZU</Text>}\r\n                rules={[{ required: true, message: 'Mavzuni kiriting!' }]}\r\n              >\r\n                <Input placeholder=\"Masalan: Algebra asoslari, Newton qonunlari\" style={{ borderRadius: 0, border: '2px solid #000' }} />\r\n              </Form.Item>\r\n            </Col>\r\n\r\n            <Col span={24}>\r\n              <Form.Item\r\n                name=\"description\"\r\n                label={<Text style={{ fontWeight: 900 }}>TAFSILOT</Text>}\r\n                rules={[{ required: true, message: 'Tafsilotni kiriting!' }]}\r\n              >\r\n                <TextArea \r\n                  rows={4} \r\n                  placeholder=\"Darsning mazmuni, o'rganiladigan tushunchalar, amaliy mashqlar haqida batafsil yozing...\"\r\n                  style={{ borderRadius: 0, border: '2px solid #000' }}\r\n                />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n\r\n        <Alert\r\n          message={<Text style={{ fontWeight: 900 }}>MASLAHAT</Text>}\r\n          description=\"Darsni talabaning test natijalariga qarab, uning zaif tomonlariga e'tibor qaratib tuzing.\"\r\n          type=\"info\"\r\n          showIcon\r\n          style={{ marginTop: '16px', borderRadius: 0, border: '2px solid #000' }}\r\n        />\r\n      </ConfigProvider>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default SendLessonModal;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\SmoothScroll.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\StudentCompletionStats.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAttemptStats'. Either include it or remove the dependency array.","line":15,"column":6,"nodeType":"ArrayExpression","endLine":15,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser?.id, loadAttemptStats]","fix":{"range":[481,498],"text":"[currentUser?.id, loadAttemptStats]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Typography, Box, Chip } from '@mui/material';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport apiService from '../data/apiService';\r\n\r\nconst StudentCompletionStats = () => {\r\n  const { currentUser } = useAuth();\r\n  const [averageScore, setAverageScore] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (currentUser?.id) {\r\n      loadAttemptStats();\r\n    }\r\n  }, [currentUser?.id]);\r\n\r\n  const loadAttemptStats = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Load student's attempts\r\n      const attemptsResponse = await apiService.getAttempts({ student: currentUser.id });\r\n      const attempts = attemptsResponse.results || attemptsResponse;\r\n\r\n      // Calculate average score percentage\r\n      const averageScore = attempts.length > 0\r\n        ? attempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / attempts.length\r\n        : 0;\r\n\r\n      setAverageScore(Math.round(averageScore));\r\n    } catch (error) {\r\n      console.error('Error loading attempt stats:', error);\r\n      setAverageScore(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mr: 2 }}>\r\n        <Typography variant=\"body2\" color=\"inherit\">\r\n          Yuklanmoqda...\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', alignItems: 'center', mr: 2 }}>\r\n      <Chip\r\n        label={`O'rtacha ball: ${averageScore}%`}\r\n        size=\"small\"\r\n        sx={{\r\n          backgroundColor: 'rgba(255, 255, 255, 0.2)',\r\n          color: 'white',\r\n          fontWeight: 'bold',\r\n          '& .MuiChip-label': {\r\n            fontSize: '0.75rem'\r\n          }\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default StudentCompletionStats;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\TestUnbanModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\TextSelectionHandler.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\TodoList.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  35 |     if (newTaskText.trim()) {\n  36 |       const newTask = {\n> 37 |         id: Date.now().toString(),\n     |             ^^^^^^^^^^ Cannot call impure function\n  38 |         text: newTaskText.trim(),\n  39 |         completed: false,\n  40 |         priority: 'medium',","line":37,"column":13,"nodeType":null,"endLine":37,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  IconButton,\r\n  Checkbox,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Chip,\r\n  Tooltip,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Delete as DeleteIcon,\r\n  Edit as EditIcon,\r\n  CheckCircle as CheckCircleIcon,\r\n  RadioButtonUnchecked as RadioButtonUncheckedIcon,\r\n} from '@mui/icons-material';\r\n\r\nconst TodoList = ({ tasks = [], onChange }) => {\r\n  const [newTaskText, setNewTaskText] = useState('');\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\r\n  const [editingTask, setEditingTask] = useState(null);\r\n  const [editText, setEditText] = useState('');\r\n\r\n  const handleAddTask = () => {\r\n    if (newTaskText.trim()) {\r\n      const newTask = {\r\n        id: Date.now().toString(),\r\n        text: newTaskText.trim(),\r\n        completed: false,\r\n        priority: 'medium',\r\n        createdAt: new Date().toISOString(),\r\n        type: 'manual'\r\n      };\r\n      onChange([...tasks, newTask]);\r\n      setNewTaskText('');\r\n    }\r\n  };\r\n\r\n  const handleToggleTask = (taskId) => {\r\n    const updatedTasks = tasks.map(task =>\r\n      task.id === taskId ? { ...task, completed: !task.completed } : task\r\n    );\r\n    onChange(updatedTasks);\r\n  };\r\n\r\n  const handleDeleteTask = (taskId) => {\r\n    const updatedTasks = tasks.filter(task => task.id !== taskId);\r\n    onChange(updatedTasks);\r\n  };\r\n\r\n  const handleEditTask = (task) => {\r\n    setEditingTask(task);\r\n    setEditText(task.text);\r\n    setEditDialogOpen(true);\r\n  };\r\n\r\n  const handleSaveEdit = () => {\r\n    if (editText.trim() && editingTask) {\r\n      const updatedTasks = tasks.map(task =>\r\n        task.id === editingTask.id ? { ...task, text: editText.trim() } : task\r\n      );\r\n      onChange(updatedTasks);\r\n      setEditDialogOpen(false);\r\n      setEditingTask(null);\r\n      setEditText('');\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'high': return 'error';\r\n      case 'medium': return 'warning';\r\n      case 'low': return 'success';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const pendingTasks = tasks.filter(task => !task.completed);\r\n  const completedTasks = tasks.filter(task => task.completed);\r\n\r\n  return (\r\n    <Box sx={{ width: '100%', maxWidth: 600, mx: 'auto' }}>\r\n      <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold', color: '#1e293b' }}>\r\n        Vazifalar ro'yxati ({tasks.length})\r\n      </Typography>\r\n\r\n      {/* Add new task */}\r\n      <Box sx={{ display: 'flex', gap: 1, mb: 3 }}>\r\n        <TextField\r\n          fullWidth\r\n          size=\"small\"\r\n          placeholder=\"Yangi vazifa qo'shish...\"\r\n          value={newTaskText}\r\n          onChange={(e) => setNewTaskText(e.target.value)}\r\n          onKeyPress={(e) => e.key === 'Enter' && handleAddTask()}\r\n        />\r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<AddIcon />}\r\n          onClick={handleAddTask}\r\n          disabled={!newTaskText.trim()}\r\n          sx={{ minWidth: 'auto' }}\r\n        >\r\n          Qo'shish\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Pending tasks */}\r\n      {pendingTasks.length > 0 && (\r\n        <Box sx={{ mb: 3 }}>\r\n          <Typography variant=\"subtitle1\" sx={{ mb: 1, color: '#64748b' }}>\r\n            Bajarilmagan ({pendingTasks.length})\r\n          </Typography>\r\n          <List sx={{ bgcolor: 'background.paper', borderRadius: 1 }}>\r\n            {pendingTasks.map((task) => (\r\n              <ListItem key={task.id} sx={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                <Checkbox\r\n                  checked={task.completed}\r\n                  onChange={() => handleToggleTask(task.id)}\r\n                  icon={<RadioButtonUncheckedIcon />}\r\n                  checkedIcon={<CheckCircleIcon />}\r\n                />\r\n                <ListItemText\r\n                  primary={\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                      <Typography\r\n                        sx={{\r\n                          textDecoration: task.completed ? 'line-through' : 'none',\r\n                          color: task.completed ? '#64748b' : '#1e293b'\r\n                        }}\r\n                      >\r\n                        {task.text}\r\n                      </Typography>\r\n                      {task.priority && (\r\n                        <Chip\r\n                          label={task.priority}\r\n                          size=\"small\"\r\n                          color={getPriorityColor(task.priority)}\r\n                          sx={{ fontSize: '0.7rem', height: '20px' }}\r\n                        />\r\n                      )}\r\n                      {task.type === 'suggestion' && (\r\n                        <Chip\r\n                          label=\"Taklif\"\r\n                          size=\"small\"\r\n                          variant=\"outlined\"\r\n                          sx={{ fontSize: '0.7rem', height: '20px' }}\r\n                        />\r\n                      )}\r\n                    </Box>\r\n                  }\r\n                  secondary={\r\n                    task.createdAt ? new Date(task.createdAt).toLocaleDateString('uz-UZ') : null\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Tooltip title=\"Tahrirlash\">\r\n                    <IconButton edge=\"end\" onClick={() => handleEditTask(task)} size=\"small\">\r\n                      <EditIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title=\"O'chirish\">\r\n                    <IconButton edge=\"end\" onClick={() => handleDeleteTask(task.id)} size=\"small\">\r\n                      <DeleteIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Box>\r\n      )}\r\n\r\n      {/* Completed tasks */}\r\n      {completedTasks.length > 0 && (\r\n        <Box>\r\n          <Typography variant=\"subtitle1\" sx={{ mb: 1, color: '#64748b' }}>\r\n            Bajarilgan ({completedTasks.length})\r\n          </Typography>\r\n          <List sx={{ bgcolor: 'background.paper', borderRadius: 1 }}>\r\n            {completedTasks.map((task) => (\r\n              <ListItem key={task.id} sx={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                <Checkbox\r\n                  checked={task.completed}\r\n                  onChange={() => handleToggleTask(task.id)}\r\n                  icon={<RadioButtonUncheckedIcon />}\r\n                  checkedIcon={<CheckCircleIcon />}\r\n                />\r\n                <ListItemText\r\n                  primary={\r\n                    <Typography\r\n                      sx={{\r\n                        textDecoration: 'line-through',\r\n                        color: '#64748b'\r\n                      }}\r\n                    >\r\n                      {task.text}\r\n                    </Typography>\r\n                  }\r\n                  secondary={\r\n                    task.createdAt ? new Date(task.createdAt).toLocaleDateString('uz-UZ') : null\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Tooltip title=\"O'chirish\">\r\n                    <IconButton edge=\"end\" onClick={() => handleDeleteTask(task.id)} size=\"small\">\r\n                      <DeleteIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Box>\r\n      )}\r\n\r\n      {tasks.length === 0 && (\r\n        <Box sx={{ textAlign: 'center', py: 4, color: '#64748b' }}>\r\n          <Typography>Hozircha vazifalar yo'q</Typography>\r\n          <Typography variant=\"body2\">Yuqoridagi maydonga vazifa qo'shing</Typography>\r\n        </Box>\r\n      )}\r\n\r\n      {/* Edit Dialog */}\r\n      <Dialog open={editDialogOpen} onClose={() => setEditDialogOpen(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>Vazifani tahrirlash</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            fullWidth\r\n            multiline\r\n            rows={3}\r\n            value={editText}\r\n            onChange={(e) => setEditText(e.target.value)}\r\n            sx={{ mt: 1 }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setEditDialogOpen(false)}>Bekor qilish</Button>\r\n          <Button onClick={handleSaveEdit} variant=\"contained\" disabled={!editText.trim()}>\r\n            Saqlash\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default TodoList;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\components\\UnbanModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":59,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  Modal,\r\n  Input,\r\n  Button,\r\n  Typography,\r\n  Space,\r\n  Alert,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  LockOutlined,\r\n  KeyOutlined,\r\n  LogoutOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nconst UnbanModal = ({ open, onClose }) => {\r\n  const [code, setCode] = useState(['', '', '', '']);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const { unbanWithCode, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const handleCodeChange = (e, index) => {\r\n    const value = e.target.value.replace(/[^0-9]/g, '');\r\n    if (value.length <= 1) {\r\n      const newCode = [...code];\r\n      newCode[index] = value;\r\n      setCode(newCode);\r\n      if (value && index < 3) {\r\n        const nextInput = document.querySelector(`input[data-index=\"${index + 1}\"]`);\r\n        if (nextInput) setTimeout(() => nextInput.focus(), 10);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e, index) => {\r\n    if (e.key === 'Backspace' && !code[index] && index > 0) {\r\n      const prevInput = document.querySelector(`input[data-index=\"${index - 1}\"]`);\r\n      if (prevInput) setTimeout(() => prevInput.focus(), 10);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const fullCode = code.join('');\r\n    if (fullCode.length !== 4) {\r\n      setError('Iltimos, to\\'liq 4 ta raqamli kodni kiriting');\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    setError('');\r\n    try {\r\n      await unbanWithCode(fullCode);\r\n      onClose();\r\n    } catch (error) {\r\n      setError('Noto\\'g\\'ri unban kodi. Iltimos, qayta urinib ko\\'ring.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    onClose();\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      closable={false}\r\n      footer={null}\r\n      width={500}\r\n      styles={{\r\n        content: {\r\n          border: '6px solid #000',\r\n          borderRadius: 0,\r\n          boxShadow: '15px 15px 0px #000',\r\n          padding: 0\r\n        }\r\n      }}\r\n    >\r\n      <div style={{ backgroundColor: '#fff', textAlign: 'center' }}>\r\n        <div style={{ backgroundColor: '#000', color: '#fff', padding: '40px 20px' }}>\r\n          <LockOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n          <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900, textTransform: 'uppercase', letterSpacing: '0.1em' }}>Profil Bloklangan</Title>\r\n        </div>\r\n\r\n        <div style={{ padding: '40px' }}>\r\n          <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '12px' }}>\r\n              <KeyOutlined style={{ fontSize: '24px' }} />\r\n              <Text style={{ fontWeight: 900, fontSize: '18px', textTransform: 'uppercase' }}>Unban Kodi</Text>\r\n            </div>\r\n            \r\n            <Text style={{ fontWeight: 600, color: '#666' }}>\r\n              Profilingizni ochish uchun 4 ta raqamli maxsus kodni kiriting\r\n            </Text>\r\n\r\n            <Divider style={{ borderTop: '4px solid #000' }} />\r\n\r\n            {error && <Alert message={error} type=\"error\" showIcon style={{ border: '2px solid #000', fontWeight: 800, borderRadius: 0 }} />}\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'center', gap: '16px', margin: '20px 0' }}>\r\n              {[0, 1, 2, 3].map((index) => (\r\n                <Input\r\n                  key={index}\r\n                  data-index={index}\r\n                  value={code[index]}\r\n                  onChange={(e) => handleCodeChange(e, index)}\r\n                  onKeyDown={(e) => handleKeyDown(e, index)}\r\n                  style={{\r\n                    width: '60px',\r\n                    height: '80px',\r\n                    textAlign: 'center',\r\n                    fontSize: '32px',\r\n                    fontWeight: 900,\r\n                    border: '4px solid #000',\r\n                    borderRadius: 0,\r\n                    backgroundColor: '#fafafa'\r\n                  }}\r\n                  maxLength={1}\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              block\r\n              loading={isLoading}\r\n              onClick={handleSubmit}\r\n              disabled={code.some(digit => !digit)}\r\n              style={{\r\n                height: '60px',\r\n                backgroundColor: '#000',\r\n                color: '#fff',\r\n                fontWeight: 900,\r\n                fontSize: '18px',\r\n                borderRadius: 0,\r\n                border: '4px solid #000'\r\n              }}\r\n            >\r\n              PROFILNI OCHISH\r\n            </Button>\r\n\r\n            <div style={{ margin: '16px 0', fontWeight: 900, color: '#999' }}>YOKI</div>\r\n\r\n            <Button\r\n              size=\"large\"\r\n              block\r\n              icon={<LogoutOutlined />}\r\n              onClick={handleLogout}\r\n              style={{\r\n                height: '60px',\r\n                fontWeight: 800,\r\n                borderRadius: 0,\r\n                border: '3px solid #000'\r\n              }}\r\n            >\r\n              TIZIMDAN CHIQISH\r\n            </Button>\r\n          </Space>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default UnbanModal;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\ActiveTestContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":6,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":6,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'refreshToken' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":24,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"refreshToken"},"fix":{"range":[779,837],"text":""},"desc":"Remove unused variable 'refreshToken'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'validationError' is defined but never used.","line":56,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":35}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport apiService from '../data/apiService';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Check for stored user on app load\r\n  useEffect(() => {\r\n    const checkStoredUser = async () => {\r\n      try {\r\n        const storedUser = localStorage.getItem('currentUser');\r\n        const accessToken = localStorage.getItem('accessToken');\r\n        const refreshToken = localStorage.getItem('refreshToken');\r\n        \r\n        if (storedUser && accessToken) {\r\n          const parsedUser = JSON.parse(storedUser);\r\n          apiService.setToken(accessToken);\r\n\r\n          // Enhanced user validation with device fingerprinting\r\n          try {\r\n            // Check if user is banned\r\n            if (parsedUser.is_banned) {\r\n              console.log('Stored user is banned, clearing data');\r\n              localStorage.removeItem('currentUser');\r\n              localStorage.removeItem('accessToken');\r\n              localStorage.removeItem('refreshToken');\r\n              setCurrentUser(null);\r\n            } else {\r\n              // Add device info for better caching\r\n              const deviceInfo = {\r\n                userAgent: navigator.userAgent,\r\n                platform: navigator.platform,\r\n                language: navigator.language,\r\n                timestamp: Date.now()\r\n              };\r\n              \r\n              // Store device info for this user\r\n              const userDeviceKey = `userDevice_${parsedUser.id}`;\r\n              localStorage.setItem(userDeviceKey, JSON.stringify(deviceInfo));\r\n              \r\n              console.log('Restored user from localStorage:', parsedUser?.name);\r\n              console.log('User data cached for this device');\r\n              setCurrentUser(parsedUser);\r\n            }\r\n          } catch (validationError) {\r\n            console.log('User validation failed, clearing stored data');\r\n            localStorage.removeItem('currentUser');\r\n            localStorage.removeItem('accessToken');\r\n            localStorage.removeItem('refreshToken');\r\n            setCurrentUser(null);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error parsing stored user:', error);\r\n        localStorage.removeItem('currentUser');\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('refreshToken');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkStoredUser();\r\n  }, []);\r\n\r\n  const login = async (email, password) => {\r\n    console.log('Login attempt:', email, password);\r\n\r\n    try {\r\n      const user = await apiService.login(email, password);\r\n\r\n      // Check if user is banned\r\n      if (user.is_banned) {\r\n        console.log('User is banned, login blocked');\r\n        // Don't set currentUser for banned users\r\n        // The LoginPage will handle showing the UnbanModal\r\n        return user; // Still return user so LoginPage can check ban status\r\n      }\r\n\r\n      setCurrentUser(user);\r\n      localStorage.setItem('currentUser', JSON.stringify(user));\r\n      console.log('Login successful for user:', user.name);\r\n      return user;\r\n    } catch (error) {\r\n      console.error('Login failed:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    apiService.logout();\r\n    setCurrentUser(null);\r\n  };\r\n\r\n  // Check if user data is cached for current device\r\n  const isUserCached = (email) => {\r\n    try {\r\n      const storedUser = localStorage.getItem('currentUser');\r\n      const accessToken = localStorage.getItem('accessToken');\r\n      \r\n      if (storedUser && accessToken) {\r\n        const parsedUser = JSON.parse(storedUser);\r\n        return parsedUser.email === email && !parsedUser.is_banned;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Error checking cached user:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Get cached user data\r\n  const getCachedUser = () => {\r\n    try {\r\n      const storedUser = localStorage.getItem('currentUser');\r\n      if (storedUser) {\r\n        return JSON.parse(storedUser);\r\n      }\r\n      return null;\r\n    } catch (error) {\r\n      console.error('Error getting cached user:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const register = async (userData) => {\r\n    try {\r\n      // Prepare data for API\r\n      const apiData = {\r\n        username: userData.email, // Django uses username, we'll use email\r\n        email: userData.email,\r\n        password: userData.password,\r\n        name: `${userData.first_name} ${userData.last_name}`,\r\n        first_name: userData.first_name,\r\n        last_name: userData.last_name,\r\n        role: userData.role,\r\n      };\r\n\r\n      // Add organization for admin registration\r\n      if (userData.role === 'admin' && userData.organization) {\r\n        apiData.organization = userData.organization;\r\n      }\r\n\r\n      // Add student-specific fields\r\n      if (userData.role === 'student') {\r\n        apiData.grade = userData.grade;\r\n        apiData.direction = userData.direction;\r\n      }\r\n\r\n      const savedUser = await apiService.register(apiData);\r\n\r\n      // For admin registration, don't auto-login - they need to choose a plan first\r\n      if (userData.role === 'admin') {\r\n        return savedUser; // Return user data without setting current user\r\n      }\r\n\r\n      // Update state for other roles\r\n      setCurrentUser(savedUser);\r\n      localStorage.setItem('currentUser', JSON.stringify(savedUser));\r\n      return savedUser;\r\n    } catch (error) {\r\n      console.error('Registration failed:', error);\r\n      throw new Error('Ro\\'yxatdan o\\'tishda xatolik yuz berdi');\r\n    }\r\n  };\r\n\r\n  const updateProfile = async (updates) => {\r\n    if (!currentUser) return;\r\n\r\n    try {\r\n      const updatedUser = await apiService.updateUser(currentUser.id, updates);\r\n      setCurrentUser(updatedUser);\r\n      localStorage.setItem('currentUser', JSON.stringify(updatedUser));\r\n    } catch (error) {\r\n      console.error('Profile update failed:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const setCurrentUserData = (userData) => {\r\n    setCurrentUser(userData);\r\n    localStorage.setItem('currentUser', JSON.stringify(userData));\r\n  };\r\n\r\n  const unbanWithCode = async (code) => {\r\n    try {\r\n      const updatedUser = await apiService.unbanWithCode(code);\r\n      setCurrentUser(updatedUser);\r\n      localStorage.setItem('currentUser', JSON.stringify(updatedUser));\r\n      return updatedUser;\r\n    } catch (error) {\r\n      console.error('Unban failed:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const banCurrentUser = async (reason) => {\r\n    try {\r\n      const updatedUser = await apiService.banCurrentUser(reason);\r\n      setCurrentUser(updatedUser);\r\n      localStorage.setItem('currentUser', JSON.stringify(updatedUser));\r\n      return updatedUser;\r\n    } catch (error) {\r\n      console.error('Ban failed:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    currentUser,\r\n    isLoading,\r\n    login,\r\n    logout,\r\n    register,\r\n    updateProfile,\r\n    setCurrentUserData,\r\n    unbanWithCode,\r\n    banCurrentUser,\r\n    isUserCached,\r\n    getCachedUser,\r\n    isAuthenticated: !!currentUser,\r\n    isHeadAdmin: currentUser?.role === 'head_admin',\r\n    isAdmin: currentUser?.role === 'admin',\r\n    isTeacher: currentUser?.role === 'teacher',\r\n    isStudent: currentUser?.role === 'student',\r\n    isBanned: currentUser?.is_banned || false\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\LoadingContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useCallback } from 'react';\r\n\r\nconst LoadingContext = createContext();\r\n\r\nexport const useLoading = () => {\r\n  const context = useContext(LoadingContext);\r\n  if (!context) {\r\n    throw new Error('useLoading must be used within a LoadingProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const LoadingProvider = ({ children }) => {\r\n  const [loadingStates, setLoadingStates] = useState({});\r\n  const [globalLoading, setGlobalLoading] = useState(false);\r\n\r\n  // Set loading state for a specific key\r\n  const setLoading = useCallback((key, isLoading) => {\r\n    setLoadingStates(prev => ({\r\n      ...prev,\r\n      [key]: isLoading\r\n    }));\r\n  }, []);\r\n\r\n  // Set multiple loading states at once\r\n  const setMultipleLoading = useCallback((states) => {\r\n    setLoadingStates(prev => ({\r\n      ...prev,\r\n      ...states\r\n    }));\r\n  }, []);\r\n\r\n  // Get loading state for a specific key\r\n  const isLoading = useCallback((key) => {\r\n    return loadingStates[key] || false;\r\n  }, [loadingStates]);\r\n\r\n  // Check if any loading is happening\r\n  const hasAnyLoading = useCallback(() => {\r\n    return Object.values(loadingStates).some(Boolean);\r\n  }, [loadingStates]);\r\n\r\n  // Global loading controls\r\n  const setGlobalLoadingState = useCallback((isLoading) => {\r\n    setGlobalLoading(isLoading);\r\n  }, []);\r\n\r\n  // Clear all loading states\r\n  const clearLoadingStates = useCallback(() => {\r\n    setLoadingStates({});\r\n    setGlobalLoading(false);\r\n  }, []);\r\n\r\n  // Get specific loading states for common operations\r\n  const getOperationLoading = useCallback((operation) => {\r\n    return isLoading(`operation_${operation}`);\r\n  }, [isLoading]);\r\n\r\n  // Set loading for specific operations\r\n  const setOperationLoading = useCallback((operation, isLoading) => {\r\n    setLoading(`operation_${operation}`, isLoading);\r\n  }, [setLoading]);\r\n\r\n  const value = {\r\n    // State\r\n    loadingStates,\r\n    globalLoading,\r\n    \r\n    // Single loading operations\r\n    setLoading,\r\n    isLoading,\r\n    hasAnyLoading,\r\n    \r\n    // Multiple loading operations\r\n    setMultipleLoading,\r\n    \r\n    // Global loading\r\n    setGlobalLoading: setGlobalLoadingState,\r\n    \r\n    // Clear operations\r\n    clearLoadingStates,\r\n    \r\n    // Operation-specific helpers\r\n    getOperationLoading,\r\n    setOperationLoading,\r\n    \r\n    // Predefined operation keys\r\n    operations: {\r\n      AUTH: 'auth',\r\n      USER_DATA: 'user_data',\r\n      TESTS: 'tests',\r\n      QUESTIONS: 'questions',\r\n      SESSIONS: 'sessions',\r\n      ATTEMPTS: 'attempts',\r\n      USERS: 'users',\r\n      STATISTICS: 'statistics',\r\n      PREMIUM: 'premium',\r\n      PRICING: 'pricing',\r\n      GIFTS: 'gifts',\r\n      CONTACT: 'contact'\r\n    }\r\n  };\r\n\r\n  return (\r\n    <LoadingContext.Provider value={value}>\r\n      {children}\r\n    </LoadingContext.Provider>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\NewsContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":77,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":77,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport apiService from '../data/apiService';\r\n\r\nconst NewsContext = createContext();\r\n\r\nexport const NewsProvider = ({ children }) => {\r\n  const [news, setNews] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchNews = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Use public list for general viewing, or admin list if logged in?\r\n      // For now, let's use public list as it's accessible to everyone\r\n      const data = await apiService.getPublicNews();\r\n      setNews(data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch news', err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchNews();\r\n  }, []);\r\n\r\n  const addNews = async (newsItem) => {\r\n    try {\r\n      // Create FormData if media is involved (though frontend might handle it)\r\n      // If newsItem is plain object, convert to FormData locally if needed or let apiService handle it\r\n      // For simplicity here, we assume newsItem is prepared or we handle simple JSON if no file\r\n      \r\n      let payload = newsItem;\r\n      // Note: ManageNews.jsx creates an object with base64 for preview, but backend expects File object usually.\r\n      // We need to ensure ManageNews sends FormData if it has a file.\r\n      \r\n      const response = await apiService.createNews(payload);\r\n      setNews(prev => [response, ...prev]);\r\n      return response;\r\n    } catch (err) {\r\n      console.error('Failed to add news', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const deleteNews = async (id) => {\r\n    try {\r\n      await apiService.deleteNews(id);\r\n      setNews(prev => prev.filter(item => item.id !== id));\r\n    } catch (err) {\r\n       console.error('Failed to delete news', err);\r\n       throw err;\r\n    }\r\n  };\r\n\r\n  const updateNews = async (id, updatedData) => {\r\n    try {\r\n      const response = await apiService.updateNews(id, updatedData);\r\n      setNews(prev => prev.map(item => item.id === id ? response : item));\r\n      return response;\r\n    } catch (err) {\r\n      console.error('Failed to update news', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <NewsContext.Provider value={{ news, loading, error, addNews, deleteNews, updateNews, refreshNews: fetchNews }}>\r\n      {children}\r\n    </NewsContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useNews = () => {\r\n  const context = useContext(NewsContext);\r\n  if (!context) {\r\n    throw new Error('useNews must be used within a NewsProvider');\r\n  }\r\n  return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\SavedItemsContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":75,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":75,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState } from 'react';\r\n\r\nconst SavedItemsContext = createContext();\r\n\r\nexport const SavedItemsProvider = ({ children }) => {\r\n  const [savedItems, setSavedItems] = React.useState(() => {\r\n    // Initial state from localStorage\r\n    const saved = localStorage.getItem('examify_saved_items');\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n\r\n  // Sync with localStorage on change\r\n  React.useEffect(() => {\r\n    localStorage.setItem('examify_saved_items', JSON.stringify(savedItems));\r\n  }, [savedItems]);\r\n\r\n  const saveItem = (item) => {\r\n    setSavedItems(prev => {\r\n      if (prev.find(i => i.id === item.id)) {\r\n        return prev.map(i => i.id === item.id ? { ...i, ...item, date: new Date().toISOString() } : i);\r\n      }\r\n      return [{ ...item, id: item.id || Date.now(), date: new Date().toISOString() }, ...prev];\r\n    });\r\n  };\r\n\r\n  const addNote = () => {\r\n    const newNote = {\r\n      id: Date.now(),\r\n      title: '',\r\n      description: '',\r\n      icon: 'description',\r\n      date: new Date().toISOString(),\r\n      isNote: true\r\n    };\r\n    setSavedItems(prev => [newNote, ...prev]);\r\n    return newNote.id;\r\n  };\r\n\r\n  const updateNote = (id, updates) => {\r\n    setSavedItems(prev => prev.map(item =>\r\n      item.id === id ? { ...item, ...updates, date: new Date().toISOString() } : item\r\n    ));\r\n  };\r\n\r\n  const removeItem = (id) => {\r\n    setSavedItems(prev => prev.filter(item => item.id !== id));\r\n  };\r\n\r\n  const clearItems = () => {\r\n    setSavedItems([]);\r\n  };\r\n\r\n  const toggleSidebar = (state) => {\r\n    setIsSidebarOpen(prev => typeof state === 'boolean' ? state : !prev);\r\n  };\r\n\r\n  return (\r\n    <SavedItemsContext.Provider value={{\r\n      savedItems,\r\n      saveItem,\r\n      removeItem,\r\n      clearItems,\r\n      isSidebarOpen,\r\n      toggleSidebar,\r\n      addNote,\r\n      updateNote\r\n    }}>\r\n      {children}\r\n    </SavedItemsContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSavedItems = () => {\r\n  const context = useContext(SavedItemsContext);\r\n  if (!context) {\r\n    throw new Error('useSavedItems must be used within a SavedItemsProvider');\r\n  }\r\n  return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\SentMessagesContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst SentMessagesContext = createContext();\r\n\r\nexport const SentMessagesProvider = ({ children }) => {\r\n  const [sentMessages, setSentMessages] = useState(() => {\r\n    // Initial state from localStorage\r\n    const saved = localStorage.getItem('examify_sent_messages');\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n\r\n  // Sync with localStorage on change\r\n  useEffect(() => {\r\n    localStorage.setItem('examify_sent_messages', JSON.stringify(sentMessages));\r\n  }, [sentMessages]);\r\n\r\n  const addMessage = (message) => {\r\n    // message: { id, name, subject, message, date }\r\n    setSentMessages(prev => [message, ...prev]);\r\n  };\r\n\r\n  const removeMessage = (id) => {\r\n    setSentMessages(prev => prev.filter(m => m.id !== id));\r\n  };\r\n\r\n  const clearMessages = () => {\r\n    setSentMessages([]);\r\n  };\r\n\r\n  return (\r\n    <SentMessagesContext.Provider value={{ sentMessages, addMessage, removeMessage, clearMessages }}>\r\n      {children}\r\n    </SentMessagesContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSentMessages = () => {\r\n  const context = useContext(SentMessagesContext);\r\n  if (!context) {\r\n    throw new Error('useSentMessages must be used within a SentMessagesProvider');\r\n  }\r\n  return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\ServerTestContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport apiService from '../data/apiService';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst ServerTestContext = createContext();\r\n\r\nexport const useServerTest = () => {\r\n  const context = useContext(ServerTestContext);\r\n  if (!context) {\r\n    throw new Error('useServerTest must be used within a ServerTestProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ServerTestProvider = ({ children }) => {\r\n  const { currentUser } = useAuth();\r\n  const [currentSession, setCurrentSession] = useState(null);\r\n  const [timeRemaining, setTimeRemaining] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [sessionStarted, setSessionStarted] = useState(false);\r\n\r\n  const submitTest = useCallback(async () => {\r\n    if (!currentSession) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await apiService.completeSession(currentSession.session_id);\r\n\r\n      // Clear session state\r\n      setCurrentSession(null);\r\n      setTimeRemaining(0);\r\n      setSessionStarted(false);\r\n      setIsLoading(false);\r\n\r\n      return result;\r\n    } catch (err) {\r\n      if (err.response?.status === 410) {\r\n        setError('Test session has expired');\r\n        setCurrentSession(null);\r\n        setSessionStarted(false);\r\n      } else if (err.response?.status === 409 && err.response?.data?.code === 'DUPLICATE_ATTEMPT') {\r\n        setError('Test has already been completed');\r\n        setCurrentSession(null);\r\n        setSessionStarted(false);\r\n      } else {\r\n        setError(err.response?.data?.error || 'Failed to submit test');\r\n      }\r\n      setIsLoading(false);\r\n      throw err;\r\n    }\r\n  }, [currentSession]);\r\n\r\n  const handleSessionExpired = useCallback(async () => {\r\n    if (!currentSession) return;\r\n\r\n    try {\r\n      // Auto-submit the test when time expires\r\n      const result = await submitTest();\r\n      console.log('Test auto-submitted due to time expiry:', result);\r\n    } catch (err) {\r\n      console.error('Failed to auto-submit expired test:', err);\r\n      // Even if auto-submit fails, clear the session\r\n      setCurrentSession(null);\r\n      setTimeRemaining(0);\r\n      setSessionStarted(false);\r\n    }\r\n  }, [currentSession, submitTest]);\r\n\r\n  // Timer effect\r\n  useEffect(() => {\r\n    let timer;\r\n\r\n    if (currentSession && sessionStarted && timeRemaining > 0) {\r\n      timer = setTimeout(() => {\r\n        const newTimeRemaining = Math.max(0, timeRemaining - 1);\r\n        setTimeRemaining(newTimeRemaining);\r\n\r\n        // Auto-expire session when time runs out\r\n        if (newTimeRemaining === 0) {\r\n          handleSessionExpired();\r\n        }\r\n      }, 1000);\r\n    }\r\n\r\n    return () => {\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n    };\r\n  }, [currentSession, sessionStarted, timeRemaining, handleSessionExpired]);\r\n\r\n  const startTestSession = useCallback(async (testId) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const sessionData = await apiService.startSession(testId);\r\n\r\n      setCurrentSession(sessionData);\r\n      setTimeRemaining(sessionData.time_remaining);\r\n      setSessionStarted(true);\r\n      setIsLoading(false);\r\n\r\n      return sessionData;\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Failed to start test session');\r\n      setIsLoading(false);\r\n      throw err;\r\n    }\r\n  }, []);\r\n\r\n  const continueTestSession = useCallback(async (sessionId) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const sessionData = await apiService.getSession(sessionId);\r\n\r\n      setCurrentSession(sessionData);\r\n      setTimeRemaining(sessionData.time_remaining);\r\n      setSessionStarted(true);\r\n      setIsLoading(false);\r\n\r\n      return sessionData;\r\n    } catch (err) {\r\n      if (err.response?.status === 410) {\r\n        // Session expired\r\n        setError('Test session has expired');\r\n        setCurrentSession(null);\r\n        setSessionStarted(false);\r\n      } else if (err.response?.status === 400) {\r\n        setError(err.response?.data?.error || 'Test already completed');\r\n        setCurrentSession(null);\r\n        setSessionStarted(false);\r\n      } else {\r\n        setError(err.response?.data?.error || 'Failed to continue test session');\r\n      }\r\n      setIsLoading(false);\r\n      throw err;\r\n    }\r\n  }, []);\r\n\r\n  const updateAnswers = useCallback(async (answers) => {\r\n    if (!currentSession) return;\r\n\r\n    try {\r\n      await apiService.updateSessionAnswers(currentSession.session_id, answers);\r\n    } catch (err) {\r\n      console.error('Failed to update answers:', err);\r\n      // Don't throw error for answer updates to avoid disrupting test flow\r\n    }\r\n  }, [currentSession]);\r\n\r\n  const checkActiveSession = useCallback(async (testId) => {\r\n    if (!currentUser) return null;\r\n\r\n    try {\r\n      const sessions = await apiService.get(`/sessions/?student=${currentUser.id}&test=${testId}&active_only=true`);\r\n      \r\n      if (sessions && sessions.length > 0) {\r\n        const activeSession = sessions[0];\r\n        setCurrentSession(activeSession);\r\n        setTimeRemaining(activeSession.time_remaining);\r\n        setSessionStarted(true);\r\n        return activeSession;\r\n      }\r\n      \r\n      return null;\r\n    } catch (err) {\r\n      console.error('Failed to check active session:', err);\r\n      return null;\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const formatTime = useCallback((seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  }, []);\r\n\r\n  const clearSession = useCallback(() => {\r\n    setCurrentSession(null);\r\n    setTimeRemaining(0);\r\n    setSessionStarted(false);\r\n    setError(null);\r\n  }, []);\r\n\r\n  const value = {\r\n    // State\r\n    currentSession,\r\n    timeRemaining,\r\n    isLoading,\r\n    error,\r\n    sessionStarted,\r\n\r\n    // Actions\r\n    startTestSession,\r\n    continueTestSession,\r\n    updateAnswers,\r\n    submitTest,\r\n    checkActiveSession,\r\n    clearSession,\r\n    formatTime,\r\n\r\n    // Computed\r\n    isSessionActive: currentSession?.is_active || false,\r\n    hasTimeRemaining: timeRemaining > 0,\r\n  };\r\n\r\n  return (\r\n    <ServerTestContext.Provider value={value}>\r\n      {children}\r\n    </ServerTestContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ServerTestProvider;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\SettingsContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport apiService from '../data/apiService';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst SettingsContext = createContext();\r\n\r\nexport const useSettings = () => {\r\n  const context = useContext(SettingsContext);\r\n  if (!context) {\r\n    throw new Error('useSettings must be used within a SettingsProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const SettingsProvider = ({ children }) => {\r\n  const { isAuthenticated, currentUser } = useAuth();\r\n  const [settings, setSettings] = useState({\r\n    header: {\r\n      messages: true,\r\n      storage: true,\r\n      search: true,\r\n      language: true\r\n    },\r\n    welcome: {\r\n      steps: [true, true, true, true, true, true, true, true, true]\r\n    },\r\n    features: {\r\n      textSelection: true,\r\n      homeSaveButton: true,\r\n      flyerAnimation: true\r\n    }\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Load settings from backend\r\n  useEffect(() => {\r\n    const fetchSettings = async () => {\r\n      try {\r\n        const data = await apiService.getSiteSettings();\r\n        // Map backend model to frontend context structure\r\n        setSettings({\r\n          header: {\r\n            messages: data.header_messages,\r\n            storage: data.header_storage,\r\n            search: data.header_search,\r\n            language: data.header_language\r\n          },\r\n          welcome: {\r\n            steps: data.welcome_steps || [true, true, true, true, true, true, true, true, true]\r\n          },\r\n          features: {\r\n            textSelection: data.feature_text_selection,\r\n            homeSaveButton: data.feature_home_save_button,\r\n            flyerAnimation: data.feature_flyer_animation\r\n          }\r\n        });\r\n      } catch (e) {\r\n        console.error('Failed to fetch settings from backend', e);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const updateBackend = async (data) => {\r\n    if (!isAuthenticated || currentUser?.role !== 'head_admin') return;\r\n    try {\r\n      await apiService.updateSiteSettings(data);\r\n    } catch (e) {\r\n      console.error('Failed to update settings in backend', e);\r\n    }\r\n  };\r\n\r\n  const updateHeaderSetting = (key, value) => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      header: {\r\n        ...prev.header,\r\n        [key]: value\r\n      }\r\n    }));\r\n    updateBackend({ [`header_${key}`]: value });\r\n  };\r\n\r\n  const updateFeatureSetting = (key, value) => {\r\n    // Frontend key is camelCase, backend field is snake_case with feature_ prefix\r\n    const backendKey = `feature_${key.replace(/([A-Z])/g, \"_$1\").toLowerCase()}`;\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      features: {\r\n        ...prev.features,\r\n        [key]: value\r\n      }\r\n    }));\r\n    updateBackend({ [backendKey]: value });\r\n  };\r\n\r\n  const updateWelcomeStep = (index, value) => {\r\n    setSettings(prev => {\r\n      const newSteps = [...prev.welcome.steps];\r\n      newSteps[index] = value;\r\n      const updated = {\r\n        ...prev,\r\n        welcome: {\r\n          ...prev.welcome,\r\n          steps: newSteps\r\n        }\r\n      };\r\n      updateBackend({ welcome_steps: newSteps });\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <SettingsContext.Provider value={{ settings, loading, updateHeaderSetting, updateWelcomeStep, updateFeatureSetting }}>\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\StatisticsContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useCallback } from 'react';\r\n\r\nconst StatisticsContext = createContext();\r\n\r\nexport const useStatistics = () => {\r\n  const context = useContext(StatisticsContext);\r\n  if (!context) {\r\n    throw new Error('useStatistics must be used within a StatisticsProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const StatisticsProvider = ({ children }) => {\r\n  const [statisticsUpdateTrigger, setStatisticsUpdateTrigger] = useState(0);\r\n\r\n  const triggerStatisticsUpdate = useCallback((updateType = 'test_created') => {\r\n    console.log(`Statistics update triggered: ${updateType}`);\r\n    setStatisticsUpdateTrigger(prev => prev + 1);\r\n    \r\n    // Store update type in localStorage for cross-component communication\r\n    localStorage.setItem('lastStatisticsUpdate', JSON.stringify({\r\n      type: updateType,\r\n      timestamp: new Date().toISOString()\r\n    }));\r\n  }, []);\r\n\r\n  const getLastUpdate = useCallback(() => {\r\n    const update = localStorage.getItem('lastStatisticsUpdate');\r\n    return update ? JSON.parse(update) : null;\r\n  }, []);\r\n\r\n  const value = {\r\n    statisticsUpdateTrigger,\r\n    triggerStatisticsUpdate,\r\n    getLastUpdate,\r\n  };\r\n\r\n  return (\r\n    <StatisticsContext.Provider value={value}>\r\n      {children}\r\n    </StatisticsContext.Provider>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":22},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  20 |\n  21 |     if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {\n> 22 |       setIsDarkMode(true);\n     |       ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |       document.documentElement.classList.add('dark');\n  24 |     } else {\n  25 |       setIsDarkMode(false);","line":22,"column":7,"nodeType":null,"endLine":22,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n  const [isDarkMode, setIsDarkMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check for saved theme preference or default to light mode\r\n    const savedTheme = localStorage.getItem('theme');\r\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n\r\n    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {\r\n      setIsDarkMode(true);\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      setIsDarkMode(false);\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n  }, []);\r\n\r\n  const toggleTheme = () => {\r\n    const newTheme = !isDarkMode;\r\n    setIsDarkMode(newTheme);\r\n\r\n    if (newTheme) {\r\n      document.documentElement.classList.add('dark');\r\n      localStorage.setItem('theme', 'dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n      localStorage.setItem('theme', 'light');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ isDarkMode, toggleTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\data\\apiService.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":84,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api';\r\n\r\nclass ApiService {\r\n  constructor() {\r\n    this.baseURL = API_BASE_URL;\r\n    this.token = localStorage.getItem('accessToken');\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n    if (token) {\r\n      localStorage.setItem('accessToken', token);\r\n    } else {\r\n      localStorage.removeItem('accessToken');\r\n    }\r\n  }\r\n\r\n  getAuthHeaders(contentType = 'application/json') {\r\n    const headers = {};\r\n    if (contentType !== 'multipart/form-data') {\r\n      headers['Content-Type'] = contentType;\r\n    }\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n    return headers;\r\n  }\r\n\r\n  async request(endpoint, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const isFormData = options.body instanceof FormData;\r\n    const config = {\r\n      headers: this.getAuthHeaders(isFormData ? 'multipart/form-data' : 'application/json'),\r\n      ...options,\r\n    };\r\n\r\n    try {\r\n      let response = await fetch(url, config);\r\n\r\n      if (response.status === 401) {\r\n        // Token expired, try to refresh\r\n        const refreshToken = localStorage.getItem('refreshToken');\r\n        if (refreshToken) {\r\n          try {\r\n            const refreshResponse = await fetch(`${this.baseURL}/token/refresh/`, {\r\n              method: 'POST',\r\n              headers: { 'Content-Type': 'application/json' },\r\n              body: JSON.stringify({ refresh: refreshToken }),\r\n            });\r\n\r\n            if (refreshResponse.ok) {\r\n              const data = await refreshResponse.json();\r\n              this.setToken(data.access);\r\n              // Update config headers for retry\r\n              config.headers['Authorization'] = `Bearer ${data.access}`;\r\n              // Retry the original request\r\n              response = await fetch(url, config);\r\n            } else {\r\n              // Refresh failed\r\n              this.logout();\r\n              throw new Error('Authentication failed - please login again');\r\n            }\r\n          } catch (error) {\r\n            console.error('Token refresh failed:', error);\r\n            this.logout();\r\n            throw new Error('Authentication failed - please login again');\r\n          }\r\n        } else {\r\n          this.logout();\r\n          throw new Error('Authentication failed - please login again');\r\n        }\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        const error = new Error(`HTTP ${response.status}: ${errorText}`);\r\n\r\n        // Attach response details for frontend handling\r\n        try {\r\n          error.response = {\r\n            data: JSON.parse(errorText),\r\n            status: response.status\r\n          };\r\n        } catch (e) {\r\n          error.response = {\r\n            data: errorText,\r\n            status: response.status\r\n          };\r\n        }\r\n        throw error;\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error('API request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async get(endpoint) {\r\n    const response = await this.request(endpoint);\r\n    return response.json();\r\n  }\r\n\r\n  async post(endpoint, data) {\r\n    const isFormData = data instanceof FormData;\r\n    const response = await this.request(endpoint, {\r\n      method: 'POST',\r\n      body: isFormData ? data : JSON.stringify(data),\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async put(endpoint, data) {\r\n    const response = await this.request(endpoint, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async patch(endpoint, data) {\r\n    const isFormData = data instanceof FormData;\r\n    const response = await this.request(endpoint, {\r\n      method: 'PATCH',\r\n      body: isFormData ? data : JSON.stringify(data),\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async delete(endpoint) {\r\n    const response = await this.request(endpoint, {\r\n      method: 'DELETE',\r\n    });\r\n    return response.ok;\r\n  }\r\n\r\n  // Authentication methods\r\n  async login(email, password) {\r\n    // Backend expects 'username' field, so we'll send email as username\r\n    const response = await fetch(`${this.baseURL}/users/login/`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ username: email, password }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Login failed');\r\n    }\r\n\r\n    const data = await response.json();\r\n    this.setToken(data.access);\r\n    localStorage.setItem('refreshToken', data.refresh);\r\n    return data.user;\r\n  }\r\n\r\n  async register(userData) {\r\n    const response = await fetch(`${this.baseURL}/users/register/`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(userData),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Registration failed');\r\n    }\r\n\r\n    const data = await response.json();\r\n    this.setToken(data.access);\r\n    localStorage.setItem('refreshToken', data.refresh);\r\n    return data.user;\r\n  }\r\n\r\n  logout() {\r\n    this.setToken(null);\r\n    localStorage.removeItem('refreshToken');\r\n    localStorage.removeItem('currentUser');\r\n  }\r\n\r\n  // User methods\r\n  async getUsers() {\r\n    return this.get('/users/');\r\n  }\r\n\r\n  async getUser(id) {\r\n    return this.get(`/users/${id}/`);\r\n  }\r\n\r\n  async updateUser(id, data) {\r\n    return this.put(`/users/${id}/`, data);\r\n  }\r\n\r\n  async deleteUser(id) {\r\n    return this.delete(`/users/${id}/`);\r\n  }\r\n\r\n  // Test methods\r\n  async getTests(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/tests/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  // Public test methods (no authentication required)\r\n  async getPublicTests(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    // Use fetch directly without authentication headers\r\n    const url = `${this.baseURL}/tests/public_list/${queryString ? `?${queryString}` : ''}`;\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getPublicStats() {\r\n    const url = `${this.baseURL}/tests/public_stats/`;\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getTest(id) {\r\n    return this.get(`/tests/${id}/`);\r\n  }\r\n\r\n  async createTest(data) {\r\n    return this.post('/tests/', data);\r\n  }\r\n\r\n  async updateTest(id, data) {\r\n    return this.patch(`/tests/${id}/`, data);\r\n  }\r\n\r\n  async deleteTest(id) {\r\n    return this.delete(`/tests/${id}/`);\r\n  }\r\n\r\n  // Question methods\r\n  async getQuestions(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/questions/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  // Public question methods (no authentication required)\r\n  async getPublicQuestions(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    // Use fetch directly without authentication headers\r\n    const url = `${this.baseURL}/questions/public_list/${queryString ? `?${queryString}` : ''}`;\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async createQuestion(data) {\r\n    return this.post('/questions/', data);\r\n  }\r\n\r\n  async updateQuestion(id, data) {\r\n    return this.put(`/questions/${id}/`, data);\r\n  }\r\n\r\n  async deleteQuestion(id) {\r\n    return this.delete(`/questions/${id}/`);\r\n  }\r\n\r\n  // Test attempt methods\r\n  async getAttempts(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/attempts/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  async getAttempt(id) {\r\n    return this.get(`/attempts/${id}/`);\r\n  }\r\n\r\n  async createAttempt(data) {\r\n    return this.post('/attempts/', data);\r\n  }\r\n\r\n  async updateAttempt(id, data) {\r\n    return this.put(`/attempts/${id}/`, data);\r\n  }\r\n\r\n  // Feedback methods\r\n  async getFeedback(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/feedback/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  async createFeedback(data) {\r\n    return this.post('/feedback/', data);\r\n  }\r\n\r\n  async updateFeedback(id, data) {\r\n    return this.put(`/feedback/${id}/`, data);\r\n  }\r\n\r\n  // Test session methods\r\n  async getSessions(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/sessions/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  async startSession(testId) {\r\n    return this.post('/sessions/start_session/', { test_id: testId });\r\n  }\r\n\r\n  async getSession(sessionId) {\r\n    return this.get(`/sessions/get_session/?session_id=${sessionId}`);\r\n  }\r\n\r\n  async updateSessionAnswers(sessionId, answers) {\r\n    return this.put('/sessions/update_answers/', {\r\n      session_id: sessionId,\r\n      answers: answers\r\n    });\r\n  }\r\n\r\n  async completeSession(sessionId) {\r\n    return this.post('/sessions/complete_session/', { session_id: sessionId });\r\n  }\r\n\r\n  async autoExpireSessions() {\r\n    return this.post('/sessions/auto_expire_sessions/', {});\r\n  }\r\n\r\n  // Warning methods\r\n  async logWarning(data) {\r\n    return this.post('/warnings/log_warning/', data);\r\n  }\r\n\r\n\r\n\r\n  // Ban management methods\r\n  async banUser(userId, reason) {\r\n    return this.post(`/users/${userId}/ban_user/`, { reason });\r\n  }\r\n\r\n  async unbanUser(userId) {\r\n    return this.post(`/users/${userId}/unban_user/`);\r\n  }\r\n\r\n  async unbanWithCode(code) {\r\n    return this.post('/users/unban_with_code/', { code });\r\n  }\r\n\r\n  async banCurrentUser(reason) {\r\n    return this.post('/users/ban_current_user/', { reason });\r\n  }\r\n\r\n  async giveStars(userId, data) {\r\n    return this.post(`/users/${userId}/give_stars/`, data);\r\n  }\r\n\r\n  // Premium management methods\r\n  async grantPremium(userId, pricingId) {\r\n    return this.patch(`/users/${userId}/grant_premium/`, { pricing_id: pricingId });\r\n  }\r\n\r\n  async revokePremium(userId) {\r\n    return this.patch(`/users/${userId}/revoke_premium/`);\r\n  }\r\n\r\n  // Pricing methods\r\n  async getPricing() {\r\n    return this.get('/pricing/');\r\n  }\r\n\r\n  async createPricing(data) {\r\n    return this.post('/pricing/', data);\r\n  }\r\n\r\n  async updatePricing(id, data) {\r\n    return this.patch(`/pricing/${id}/`, data);\r\n  }\r\n\r\n  async deletePricing(id) {\r\n    return this.delete(`/pricing/${id}/`);\r\n  }\r\n\r\n  // Star package methods\r\n  async getStarPackages() {\r\n    return this.get('/star-packages/');\r\n  }\r\n\r\n  async createStarPackage(data) {\r\n    return this.post('/star-packages/', data);\r\n  }\r\n\r\n  async updateStarPackage(id, data) {\r\n    return this.patch(`/star-packages/${id}/`, data);\r\n  }\r\n\r\n  async deleteStarPackage(id) {\r\n    return this.delete(`/star-packages/${id}/`);\r\n  }\r\n\r\n  // Gift methods\r\n  async getGifts() {\r\n    return this.get('/gifts/');\r\n  }\r\n\r\n  async createGift(data) {\r\n    return this.post('/gifts/', data);\r\n  }\r\n\r\n  async updateGift(id, data) {\r\n    return this.patch(`/gifts/${id}/`, data);\r\n  }\r\n\r\n  async deleteGift(id) {\r\n    return this.delete(`/gifts/${id}/`);\r\n  }\r\n\r\n  // Student gift methods\r\n  async getStudentGifts(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/student-gifts/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  async getMyGifts() {\r\n    return this.get('/student-gifts/my_gifts/');\r\n  }\r\n\r\n  async getPlacedGifts() {\r\n    return this.get('/student-gifts/placed_gifts/');\r\n  }\r\n\r\n  async purchaseGift(giftId) {\r\n    return this.post('/student-gifts/purchase_gift/', { gift_id: giftId });\r\n  }\r\n\r\n  async placeGift(studentGiftId, position) {\r\n    return this.post(`/student-gifts/${studentGiftId}/place_gift/`, { position });\r\n  }\r\n\r\n  // Plan selection methods\r\n  async selectPlan(planType) {\r\n    return this.post('/users/select_plan/', { plan_type: planType });\r\n  }\r\n\r\n  async approvePlan(userId) {\r\n    return this.post(`/users/${userId}/approve_plan/`);\r\n  }\r\n\r\n  // Contact message methods\r\n  async getContactMessages(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    return this.get(`/contact-messages/admin_list/${queryString ? `?${queryString}` : ''}`);\r\n  }\r\n\r\n  async submitContactMessage(data) {\r\n    return this.post('/contact-messages/', data);\r\n  }\r\n\r\n  async updateContactMessageStatus(messageId, data) {\r\n    return this.patch(`/contact-messages/${messageId}/update_status/`, data);\r\n  }\r\n\r\n  async replyToContactMessage(messageId, data) {\r\n    return this.post(`/contact-messages/${messageId}/reply/`, data);\r\n  }\r\n\r\n  // User's own contact message methods\r\n  async getMyContactMessages() {\r\n    return this.get('/contact-messages/my_messages/');\r\n  }\r\n\r\n  async editContactMessage(messageId, data) {\r\n    return this.put(`/contact-messages/${messageId}/edit_message/`, data);\r\n  }\r\n\r\n  async deleteContactMessage(messageId) {\r\n    return this.delete(`/contact-messages/${messageId}/delete_message/`);\r\n  }\r\n\r\n  // Delete profile picture and status for specific student\r\n  async deleteStudentProfileData(studentId) {\r\n    return this.patch(`/users/${studentId}/delete_profile_data/`, {\r\n      delete_profile_photo: true,\r\n      delete_profile_status: true\r\n    });\r\n  }\r\n\r\n  // Site Updates methods\r\n  async getNews() {\r\n    return this.get('/updates/');\r\n  }\r\n\r\n  async getPublicNews() {\r\n    const url = `${this.baseURL}/updates/public_list/`;\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async createNews(data) {\r\n    // Check if data has file attachment for FormData\r\n    // The base post method handles FormData check\r\n    return this.post('/updates/', data);\r\n  }\r\n\r\n  async updateNews(id, data) {\r\n    return this.patch(`/updates/${id}/`, data);\r\n  }\r\n\r\n  async deleteNews(id) {\r\n    return this.delete(`/updates/${id}/`);\r\n  }\r\n\r\n  // Site Settings methods\r\n  async getSiteSettings() {\r\n    return this.get('/site-settings/');\r\n  }\r\n\r\n  async updateSiteSettings(data) {\r\n    return this.patch('/site-settings/update_settings/', data);\r\n  }\r\n\r\n}\r\n\r\nconst apiService = new ApiService();\r\nexport default apiService;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\data\\dbService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\data\\enhancedApiService.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'endpoint' is defined but never used.","line":89,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"endpoint"},"fix":{"range":[2750,2760],"text":""},"desc":"Remove unused variable 'endpoint'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":89,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[2760,2769],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'cacheDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":140,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":140,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"cacheDuration"},"fix":{"range":[4445,4468],"text":""},"desc":"Remove unused variable 'cacheDuration'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":302,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":302,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[8739,8756],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":312,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":312,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[9016,9033],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":376,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":376,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[10946,10963],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":385,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":385,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[11166,11183],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":395,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":395,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[11441,11458],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":437,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":437,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[12750,12767],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":446,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":446,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[12986,13003],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":456,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":456,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[13275,13292],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":484,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":484,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[14093,14110],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":488,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":488,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[14195,14212],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":510,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":510,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[14919,14936],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":522,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":522,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[15318,15335],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":529,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":529,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[15495,15512],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":539,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":539,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[15823,15838],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":564,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":564,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[16615,16632],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":573,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":573,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[16843,16860],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":582,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":582,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[17072,17089],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":600,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":600,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[17563,17580],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":609,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":609,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[17813,17830],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":619,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":619,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[18118,18135],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":638,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":638,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[18643,18660],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":647,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":647,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[18862,18879],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":657,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":657,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[19136,19153],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":692,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":692,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[20109,20126],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":702,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":702,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[20439,20456],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":713,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":713,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[20790,20807],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":722,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":722,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[21037,21054],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":743,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":743,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[21733,21750],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":747,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":747,"endColumn":68,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[21863,21880],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":756,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":756,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[22153,22170],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":768,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":768,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[22521,22538],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":772,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":772,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[22664,22681],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingCallback' is defined but never used.","line":782,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":782,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingCallback"},"fix":{"range":[23011,23028],"text":""},"desc":"Remove unused variable 'loadingCallback'."}]}],"suppressedMessages":[],"errorCount":36,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import cacheManager from '../utils/cacheManager';\r\nimport { useLoading } from '../context/LoadingContext';\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api';\r\n\r\nclass EnhancedApiService {\r\n  constructor() {\r\n    this.baseURL = API_BASE_URL;\r\n    this.token = localStorage.getItem('accessToken');\r\n    this.requestCache = new Map(); // Prevent duplicate requests\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n    if (token) {\r\n      localStorage.setItem('accessToken', token);\r\n    } else {\r\n      localStorage.removeItem('accessToken');\r\n    }\r\n  }\r\n\r\n  getAuthHeaders(contentType = 'application/json') {\r\n    const headers = {};\r\n    if (contentType !== 'multipart/form-data') {\r\n      headers['Content-Type'] = contentType;\r\n    }\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n    return headers;\r\n  }\r\n\r\n  // Generate unique request key for caching and deduplication\r\n  generateRequestKey(endpoint, options = {}) {\r\n    return `${options.method || 'GET'}-${endpoint}-${JSON.stringify(options.body || {})}`;\r\n  }\r\n\r\n  // Check if request is already in progress\r\n  isRequestInProgress(key) {\r\n    return this.requestCache.has(key);\r\n  }\r\n\r\n  // Mark request as in progress\r\n  setRequestInProgress(key, promise) {\r\n    this.requestCache.set(key, promise);\r\n    \r\n    // Auto-cleanup after 30 seconds\r\n    setTimeout(() => {\r\n      this.requestCache.delete(key);\r\n    }, 30000);\r\n  }\r\n\r\n  // Remove request from cache when done\r\n  removeRequestFromCache(key) {\r\n    this.requestCache.delete(key);\r\n  }\r\n\r\n  async request(endpoint, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const isFormData = options.body instanceof FormData;\r\n    const requestKey = this.generateRequestKey(endpoint, options);\r\n    const config = {\r\n      headers: this.getAuthHeaders(isFormData ? 'multipart/form-data' : 'application/json'),\r\n      ...options,\r\n    };\r\n\r\n    // Prevent duplicate requests for same endpoint\r\n    if (this.isRequestInProgress(requestKey) && options.method !== 'POST') {\r\n      console.log(`[API] Request already in progress for: ${endpoint}`);\r\n      return this.requestCache.get(requestKey);\r\n    }\r\n\r\n    // Wrap request in promise for caching\r\n    const requestPromise = this.performRequest(url, config, endpoint, options);\r\n    \r\n    // Cache the request promise if it's a GET request\r\n    if ((!options.method || options.method === 'GET') && !options.skipCache) {\r\n      this.setRequestInProgress(requestKey, requestPromise);\r\n    }\r\n\r\n    try {\r\n      const response = await requestPromise;\r\n      return response;\r\n    } finally {\r\n      this.removeRequestFromCache(requestKey);\r\n    }\r\n  }\r\n\r\n  async performRequest(url, config, endpoint, options) {\r\n    try {\r\n      const response = await fetch(url, config);\r\n\r\n      if (response.status === 401) {\r\n        // Token expired, try to refresh\r\n        const refreshToken = localStorage.getItem('refreshToken');\r\n        if (refreshToken) {\r\n          try {\r\n            const refreshResponse = await fetch(`${this.baseURL}/token/refresh/`, {\r\n              method: 'POST',\r\n              headers: { 'Content-Type': 'application/json' },\r\n              body: JSON.stringify({ refresh: refreshToken }),\r\n            });\r\n\r\n            if (refreshResponse.ok) {\r\n              const data = await refreshResponse.json();\r\n              this.setToken(data.access);\r\n              // Update config headers for retry\r\n              config.headers['Authorization'] = `Bearer ${data.access}`;\r\n              // Retry the original request\r\n              const retryResponse = await fetch(url, config);\r\n              if (retryResponse.ok) {\r\n                return retryResponse;\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error('Token refresh failed:', error);\r\n          }\r\n        }\r\n        // If refresh fails, logout\r\n        this.logout();\r\n        throw new Error('Authentication failed - please login again');\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error = await response.text();\r\n        throw new Error(`HTTP ${response.status}: ${error}`);\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error('API request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Enhanced GET method with caching and loading states\r\n  async get(endpoint, options = {}) {\r\n    const { \r\n      useCache = true, \r\n      cacheDuration,\r\n      forceRefresh = false,\r\n      loadingCallback,\r\n      skipCache = false \r\n    } = options;\r\n\r\n    // Set loading state\r\n    if (loadingCallback) loadingCallback(true);\r\n\r\n    try {\r\n      // Try to get from cache first\r\n      if (useCache && !forceRefresh && !skipCache) {\r\n        const cached = cacheManager.getCachedApiResponse(endpoint);\r\n        if (cached) {\r\n          console.log(`[API] Serving ${endpoint} from cache`);\r\n          if (loadingCallback) loadingCallback(false);\r\n          return {\r\n            ...cached.data,\r\n            _meta: {\r\n              fromCache: true,\r\n              source: cached.source,\r\n              age: cached.age\r\n            }\r\n          };\r\n        }\r\n      }\r\n\r\n      // Make API request\r\n      const response = await this.request(endpoint);\r\n      const data = await response.json();\r\n\r\n      // Cache the response\r\n      if (useCache && !skipCache) {\r\n        cacheManager.cacheApiResponse(endpoint, data);\r\n      }\r\n\r\n      if (loadingCallback) loadingCallback(false);\r\n      return {\r\n        ...data,\r\n        _meta: {\r\n          fromCache: false,\r\n          source: 'network',\r\n          age: 0\r\n        }\r\n      };\r\n    } catch (error) {\r\n      if (loadingCallback) loadingCallback(false);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async post(endpoint, data) {\r\n    const response = await this.request(endpoint, {\r\n      method: 'POST',\r\n      body: data instanceof FormData ? data : JSON.stringify(data),\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async put(endpoint, data) {\r\n    const response = await this.request(endpoint, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async patch(endpoint, data) {\r\n    const response = await this.request(endpoint, {\r\n      method: 'PATCH',\r\n      body: data instanceof FormData ? data : JSON.stringify(data),\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async delete(endpoint) {\r\n    const response = await this.request(endpoint, {\r\n      method: 'DELETE',\r\n    });\r\n    return response.ok;\r\n  }\r\n\r\n  // Enhanced authentication methods with loading states\r\n  async login(email, password, loadingCallback) {\r\n    if (loadingCallback) loadingCallback(true);\r\n\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/users/login/`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username: email, password }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Login failed');\r\n      }\r\n\r\n      const data = await response.json();\r\n      this.setToken(data.access);\r\n      localStorage.setItem('refreshToken', data.refresh);\r\n      \r\n      // Clear user cache on login\r\n      cacheManager.invalidateRelated('user');\r\n      \r\n      if (loadingCallback) loadingCallback(false);\r\n      return data.user;\r\n    } catch (error) {\r\n      if (loadingCallback) loadingCallback(false);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async register(userData, loadingCallback) {\r\n    if (loadingCallback) loadingCallback(true);\r\n\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/users/register/`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Registration failed');\r\n      }\r\n\r\n      const data = await response.json();\r\n      this.setToken(data.access);\r\n      localStorage.setItem('refreshToken', data.refresh);\r\n      \r\n      if (loadingCallback) loadingCallback(false);\r\n      return data.user;\r\n    } catch (error) {\r\n      if (loadingCallback) loadingCallback(false);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  logout() {\r\n    this.setToken(null);\r\n    localStorage.removeItem('refreshToken');\r\n    localStorage.removeItem('currentUser');\r\n    \r\n    // Clear all caches on logout\r\n    cacheManager.clear();\r\n  }\r\n\r\n  // Enhanced user methods with caching\r\n  async getUsers(loadingCallback) {\r\n    return this.get('/users/', { \r\n      loadingCallback,\r\n      cacheKey: 'users_list'\r\n    });\r\n  }\r\n\r\n  async getUser(id, loadingCallback) {\r\n    return this.get(`/users/${id}/`, { \r\n      loadingCallback,\r\n      cacheKey: `user_${id}`\r\n    });\r\n  }\r\n\r\n  async updateUser(id, data, loadingCallback) {\r\n    const result = await this.put(`/users/${id}/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`user_${id}`);\r\n    cacheManager.invalidateRelated('users_list');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async deleteUser(id, loadingCallback) {\r\n    const result = await this.delete(`/users/${id}/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`user_${id}`);\r\n    cacheManager.invalidateRelated('users_list');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Enhanced test methods with caching\r\n  async getTests(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/tests/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `tests_${JSON.stringify(params)}`\r\n    });\r\n  }\r\n\r\n  async getPublicTests(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${this.baseURL}/tests/public_list/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    if (loadingCallback) loadingCallback(true);\r\n    \r\n    try {\r\n      const response = await fetch(url);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      if (loadingCallback) loadingCallback(false);\r\n      return data;\r\n    } catch (error) {\r\n      if (loadingCallback) loadingCallback(false);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getPublicStats(loadingCallback) {\r\n    const url = `${this.baseURL}/tests/public_stats/`;\r\n    if (loadingCallback) loadingCallback(true);\r\n    try {\r\n      const response = await fetch(url);\r\n      if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n      const data = await response.json();\r\n      if (loadingCallback) loadingCallback(false);\r\n      return data;\r\n    } catch (error) {\r\n      if (loadingCallback) loadingCallback(false);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getTest(id, loadingCallback) {\r\n    return this.get(`/tests/${id}/`, { \r\n      loadingCallback,\r\n      cacheKey: `test_${id}`\r\n    });\r\n  }\r\n\r\n  async createTest(data, loadingCallback) {\r\n    const result = await this.post('/tests/', data);\r\n    \r\n    // Invalidate tests cache\r\n    cacheManager.invalidateRelated('tests_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async updateTest(id, data, loadingCallback) {\r\n    const result = await this.patch(`/tests/${id}/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`test_${id}`);\r\n    cacheManager.invalidateRelated('tests_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async deleteTest(id, loadingCallback) {\r\n    const result = await this.delete(`/tests/${id}/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`test_${id}`);\r\n    cacheManager.invalidateRelated('tests_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Enhanced question methods with caching\r\n  async getQuestions(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/questions/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `questions_${JSON.stringify(params)}`\r\n    });\r\n  }\r\n\r\n  async getPublicQuestions(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${this.baseURL}/questions/public_list/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    if (loadingCallback) loadingCallback(true);\r\n    \r\n    try {\r\n      const response = await fetch(url);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      if (loadingCallback) loadingCallback(false);\r\n      return data;\r\n    } catch (error) {\r\n      if (loadingCallback) loadingCallback(false);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async createQuestion(data, loadingCallback) {\r\n    const result = await this.post('/questions/', data);\r\n    \r\n    // Invalidate questions cache\r\n    cacheManager.invalidateRelated('questions_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async updateQuestion(id, data, loadingCallback) {\r\n    const result = await this.put(`/questions/${id}/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`question_${id}`);\r\n    cacheManager.invalidateRelated('questions_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async deleteQuestion(id, loadingCallback) {\r\n    const result = await this.delete(`/questions/${id}/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`question_${id}`);\r\n    cacheManager.invalidateRelated('questions_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Enhanced attempt methods with caching\r\n  async getAttempts(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/attempts/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `attempts_${JSON.stringify(params)}`\r\n    });\r\n  }\r\n\r\n  async getAttempt(id, loadingCallback) {\r\n    return this.get(`/attempts/${id}/`, { \r\n      loadingCallback,\r\n      cacheKey: `attempt_${id}`\r\n    });\r\n  }\r\n\r\n  async createAttempt(data, loadingCallback) {\r\n    return this.post('/attempts/', data);\r\n  }\r\n\r\n  async updateAttempt(id, data, loadingCallback) {\r\n    const result = await this.put(`/attempts/${id}/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`attempt_${id}`);\r\n    cacheManager.invalidateRelated('attempts_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Enhanced session methods with shorter cache duration\r\n  async getSessions(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/sessions/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `sessions_${JSON.stringify(params)}`,\r\n      cacheDuration: 2 * 60 * 1000 // 2 minutes\r\n    });\r\n  }\r\n\r\n  async startSession(testId, loadingCallback) {\r\n    return this.post('/sessions/start_session/', { test_id: testId });\r\n  }\r\n\r\n  async getSession(sessionId, loadingCallback) {\r\n    return this.get(`/sessions/get_session/?session_id=${sessionId}`, { \r\n      loadingCallback,\r\n      cacheKey: `session_${sessionId}`,\r\n      cacheDuration: 30 * 1000 // 30 seconds\r\n    });\r\n  }\r\n\r\n  async updateSessionAnswers(sessionId, answers, loadingCallback) {\r\n    return this.put('/sessions/update_answers/', {\r\n      session_id: sessionId,\r\n      answers: answers\r\n    });\r\n  }\r\n\r\n  async completeSession(sessionId, loadingCallback) {\r\n    const result = await this.post('/sessions/complete_session/', { session_id: sessionId });\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`session_${sessionId}`);\r\n    cacheManager.invalidateRelated('sessions_');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async autoExpireSessions(loadingCallback) {\r\n    return this.post('/sessions/auto_expire_sessions/', {});\r\n  }\r\n\r\n  // Enhanced statistics methods with short cache\r\n  async getStatistics(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/statistics/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `statistics_${JSON.stringify(params)}`,\r\n      cacheDuration: 1 * 60 * 1000 // 1 minute\r\n    });\r\n  }\r\n\r\n  // Enhanced pricing methods with longer cache\r\n  async getPricing(loadingCallback) {\r\n    return this.get('/pricing/', { \r\n      loadingCallback,\r\n      cacheKey: 'pricing',\r\n      cacheDuration: 30 * 60 * 1000 // 30 minutes\r\n    });\r\n  }\r\n\r\n  async createPricing(data, loadingCallback) {\r\n    const result = await this.post('/pricing/', data);\r\n    \r\n    // Invalidate pricing cache\r\n    cacheManager.invalidateRelated('pricing');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async updatePricing(id, data, loadingCallback) {\r\n    const result = await this.patch(`/pricing/${id}/`, data);\r\n    \r\n    // Invalidate pricing cache\r\n    cacheManager.invalidateRelated('pricing');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async deletePricing(id, loadingCallback) {\r\n    const result = await this.delete(`/pricing/${id}/`);\r\n    \r\n    // Invalidate pricing cache\r\n    cacheManager.invalidateRelated('pricing');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Enhanced star package methods with caching\r\n  async getStarPackages(loadingCallback) {\r\n    return this.get('/star-packages/', { \r\n      loadingCallback,\r\n      cacheKey: 'star_packages',\r\n      cacheDuration: 30 * 60 * 1000 // 30 minutes\r\n    });\r\n  }\r\n\r\n  async createStarPackage(data, loadingCallback) {\r\n    const result = await this.post('/star-packages/', data);\r\n    \r\n    // Invalidate star packages cache\r\n    cacheManager.invalidateRelated('star_packages');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async updateStarPackage(id, data, loadingCallback) {\r\n    const result = await this.patch(`/star-packages/${id}/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`star_package_${id}`);\r\n    cacheManager.invalidateRelated('star_packages');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async deleteStarPackage(id, loadingCallback) {\r\n    const result = await this.delete(`/star-packages/${id}/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`star_package_${id}`);\r\n    cacheManager.invalidateRelated('star_packages');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Enhanced gift methods with caching\r\n  async getGifts(loadingCallback) {\r\n    return this.get('/gifts/', { \r\n      loadingCallback,\r\n      cacheKey: 'gifts',\r\n      cacheDuration: 30 * 60 * 1000 // 30 minutes\r\n    });\r\n  }\r\n\r\n  async createGift(data, loadingCallback) {\r\n    const result = await this.post('/gifts/', data);\r\n    \r\n    // Invalidate gifts cache\r\n    cacheManager.invalidateRelated('gifts');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async updateGift(id, data, loadingCallback) {\r\n    const result = await this.patch(`/gifts/${id}/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`gift_${id}`);\r\n    cacheManager.invalidateRelated('gifts');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async deleteGift(id, loadingCallback) {\r\n    const result = await this.delete(`/gifts/${id}/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`gift_${id}`);\r\n    cacheManager.invalidateRelated('gifts');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Student gift methods\r\n  async getStudentGifts(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/student-gifts/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `student_gifts_${JSON.stringify(params)}`\r\n    });\r\n  }\r\n\r\n  async getMyGifts(loadingCallback) {\r\n    return this.get('/student-gifts/my_gifts/', { \r\n      loadingCallback,\r\n      cacheKey: 'my_gifts'\r\n    });\r\n  }\r\n\r\n  async getPlacedGifts(loadingCallback) {\r\n    return this.get('/student-gifts/placed_gifts/', { \r\n      loadingCallback,\r\n      cacheKey: 'placed_gifts'\r\n    });\r\n  }\r\n\r\n  async purchaseGift(giftId, loadingCallback) {\r\n    const result = await this.post('/student-gifts/purchase_gift/', { gift_id: giftId });\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated('my_gifts');\r\n    cacheManager.invalidateRelated('student_gifts');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async placeGift(studentGiftId, position, loadingCallback) {\r\n    const result = await this.post(`/student-gifts/${studentGiftId}/place_gift/`, { position });\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated('placed_gifts');\r\n    cacheManager.invalidateRelated('my_gifts');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Plan selection methods\r\n  async selectPlan(planType, loadingCallback) {\r\n    const result = await this.post('/users/select_plan/', { plan_type: planType });\r\n    \r\n    // Invalidate user cache\r\n    cacheManager.invalidateRelated('user');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async approvePlan(userId, loadingCallback) {\r\n    const result = await this.post(`/users/${userId}/approve_plan/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`user_${userId}`);\r\n    cacheManager.invalidateRelated('users_list');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Contact message methods\r\n  async getContactMessages(params = {}, loadingCallback) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const endpoint = `/contact-messages/admin_list/${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    return this.get(endpoint, { \r\n      loadingCallback,\r\n      cacheKey: `contact_messages_${JSON.stringify(params)}`\r\n    });\r\n  }\r\n\r\n  async submitContactMessage(data, loadingCallback) {\r\n    return this.post('/contact-messages/', data);\r\n  }\r\n\r\n  async updateContactMessageStatus(messageId, data, loadingCallback) {\r\n    const result = await this.patch(`/contact-messages/${messageId}/update_status/`, data);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated('contact_messages');\r\n    \r\n    return result;\r\n  }\r\n\r\n  async replyToContactMessage(messageId, data, loadingCallback) {\r\n    return this.post(`/contact-messages/${messageId}/reply/`, data);\r\n  }\r\n\r\n  // User's own contact message methods\r\n  async getMyContactMessages(loadingCallback) {\r\n    return this.get('/contact-messages/my_messages/', { \r\n      loadingCallback,\r\n      cacheKey: 'my_contact_messages'\r\n    });\r\n  }\r\n\r\n  async editContactMessage(messageId, data, loadingCallback) {\r\n    return this.put(`/contact-messages/${messageId}/edit_message/`, data);\r\n  }\r\n\r\n  async deleteContactMessage(messageId, loadingCallback) {\r\n    const result = await this.delete(`/contact-messages/${messageId}/delete_message/`);\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated('my_contact_messages');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Delete profile picture and status for specific student\r\n  async deleteStudentProfileData(studentId, loadingCallback) {\r\n    const result = await this.patch(`/users/${studentId}/delete_profile_data/`, {\r\n      delete_profile_photo: true,\r\n      delete_profile_status: true\r\n    });\r\n    \r\n    // Invalidate related caches\r\n    cacheManager.invalidateRelated(`user_${studentId}`);\r\n    cacheManager.invalidateRelated('users_list');\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Cache management methods\r\n  clearCache() {\r\n    cacheManager.clear();\r\n  }\r\n\r\n  getCacheStats() {\r\n    return cacheManager.getStats();\r\n  }\r\n\r\n  // Preload common data\r\n  async preloadData(loadingCallback) {\r\n    if (loadingCallback) loadingCallback(true);\r\n    \r\n    try {\r\n      await cacheManager.preloadCommonData(this);\r\n    } finally {\r\n      if (loadingCallback) loadingCallback(false);\r\n    }\r\n  }\r\n}\r\n\r\nconst enhancedApiService = new EnhancedApiService();\r\nexport default enhancedApiService;\r\n\r\n// React hook for enhanced API calls with loading states\r\nexport const useEnhancedApi = () => {\r\n  const { setLoading, isLoading } = useLoading();\r\n  \r\n  const apiCall = async (apiMethod, loadingKey, ...args) => {\r\n    const loadingCallback = (loading) => setLoading(loadingKey, loading);\r\n    \r\n    try {\r\n      return await apiMethod(...args, loadingCallback);\r\n    } catch (error) {\r\n      loadingCallback(false);\r\n      throw error;\r\n    }\r\n  };\r\n  \r\n  return {\r\n    apiCall,\r\n    isLoading: (key) => isLoading(key),\r\n    setLoading\r\n  };\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\data\\mockData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\data\\models.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\hooks\\useCountdown.js","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   7 |   useEffect(() => {\n   8 |     if (!expiryDate) {\n>  9 |       setTimeLeft(null);\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  10 |       setIsExpired(false);\n  11 |       return;\n  12 |     }","line":9,"column":7,"nodeType":null,"endLine":9,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nexport const useCountdown = (expiryDate, onExpire) => {\r\n  const [timeLeft, setTimeLeft] = useState(null);\r\n  const [isExpired, setIsExpired] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!expiryDate) {\r\n      setTimeLeft(null);\r\n      setIsExpired(false);\r\n      return;\r\n    }\r\n\r\n    const calculateTimeLeft = () => {\r\n      const now = new Date().getTime();\r\n      const expiry = new Date(expiryDate).getTime();\r\n      const difference = expiry - now;\r\n\r\n      if (difference <= 0) {\r\n        if (!isExpired) {\r\n          setIsExpired(true);\r\n          setTimeLeft(0);\r\n          // Call onExpire callback when premium expires\r\n          if (onExpire) {\r\n            onExpire();\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      setTimeLeft(Math.floor(difference / 1000)); // Convert to seconds\r\n      setIsExpired(false);\r\n    };\r\n\r\n    // Calculate immediately\r\n    calculateTimeLeft();\r\n\r\n    // Update every second\r\n    const timer = setInterval(calculateTimeLeft, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [expiryDate, onExpire, isExpired]);\r\n\r\n  const formatTime = (seconds) => {\r\n    if (seconds === null || seconds <= 0) {\r\n      return 'Vaqt tugagan';\r\n    }\r\n\r\n    const days = Math.floor(seconds / (3600 * 24));\r\n    const hours = Math.floor((seconds % (3600 * 24)) / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n\r\n    if (days > 0) {\r\n      return `${days} kun ${hours} soat ${minutes} daqiqa ${secs} soniya`;\r\n    } else if (hours > 0) {\r\n      return `${hours} soat ${minutes} daqiqa ${secs} soniya`;\r\n    } else if (minutes > 0) {\r\n      return `${minutes} daqiqa ${secs} soniya`;\r\n    } else {\r\n      return `${secs} soniya`;\r\n    }\r\n  };\r\n\r\n  return {\r\n    timeLeft,\r\n    isExpired,\r\n    formattedTime: formatTime(timeLeft)\r\n  };\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\i18n.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\AdminDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\Contact.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'showSuccess' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"showSuccess"},"fix":{"range":[252,264],"text":""},"desc":"Remove unused variable 'showSuccess'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'showError' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"showError"},"fix":{"range":[263,274],"text":""},"desc":"Remove unused variable 'showError'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[490,521],"text":""},"desc":"Remove unused variable 'navigate'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[525,559],"text":""},"desc":"Remove unused variable 'currentUser'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":35,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"response"},"fix":{"range":[1198,1266],"text":""},"desc":"Remove unused variable 'response'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Layout from \"../components/Layout\";\r\nimport apiService from \"../data/apiService\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { showSuccess, showError } from \"../utils/antdNotification\";\r\nimport { useSentMessages } from \"../context/SentMessagesContext\";\r\nimport \"../styles/Contact.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst Contact = () => {\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n  const { addMessage } = useSentMessages();\r\n  const { t } = useTranslation();\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [subject, setSubject] = useState('');\r\n  const [dropdownOpen, setDropdownOpen] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData(e.target);\r\n    const messageData = {\r\n      name: formData.get('name'),\r\n      email: formData.get('email'),\r\n      phone: formData.get('phone'),\r\n      subject: formData.get('subject'),\r\n      message: formData.get('message')\r\n    };\r\n\r\n    try {\r\n      setIsSubmitting(true);\r\n      const response = await apiService.submitContactMessage(messageData);\r\n\r\n      // Get button rect for animation start\r\n      const rect = e.target.querySelector('button').getBoundingClientRect();\r\n\r\n      // Create flying element\r\n      const flyer = document.createElement('div');\r\n      flyer.className = 'flyer-icon';\r\n      flyer.innerHTML = `<span class=\"material-symbols-outlined\">send</span>`;\r\n      flyer.style.left = `${rect.left + rect.width / 2 - 25}px`;\r\n      flyer.style.top = `${rect.top + rect.height / 2 - 25}px`;\r\n      document.body.appendChild(flyer);\r\n\r\n      // Save locally as well\r\n      addMessage({\r\n        id: Date.now(),\r\n        ...messageData,\r\n        date: new Date().toISOString()\r\n      });\r\n\r\n      // Animation sequence\r\n      setTimeout(() => {\r\n        const target = document.getElementById('header-message-icon');\r\n        const targetRect = target?.getBoundingClientRect();\r\n\r\n        if (targetRect) {\r\n          flyer.style.left = `${targetRect.left + (targetRect.width / 2) - 25}px`;\r\n          flyer.style.top = `${targetRect.top + (targetRect.height / 2) - 25}px`;\r\n          flyer.style.transform = 'scale(0.88) rotate(0deg)';\r\n        }\r\n      }, 100);\r\n\r\n      setTimeout(() => {\r\n        flyer.style.opacity = '0';\r\n        flyer.style.transform = 'scale(0) rotate(180deg)';\r\n        flyer.style.filter = 'blur(10px) brightness(1.5)';\r\n      }, 850);\r\n\r\n      setTimeout(() => {\r\n        if (document.body.contains(flyer)) {\r\n          document.body.removeChild(flyer);\r\n        }\r\n\r\n        // Trigger header notification\r\n        window.dispatchEvent(new CustomEvent('itemSaved', {\r\n          detail: { title: t('contact.successSent'), icon: 'send', isFullMessage: true }\r\n        }));\r\n      }, 1300);\r\n\r\n      // Reset form\r\n      e.target.reset();\r\n\r\n    } catch (error) {\r\n      console.error('Failed to send message:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Animation Logic - Trigger on scroll\r\n  useEffect(() => {\r\n    const observerOptions = {\r\n      threshold: 0.3,\r\n      rootMargin: '0px 0px -100px 0px'\r\n    };\r\n\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          entry.target.classList.add('in-view');\r\n        } else {\r\n          entry.target.classList.remove('in-view');\r\n        }\r\n      });\r\n    }, observerOptions);\r\n\r\n    const sections = document.querySelectorAll('section');\r\n    sections.forEach(section => observer.observe(section));\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"modern-contact-page\">\r\n        {/* Contact Hero - Dark Section */}\r\n        <section className=\"contact-modern-hero\">\r\n          <div className=\"section-container\">\r\n            <h1>{t('contact.heroTitle')}</h1>\r\n            <p className=\"description\">{t('contact.heroDesc')}</p>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Contact Form Section - Light Section */}\r\n        <section className=\"contact-modern-form-section\">\r\n          <div className=\"section-container\">\r\n            <div className=\"split-layout\">\r\n              <div className=\"split-content\">\r\n                <h2>{t('contact.formTitle')}</h2>\r\n                <form className=\"minimal-form\" onSubmit={handleSubmit}>\r\n                  <div className=\"input-row\">\r\n                    <input type=\"text\" name=\"name\" placeholder={t('contact.namePlaceholder')} required />\r\n                    <input type=\"email\" name=\"email\" placeholder={t('contact.emailPlaceholder')} required />\r\n                  </div>\r\n                  <input type=\"tel\" name=\"phone\" placeholder={t('contact.phonePlaceholder')} />\r\n                  <div className={`custom-select-wrapper ${dropdownOpen ? 'open' : ''}`}>\r\n                    <div className=\"custom-select-trigger\" onClick={() => setDropdownOpen(!dropdownOpen)}>\r\n                      <span>{subject ? t(`contact.subjects.${subject}`) : t('contact.selectSubject')}</span>\r\n                      <span className=\"material-symbols-outlined custom-arrow\">expand_more</span>\r\n                    </div>\r\n                    <ul className=\"custom-options\">\r\n                      {['technical', 'billing', 'feature', 'other'].map(opt => (\r\n                        <li\r\n                          key={opt}\r\n                          className={`custom-option ${subject === opt ? 'selected' : ''}`}\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setSubject(opt);\r\n                            setDropdownOpen(false);\r\n                          }}\r\n                        >\r\n                          {t(`contact.subjects.${opt}`)}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"subject\"\r\n                      value={subject}\r\n                      required\r\n                      style={{ opacity: 0, width: 1, height: 1, position: 'absolute', bottom: 0, left: 0, zIndex: -1 }}\r\n                      onChange={() => { }}\r\n                    />\r\n                  </div>\r\n                  <textarea name=\"message\" placeholder={t('contact.messagePlaceholder')} rows=\"4\" required></textarea>\r\n                  <button type=\"submit\" className=\"btn-modern-submit\" disabled={isSubmitting}>\r\n                    {isSubmitting ? t('contact.sending') : t('contact.send')}\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Contact info grid - Dark Section */}\r\n        <section className=\"contact-modern-info\">\r\n          <div className=\"section-container\">\r\n            <h2>{t('contact.ourAddress')}</h2>\r\n            <div className=\"stats-grid-large\">\r\n              <div className=\"stat-box\" onClick={() => window.open('tel:+998901234567')}>\r\n                <span className=\"stat-label\">{t('contact.phone')}</span>\r\n                <span className=\"stat-number\">+998 90 123 45 67</span>\r\n              </div>\r\n              <div className=\"stat-box\" onClick={() => window.open('mailto:info@examify.uz')}>\r\n                <span className=\"stat-label\">{t('contact.email')}</span>\r\n                <span className=\"stat-number\">info@examify.uz</span>\r\n              </div>\r\n              <div className=\"stat-box\">\r\n                <span className=\"stat-label\">{t('contact.address')}</span>\r\n                <span className=\"stat-number\">{t('contact.addressText')}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Contact;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\HeadAdminDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":23,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[934,968],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport { Layout } from 'antd';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport apiService from '../data/apiService';\r\nimport BannedStudentsModal from '../components/BannedStudentsModal';\r\nimport 'antd/dist/reset.css';\r\n\r\n// Import head admin sub-pages\r\nimport HeadAdminOverview from './headadmin/HeadAdminOverview';\r\nimport ManageAdmins from './headadmin/ManageAdmins';\r\nimport AddAdmin from './headadmin/AddAdmin';\r\nimport AdminDetails from './headadmin/AdminDetails';\r\nimport ContactMessages from './headadmin/ContactMessages';\r\nimport AppSettings from './headadmin/AppSettings';\r\nimport ManageNews from './headadmin/ManageNews';\r\n\r\nconst { Content } = Layout;\r\n\r\nconst HeadAdminDashboard = () => {\r\n  const [bannedStudents, setBannedStudents] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const usersData = await apiService.getUsers();\r\n        const users = usersData.results || usersData;\r\n        const banned = users.filter(user => user.role === 'student' && user.is_banned);\r\n        setBannedStudents(banned);\r\n      } catch (error) {\r\n        console.error('Failed to fetch data:', error);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleUnbanStudent = async (studentId) => {\r\n    try {\r\n      await apiService.unbanUser(studentId);\r\n      const usersData = await apiService.getUsers();\r\n      const users = usersData.results || usersData;\r\n      setBannedStudents(users.filter(user => user.role === 'student' && user.is_banned));\r\n    } catch (error) {\r\n      console.error('Failed to unban student:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout style={{ height: '100vh', backgroundColor: '#f8fafc', overflow: 'hidden' }}>\r\n\r\n      <Content\r\n        style={{\r\n          padding: '64px 24px 32px',\r\n          maxWidth: '1900px',\r\n          margin: '0 auto',\r\n          marginTop: '40px',\r\n          width: '100%',\r\n          height: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }}\r\n      >\r\n        <div\r\n          id=\"dashboard-content-container\"\r\n          data-lenis-prevent\r\n          className=\"animate__animated animate__fadeIn\"\r\n          style={{\r\n            background: '#ffffff',\r\n            padding: '32px',\r\n            flex: 1,\r\n            height: 'calc(100vh - 96px)',\r\n            border: '4px solid #000',\r\n            boxShadow: '12px 12px 0px #000',\r\n            borderRadius: 0,\r\n            transition: 'all 0.8s cubic-bezier(0.19, 1, 0.22, 1)',\r\n            willChange: 'height, min-height',\r\n            position: 'relative',\r\n            overflowY: 'auto'\r\n          }}\r\n        >\r\n          <Routes>\r\n            <Route path=\"/\" element={<HeadAdminOverview />} />\r\n            <Route path=\"/admins\" element={<ManageAdmins />} />\r\n            <Route path=\"/add-admin\" element={<AddAdmin />} />\r\n            <Route path=\"/edit-admin/:id\" element={<AddAdmin />} />\r\n            <Route path=\"/admin-details/:id\" element={<AdminDetails />} />\r\n            <Route path=\"/messages\" element={<ContactMessages />} />\r\n            <Route path=\"/updates\" element={<ManageNews />} />\r\n            <Route path=\"/settings\" element={<AppSettings />} />\r\n          </Routes>\r\n        </div>\r\n      </Content>\r\n\r\n      <BannedStudentsModal\r\n        open={modalOpen}\r\n        onClose={() => setModalOpen(false)}\r\n        bannedStudents={bannedStudents}\r\n        onUnbanStudent={handleUnbanStudent}\r\n      />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default HeadAdminDashboard;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\Home.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  22 |     const shouldSkip = sessionStorage.getItem('skipHomeAnimation') === 'true';\n  23 |     if (shouldSkip) {\n> 24 |       setSkipAnimation(true);\n     |       ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  25 |       sessionStorage.removeItem('skipHomeAnimation');\n  26 |     }\n  27 |   }, []);","line":24,"column":7,"nodeType":null,"endLine":24,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Layout from \"../components/Layout\";\r\nimport apiService from \"../data/apiService\";\r\nimport \"../styles/Home.css\";\r\nimport { useSavedItems } from \"../context/SavedItemsContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useSettings } from \"../context/SettingsContext\";\r\nimport ReactECharts from 'echarts-for-react';\r\n\r\nconst Home = () => {\r\n  const { settings } = useSettings();\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState(null);\r\n  const { t } = useTranslation();\r\n\r\n  const videoRef = React.useRef(null);\r\n  const [skipAnimation, setSkipAnimation] = useState(false);\r\n\r\n  // Check if coming from onboarding to skip animation\r\n  useEffect(() => {\r\n    const shouldSkip = sessionStorage.getItem('skipHomeAnimation') === 'true';\r\n    if (shouldSkip) {\r\n      setSkipAnimation(true);\r\n      sessionStorage.removeItem('skipHomeAnimation');\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.playbackRate = 0.5;\r\n    }\r\n  }, []);\r\n\r\n  // SEO Optimization & Structured Data\r\n  useEffect(() => {\r\n    document.title = \"Examify Prep - Zamonaviy Ta'lim Platformasi\";\r\n\r\n    // Helper to set meta tag\r\n    const setMeta = (name, content) => {\r\n      let element = document.querySelector(`meta[name=\"${name}\"]`);\r\n      if (!element) {\r\n        element = document.createElement('meta');\r\n        element.setAttribute('name', name);\r\n        document.head.appendChild(element);\r\n      }\r\n      element.setAttribute('content', content);\r\n    };\r\n\r\n    setMeta('description', \"Examify Prep - maktab o'quvchilari va o'qituvchilari uchun maxsus testlar, tahlillar va qulay boshqaruv tizimi.\");\r\n    setMeta('keywords', \"testlar, maktab, o'quvchi, o'qituvchi, ta'lim, examify, onlayn test, O'zbekiston ta'lim\");\r\n    setMeta('og:title', \"Examify Prep - Kelajagingizni shu yerdan boshlang\");\r\n    setMeta('og:description', \"Zamonaviy va qulay ta'lim platformasi.\");\r\n    setMeta('og:image', \"/og-image.jpg\");\r\n    setMeta('author', 'Examify Team');\r\n\r\n    // JSON-LD Structured Data for Google\r\n    const structuredData = {\r\n      \"@context\": \"https://schema.org\",\r\n      \"@type\": \"WebSite\",\r\n      \"name\": \"Examify Prep\",\r\n      \"url\": window.location.origin,\r\n      \"description\": \"Zamonaviy ta'lim platformasi\",\r\n      \"potentialAction\": {\r\n        \"@type\": \"SearchAction\",\r\n        \"target\": `${window.location.origin}/search?q={search_term_string}`,\r\n        \"query-input\": \"required name=search_term_string\"\r\n      }\r\n    };\r\n\r\n    let script = document.getElementById('structured-data');\r\n    if (!script) {\r\n      script = document.createElement('script');\r\n      script.id = 'structured-data';\r\n      script.type = 'application/ld+json';\r\n      document.head.appendChild(script);\r\n    }\r\n    script.text = JSON.stringify(structuredData);\r\n  }, []);\r\n\r\n  // Animation Logic - Trigger on scroll, but only once per section\r\n  useEffect(() => {\r\n    // Skip all animations if coming from onboarding\r\n    if (skipAnimation) {\r\n      const sections = document.querySelectorAll('section');\r\n      sections.forEach(section => section.classList.add('in-view'));\r\n      return;\r\n    }\r\n\r\n    const observerOptions = {\r\n      threshold: 0.3,\r\n      rootMargin: '0px 0px -100px 0px'\r\n    };\r\n\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          entry.target.classList.add('in-view');\r\n        } else {\r\n          entry.target.classList.remove('in-view');\r\n        }\r\n      });\r\n    }, observerOptions);\r\n\r\n    const sections = document.querySelectorAll('section');\r\n    sections.forEach(section => observer.observe(section));\r\n\r\n    return () => observer.disconnect();\r\n  }, [skipAnimation]);\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      try {\r\n        const data = await apiService.getPublicStats();\r\n        setStats(data);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch stats\", error);\r\n      }\r\n    };\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const scrollToSection = (className) => {\r\n    const element = document.querySelector(className);\r\n    if (element) {\r\n      element.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const { savedItems, saveItem } = useSavedItems();\r\n\r\n  const handleSaveInfo = (e, role) => {\r\n    e.stopPropagation();\r\n\r\n    // Check if duplicate before running any animation or logic\r\n    if (savedItems.find(i => i.id === role.id)) {\r\n      window.dispatchEvent(new CustomEvent('saveError', {\r\n        detail: { message: t('home.alreadySaved'), icon: 'warning' }\r\n      }));\r\n      return;\r\n    }\r\n    // 2. Flyer Animation logic\r\n    if (settings?.features?.flyerAnimation) {\r\n      // Get start position\r\n      const rect = e.currentTarget.getBoundingClientRect();\r\n\r\n      // Create flying element immediately\r\n      const flyer = document.createElement('div');\r\n      flyer.className = 'flyer-icon';\r\n      flyer.innerHTML = `<span class=\"material-symbols-outlined\">${role.icon}</span>`;\r\n      flyer.style.left = `${rect.left + rect.width / 2 - 25}px`;\r\n      flyer.style.top = `${rect.top + rect.height / 2 - 25}px`;\r\n      document.body.appendChild(flyer);\r\n\r\n      // Wait a moment for the header layout to calculate the NEW position of the bin\r\n      setTimeout(() => {\r\n        const target = document.getElementById('header-storage-bin');\r\n        const targetRect = target?.getBoundingClientRect();\r\n\r\n        if (targetRect) {\r\n          flyer.style.left = `${targetRect.left + (targetRect.width / 2) - 25}px`;\r\n          flyer.style.top = `${targetRect.top + (targetRect.height / 2) - 25}px`;\r\n          flyer.style.transform = 'scale(0.88) rotate(0deg)';\r\n        }\r\n      }, 100);\r\n\r\n      // Beautiful Disappearance: Implode into the bin\r\n      setTimeout(() => {\r\n        flyer.style.opacity = '0';\r\n        flyer.style.transform = 'scale(0) rotate(180deg)';\r\n        flyer.style.filter = 'blur(10px) brightness(1.5)';\r\n      }, 850);\r\n\r\n      // Cleanup and trigger notification\r\n      setTimeout(() => {\r\n        if (document.body.contains(flyer)) {\r\n          document.body.removeChild(flyer);\r\n        }\r\n\r\n        // Dispatch custom event for Header notification\r\n        window.dispatchEvent(new CustomEvent('itemSaved', { detail: role }));\r\n      }, 1300);\r\n    } else {\r\n      // If no animation, dispatch immediately\r\n      window.dispatchEvent(new CustomEvent('itemSaved', { detail: role }));\r\n    }\r\n\r\n    // 1. Save immediately\r\n    saveItem(role);\r\n  };\r\n\r\n  const rolesData = [\r\n    {\r\n      id: 'student',\r\n      icon: 'school',\r\n      title: t('home.roles.student.title'),\r\n      description: t('home.roles.student.desc'),\r\n      details: t('home.roles.student.details', { returnObjects: true })\r\n    },\r\n    {\r\n      id: 'teacher',\r\n      icon: 'cast_for_education',\r\n      title: t('home.roles.teacher.title'),\r\n      description: t('home.roles.teacher.desc'),\r\n      details: t('home.roles.teacher.details', { returnObjects: true })\r\n    },\r\n    {\r\n      id: 'admin',\r\n      icon: 'admin_panel_settings',\r\n      title: t('home.roles.admin.title'),\r\n      description: t('home.roles.admin.desc'),\r\n      details: t('home.roles.admin.details', { returnObjects: true })\r\n    }\r\n  ];\r\n\r\n  const [isDesktop, setIsDesktop] = useState(window.innerWidth > 768);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsDesktop(window.innerWidth > 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      {/* Hero Section - Full Screen Video */}\r\n      <section className=\"hero-section\">\r\n        <div className=\"video-background\">\r\n          {isDesktop && (\r\n            <video\r\n              ref={videoRef}\r\n              autoPlay\r\n              loop\r\n              muted\r\n              playsInline\r\n              preload=\"auto\"\r\n              poster=\"/banner/inf1.png\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <source src=\"/Export-Typeface-Animator (2).mp4\" type=\"video/mp4\" />\r\n            </video>\r\n          )}\r\n          {/* Static background for mobile or while video loads */}\r\n          {!isDesktop && <div className=\"mobile-hero-bg\"></div>}\r\n          <div className=\"overlay\"></div>\r\n        </div>\r\n\r\n        <div className=\"hero-content\">\r\n          <h1>{t('home.heroTitle')}</h1>\r\n          <p>{t('home.heroSubtitle')}</p>\r\n          <div className=\"hero-actions\">\r\n            <button className=\"btn-hero-primary\" onClick={() => navigate('/login')}>\r\n              {t('home.start')}\r\n            </button>\r\n            <button className=\"btn-hero-outline\" onClick={() => scrollToSection('.users-section')}>\r\n              {t('home.moreInfo')}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Users Section - Full Screen */}\r\n      <section className=\"users-section\">\r\n        <div className=\"section-container\">\r\n          <div className=\"section-header\">\r\n            <h2>{t('home.forWhom')}</h2>\r\n            <p>{t('home.forWhomDesc')}</p>\r\n          </div>\r\n\r\n          <div className=\"roles-showcase\">\r\n            {rolesData.map(role => (\r\n              <div key={role.id} className=\"role-item\">\r\n                <div className=\"role-content\">\r\n                  <div className=\"role-icon\">\r\n                    <span className=\"material-symbols-outlined\">{role.icon}</span>\r\n                  </div>\r\n                  <h3>{role.title}</h3>\r\n                  <p>{role.description}</p>\r\n                  <div className=\"role-details\">\r\n                    <ul>\r\n                      {role.details.map((detail, idx) => (\r\n                        <li key={idx}>{detail}</li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n                {settings?.features?.homeSaveButton && (\r\n                  <button className=\"save-info-btn\" onClick={(e) => handleSaveInfo(e, role)} title={t('home.save')}>\r\n                    <span className=\"material-symbols-outlined\">content_copy</span>\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Features Section - Modern Cards */}\r\n      <section className=\"features-section\">\r\n        <div className=\"section-container\">\r\n          <div className=\"section-header\">\r\n            <h2>{t('home.tech')}</h2>\r\n            <p>{t('home.techDesc')}</p>\r\n          </div>\r\n\r\n          <div className=\"features-grid\">\r\n            <div className=\"feature-card\">\r\n              <div className=\"feature-content\">\r\n                <div className=\"feature-icon\">\r\n                  <span className=\"material-symbols-outlined\">analytics</span>\r\n                </div>\r\n                <h3>{t('home.features.analytics.title')}</h3>\r\n                <p>{t('home.features.analytics.desc')}</p>\r\n                <div className=\"feature-visual\">\r\n                  <picture>\r\n                    <source srcSet=\"/banner/inf1.webp\" type=\"image/webp\" />\r\n                    <img\r\n                      src=\"/banner/inf1.png\"\r\n                      alt=\"Analysis\"\r\n                      className=\"feature-img\"\r\n                      width=\"750\"\r\n                      height=\"500\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  </picture>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"feature-card\">\r\n              <div className=\"feature-content\">\r\n                <div className=\"feature-icon\">\r\n                  <span className=\"material-symbols-outlined\">security</span>\r\n                </div>\r\n                <h3>{t('home.features.security.title')}</h3>\r\n                <p>{t('home.features.security.desc')}</p>\r\n                <div className=\"feature-visual\">\r\n                  <picture>\r\n                    <source srcSet=\"/banner/inf2.webp\" type=\"image/webp\" />\r\n                    <img\r\n                      src=\"/banner/inf2.png\"\r\n                      alt=\"Security\"\r\n                      className=\"feature-img\"\r\n                      width=\"750\"\r\n                      height=\"500\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  </picture>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"feature-card\">\r\n              <div className=\"feature-content\">\r\n                <div className=\"feature-icon\">\r\n                  <span className=\"material-symbols-outlined\">devices</span>\r\n                </div>\r\n                <h3>{t('home.features.flexibility.title')}</h3>\r\n                <p>{t('home.features.flexibility.desc')}</p>\r\n                <div className=\"feature-visual\">\r\n                  <picture>\r\n                    <source srcSet=\"/banner/inf3.webp\" type=\"image/webp\" />\r\n                    <img\r\n                      src=\"/banner/inf3.png\"\r\n                      alt=\"Flexibility\"\r\n                      className=\"feature-img\"\r\n                      width=\"750\"\r\n                      height=\"500\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  </picture>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Statistics Section - Full Screen */}\r\n      <section className=\"stats-section\">\r\n        <div className=\"section-container\">\r\n          <div className=\"stats-header\">\r\n            <h2>{t('home.stats')}</h2>\r\n          </div>\r\n\r\n          <div className=\"stats-grid-large\">\r\n            <div className=\"stat-box\">\r\n              <span className=\"stat-number\">{stats?.tests_count || 1500}+</span>\r\n              <span className=\"stat-label\">{t('home.statsLabels.tests')}</span>\r\n            </div>\r\n            <div className=\"stat-box\">\r\n              <span className=\"stat-number\">{stats?.students_count || 800}+</span>\r\n              <span className=\"stat-label\">{t('home.statsLabels.students')}</span>\r\n            </div>\r\n            <div className=\"stat-box\">\r\n              <span className=\"stat-number\">{stats?.teachers_count || 50}+</span>\r\n              <span className=\"stat-label\">{t('home.statsLabels.teachers')}</span>\r\n            </div>\r\n            <div className=\"stat-box\">\r\n              <span className=\"stat-number\">{stats?.attempts_count || 12000}+</span>\r\n              <span className=\"stat-label\">{t('home.statsLabels.attempts')}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Analytics Section - New ECharts Section */}\r\n      <section className=\"analytics-section\">\r\n        <div className=\"section-container\">\r\n          <div className=\"section-header\">\r\n            <h2>{t('home.analytics.title', 'Platforma Tahlili')}</h2>\r\n            <p>{t('home.analytics.desc', 'Saytning qisqacha statistikasi')}</p>\r\n          </div>\r\n\r\n          <div className=\"charts-grid\">\r\n            <div className=\"chart-item\">\r\n              <h3>{t('home.analytics.users', 'Foydalanuvchilar')}</h3>\r\n              <ReactECharts\r\n                option={{\r\n                  animationDuration: 2500,\r\n                  animationEasing: 'cubicOut',\r\n                  tooltip: { trigger: 'item' },\r\n                  legend: { bottom: '5%', left: 'center' },\r\n                  series: [\r\n                    {\r\n                      name: 'Foydalanuvchilar',\r\n                      type: 'pie',\r\n                      radius: ['35%', '65%'],\r\n                      center: ['50%', '45%'],\r\n                      avoidLabelOverlap: false,\r\n                      itemStyle: {\r\n                        borderRadius: 0,\r\n                        borderColor: '#fff',\r\n                        borderWidth: 2\r\n                      },\r\n                      label: { show: false, position: 'center' },\r\n                      emphasis: {\r\n                        label: { show: true, fontSize: 20, fontWeight: 'bold' }\r\n                      },\r\n                      labelLine: { show: false },\r\n                      data: [\r\n                        { value: stats?.students_count || 0, name: 'O\\'quvchilar', itemStyle: { color: '#3b82f6' } },\r\n                        { value: stats?.teachers_count || 0, name: 'O\\'qituvchilar', itemStyle: { color: '#10b981' } }\r\n                      ]\r\n                    }\r\n                  ]\r\n                }}\r\n                style={{ height: '220px' }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"chart-item\">\r\n              <h3>{t('home.analytics.activity', 'Platforma Faolligi')}</h3>\r\n              <ReactECharts\r\n                option={{\r\n                  animationDuration: 2500,\r\n                  animationEasing: 'cubicOut',\r\n                  tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },\r\n                  grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },\r\n                  xAxis: [\r\n                    {\r\n                      type: 'category',\r\n                      data: ['Testlar', 'Urinishlar', 'Savollar'],\r\n                      axisTick: { alignWithLabel: true }\r\n                    }\r\n                  ],\r\n                  yAxis: [{ type: 'value' }],\r\n                  series: [\r\n                    {\r\n                      name: 'Soni',\r\n                      type: 'bar',\r\n                      barWidth: '60%',\r\n                      data: [\r\n                        { value: stats?.tests_count || 0, itemStyle: { color: '#f59e0b' } },\r\n                        { value: stats?.attempts_count || 0, itemStyle: { color: '#8b5cf6' } },\r\n                        { value: (stats?.tests_count || 0) * 15, itemStyle: { color: '#ec4899' } }\r\n                      ]\r\n                    }\r\n                  ]\r\n                }}\r\n                style={{ height: '220px' }}\r\n              />\r\n            </div>\r\n\r\n            {/* Third chart for diversity */}\r\n            <div className=\"chart-item wide-chart\">\r\n              <h3>{t('home.analytics.growth', 'Oylik Yaratilgan Testlar')}</h3>\r\n              <ReactECharts\r\n                option={{\r\n                  animationDuration: 2500,\r\n                  animationEasing: 'cubicOut',\r\n                  xAxis: {\r\n                    type: 'category',\r\n                    data: ['Yan', 'Fev', 'Mar', 'Apr', 'May', 'Iyun', 'Iyul'],\r\n                    boundaryGap: false\r\n                  },\r\n                  yAxis: {\r\n                    type: 'value'\r\n                  },\r\n                  series: [\r\n                    {\r\n                      name: 'Yaratilgan Testlar',\r\n                      data: [120, 132, 191, 234, 190, 330, 310],\r\n                      type: 'line',\r\n                      areaStyle: { color: 'rgba(245, 158, 11, 0.2)' },\r\n                      lineStyle: { color: '#f59e0b', width: 3 },\r\n                      itemStyle: { color: '#f59e0b' },\r\n                      smooth: true\r\n                    }\r\n                  ],\r\n                  grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },\r\n                  tooltip: { trigger: 'axis' }\r\n                }}\r\n                style={{ height: '220px' }}\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\LoginPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\NewsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":95,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[3203,3210],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useNews } from '../context/NewsContext';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Layout from '../components/Layout';\r\nimport '../styles/NewsPage.css';\r\n\r\nconst NewsPage = () => {\r\n  const { news } = useNews();\r\n  const { t, i18n } = useTranslation();\r\n\r\n  // Local state for pagination and lightbox\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [selectedNews, setSelectedNews] = useState(null);\r\n  const [isClosing, setIsClosing] = useState(false);\r\n  const itemsPerPage = 3;\r\n\r\n  // Combine news from context (mock data removed)\r\n  const allNews = [...news];\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(allNews.length / itemsPerPage);\r\n  const currentNews = allNews.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);\r\n\r\n  // Helper to format date\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return dateString;\r\n    const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };\r\n    return date.toLocaleDateString('uz-UZ', options);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsClosing(true);\r\n    setTimeout(() => {\r\n      setSelectedNews(null);\r\n      setIsClosing(false);\r\n    }, 300);\r\n  };\r\n\r\n  // Animation Logic\r\n  useEffect(() => {\r\n    const observerOptions = {\r\n      threshold: 0.1,\r\n      rootMargin: '0px'\r\n    };\r\n\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          entry.target.classList.add('in-view');\r\n        } else {\r\n          entry.target.classList.remove('in-view');\r\n        }\r\n      });\r\n    }, observerOptions);\r\n\r\n    const elementsToAnimate = document.querySelectorAll('.news-hero-section, .todo-item');\r\n    elementsToAnimate.forEach(el => observer.observe(el));\r\n\r\n    // Force check for items already in view\r\n    setTimeout(() => {\r\n      elementsToAnimate.forEach(el => {\r\n        const rect = el.getBoundingClientRect();\r\n        if (rect.top < window.innerHeight && rect.bottom >= 0) {\r\n          el.classList.add('in-view');\r\n        }\r\n      });\r\n    }, 100);\r\n\r\n    return () => observer.disconnect();\r\n  }, [currentNews]);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"news-page-container\">\r\n        {/* Hero Section */}\r\n        <section className=\"news-hero-section\">\r\n          <div className=\"news-hero-content\">\r\n            <h1>{t('news.updates')}</h1>\r\n            <p className=\"description\">{t('news.heroSubtitle')}</p>\r\n          </div>\r\n        </section>\r\n\r\n        {/* News List Section */}\r\n        <section className=\"news-list-section\">\r\n          <div className=\"news-section-container\">\r\n            <div className=\"news-todo-list\">\r\n              {allNews.length === 0 ? (\r\n                <div className=\"news-empty-state\">\r\n                  <span className=\"material-symbols-outlined icon\">newspaper</span>\r\n                  <h3>{t('news.noNews')}</h3>\r\n                </div>\r\n              ) : (\r\n                currentNews.map((item, index) => (\r\n                  <article key={item.id} className=\"news-card todo-item\">\r\n                    <div className=\"news-card-left\">\r\n                      <div className=\"todo-check\">\r\n                        <span className=\"material-symbols-outlined\">check_circle</span>\r\n                      </div>\r\n                      <div className=\"news-content-body\">\r\n                        <div className=\"news-date\">\r\n                          <span className=\"material-symbols-outlined\" style={{ fontSize: '1rem' }}>calendar_today</span>\r\n                          {formatDate(item.created_at)}\r\n                        </div>\r\n                        <h3 className=\"news-title\">\r\n                          {(i18n.language === 'uz' ? item.title_uz :\r\n                            i18n.language === 'ru' ? item.title_ru :\r\n                              item.title_en) || item.title}\r\n                        </h3>\r\n                        <p className=\"news-description\">\r\n                          {(i18n.language === 'uz' ? item.description_uz :\r\n                            i18n.language === 'ru' ? item.description_ru :\r\n                              item.description_en) || item.description}\r\n                        </p>\r\n                        <button className=\"read-more-btn\" onClick={() => setSelectedNews(item)}>\r\n                          {t('news.readMore')}\r\n                          <span className=\"material-symbols-outlined\">arrow_forward</span>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Media on the Right */}\r\n                    {item.media_file && (\r\n                      <div className=\"news-media-container\" onClick={() => setSelectedImage(item.media_file)}>\r\n                        {item.media_type === 'video' ? (\r\n                          <div className=\"video-placeholder\">\r\n                            <span className=\"material-symbols-outlined\">play_circle</span>\r\n                            <video src={item.media_file} />\r\n                          </div>\r\n                        ) : (\r\n                          <img src={item.media_file} alt={item.title} />\r\n                        )}\r\n                        <div className=\"zoom-overlay\">\r\n                          <span className=\"material-symbols-outlined\">zoom_in</span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </article>\r\n                ))\r\n              )}\r\n            </div>\r\n\r\n            {/* Pagination */}\r\n            {totalPages > 1 && (\r\n              <div className=\"news-pagination\">\r\n                <button\r\n                  disabled={currentPage === 1}\r\n                  onClick={() => setCurrentPage(p => p - 1)}\r\n                  className=\"pagination-btn\"\r\n                >\r\n                  <span className=\"material-symbols-outlined\">chevron_left</span>\r\n                </button>\r\n\r\n                {[...Array(totalPages)].map((_, i) => (\r\n                  <button\r\n                    key={i + 1}\r\n                    className={`pagination-btn ${currentPage === i + 1 ? 'active' : ''}`}\r\n                    onClick={() => setCurrentPage(i + 1)}\r\n                  >\r\n                    {i + 1}\r\n                  </button>\r\n                ))}\r\n\r\n                <button\r\n                  disabled={currentPage === totalPages}\r\n                  onClick={() => setCurrentPage(p => p + 1)}\r\n                  className=\"pagination-btn\"\r\n                >\r\n                  <span className=\"material-symbols-outlined\">chevron_right</span>\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        {/* News Detail Modal */}\r\n        {selectedNews && (\r\n          <div className={`news-modal-overlay ${isClosing ? 'closing' : ''}`} onClick={handleCloseModal}>\r\n            <div className=\"news-modal-content\" onClick={e => e.stopPropagation()}>\r\n              <button className=\"news-modal-close\" onClick={handleCloseModal}>\r\n                <span className=\"material-symbols-outlined\">close</span>\r\n              </button>\r\n              <div className=\"news-modal-body\">\r\n                {selectedNews.media_file && (\r\n                  <div className=\"news-modal-media\">\r\n                    {selectedNews.media_type === 'video' ? (\r\n                      <video src={selectedNews.media_file} controls autoPlay />\r\n                    ) : (\r\n                      <img src={selectedNews.media_file} alt={selectedNews.title} />\r\n                    )}\r\n                  </div>\r\n                )}\r\n                <div className=\"news-modal-info\">\r\n                  <div className=\"news-modal-date\">\r\n                    <span className=\"material-symbols-outlined\">calendar_today</span>\r\n                    {formatDate(selectedNews.created_at)}\r\n                  </div>\r\n                  <h2 className=\"news-modal-title\">\r\n                    {(i18n.language === 'uz' ? selectedNews.title_uz :\r\n                      i18n.language === 'ru' ? selectedNews.title_ru :\r\n                        selectedNews.title_en) || selectedNews.title}\r\n                  </h2>\r\n                  <div className=\"news-modal-description\">\r\n                    {(i18n.language === 'uz' ? selectedNews.description_uz :\r\n                      i18n.language === 'ru' ? selectedNews.description_ru :\r\n                        selectedNews.description_en) || selectedNews.description}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Image Modal (Lightbox) */}\r\n        {selectedImage && (\r\n          <div className=\"image-lightbox\" onClick={() => setSelectedImage(null)}>\r\n            <div className=\"lightbox-content\" onClick={e => e.stopPropagation()}>\r\n              <img src={selectedImage} alt=\"Enlarged\" />\r\n              <button className=\"close-lightbox\" onClick={() => setSelectedImage(null)}>\r\n                <span className=\"material-symbols-outlined\">close</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default NewsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\NotFoundPage.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n   9 |\n  10 |   useEffect(() => {\n> 11 |     setIsVisible(true);\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  12 |   }, []);\n  13 |\n  14 |   return (","line":11,"column":5,"nodeType":null,"endLine":11,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Layout from '../components/Layout';\r\nimport '../styles/NotFound.css';\r\n\r\nconst NotFoundPage = () => {\r\n  const navigate = useNavigate();\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsVisible(true);\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className={`not-found-container ${isVisible ? 'in-view' : ''}`}>\r\n        <div className=\"not-found-bg-glitch\"></div>\r\n        \r\n        <div className=\"not-found-content\">\r\n          <div className=\"not-found-eye\">\r\n            <span className=\"material-symbols-outlined\">visibility_off</span>\r\n          </div>\r\n          \r\n          <h1 className=\"not-found-code\">404</h1>\r\n          \r\n          <div className=\"not-found-text\">\r\n            <h2 className=\"not-found-title\">SAHIFA TOPILMADI</h2>\r\n            <p className=\"not-found-description\">\r\n              Siz qidirayotgan sahifa koinotda adashib qoldi yoki hech qachon mavjud bo'lmagan. \r\n              Ehtimol, u administrativ ravishda o'chirilgan bo'lishi ham mumkin.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"not-found-actions\">\r\n            <button className=\"btn-brutalist primary\" onClick={() => navigate(-1)}>\r\n              <span className=\"material-symbols-outlined\">arrow_back</span>\r\n              <span>ORQAGA</span>\r\n            </button>\r\n            <button className=\"btn-brutalist outline\" onClick={() => navigate('/')}>\r\n              <span className=\"material-symbols-outlined\">home</span>\r\n              <span>BOSH SAHIFA</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Decorative elements */}\r\n        <div className=\"brutalist-decor circle-1\"></div>\r\n        <div className=\"brutalist-decor square-1\"></div>\r\n        <div className=\"brutalist-decor cross-1\">+</div>\r\n        <div className=\"brutalist-decor cross-2\">+</div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default NotFoundPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\Onboarding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\RegisterPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\SellerDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[454,488],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport { Layout } from 'antd';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport 'antd/dist/reset.css';\r\n\r\n// Import seller sub-pages\r\nimport SellerOverview from './seller/SellerOverview';\r\nimport ManageStudents from './seller/ManageStudents';\r\nimport ManagePrices from './seller/ManagePrices';\r\n\r\n\r\nconst { Content } = Layout;\r\n\r\nconst SellerDashboard = () => {\r\n  const { currentUser } = useAuth();\r\n\r\n  return (\r\n    <Layout style={{ height: '100vh', backgroundColor: '#f8fafc', overflow: 'hidden' }}>\r\n\r\n      <Content\r\n        style={{\r\n          padding: '64px 24px 32px',\r\n          maxWidth: '1900px',\r\n          margin: '0 auto',\r\n          marginTop: '40px',\r\n          width: '100%',\r\n          height: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }}\r\n      >\r\n        <div\r\n          id=\"dashboard-content-container\"\r\n          data-lenis-prevent\r\n          style={{\r\n            background: '#ffffff',\r\n            padding: '32px',\r\n            flex: 1,\r\n            height: 'calc(100vh - 96px)',\r\n            border: '4px solid #000',\r\n            boxShadow: '12px 12px 0px #000',\r\n            borderRadius: 0,\r\n            transition: 'all 0.8s cubic-bezier(0.19, 1, 0.22, 1)',\r\n            willChange: 'height, min-height',\r\n            position: 'relative',\r\n            overflowY: 'auto'\r\n          }}\r\n        >\r\n          <Routes>\r\n            <Route path=\"/\" element={<SellerOverview />} />\r\n            <Route path=\"/students\" element={<ManageStudents />} />\r\n            <Route path=\"/prices\" element={<ManagePrices />} />\r\n          </Routes>\r\n        </div>\r\n      </Content>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default SellerDashboard;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\StudentDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\TeacherDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":33,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[1161,1173],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Routes, Route, useNavigate, useLocation } from 'react-router-dom';\r\nimport { Layout, Menu, Button, Typography, Dropdown, Space, Grid } from 'antd';\r\nimport {\r\n  MenuFoldOutlined,\r\n  MenuUnfoldOutlined,\r\n  HomeOutlined,\r\n  FileTextOutlined,\r\n  PlusOutlined,\r\n  BarChartOutlined,\r\n  LogoutOutlined,\r\n  BookOutlined,\r\n  UserOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport NotificationCenter from '../components/NotificationCenter';\r\n\r\n// Import teacher sub-pages\r\nimport TeacherOverview from './teacher/TeacherOverview';\r\nimport CreateTest from './teacher/CreateTest';\r\nimport MyTests from './teacher/MyTests';\r\nimport TeacherStatistics from './teacher/TeacherStatistics';\r\nimport TestDetails from './teacher/TestDetails';\r\nimport StudentResult from './teacher/StudentResult';\r\nimport SentLessons from './teacher/SentLessons';\r\nimport StudentProfileView from './student/StudentProfileView';\r\n\r\nconst { Header, Sider, Content } = Layout;\r\nconst { useBreakpoint } = Grid;\r\n\r\nconst TeacherDashboard = () => {\r\n  const [collapsed, setCollapsed] = React.useState(false);\r\n  const { currentUser, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const screens = useBreakpoint();\r\n  const isMobile = !screens.md;\r\n\r\n  const handleToggle = () => {\r\n    setCollapsed(!collapsed);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const menuItems = [\r\n    {\r\n      key: '/teacher',\r\n      icon: <HomeOutlined />,\r\n      label: 'Asosiy',\r\n    },\r\n    {\r\n      key: '/teacher/create-test',\r\n      icon: <PlusOutlined />,\r\n      label: 'Test yaratish',\r\n    },\r\n    {\r\n      key: '/teacher/my-tests',\r\n      icon: <FileTextOutlined />,\r\n      label: 'Mening testlarim',\r\n    },\r\n    {\r\n      key: '/teacher/sent-lessons',\r\n      icon: <BookOutlined />,\r\n      label: 'Yuborilgan darslar',\r\n    },\r\n    {\r\n      key: '/teacher/statistics',\r\n      icon: <BarChartOutlined />,\r\n      label: 'Statistika',\r\n    },\r\n  ];\r\n\r\n  const userMenuItems = [\r\n    {\r\n      key: 'logout',\r\n      icon: <LogoutOutlined />,\r\n      label: 'Chiqish',\r\n      onClick: handleLogout,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Layout style={{ height: '100vh', overflow: 'hidden' }}>\r\n      {/* Header */}\r\n      <Header\r\n        style={{\r\n          position: 'fixed',\r\n          top: 64,\r\n          left: 0,\r\n          right: 0,\r\n          zIndex: 1000,\r\n          padding: '0 24px',\r\n          background: '#ffffff',\r\n          borderBottom: '1px solid #f0f0f0',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.06)',\r\n        }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          {isMobile ? (\r\n            <Button\r\n              type=\"text\"\r\n              icon={<MenuFoldOutlined />}\r\n              onClick={handleToggle}\r\n              style={{ marginRight: 16 }}\r\n            />\r\n          ) : (\r\n            <Button\r\n              type=\"text\"\r\n              icon={collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}\r\n              onClick={handleToggle}\r\n              style={{ marginRight: 16 }}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <Space>\r\n          <Dropdown menu={{ items: userMenuItems }} placement=\"bottomRight\">\r\n            <Space style={{ cursor: 'pointer' }}>\r\n              <Button type=\"text\" icon={<UserOutlined />} />\r\n            </Space>\r\n          </Dropdown>\r\n        </Space>\r\n      </Header>\r\n\r\n      <Layout style={{ height: 'calc(100vh - 128px)', marginTop: 128 }}>\r\n        {/* Sidebar */}\r\n        <Sider\r\n          trigger={null}\r\n          collapsible\r\n          collapsed={collapsed}\r\n          width={280}\r\n          style={{\r\n            position: 'fixed',\r\n            left: 0,\r\n            top: 128,\r\n            bottom: 0,\r\n            background: '#ffffff',\r\n            borderRight: '1px solid #f0f0f0',\r\n            overflow: 'auto',\r\n            paddingTop: 16,\r\n          }}\r\n          breakpoint=\"md\"\r\n          onBreakpoint={(broken) => {\r\n            if (broken) {\r\n              setCollapsed(true);\r\n            }\r\n          }}\r\n        >\r\n          <Menu\r\n            mode=\"inline\"\r\n            selectedKeys={[location.pathname]}\r\n            style={{\r\n              border: 'none',\r\n              background: 'transparent',\r\n            }}\r\n            items={menuItems}\r\n            onClick={({ key }) => navigate(key)}\r\n          />\r\n        </Sider>\r\n\r\n        {/* Main Content */}\r\n        <Layout\r\n          style={{\r\n            marginLeft: collapsed ? 80 : 280,\r\n            transition: 'margin-left 0.2s',\r\n            height: '100%',\r\n            overflow: 'hidden'\r\n          }}\r\n        >\r\n          <Content\r\n            style={{\r\n              background: '#f8fafc',\r\n              padding: 24,\r\n              height: '100%',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n            }}\r\n          >\r\n            <div\r\n              id=\"dashboard-content-container\"\r\n              data-lenis-prevent\r\n              style={{\r\n                background: '#ffffff',\r\n                borderRadius: 8,\r\n                padding: 24,\r\n                flex: 1,\r\n                overflowY: 'auto',\r\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            >\r\n              <Routes>\r\n                <Route path=\"/\" element={<TeacherOverview />} />\r\n                <Route path=\"/create-test\" element={<CreateTest />} />\r\n                <Route path=\"/edit-test/:testId\" element={<CreateTest />} />\r\n                <Route path=\"/my-tests\" element={<MyTests />} />\r\n                <Route path=\"/test-details/:testId\" element={<TestDetails />} />\r\n                <Route path=\"/student-result/:attemptId\" element={<StudentResult />} />\r\n                <Route path=\"/student-profile/:id\" element={<StudentProfileView />} />\r\n                <Route path=\"/sent-lessons\" element={<SentLessons />} />\r\n                <Route path=\"/statistics\" element={<TeacherStatistics />} />\r\n              </Routes>\r\n            </div>\r\n          </Content>\r\n        </Layout>\r\n\r\n        {/* Mobile Overlay */}\r\n        {isMobile && !collapsed && (\r\n          <div\r\n            style={{\r\n              position: 'fixed',\r\n              top: 0,\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              background: 'rgba(0, 0, 0, 0.5)',\r\n              zIndex: 999,\r\n            }}\r\n            onClick={() => setCollapsed(true)}\r\n          />\r\n        )}\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default TeacherDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\UnbanPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":38,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Box,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  CircularProgress,\r\n} from '@mui/material';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst UnbanPage = () => {\r\n  const [code, setCode] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n  const { unbanWithCode } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!code.trim()) {\r\n      setError('Iltimos, unban kodini kiriting');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await unbanWithCode(code.trim());\r\n      setSuccess(true);\r\n      setTimeout(() => {\r\n        navigate('/student');\r\n      }, 2000);\r\n    } catch (error) {\r\n      setError('Noto\\'g\\'ri unban kodi. Iltimos, qayta urinib ko\\'ring.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (success) {\r\n    return (\r\n      <Box sx={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f8fafc',\r\n        p: 2\r\n      }}>\r\n        <Paper sx={{\r\n          p: 4,\r\n          maxWidth: 400,\r\n          width: '100%',\r\n          textAlign: 'center',\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)'\r\n        }}>\r\n          <Typography variant=\"h5\" sx={{\r\n            color: '#10b981',\r\n            fontWeight: 600,\r\n            mb: 2\r\n          }}>\r\n            тЬЕ Muvaffaqiyat!\r\n          </Typography>\r\n          <Typography sx={{ color: '#374151', mb: 3 }}>\r\n            Sizning profilingiz muvaffaqiyatli ochildi. Endi test topshirishingiz mumkin.\r\n          </Typography>\r\n          <Typography sx={{ color: '#6b7280' }}>\r\n            Avtomatik ravishda bosh sahifaga yo'naltirilmoqdasiz...\r\n          </Typography>\r\n        </Paper>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{\r\n      minHeight: '100vh',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      backgroundColor: '#f8fafc',\r\n      p: 2\r\n    }}>\r\n      <Paper sx={{\r\n        p: 4,\r\n        maxWidth: 400,\r\n        width: '100%',\r\n        backgroundColor: '#ffffff',\r\n        border: '1px solid #e2e8f0',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)'\r\n      }}>\r\n        <Typography variant=\"h4\" sx={{\r\n          textAlign: 'center',\r\n          fontWeight: 700,\r\n          color: '#1e293b',\r\n          mb: 2\r\n        }}>\r\n          ЁЯЪл Bloklangan profil\r\n        </Typography>\r\n\r\n        <Typography sx={{\r\n          textAlign: 'center',\r\n          color: '#6b7280',\r\n          mb: 4\r\n        }}>\r\n          Sizning profilingiz test qoidalarini buzganingiz uchun bloklangan.\r\n          Unban kodi orqali profilingizni ochishingiz mumkin.\r\n        </Typography>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        <Box component=\"form\" onSubmit={handleSubmit}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Unban kodi\"\r\n            value={code}\r\n            onChange={(e) => setCode(e.target.value)}\r\n            placeholder=\"4 xonali kod\"\r\n            inputProps={{\r\n              maxLength: 4,\r\n              style: { textAlign: 'center', fontSize: '1.5rem', letterSpacing: '0.5rem' }\r\n            }}\r\n            sx={{ mb: 3 }}\r\n            disabled={isLoading}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            disabled={isLoading || !code.trim()}\r\n            sx={{\r\n              py: 1.5,\r\n              fontSize: '1.1rem',\r\n              fontWeight: 600,\r\n              backgroundColor: '#3b82f6',\r\n              '&:hover': { backgroundColor: '#2563eb' }\r\n            }}\r\n          >\r\n            {isLoading ? <CircularProgress size={24} /> : 'Profilni ochish'}\r\n          </Button>\r\n        </Box>\r\n\r\n        <Typography sx={{\r\n          textAlign: 'center',\r\n          color: '#6b7280',\r\n          mt: 3,\r\n          fontSize: '0.9rem'\r\n        }}>\r\n          Kodni admin paneldan olishingiz mumkin.\r\n        </Typography>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UnbanPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\AddStudent.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":45,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":70,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"response"},"fix":{"range":[2408,2607],"text":""},"desc":"Remove unused variable 'response'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport 'animate.css';\r\nimport { Form, Input, Select, Button, Alert, Spin, Typography, Space, DatePicker, ConfigProvider, Divider } from 'antd';\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst AddStudent = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const isEditMode = !!id;\r\n  const [form] = Form.useForm();\r\n\r\n  const [formData, setFormData] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    classGroup: '',\r\n    direction: 'natural',\r\n    registrationDate: dayjs(),\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(isEditMode);\r\n\r\n  React.useEffect(() => {\r\n    if (isEditMode) {\r\n      const loadStudentData = async () => {\r\n        try {\r\n          const student = await apiService.getUser(id);\r\n          if (student) {\r\n            const nameParts = student.name ? student.name.split(' ') : ['', ''];\r\n            const data = {\r\n              firstName: nameParts[0] || '',\r\n              lastName: nameParts.slice(1).join(' ') || '',\r\n              classGroup: student.class_group || '',\r\n              direction: student.direction || 'natural',\r\n              registrationDate: student.registration_date ? dayjs(student.registration_date.split('T')[0]) : dayjs(),\r\n            };\r\n            setFormData(data);\r\n            form.setFieldsValue(data);\r\n          }\r\n        } catch (error) {\r\n          setError('O\\'quvchi ma\\'lumotlarini yuklashda xatolik yuz berdi');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      loadStudentData();\r\n    }\r\n  }, [id, isEditMode, form]);\r\n\r\n  const handleSubmit = async (values) => {\r\n    setError('');\r\n    setSuccess('');\r\n    try {\r\n      const studentData = {\r\n        name: `${values.firstName} ${values.lastName}`,\r\n        class_group: values.classGroup,\r\n        direction: formData.direction,\r\n        registration_date: formData.registrationDate.format('YYYY-MM-DD'),\r\n      };\r\n\r\n      if (isEditMode) {\r\n        await apiService.updateUser(id, studentData);\r\n        setSuccess('O\\'QUVCHI MA\\'LUMOTLARI YANGILANDI!');\r\n      } else {\r\n        const response = await apiService.post('/users/', {\r\n          ...studentData,\r\n          first_name: values.firstName,\r\n          last_name: values.lastName,\r\n          role: 'student',\r\n        });\r\n        setSuccess('YANGI O\\'QUVCHI MUVAFFAQIYATLI QO\\'SHILDI!');\r\n        form.resetFields();\r\n      }\r\n    } catch (err) {\r\n      setError('Xatolik yuz berdi: ' + (err.message || 'Noma\\'lum xatolik'));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 800 }}>YUKLANMOQDA...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Brutalist Header */}\r\n        <div style={{ marginBottom: '60px' }}>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={() => navigate('/admin/students')}\r\n            style={{ marginBottom: 24, fontWeight: 800, textTransform: 'uppercase', padding: 0 }}\r\n          >\r\n            ORTGA QAYTISH\r\n          </Button>\r\n          \r\n          <div style={{ \r\n            display: 'inline-block', \r\n            backgroundColor: '#000', \r\n            color: '#fff', \r\n            padding: '8px 16px', \r\n            fontWeight: 900, \r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            {isEditMode ? 'Tahrirlash' : 'Qo\\'shish'}\r\n          </div>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '2.5rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            {isEditMode ? 'Profilni Tahrirlash' : 'Yangi O\\'quvchi Qo\\'shish'}\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            O'quvchi ma'lumotlarini aniq va to'g'ri kiriting.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {success && (\r\n          <Alert\r\n            message={success}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ borderRadius: 0, border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, marginBottom: '24px', maxWidth: '800px' }}\r\n          />\r\n        )}\r\n\r\n        {error && (\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ borderRadius: 0, border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, marginBottom: '24px', maxWidth: '800px' }}\r\n          />\r\n        )}\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ \r\n          maxWidth: '800px',\r\n          padding: '40px',\r\n          border: '4px solid #000',\r\n          boxShadow: '15px 15px 0px #000',\r\n          backgroundColor: '#fff',\r\n          margin: '0 auto'\r\n        }}>\r\n          <Form\r\n            form={form}\r\n            layout=\"vertical\"\r\n            onFinish={handleSubmit}\r\n            size=\"large\"\r\n          >\r\n            <Space style={{ width: '100%' }} size=\"large\" direction=\"vertical\">\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                <Form.Item name=\"firstName\" label={<Text style={{ fontWeight: 900 }}>ISM</Text>} rules={[{ required: true }]}>\r\n                  <Input style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n                </Form.Item>\r\n                <Form.Item name=\"lastName\" label={<Text style={{ fontWeight: 900 }}>FAMILIYA</Text>} rules={[{ required: true }]}>\r\n                  <Input style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n                </Form.Item>\r\n              </div>\r\n\r\n              <Form.Item name=\"classGroup\" label={<Text style={{ fontWeight: 900 }}>SINF</Text>} rules={[{ required: true }]}>\r\n                <Select\r\n                  onChange={(value) => {\r\n                    const direction = value.endsWith('-A') ? 'exact' : 'natural';\r\n                    setFormData({ ...formData, classGroup: value, direction });\r\n                  }}\r\n                  style={{ borderRadius: 0, height: '50px' }}\r\n                >\r\n                  {[5,6,7,8,9,10,11].flatMap(grade =>\r\n                    [1,2,3,4].flatMap(num => {\r\n                      const baseClass = `${grade}-${String(num).padStart(2,'0')}`;\r\n                      return ['A', 'T'].map(suffix => {\r\n                        const classGroup = `${baseClass}-${suffix}`;\r\n                        return <Select.Option key={classGroup} value={classGroup}>{classGroup}</Select.Option>;\r\n                      });\r\n                    })\r\n                  )}\r\n                </Select>\r\n              </Form.Item>\r\n\r\n              <Form.Item label={<Text style={{ fontWeight: 900 }}>RO'YXATDAN O'TGAN SANA</Text>}>\r\n                <DatePicker\r\n                  value={formData.registrationDate}\r\n                  onChange={(date) => setFormData({ ...formData, registrationDate: date })}\r\n                  style={{ width: '100%', borderRadius: 0, border: '3px solid #000', height: '50px' }}\r\n                />\r\n              </Form.Item>\r\n\r\n              <Divider style={{ borderTop: '4px solid #000', margin: '20px 0' }} />\r\n\r\n              <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '16px' }}>\r\n                <Button \r\n                  onClick={() => navigate('/admin/students')}\r\n                  style={{ borderRadius: 0, border: '3px solid #000', height: '50px', fontWeight: 900, padding: '0 30px' }}\r\n                >BEKOR QILISH</Button>\r\n                <Button \r\n                  type=\"primary\"\r\n                  htmlType=\"submit\"\r\n                  style={{ borderRadius: 0, border: '3px solid #000', height: '50px', fontWeight: 900, padding: '0 30px', backgroundColor: '#000', color: '#fff' }}\r\n                >{isEditMode ? 'SAQLASH' : 'QO\\'SHISH'}</Button>\r\n              </div>\r\n            </Space>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default AddStudent;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\AddTeacher.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'values' is defined but never used.","line":67,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[2393,2399],"text":""},"desc":"Remove unused variable 'values'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport 'animate.css'\r\nimport { Form, Input, Select, Button, Alert, Spin, Typography, Card, Checkbox } from 'antd';\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst AddTeacher = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams(); // Get teacher ID from URL for editing\r\n  const isEditMode = !!id; // Check if we're in edit mode\r\n  const [form] = Form.useForm();\r\n\r\n  const [formData, setFormData] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    subjects: '',\r\n    isCurator: false,\r\n    curatorClass: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(isEditMode); // Loading state for edit mode\r\n\r\n  // Load teacher data for editing\r\n  React.useEffect(() => {\r\n    if (isEditMode) {\r\n      const loadTeacherData = async () => {\r\n        try {\r\n          const teacher = await apiService.getUser(id);\r\n          if (teacher) {\r\n            // Use first_name and last_name if available, otherwise split name\r\n            let firstName = teacher.first_name || '';\r\n            let lastName = teacher.last_name || '';\r\n\r\n            if (!firstName && !lastName && teacher.name) {\r\n              // Fallback to splitting name field\r\n              const nameParts = teacher.name.split(' ');\r\n              firstName = nameParts[0] || '';\r\n              lastName = nameParts.slice(1).join(' ') || '';\r\n            }\r\n\r\n            const data = {\r\n              firstName,\r\n              lastName,\r\n              subjects: teacher.subjects ? teacher.subjects.join(', ') : '',\r\n              isCurator: teacher.is_curator || false,\r\n              curatorClass: teacher.curator_class || '',\r\n            };\r\n            setFormData(data);\r\n            form.setFieldsValue(data);\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to load teacher data:', error);\r\n          setError('O\\'qituvchi ma\\'lumotlarini yuklashda xatolik yuz berdi');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      loadTeacherData();\r\n    }\r\n  }, [id, isEditMode, form]);\r\n\r\n  // ID generation is now handled by backend with admin-specific isolation\r\n\r\n  const handleSubmit = async (values) => {\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      const teacherData = {\r\n        name: `${formData.firstName} ${formData.lastName}`,\r\n        subjects: formData.subjects.split(',').map(s => s.trim()),\r\n        is_curator: formData.isCurator,\r\n        curator_class: formData.isCurator ? formData.curatorClass : null,\r\n      };\r\n\r\n      if (isEditMode) {\r\n        // Update existing teacher\r\n        await apiService.updateUser(id, teacherData);\r\n        setSuccess('O\\'qituvchi ma\\'lumotlari muvaffaqiyatli yangilandi!');\r\n      } else {\r\n        // Create new teacher via API (ID generation handled by backend)\r\n        const newTeacherData = {\r\n          ...teacherData,\r\n          first_name: formData.firstName,\r\n          last_name: formData.lastName,\r\n          role: 'teacher',\r\n        };\r\n\r\n        const response = await apiService.post('/users/', newTeacherData);\r\n        const createdTeacher = response;\r\n\r\n        setSuccess(\r\n          <div>\r\n            <strong>тЬЕ O'qituvchi muvaffaqiyatli qo'shildi!</strong><br/>\r\n            <strong>ID:</strong> {createdTeacher.display_id || createdTeacher.username}<br/>\r\n            <strong>Parol:</strong> {createdTeacher.generated_password}\r\n          </div>\r\n        );\r\n        setFormData({\r\n          firstName: '',\r\n          lastName: '',\r\n          subjects: '',\r\n          isCurator: false,\r\n          curatorClass: ''\r\n        });\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Failed to save teacher:', err);\r\n      setError('Xatolik yuz berdi: ' + (err.message || 'Noma\\'lum xatolik'));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '400px'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Typography.Text style={{ marginLeft: 16 }}>\r\n          Ma'lumotlar yuklanmoqda...\r\n        </Typography.Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px', backgroundColor: '#ffffff' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__slideInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0',\r\n        animationDelay: '0.1s',\r\n        animationFillMode: 'both'\r\n      }}>\r\n        <Button\r\n          className=\"animate__animated animate__fadeInLeft\"\r\n          type=\"default\"\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={() => navigate('/admin/teachers')}\r\n          style={{ marginRight: '12px', marginBottom: '8px', animationDelay: '0.2s', animationFillMode: 'both' }}\r\n        >\r\n          O'qituvchilarni boshqarishga qaytish\r\n        </Button>\r\n        <Typography.Title level={1} className=\"animate__animated animate__fadeInUp\" style={{ color: '#1e293b', marginBottom: '8px', animationDelay: '0.3s', animationFillMode: 'both' }}>\r\n          {isEditMode ? 'O\\'qituvchi ma\\'lumotlarini tahrirlash' : 'Yangi o\\'qituvchi qo\\'shish'}\r\n        </Typography.Title>\r\n        <Typography.Text className=\"animate__animated animate__fadeInUp\" style={{ fontSize: '18px', color: '#64748b', animationDelay: '0.4s', animationFillMode: 'both' }}>\r\n          {isEditMode ? 'O\\'qituvchi ma\\'lumotlarini yangilang' : 'Yangi o\\'qituvchi ma\\'lumotlarini kiriting'}\r\n        </Typography.Text>\r\n      </div>\r\n\r\n      {/* Success Message */}\r\n      {success && (\r\n        <Alert\r\n          className=\"animate__animated animate__bounceIn\"\r\n          message=\"Muvaffaqiyat\"\r\n          description={success}\r\n          type=\"success\"\r\n          showIcon\r\n          style={{ marginBottom: '24px' }}\r\n        />\r\n      )}\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <Alert\r\n          className=\"animate__animated animate__shakeX\"\r\n          message=\"Xatolik\"\r\n          description={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '24px' }}\r\n        />\r\n      )}\r\n\r\n      {/* Form */}\r\n      <Card className=\"animate__animated animate__fadeInUp\" style={{\r\n        padding: '24px',\r\n        backgroundColor: '#ffffff',\r\n        border: '1px solid #e2e8f0',\r\n        borderRadius: '12px',\r\n        maxWidth: '600px',\r\n        margin: '0 auto',\r\n        animationDelay: '0.5s',\r\n        animationFillMode: 'both'\r\n      }}>\r\n        <Form form={form} onFinish={handleSubmit} layout=\"vertical\">\r\n          <Form.Item\r\n            label=\"Ism\"\r\n            name=\"firstName\"\r\n            rules={[{ required: true, message: 'Ismni kiriting' }]}\r\n            style={{ marginBottom: '16px' }}\r\n          >\r\n            <Input\r\n              autoFocus\r\n              value={formData.firstName}\r\n              onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Familiya\"\r\n            name=\"lastName\"\r\n            rules={[{ required: true, message: 'Familiyani kiriting' }]}\r\n            style={{ marginBottom: '16px' }}\r\n          >\r\n            <Input\r\n              value={formData.lastName}\r\n              onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Fanlar (vergul bilan ajratilgan)\"\r\n            name=\"subjects\"\r\n            rules={[{ required: true, message: 'Fanlarni kiriting' }]}\r\n            style={{ marginBottom: '16px' }}\r\n          >\r\n            <Input\r\n              value={formData.subjects}\r\n              onChange={(e) => setFormData({ ...formData, subjects: e.target.value })}\r\n              placeholder=\"Masalan: Matematika, Fizika, Kimyo\"\r\n            />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Kurator\"\r\n            style={{ marginBottom: '16px' }}\r\n          >\r\n            <Checkbox\r\n              checked={formData.isCurator}\r\n              onChange={(e) => setFormData({\r\n                ...formData,\r\n                isCurator: e.target.checked,\r\n                curatorClass: e.target.checked ? formData.curatorClass : ''\r\n              })}\r\n            >\r\n              Kurator\r\n            </Checkbox>\r\n          </Form.Item>\r\n\r\n          {formData.isCurator && (\r\n            <Form.Item\r\n              label=\"Kurator sinfi\"\r\n              name=\"curatorClass\"\r\n              rules={[{ required: true, message: 'Kurator sinfini tanlang' }]}\r\n              style={{ marginBottom: '16px' }}\r\n            >\r\n              <Select\r\n                value={formData.curatorClass}\r\n                onChange={(value) => setFormData({ ...formData, curatorClass: value })}\r\n                placeholder=\"Sinf tanlang\"\r\n              >\r\n                {[5,6,7,8,9,10,11].flatMap(grade =>\r\n                  [1,2,3,4].map(num => {\r\n                    const classGroup = `${grade}-${String(num).padStart(2,'0')}`;\r\n                    return (\r\n                      <Select.Option key={classGroup} value={classGroup}>\r\n                        {classGroup}\r\n                      </Select.Option>\r\n                    );\r\n                  })\r\n                )}\r\n              </Select>\r\n            </Form.Item>\r\n          )}\r\n\r\n          {formData.firstName && formData.lastName && formData.subjects && (\r\n            <Alert\r\n              message=\"Ma'lumot\"\r\n              description={\r\n                <>\r\n                  <strong>ID va parol:</strong> Backend tomonidan admin-specific tarzda generatsiya qilinadi\r\n                  <br />\r\n                  <strong>ID format:</strong> ADM[AdminID]_[IsmFamiliya]...USTOZ...@test\r\n                  <br />\r\n                  <strong>Parol:</strong> 12 ta belgidan iborat tasodifiy parol\r\n                </>\r\n              }\r\n              type=\"info\"\r\n              showIcon\r\n              style={{ marginTop: '16px', marginBottom: '16px' }}\r\n            />\r\n          )}\r\n\r\n          <div style={{ marginTop: '24px', display: 'flex', gap: '12px' }}>\r\n            <Button\r\n              type=\"primary\"\r\n              htmlType=\"submit\"\r\n              block\r\n              style={{ padding: '12px', fontWeight: 600 }}\r\n            >\r\n              {isEditMode ? 'O\\'qituvchi ma\\'lumotlarini saqlash' : 'O\\'qituvchi qo\\'shish'}\r\n            </Button>\r\n            <Button\r\n              block\r\n              onClick={() => navigate('/admin/teachers')}\r\n              style={{ padding: '12px' }}\r\n            >\r\n              Bekor qilish\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTeacher;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\AdminOverview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[198,205],"text":""},"desc":"Remove unused variable 'theme'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n} from 'antd';\r\nimport { ConfigProvider, theme } from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  TeamOutlined,\r\n  SafetyCertificateOutlined,\r\n  BookOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  ReadOutlined,\r\n  SmileOutlined,\r\n} from '@ant-design/icons';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst AdminOverview = () => {\r\n  const [stats, setStats] = useState({\r\n    totalUsers: 0,\r\n    totalTeachers: 0,\r\n    totalStudents: 0,\r\n    totalTests: 0,\r\n    totalAttempts: 0,\r\n    activeTests: 0,\r\n    averageScore: 0,\r\n    highestScore: 0,\r\n    lowestScore: 0,\r\n    recentActivity: [],\r\n    allRecentActivity: [],\r\n    bannedUsers: []\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch real statistics from the database\r\n  useEffect(() => {\r\n    const fetchStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Fetch all users, tests, and attempts in parallel\r\n        const [usersData, testsData, attemptsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getTests(),\r\n          apiService.getAttempts()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const bannedUsers = users.filter(user => user.is_banned);\r\n        const tests = testsData.results || testsData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n\r\n        // Calculate statistics\r\n        const totalUsers = users.length;\r\n        const totalTeachers = users.filter(user => user.role === 'teacher').length;\r\n        const totalStudents = users.filter(user => user.role === 'student').length;\r\n        const premiumStudents = users.filter(user => user.role === 'student' && user.is_premium).length;\r\n        const totalTests = tests.length;\r\n        const totalAttempts = attempts.length;\r\n        const activeTests = tests.filter(test => test.is_active !== false).length;\r\n\r\n        // Calculate score statistics\r\n        const scores = attempts.map(attempt => attempt.score || 0);\r\n\r\n        // Calculate statistics\r\n        const averageScore = scores.length > 0\r\n          ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n          : 0;\r\n\r\n        const highestScore = scores.length > 0\r\n          ? Math.round(Math.max(...scores))\r\n          : 0;\r\n\r\n        const lowestScore = scores.length > 0\r\n          ? Math.round(Math.min(...scores))\r\n          : 0;\r\n\r\n        // Get recent activity (last 10 attempts for modal, 3 for overview)\r\n        const allRecentActivity = attempts\r\n          .sort((a, b) => new Date(b.submitted_at) - new Date(a.submitted_at))\r\n          .slice(0, 10)\r\n          .map(attempt => ({\r\n            id: attempt.id,\r\n            action: `Test yakunlandi: ${attempt.test_title || 'Noma\\'lum test'}`,\r\n            user: attempt.student_name || 'Noma\\'lum o\\'quvchi',\r\n            time: new Date(attempt.submitted_at).toLocaleDateString('uz-UZ'),\r\n            score: attempt.score\r\n          }));\r\n\r\n        const recentActivity = allRecentActivity.slice(0, 3);\r\n\r\n        setStats({\r\n          totalUsers,\r\n          totalTeachers,\r\n          totalStudents,\r\n          premiumStudents,\r\n          totalTests,\r\n          totalAttempts,\r\n          activeTests,\r\n          averageScore,\r\n          highestScore,\r\n          lowestScore,\r\n          recentActivity,\r\n          allRecentActivity,\r\n          bannedUsers\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStatistics();\r\n  }, []);\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix }) => (\r\n    <Card\r\n      style={{\r\n        backgroundColor: '#ffffff',\r\n        border: '1px solid #e2e8f0',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n        transition: 'all 0.3s ease',\r\n      }}\r\n      styles={{ body: { padding: '24px' } }}\r\n      hoverable\r\n    >\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n        <div style={{ flex: 1 }}>\r\n          <Text\r\n            style={{\r\n              fontSize: '12px',\r\n              fontWeight: 600,\r\n              textTransform: 'uppercase',\r\n              letterSpacing: '0.5px',\r\n              color: '#64748b',\r\n              display: 'block',\r\n              marginBottom: '8px'\r\n            }}\r\n          >\r\n            {title}\r\n          </Text>\r\n          <Statistic\r\n            value={value}\r\n            suffix={suffix}\r\n            styles={{\r\n              content: {\r\n                fontSize: '40px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n                lineHeight: 1.2\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n        <div\r\n          style={{\r\n            backgroundColor: color,\r\n            borderRadius: '12px',\r\n            padding: '16px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            marginLeft: '16px'\r\n          }}\r\n        >\r\n          {React.cloneElement(icon, {\r\n            style: {\r\n              fontSize: '32px',\r\n              color: '#ffffff'\r\n            }\r\n          })}\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16 }}>Ma'lumotlar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '24px' }}>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '16px' }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__fadeInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          Admin Umumiy ko'rinishi\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Platformaning umumiy statistikasi va faoliyati\r\n        </Text>\r\n      </div>\r\n\r\n      {/* All Statistics Cards with Entrance Animations */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n            <StatCard\r\n              title=\"Jami foydalanuvchilar\"\r\n              value={stats.totalUsers}\r\n              icon={<SafetyCertificateOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n            <StatCard\r\n              title=\"O'qituvchilar\"\r\n              value={stats.totalTeachers}\r\n              icon={<BookOutlined />}\r\n              color=\"#16a34a\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n            <StatCard\r\n              title=\"O'quvchilar\"\r\n              value={stats.totalStudents}\r\n              icon={<UserOutlined />}\r\n              color=\"#059669\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n            <StatCard\r\n              title=\"Jami testlar\"\r\n              value={stats.totalTests}\r\n              icon={<RiseOutlined />}\r\n              color=\"#7c3aed\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '500ms' }}>\r\n            <StatCard\r\n              title=\"Jami urinishlar\"\r\n              value={stats.totalAttempts}\r\n              icon={<TrophyOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '600ms' }}>\r\n            <StatCard\r\n              title=\"Faol testlar\"\r\n              value={stats.activeTests}\r\n              icon={<TeamOutlined />}\r\n              color=\"#d97706\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '700ms' }}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={stats.averageScore}\r\n              suffix=\"%\"\r\n              icon={<RiseOutlined />}\r\n              color=\"#16a34a\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '800ms' }}>\r\n            <StatCard\r\n              title=\"Eng yuqori ball\"\r\n              value={stats.highestScore}\r\n              suffix=\"%\"\r\n              icon={<TrophyOutlined />}\r\n              color=\"#059669\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '1000ms' }}>\r\n            <StatCard\r\n              title=\"Premium o'quvchilar\"\r\n              value={stats.premiumStudents}\r\n              icon={<SmileOutlined />}\r\n              color=\"#dc2626\"\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Banned Users Section with Entrance Animation */}\r\n      {stats.bannedUsers.length > 0 && (\r\n        <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '1000ms' }}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n              marginTop: '24px'\r\n            }}\r\n          >\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              marginBottom: '24px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px'\r\n            }}>\r\n              ЁЯЪл Bloklangan o'quvchilar\r\n            </Title>\r\n            <Row gutter={[24, 24]}>\r\n              {stats.bannedUsers.map((user) => (\r\n                <Col xs={24} sm={12} md={8} key={user.id}>\r\n                  <Card style={{\r\n                    backgroundColor: '#fef2f2',\r\n                    border: '1px solid #fecaca',\r\n                    borderRadius: '8px',\r\n                    transition: 'all 0.2s ease',\r\n                  }}\r\n                  hoverable\r\n                  >\r\n                    <div style={{ padding: '16px' }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '12px' }}>\r\n                        <Text style={{\r\n                          fontSize: '16px',\r\n                          fontWeight: 600,\r\n                          color: '#dc2626'\r\n                        }}>\r\n                          {user.name || user.username}\r\n                        </Text>\r\n                        <Text style={{\r\n                          fontSize: '12px',\r\n                          color: '#6b7280',\r\n                          backgroundColor: '#fee2e2',\r\n                          padding: '4px 8px',\r\n                          borderRadius: '4px',\r\n                          fontFamily: 'monospace',\r\n                          fontWeight: 'bold'\r\n                        }}>\r\n                          Kod: {user.unban_code}\r\n                        </Text>\r\n                      </div>\r\n                      <Text style={{\r\n                        fontSize: '14px',\r\n                        color: '#6b7280',\r\n                        marginBottom: '8px',\r\n                        display: 'block'\r\n                      }}>\r\n                        <strong>Bloklash sababi:</strong> {user.ban_reason}\r\n                      </Text>\r\n                      <Text style={{\r\n                        fontSize: '14px',\r\n                        color: '#6b7280'\r\n                      }}>\r\n                        <strong>Bloklangan:</strong> {user.ban_date ? new Date(user.ban_date).toLocaleDateString('uz-UZ') : 'Noma\\'lum'}\r\n                      </Text>\r\n                    </div>\r\n                  </Card>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          </Card>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminOverview;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\ClassDetails.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'tests' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":96,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":96,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"tests"},"fix":{"range":[2323,2328],"text":""},"desc":"Remove unused variable 'tests'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'recentActivity' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":195,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":195,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"recentActivity"},"fix":{"range":[5808,5851],"text":""},"desc":"Remove unused variable 'recentActivity'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Card,\r\n  Button,\r\n  Typography,\r\n  Avatar,\r\n  Table,\r\n  Tag,\r\n  Alert,\r\n  Row,\r\n  Col,\r\n  Space,\r\n  Statistic,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  TeamOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  UserOutlined,\r\n} from '@ant-design/icons';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst StatCard = ({ title, value, icon, color, suffix }) => (\r\n  <Card\r\n    style={{\r\n      backgroundColor: '#ffffff',\r\n      border: '1px solid #e2e8f0',\r\n      borderRadius: '12px',\r\n      boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n      transition: 'all 0.3s ease',\r\n    }}\r\n    styles={{ body: { padding: '24px' } }}\r\n    hoverable\r\n  >\r\n    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n      <div style={{ flex: 1 }}>\r\n        <Text\r\n          style={{\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.5px',\r\n            color: '#64748b',\r\n            display: 'block',\r\n            marginBottom: '8px'\r\n          }}\r\n        >\r\n          {title}\r\n        </Text>\r\n        <Statistic\r\n          value={value}\r\n          suffix={suffix}\r\n          styles={{\r\n            content: {\r\n              fontSize: '40px',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              lineHeight: 1.2\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n      <div\r\n        style={{\r\n          backgroundColor: color,\r\n          borderRadius: '12px',\r\n          padding: '16px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          marginLeft: '16px'\r\n        }}\r\n      >\r\n        {React.cloneElement(icon, {\r\n          style: {\r\n            fontSize: '32px',\r\n            color: '#ffffff'\r\n          }\r\n        })}\r\n      </div>\r\n    </div>\r\n  </Card>\r\n);\r\n\r\nconst ClassDetails = () => {\r\n  const { classGroup } = useParams();\r\n  const navigate = useNavigate();\r\n  const [students, setStudents] = useState([]);\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [attempts, setAttempts] = useState([]);\r\n  const [tests, setTests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadClassData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const [allUsers, allAttempts, allTests] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts(),\r\n          apiService.getTests()\r\n        ]);\r\n\r\n        const allStudents = allUsers.filter(user => user.role === 'student');\r\n        const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n\r\n        // Filter students by class\r\n        const classStudents = allStudents.filter(student => student.class_group === classGroup);\r\n        const classTeachers = allTeachers.filter(teacher => teacher.curator_class === classGroup);\r\n\r\n        setStudents(classStudents);\r\n        setTeachers(classTeachers);\r\n        setAttempts(allAttempts.results || allAttempts);\r\n        setTests(allTests.results || allTests);\r\n      } catch (error) {\r\n        console.error('Failed to load class data:', error);\r\n        setError('Sinflar ma\\'lumotlarini yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadClassData();\r\n  }, [classGroup]);\r\n\r\n  const getDirectionLabel = (direction) => {\r\n    return direction === 'natural' ? 'Tabiiy fanlar' : 'Aniq fanlar';\r\n  };\r\n\r\n  const getStudentAttemptCount = (studentId) => {\r\n    return attempts.filter(attempt => attempt.student === studentId).length;\r\n  };\r\n\r\n  const getStudentAverageScore = (studentId) => {\r\n    const studentAttempts = attempts.filter(attempt => attempt.student === studentId);\r\n    if (studentAttempts.length === 0) return 0;\r\n\r\n    const averageScore = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n    return Math.round(averageScore);\r\n  };\r\n\r\n  const getClassStatistics = () => {\r\n    if (students.length === 0) return { totalStudents: 0, totalAttempts: 0, averageScore: 0, activeStudents: 0 };\r\n\r\n    let totalScore = 0;\r\n    let totalAttempts = 0;\r\n    let studentsWithAttempts = 0;\r\n    let activeStudents = 0;\r\n\r\n    students.forEach(student => {\r\n      const studentAttempts = attempts.filter(attempt => attempt.student === student.id);\r\n      totalAttempts += studentAttempts.length;\r\n\r\n      if (studentAttempts.length > 0) {\r\n        const studentAverage = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n        totalScore += studentAverage;\r\n        studentsWithAttempts++;\r\n      }\r\n\r\n      // Active students (has login in last 30 days)\r\n      if (student.last_login && new Date(student.last_login) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)) {\r\n        activeStudents++;\r\n      }\r\n    });\r\n\r\n    return {\r\n      totalStudents: students.length,\r\n      totalAttempts,\r\n      averageScore: studentsWithAttempts > 0 ? Math.round(totalScore / studentsWithAttempts) : 0,\r\n      activeStudents\r\n    };\r\n  };\r\n\r\n  const getRecentActivity = () => {\r\n    const classAttempts = attempts.filter(attempt =>\r\n      students.some(student => student.id === attempt.student)\r\n    );\r\n\r\n    return classAttempts\r\n      .sort((a, b) => new Date(b.completed_at) - new Date(a.completed_at))\r\n      .slice(0, 10);\r\n  };\r\n\r\n  const getClassCurator = () => {\r\n    return teachers.find(teacher => teacher.curator_class === classGroup);\r\n  };\r\n\r\n  const statistics = getClassStatistics();\r\n  const recentActivity = getRecentActivity();\r\n  const curator = getClassCurator();\r\n\r\n  const columns = [\r\n    {\r\n      title: 'O\\'quvchi',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record) => (\r\n        <Space>\r\n          {record.is_premium && record.profile_photo_url ? (\r\n            <Avatar\r\n              src={record.profile_photo_url}\r\n              size={40}\r\n              style={{ border: '2px solid #e2e8f0' }}\r\n            />\r\n          ) : (\r\n            <Avatar\r\n              size={40}\r\n              style={{\r\n                backgroundColor: '#f1f5f9',\r\n                color: '#64748b',\r\n                fontSize: '14px',\r\n                fontWeight: 600,\r\n                border: '2px solid #e2e8f0'\r\n              }}\r\n            >\r\n              -\r\n            </Avatar>\r\n          )}\r\n          <div>\r\n            <Text strong style={{ color: '#1e293b', fontSize: '14px' }}>\r\n              {text}\r\n            </Text>\r\n            <br />\r\n            <Text style={{ color: '#64748b', fontSize: '12px', fontFamily: 'monospace' }}>\r\n              {record.display_id || record.username}\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Yo\\'nalish',\r\n      dataIndex: 'direction',\r\n      key: 'direction',\r\n      render: (direction) => (\r\n        <Tag\r\n          color={direction === 'natural' ? 'green' : 'blue'}\r\n          style={{ fontWeight: 600 }}\r\n        >\r\n          {getDirectionLabel(direction)}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Testlar',\r\n      key: 'attempts',\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 700, color: '#2563eb', fontSize: '18px' }}>\r\n          {getStudentAttemptCount(record.id)}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'averageScore',\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 700, color: '#059669', fontSize: '18px' }}>\r\n          {getStudentAverageScore(record.id)}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Oxirgi faollik',\r\n      dataIndex: 'last_login',\r\n      key: 'last_login',\r\n      render: (lastLogin) => (\r\n        <Text style={{ color: '#64748b', fontSize: '14px' }}>\r\n          {lastLogin ? new Date(lastLogin).toLocaleString('uz-UZ') : '-'}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Status',\r\n      dataIndex: 'is_banned',\r\n      key: 'status',\r\n      render: (isBanned) => (\r\n        <Tag color={isBanned ? 'red' : 'green'}>\r\n          {isBanned ? 'Bloklangan' : 'Faol'}\r\n        </Tag>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"animate__animated animate__fadeIn\" style={{\r\n        padding: '24px',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column',\r\n        gap: '24px'\r\n      }}>\r\n        <div className=\"animate__animated animate__pulse\">\r\n          <div style={{\r\n            position: 'relative',\r\n            width: '60px',\r\n            height: '60px'\r\n          }}>\r\n            <div className=\"animate__animated animate__spin animate__infinite\" style={{\r\n              position: 'absolute',\r\n              width: '60px',\r\n              height: '60px',\r\n              border: '4px solid rgba(226, 232, 240, 0.3)',\r\n              borderTop: '4px solid #2563eb',\r\n              borderRadius: '50%',\r\n              animation: 'spin 1s linear infinite'\r\n            }}></div>\r\n            <div className=\"animate__animated animate__spin animate__reverse animate__infinite\" style={{\r\n              position: 'absolute',\r\n              top: '10px',\r\n              left: '10px',\r\n              width: '40px',\r\n              height: '40px',\r\n              border: '3px solid rgba(37, 99, 235, 0.2)',\r\n              borderBottom: '3px solid #10b981',\r\n              borderRadius: '50%',\r\n              animation: 'spin 1.5s linear infinite'\r\n            }}></div>\r\n          </div>\r\n        </div>\r\n        <div className=\"animate__animated animate__fadeInUp\" style={{\r\n          textAlign: 'center'\r\n        }}>\r\n          <div className=\"animate__animated animate__pulse animate__infinite\" style={{\r\n            color: '#2563eb',\r\n            fontSize: '18px',\r\n            fontWeight: 600,\r\n            marginBottom: '8px'\r\n          }}>Yuklanmoqda</div>\r\n          <div className=\"animate__animated animate__flash animate__infinite\" style={{\r\n            color: '#64748b',\r\n            fontSize: '14px'\r\n          }}>Iltimos kuting...</div>\r\n        </div>\r\n        <style>{`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n          .animate__hover-lift:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);\r\n          }\r\n          .animate__card-entrance {\r\n            animation: cardEntrance 0.6s ease-out forwards;\r\n          }\r\n          @keyframes cardEntrance {\r\n            0% {\r\n              opacity: 0;\r\n              transform: translateY(30px) scale(0.9);\r\n            }\r\n            100% {\r\n              opacity: 1;\r\n              transform: translateY(0) scale(1);\r\n            }\r\n          }\r\n          .animate__slide-in-left {\r\n            animation: slideInLeft 0.5s ease-out forwards;\r\n          }\r\n          @keyframes slideInLeft {\r\n            0% {\r\n              opacity: 0;\r\n              transform: translateX(-50px);\r\n            }\r\n            100% {\r\n              opacity: 1;\r\n              transform: translateX(0);\r\n            }\r\n          }\r\n          .animate__zoom-in:hover {\r\n            animation: zoomIn 0.3s ease-out;\r\n          }\r\n          @keyframes zoomIn {\r\n            0% {\r\n              transform: scale(1);\r\n            }\r\n            50% {\r\n              transform: scale(1.05);\r\n            }\r\n            100% {\r\n              transform: scale(1);\r\n            }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__fadeInDown\" style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n      }}>\r\n        <Button\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={() => navigate('/admin/students')}\r\n          className=\"animate__animated animate__hover-lift\"\r\n          style={{\r\n            borderColor: '#2563eb',\r\n            color: '#2563eb',\r\n            marginRight: '16px',\r\n            transition: 'all 0.3s ease'\r\n          }}\r\n        >\r\n          Orqaga\r\n        </Button>\r\n        <div className=\"animate__animated animate__fadeInRight\" style={{ animationDelay: '0.2s' }}>\r\n          <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '0px' }}>\r\n            {classGroup} sinfi\r\n          </Title>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Alert */}\r\n      {error && (\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '24px' }}\r\n          closable\r\n          onClose={() => setError('')}\r\n        />\r\n      )}\r\n\r\n      {/* Statistics Cards */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n            <StatCard\r\n              title=\"Jami o'quvchi\"\r\n              value={statistics.totalStudents}\r\n              icon={<TeamOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n            <StatCard\r\n              title=\"Jami testlar\"\r\n              value={statistics.totalAttempts}\r\n              icon={<RiseOutlined />}\r\n              color=\"#16a34a\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={statistics.averageScore}\r\n              suffix=\"%\"\r\n              icon={<TrophyOutlined />}\r\n              color=\"#059669\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n            <StatCard\r\n              title=\"Faol o'quvchi\"\r\n              value={statistics.activeStudents}\r\n              icon={<UserOutlined />}\r\n              color=\"#dc2626\"\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Class Curator */}\r\n      {curator && (\r\n        <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.5s' }}>\r\n          <Card\r\n            className=\"animate__animated animate__card-entrance\"\r\n            style={{\r\n              borderRadius: '12px',\r\n              border: '1px solid #e2e8f0',\r\n              marginBottom: '24px',\r\n              transition: 'all 0.3s ease',\r\n              animationDelay: '0.6s'\r\n            }}\r\n            bodyStyle={{ padding: '24px' }}\r\n          >\r\n            <Title level={4} style={{ marginBottom: '16px', color: '#1e293b' }}>\r\n              Sinf rahbari\r\n            </Title>\r\n            <Space>\r\n              <Avatar\r\n                src={curator.is_premium && curator.profile_photo_url ? curator.profile_photo_url : undefined}\r\n                size={64}\r\n                className=\"animate__animated animate__zoomIn\"\r\n                style={{\r\n                  border: '3px solid #e2e8f0',\r\n                  backgroundColor: curator.is_premium && curator.profile_photo_url ? undefined : '#f1f5f9',\r\n                  color: '#64748b',\r\n                  fontSize: '24px',\r\n                  fontWeight: 600,\r\n                  transition: 'all 0.3s ease',\r\n                  cursor: 'pointer'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.target.style.transform = 'scale(1.1) rotate(5deg)';\r\n                  e.target.style.boxShadow = '0 8px 25px rgba(37, 99, 235, 0.3)';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.target.style.transform = 'scale(1) rotate(0deg)';\r\n                  e.target.style.boxShadow = 'none';\r\n                }}\r\n              >\r\n                {!curator.is_premium || !curator.profile_photo_url ? (curator.name ? curator.name.charAt(0) : 'R') : undefined}\r\n              </Avatar>\r\n              <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.7s' }}>\r\n                <Text strong style={{ fontSize: '18px', color: '#1e293b', display: 'block' }}>\r\n                  {curator.name}\r\n                </Text>\r\n                <Text style={{ color: '#64748b', fontSize: '14px' }}>\r\n                  {curator.display_id || curator.username}\r\n                </Text>\r\n                {curator.bio && (\r\n                  <Text style={{ color: '#64748b', fontSize: '14px', fontStyle: 'italic', display: 'block', marginTop: '8px' }}>\r\n                    \"{curator.bio}\"\r\n                  </Text>\r\n                )}\r\n              </div>\r\n            </Space>\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* Students List */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.8s' }}>\r\n        <Card\r\n          className=\"animate__animated animate__card-entrance\"\r\n          title={\r\n            <span className=\"animate__animated animate__slideInRight\">\r\n              {`Barcha o'quvchilar (${students.length} ta)`}\r\n            </span>\r\n          }\r\n          style={{\r\n            borderRadius: '12px',\r\n            border: '1px solid #e2e8f0',\r\n            transition: 'all 0.3s ease',\r\n            animationDelay: '0.9s'\r\n          }}\r\n        >\r\n          <Table\r\n            className=\"animate__animated animate__fadeInUp\"\r\n            columns={columns}\r\n            dataSource={students}\r\n            rowKey=\"id\"\r\n            pagination={{\r\n              pageSize: 10,\r\n              showSizeChanger: true,\r\n              showQuickJumper: true,\r\n              showTotal: (total) => `Jami ${total} ta o'quvchi`,\r\n            }}\r\n            locale={{\r\n              emptyText: 'Bu sinfda hali o\\'quvchilar yo\\'q'\r\n            }}\r\n            onRow={(record, index) => ({\r\n              className: 'animate__animated animate__fadeInUp',\r\n              style: { \r\n                animationDelay: `${0.1 + index * 0.05}s`,\r\n                transition: 'all 0.3s ease',\r\n                cursor: 'pointer'\r\n              },\r\n              onMouseEnter: (e) => {\r\n                e.currentTarget.style.backgroundColor = '#f0f9ff';\r\n                e.currentTarget.style.transform = 'scale(1.01)';\r\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';\r\n              },\r\n              onMouseLeave: (e) => {\r\n                e.currentTarget.style.backgroundColor = 'transparent';\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n              }\r\n            })}\r\n          />\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClassDetails;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\ClassStatistics.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'record' is defined but never used.","line":472,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":472,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"record"},"fix":{"range":[15913,15920],"text":""},"desc":"Remove unused variable 'record'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":472,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":472,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[15919,15926],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Button,\r\n  Input,\r\n  Alert,\r\n  Typography,\r\n  Space,\r\n  Avatar,\r\n  Tag,\r\n  Collapse,\r\n  Tooltip,\r\n  Spin,\r\n} from 'antd';\r\nimport 'animate.css';\r\nimport {\r\n  SearchOutlined,\r\n  EyeOutlined,\r\n  DownOutlined,\r\n  UpOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  TeamOutlined,\r\n  UserOutlined,\r\n} from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Panel } = Collapse;\r\n\r\nconst ClassStatistics = () => {\r\n  const [originalClasses, setOriginalClasses] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [expanded, setExpanded] = useState({});\r\n  const [sortField, setSortField] = useState('averageScore');\r\n  const [sortDirection, setSortDirection] = useState('desc');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const loadClassStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Fetch all necessary data\r\n        const [usersData, attemptsData, testsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts(),\r\n          apiService.getTests()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n        const tests = testsData.results || testsData;\r\n\r\n        const students = users.filter(user => user.role === 'student');\r\n        const teachers = users.filter(user => user.role === 'teacher');\r\n\r\n        // Group students by class\r\n        const classGroups = {};\r\n        students.forEach(student => {\r\n          const classGroup = student.class_group || 'Noma\\'lum';\r\n          if (!classGroups[classGroup]) {\r\n            classGroups[classGroup] = {\r\n              name: classGroup,\r\n              students: [],\r\n              curator: null\r\n            };\r\n          }\r\n          classGroups[classGroup].students.push(student);\r\n        });\r\n\r\n        // Assign curators - match base class name (without suffix like -A, -B)\r\n        Object.keys(classGroups).forEach(className => {\r\n          // Extract base class name (e.g., \"9-03-A\" -> \"9-03\")\r\n          const baseClassName = className.split('-').slice(0, 2).join('-');\r\n          const curator = teachers.find(teacher => teacher.curator_class === baseClassName);\r\n          if (curator) {\r\n            classGroups[className].curator = curator;\r\n          }\r\n        });\r\n\r\n        // Calculate statistics for each class\r\n        const classStats = Object.values(classGroups).map(classGroup => {\r\n          const classAttempts = attempts.filter(attempt =>\r\n            classGroup.students.some(student => student.id === attempt.student)\r\n          );\r\n\r\n          let totalScore = 0;\r\n          let studentsWithAttempts = 0;\r\n          let activeStudents = 0;\r\n\r\n          classGroup.students.forEach(student => {\r\n            const studentAttempts = classAttempts.filter(attempt => attempt.student === student.id);\r\n            if (studentAttempts.length > 0) {\r\n              const studentAverage = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n              totalScore += studentAverage;\r\n              studentsWithAttempts++;\r\n            }\r\n\r\n            // Active students (has login in last 30 days)\r\n            if (student.last_login && new Date(student.last_login) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)) {\r\n              activeStudents++;\r\n            }\r\n          });\r\n\r\n          return {\r\n            ...classGroup,\r\n            statistics: {\r\n              totalStudents: classGroup.students.length,\r\n              totalAttempts: classAttempts.length,\r\n              averageScore: studentsWithAttempts > 0 ? Math.round(totalScore / studentsWithAttempts) : 0,\r\n              activeStudents,\r\n              totalTests: tests.length // This could be refined to show tests taken by class\r\n            }\r\n          };\r\n        });\r\n\r\n        setOriginalClasses(classStats);\r\n      } catch (error) {\r\n        console.error('Failed to load class statistics:', error);\r\n        setError('Sinflar statistikasini yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadClassStatistics();\r\n  }, []);\r\n\r\n  // Filter classes based on search term\r\n  const filteredClasses = originalClasses.filter(classGroup => {\r\n    if (!searchTerm) return true;\r\n\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const className = classGroup.name.toLowerCase();\r\n    const curatorName = classGroup.curator ? classGroup.curator.name.toLowerCase() : '';\r\n\r\n    return className.includes(searchLower) || curatorName.includes(searchLower);\r\n  });\r\n\r\n  // Sort classes based on selected field and direction\r\n  const classes = useMemo(() => {\r\n    if (filteredClasses.length === 0) return [];\r\n\r\n    return [...filteredClasses].sort((a, b) => {\r\n      let aValue, bValue;\r\n\r\n      switch (sortField) {\r\n        case 'averageScore':\r\n          aValue = a.statistics.averageScore || 0;\r\n          bValue = b.statistics.averageScore || 0;\r\n          break;\r\n        case 'totalAttempts':\r\n          aValue = a.statistics.totalAttempts || 0;\r\n          bValue = b.statistics.totalAttempts || 0;\r\n          break;\r\n        case 'totalStudents':\r\n          aValue = a.statistics.totalStudents || 0;\r\n          bValue = b.statistics.totalStudents || 0;\r\n          break;\r\n        case 'activeStudents':\r\n          aValue = a.statistics.activeStudents || 0;\r\n          bValue = b.statistics.activeStudents || 0;\r\n          break;\r\n        case 'name':\r\n          aValue = (a.name || '').toLowerCase();\r\n          bValue = (b.name || '').toLowerCase();\r\n          if (sortDirection === 'asc') {\r\n            return aValue.localeCompare(bValue);\r\n          } else {\r\n            return bValue.localeCompare(aValue);\r\n          }\r\n        case 'curator':\r\n          aValue = (a.curator ? a.curator.name : '').toLowerCase();\r\n          bValue = (b.curator ? b.curator.name : '').toLowerCase();\r\n          if (sortDirection === 'asc') {\r\n            return aValue.localeCompare(bValue);\r\n          } else {\r\n            return bValue.localeCompare(aValue);\r\n          }\r\n        default:\r\n          return 0;\r\n      }\r\n\r\n      if (sortDirection === 'asc') {\r\n        return aValue - bValue;\r\n      } else {\r\n        return bValue - aValue;\r\n      }\r\n    });\r\n  }, [sortField, sortDirection, filteredClasses]);\r\n\r\n  const handleViewDetails = (className) => {\r\n    navigate(`/admin/class-details/${encodeURIComponent(className)}`);\r\n  };\r\n\r\n  const handleExpandClick = (className) => {\r\n    setExpanded((prev) => ({ ...prev, [className]: !prev[className] }));\r\n  };\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('desc');\r\n    }\r\n  };\r\n\r\n  const handleTestCountClick = (className) => {\r\n    const classGroup = classes.find(c => c.name === className);\r\n    if (classGroup) {\r\n      alert(`Testlar soni: ${classGroup.statistics.totalAttempts || 0}`);\r\n    }\r\n  };\r\n\r\n  const handleAverageScoreClick = (className) => {\r\n    const classGroup = classes.find(c => c.name === className);\r\n    if (classGroup) {\r\n      alert(`O'rtacha ball: ${(classGroup.statistics.averageScore || 0).toFixed(1)}%`);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: '',\r\n      key: 'expand',\r\n      width: 50,\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"text\"\r\n          icon={expanded[record.name] ? <UpOutlined /> : <DownOutlined />}\r\n          onClick={() => handleExpandClick(record.name)}\r\n          style={{ color: '#64748b' }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('name')}>\r\n          Sinf\r\n          {sortField === 'name' && (\r\n            sortDirection === 'asc' ? <ArrowUpOutlined style={{ marginLeft: 8, fontSize: 12 }} /> : <ArrowDownOutlined style={{ marginLeft: 8, fontSize: 12 }} />\r\n          )}\r\n        </div>\r\n      ),\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record, index) => (\r\n        <Space>\r\n          <div style={{\r\n            width: 32,\r\n            height: 32,\r\n            borderRadius: '50%',\r\n            backgroundColor: index === 0 ? '#fbbf24' : index === 1 ? '#e5e7eb' : index === 2 ? '#cd7f32' : '#f3f4f6',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontWeight: 700,\r\n            fontSize: '14px',\r\n            color: index < 3 ? '#ffffff' : '#64748b',\r\n          }}>\r\n            {index + 1}\r\n          </div>\r\n          <div>\r\n            <Text strong style={{ color: '#1e293b' }}>\r\n              {text}\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('curator')}>\r\n          Sinf rahbari\r\n          {sortField === 'curator' && (\r\n            sortDirection === 'asc' ? <ArrowUpOutlined style={{ marginLeft: 8, fontSize: 12 }} /> : <ArrowDownOutlined style={{ marginLeft: 8, fontSize: 12 }} />\r\n          )}\r\n        </div>\r\n      ),\r\n      key: 'curator',\r\n      render: (_, record) => {\r\n        if (record.curator) {\r\n          return (\r\n            <Space>\r\n              <Avatar\r\n                src={record.curator.is_premium && record.curator.profile_photo_url ? record.curator.profile_photo_url : undefined}\r\n                style={{\r\n                  backgroundColor: record.curator.is_premium && record.curator.profile_photo_url ? undefined : '#f1f5f9',\r\n                  color: '#64748b',\r\n                  fontSize: '14px',\r\n                  fontWeight: 600,\r\n                }}\r\n              >\r\n                {!record.curator.is_premium || !record.curator.profile_photo_url ? record.curator.name?.charAt(0) : undefined}\r\n              </Avatar>\r\n              <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n                {record.curator.name}\r\n              </Text>\r\n            </Space>\r\n          );\r\n        }\r\n        return (\r\n          <Text style={{ color: '#94a3b8', fontStyle: 'italic' }}>\r\n            Rahbar yo'q\r\n          </Text>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('totalStudents')}>\r\n          O'quvchilar soni\r\n          {sortField === 'totalStudents' && (\r\n            sortDirection === 'asc' ? <ArrowUpOutlined style={{ marginLeft: 8, fontSize: 12 }} /> : <ArrowDownOutlined style={{ marginLeft: 8, fontSize: 12 }} />\r\n          )}\r\n        </div>\r\n      ),\r\n      dataIndex: ['statistics', 'totalStudents'],\r\n      key: 'totalStudents',\r\n      render: (value) => (\r\n        <Text style={{ fontWeight: 500, color: '#1e293b' }}>\r\n          {value}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('activeStudents')}>\r\n          Faol o'quvchilar\r\n          {sortField === 'activeStudents' && (\r\n            sortDirection === 'asc' ? <ArrowUpOutlined style={{ marginLeft: 8, fontSize: 12 }} /> : <ArrowDownOutlined style={{ marginLeft: 8, fontSize: 12 }} />\r\n          )}\r\n        </div>\r\n      ),\r\n      dataIndex: ['statistics', 'activeStudents'],\r\n      key: 'activeStudents',\r\n      render: (value) => (\r\n        <Text style={{ fontWeight: 500, color: '#059669' }}>\r\n          {value}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('totalAttempts')}>\r\n          Testlar soni\r\n          {sortField === 'totalAttempts' && (\r\n            sortDirection === 'asc' ? <ArrowUpOutlined style={{ marginLeft: 8, fontSize: 12 }} /> : <ArrowDownOutlined style={{ marginLeft: 8, fontSize: 12 }} />\r\n          )}\r\n        </div>\r\n      ),\r\n      dataIndex: ['statistics', 'totalAttempts'],\r\n      key: 'totalAttempts',\r\n      render: (value, record) => (\r\n        <Text\r\n          style={{\r\n            fontWeight: 700,\r\n            color: '#2563eb',\r\n            fontSize: '18px',\r\n            cursor: 'pointer'\r\n          }}\r\n          onClick={() => handleTestCountClick(record.name)}\r\n        >\r\n          {value || 0}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('averageScore')}>\r\n          O'rtacha ball\r\n          {sortField === 'averageScore' && (\r\n            sortDirection === 'asc' ? <ArrowUpOutlined style={{ marginLeft: 8, fontSize: 12 }} /> : <ArrowDownOutlined style={{ marginLeft: 8, fontSize: 12 }} />\r\n          )}\r\n        </div>\r\n      ),\r\n      dataIndex: ['statistics', 'averageScore'],\r\n      key: 'averageScore',\r\n      render: (value, record) => (\r\n        <Text\r\n          style={{\r\n            fontWeight: 700,\r\n            color: '#059669',\r\n            fontSize: '18px',\r\n            cursor: 'pointer'\r\n          }}\r\n          onClick={() => handleAverageScoreClick(record.name)}\r\n        >\r\n          {value?.toFixed(1) || 0}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Amallar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<EyeOutlined />}\r\n          onClick={() => handleViewDetails(record.name)}\r\n          style={{\r\n            backgroundColor: '#2563eb',\r\n            borderColor: '#2563eb',\r\n            fontWeight: 600,\r\n            transition: 'all 0.3s ease'\r\n          }}\r\n          className=\"animate__animated\"\r\n        >\r\n          Ko'rish\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__slideInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          Sinflar reytingi\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Sinflarning o'zaro reytingi va statistik ko'rsatkichlari\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Alerts */}\r\n      {error && (\r\n        <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '100ms' }}>\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n            closable\r\n            onClose={() => setError('')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Search */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '200ms', marginBottom: '24px' }}>\r\n        <Input\r\n          placeholder=\"Sinf yoki rahbar nomini qidirish...\"\r\n          prefix={<SearchOutlined />}\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{\r\n            borderRadius: '8px',\r\n            maxWidth: '100%'\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '300ms' }}>\r\n        <Table\r\n          columns={columns}\r\n          dataSource={classes}\r\n          rowKey=\"name\"\r\n          loading={loading}\r\n          rowClassName={(record, index) => `animate__animated animate__fadeInLeft`}\r\n          onRow={(record, index) => ({\r\n            className: 'animate__animated animate__fadeInLeft',\r\n            style: { \r\n              animationDelay: `${index * 100}ms`,\r\n              transition: 'all 0.3s ease'\r\n            },\r\n            onMouseEnter: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1.02)';\r\n            },\r\n            onMouseLeave: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1)';\r\n            }\r\n          })}\r\n          pagination={{\r\n            pageSize: 10,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total) => `Jami ${total} ta sinf`,\r\n          }}\r\n          expandable={{\r\n            expandedRowKeys: Object.keys(expanded).filter(key => expanded[key]),\r\n            onExpandedRowsChange: (keys) => {\r\n              const newExpanded = {};\r\n              keys.forEach(key => newExpanded[key] = true);\r\n              setExpanded(newExpanded);\r\n            },\r\n            expandedRowRender: (record) => (\r\n              <div style={{\r\n                padding: '24px',\r\n                backgroundColor: '#f8fafc',\r\n                borderRadius: '8px',\r\n                border: '1px solid #e2e8f0',\r\n                margin: '16px 0'\r\n              }}>\r\n                <Title level={4} style={{ marginBottom: '16px', color: '#1e293b' }}>\r\n                  Batafsil ma'lumotlar\r\n                </Title>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '24px' }}>\r\n                  <div>\r\n                    <Text style={{\r\n                      fontSize: '12px',\r\n                      fontWeight: 600,\r\n                      color: '#64748b',\r\n                      marginBottom: '8px',\r\n                      display: 'block',\r\n                      textTransform: 'uppercase',\r\n                      letterSpacing: '0.5px'\r\n                    }}>\r\n                      Sinf kodi\r\n                    </Text>\r\n                    <Text style={{\r\n                      fontSize: '14px',\r\n                      fontWeight: 500,\r\n                      color: '#1e293b',\r\n                      fontFamily: 'monospace'\r\n                    }}>\r\n                      {record.name}\r\n                    </Text>\r\n                  </div>\r\n                  <div>\r\n                    <Text style={{\r\n                      fontSize: '12px',\r\n                      fontWeight: 600,\r\n                      color: '#64748b',\r\n                      marginBottom: '8px',\r\n                      display: 'block',\r\n                      textTransform: 'uppercase',\r\n                      letterSpacing: '0.5px'\r\n                    }}>\r\n                      Rahbar\r\n                    </Text>\r\n                    <Text style={{\r\n                      fontSize: '14px',\r\n                      fontWeight: 500,\r\n                      color: '#1e293b'\r\n                    }}>\r\n                      {record.curator ? record.curator.name : 'Yo\\'q'}\r\n                    </Text>\r\n                  </div>\r\n                  <div>\r\n                    <Text style={{\r\n                      fontSize: '12px',\r\n                      fontWeight: 600,\r\n                      color: '#64748b',\r\n                      marginBottom: '8px',\r\n                      display: 'block',\r\n                      textTransform: 'uppercase',\r\n                      letterSpacing: '0.5px'\r\n                    }}>\r\n                      Test muvaffaqiyati\r\n                    </Text>\r\n                    <Text style={{\r\n                      fontSize: '14px',\r\n                      fontWeight: 500,\r\n                      color: '#1e293b'\r\n                    }}>\r\n                      {record.statistics.totalAttempts > 0 ?\r\n                        `${(record.statistics.averageScore / 100).toFixed(1)}%` :\r\n                        'Testlar yo\\'q'\r\n                      }\r\n                    </Text>\r\n                  </div>\r\n                </div>\r\n                <div style={{ marginTop: '24px', display: 'flex', justifyContent: 'flex-end' }}>\r\n                  <Button\r\n                    type=\"primary\"\r\n                    icon={<EyeOutlined />}\r\n                    onClick={() => handleViewDetails(record.name)}\r\n                    style={{\r\n                      backgroundColor: '#2563eb',\r\n                      borderColor: '#2563eb',\r\n                      fontWeight: 600,\r\n                      transition: 'all 0.3s ease'\r\n                    }}\r\n                    className=\"animate__animated animate__pulse\"\r\n                  >\r\n                    To'liq ko'rish\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ),\r\n          }}\r\n          locale={{\r\n            emptyText: 'Sinflar mavjud emas'\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClassStatistics;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\ClassesPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setChartWidths' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":93,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setChartWidths"},"fix":{"range":[1918,1934],"text":""},"desc":"Remove unused variable 'setChartWidths'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":570,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":570,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[16535,16542],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  Progress,\r\n  Table,\r\n  Avatar,\r\n  Tag,\r\n  Space,\r\n  Button,\r\n  Tooltip,\r\n  Switch,\r\n} from 'antd';\r\nimport {\r\n  TeamOutlined,\r\n  UserOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  BookOutlined,\r\n  CalendarOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  InfoCircleOutlined,\r\n  LineChartOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title as ChartTitle,\r\n  Tooltip as ChartTooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line, Bar, Pie, Doughnut, Radar } from 'react-chartjs-2';\r\nimport 'animate.css';\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  ChartTitle,\r\n  ChartTooltip,\r\n  Legend,\r\n  Filler\r\n);\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst ClassesPage = () => {\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalClasses: 0,\r\n    totalStudents: 0,\r\n    averageStudentsPerClass: 0,\r\n    topPerformingClass: null,\r\n    classStatistics: [],\r\n    recentActivity: [],\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Chart visibility states\r\n  const [visibleCharts, setVisibleCharts] = useState({\r\n    classSizeDistribution: true,\r\n    performanceComparison: true,\r\n    monthlyActivity: true,\r\n    averageScoreTrend: true,\r\n    studentEngagement: true,\r\n    classRankings: true\r\n  });\r\n  \r\n  // Chart width control states\r\n  const [chartWidths, setChartWidths] = useState({\r\n    classSizeDistribution: 50,\r\n    performanceComparison: 50,\r\n    monthlyActivity: 50,\r\n    averageScoreTrend: 100,\r\n    studentEngagement: 50,\r\n    classRankings: 50\r\n  });\r\n  \r\n  // Toggle functions for charts\r\n  const toggleChart = (chartKey) => {\r\n    setVisibleCharts(prev => ({\r\n      ...prev,\r\n      [chartKey]: !prev[chartKey]\r\n    }));\r\n  };\r\n\r\n  // Fetch class statistics\r\n  useEffect(() => {\r\n    const fetchClassStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        const [usersData, attemptsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n\r\n        // Filter students and group by class\r\n        const students = users.filter(user => user.role === 'student');\r\n        const classGroups = {};\r\n\r\n        students.forEach(student => {\r\n          const classGroup = student.class_group || 'Noma\\'lum';\r\n          if (!classGroups[classGroup]) {\r\n            classGroups[classGroup] = [];\r\n          }\r\n          classGroups[classGroup].push(student);\r\n        });\r\n\r\n        // Calculate class statistics\r\n        const classStatistics = Object.entries(classGroups).map(([classGroup, classStudents]) => {\r\n          let totalScore = 0;\r\n          let studentsWithAttempts = 0;\r\n          let totalAttempts = 0;\r\n\r\n          classStudents.forEach(student => {\r\n            const studentAttempts = attempts.filter(attempt => attempt.student === student.id);\r\n            totalAttempts += studentAttempts.length;\r\n\r\n            if (studentAttempts.length > 0) {\r\n              const studentAverage = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n              totalScore += studentAverage;\r\n              studentsWithAttempts++;\r\n            }\r\n          });\r\n\r\n          const averageScore = studentsWithAttempts > 0 ? Math.round(totalScore / studentsWithAttempts) : 0;\r\n\r\n          return {\r\n            classGroup,\r\n            totalStudents: classStudents.length,\r\n            averageScore,\r\n            totalAttempts,\r\n            students: classStudents,\r\n            performance: averageScore >= 80 ? 'Yuqori' : averageScore >= 60 ? 'O\\'rta' : 'Past'\r\n          };\r\n        });\r\n\r\n        // Sort by total students\r\n        classStatistics.sort((a, b) => b.totalStudents - a.totalStudents);\r\n\r\n        // Find top performing class\r\n        const topPerformingClass = classStatistics.reduce((top, current) => \r\n          current.averageScore > top.averageScore ? current : top, \r\n          { averageScore: 0 }\r\n        );\r\n\r\n        // Get recent class activity (simulated)\r\n        const recentActivity = classStatistics.slice(0, 5).map(cls => ({\r\n          classGroup: cls.classGroup,\r\n          action: `${cls.totalStudents} ta o'quvchi qo'shildi`,\r\n          time: 'Oxirgi 24 soatda',\r\n          type: 'student_addition'\r\n        }));\r\n\r\n        setStats({\r\n          totalClasses: Object.keys(classGroups).length,\r\n          totalStudents: students.length,\r\n          averageStudentsPerClass: Math.round(students.length / Object.keys(classGroups).length),\r\n          topPerformingClass,\r\n          classStatistics,\r\n          recentActivity\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching class statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchClassStatistics();\r\n  }, []);\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix, trend }) => (\r\n    <div>\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          transition: 'all 0.3s ease',\r\n          marginBottom: '12px'\r\n        }}\r\n        styles={{ body: { padding: '24px' } }}\r\n        hoverable\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Text\r\n              style={{\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#64748b',\r\n                display: 'block',\r\n                marginBottom: '8px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              styles={{\r\n                content: {\r\n                  fontSize: '32px',\r\n                  fontWeight: 700,\r\n                  color: '#1e293b',\r\n                  lineHeight: 1.2\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              backgroundColor: color,\r\n              borderRadius: '12px',\r\n              padding: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '16px'\r\n            }}\r\n          >\r\n            {React.cloneElement(icon, {\r\n              style: {\r\n                fontSize: '28px',\r\n                color: '#ffffff'\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n      {trend && (\r\n        <Card\r\n          style={{\r\n            backgroundColor: trend.direction === 'up' ? '#f0fdf4' : '#fef2f2',\r\n            border: `1px solid ${trend.direction === 'up' ? '#bbf7d0' : '#fecaca'}`,\r\n            borderRadius: '8px',\r\n            padding: '12px 16px'\r\n          }}\r\n          bodyStyle={{ padding: '12px 16px' }}\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            {trend.direction === 'up' ? (\r\n              <ArrowUpOutlined style={{ color: '#16a34a', fontSize: '14px', marginRight: '6px' }} />\r\n            ) : (\r\n              <ArrowDownOutlined style={{ color: '#dc2626', fontSize: '14px', marginRight: '6px' }} />\r\n            )}\r\n            <Text style={{ \r\n              fontSize: '13px', \r\n              fontWeight: 600,\r\n              color: trend.direction === 'up' ? '#16a34a' : '#dc2626'\r\n            }}>\r\n              {trend.value} o'tgan oyga nisbatan\r\n            </Text>\r\n          </div>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const getPerformanceColor = (performance) => {\r\n    switch (performance) {\r\n      case 'Yuqori': return '#16a34a';\r\n      case 'O\\'rta': return '#f59e0b';\r\n      case 'Past': return '#dc2626';\r\n      default: return '#64748b';\r\n    }\r\n  };\r\n\r\n  // Chart Data Configuration\r\n  const classSizeDistributionChart = {\r\n    labels: stats.classStatistics.slice(0, 8).map(cls => cls.classGroup),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'quvchilar soni',\r\n        data: stats.classStatistics.slice(0, 8).map(cls => cls.totalStudents),\r\n        backgroundColor: [\r\n          'rgba(37, 99, 235, 0.8)',\r\n          'rgba(124, 58, 237, 0.8)',\r\n          'rgba(5, 150, 105, 0.8)',\r\n          'rgba(245, 158, 11, 0.8)',\r\n          'rgba(220, 38, 38, 0.8)',\r\n          'rgba(22, 163, 74, 0.8)',\r\n          'rgba(139, 92, 246, 0.8)',\r\n          'rgba(236, 72, 153, 0.8)'\r\n        ],\r\n        borderColor: [\r\n          '#2563eb', '#7c3aed', '#059669', '#f59e0b', \r\n          '#dc2626', '#16a34a', '#8b5cf6', '#ec4899'\r\n        ],\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const performanceComparisonChart = {\r\n    labels: stats.classStatistics.slice(0, 8).map(cls => cls.classGroup),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: stats.classStatistics.slice(0, 8).map(cls => cls.averageScore),\r\n        borderColor: '#8b5cf6',\r\n        backgroundColor: 'rgba(139, 92, 246, 0.4)',\r\n        borderWidth: 4,\r\n        fill: true,\r\n        tension: 0.3,\r\n        pointBackgroundColor: '#8b5cf6',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 3,\r\n        pointRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const monthlyActivityChart = {\r\n    labels: ['Yan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],\r\n    datasets: [\r\n      {\r\n        label: 'Yangi sinflar',\r\n        data: [3, 2, 4, 1, 3, 2],\r\n        borderColor: '#2563eb',\r\n        backgroundColor: 'rgba(37, 99, 235, 0.3)',\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#2563eb',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const averageScoreTrendChart = {\r\n    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],\r\n    datasets: [\r\n      {\r\n        label: 'Barcha sinflar o\\'rtacha',\r\n        data: [72, 75, 78, 74, 76, 79],\r\n        borderColor: '#16a34a',\r\n        backgroundColor: 'rgba(22, 163, 74, 0.3)',\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#16a34a',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const studentEngagementChart = {\r\n    labels: ['Yuqori', 'O\\'rta', 'Past'],\r\n    datasets: [\r\n      {\r\n        data: [\r\n          stats.classStatistics.filter(c => c.performance === 'Yuqori').length,\r\n          stats.classStatistics.filter(c => c.performance === 'O\\'rta').length,\r\n          stats.classStatistics.filter(c => c.performance === 'Past').length\r\n        ],\r\n        backgroundColor: ['#16a34a', '#f59e0b', '#dc2626'],\r\n        borderColor: ['#ffffff', '#ffffff', '#ffffff'],\r\n        borderWidth: 3,\r\n        hoverOffset: 15,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const classRankingsChart = {\r\n    labels: stats.classStatistics.slice(0, 6).map(cls => cls.classGroup),\r\n    datasets: [\r\n      {\r\n        label: 'Reyting balli',\r\n        data: stats.classStatistics.slice(0, 6).map(cls => cls.averageScore),\r\n        backgroundColor: 'rgba(245, 158, 11, 0.8)',\r\n        borderColor: '#f59e0b',\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: { size: 12, weight: 600 },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        display: true,\r\n        grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },\r\n        ticks: { color: '#6b7280', font: { size: 11, weight: 500 } },\r\n      },\r\n      y: {\r\n        display: true,\r\n        grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },\r\n        ticks: { color: '#6b7280', font: { size: 11, weight: 500 } },\r\n      },\r\n    },\r\n    animation: {\r\n      duration: 2000,\r\n      easing: 'easeInOutQuart',\r\n      delay: (context) => {\r\n        if (context.type === 'data' && context.mode === 'default') {\r\n          return context.dataIndex * 200;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n  };\r\n\r\n  const barChartOptions = {\r\n    ...chartOptions,\r\n    plugins: { ...chartOptions.plugins, legend: { ...chartOptions.plugins.legend, display: false } },\r\n    scales: { ...chartOptions.scales, y: { ...chartOptions.scales.y, beginAtZero: true } },\r\n    animation: {\r\n      duration: 2000,\r\n      easing: 'easeOutBounce',\r\n      delay: (context) => {\r\n        if (context.type === 'data' && context.mode === 'default') {\r\n          return context.dataIndex * 100;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n  };\r\n\r\n  const pieChartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'bottom',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: { size: 12, weight: 600 },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n      },\r\n    },\r\n    animation: {\r\n      animateRotate: true,\r\n      animateScale: true,\r\n      duration: 2500,\r\n      easing: 'easeOutElastic(1, .6)',\r\n    },\r\n  };\r\n\r\n  // Resizable Chart Component\r\n  const ResizableChart = ({ chartKey, title, icon, children, width, animationDelay = 0 }) => {\r\n    const chartWidth = chartWidths[chartKey] || width || 50;\r\n    const isVisible = visibleCharts[chartKey];\r\n    \r\n    if (!isVisible) return null;\r\n    \r\n    return (\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ \r\n        width: `${chartWidth}%`, \r\n        padding: '0 8px',\r\n        animationDelay: `${animationDelay}ms`\r\n      }}>\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            height: '400px',\r\n          }}\r\n          bodyStyle={{ padding: '16px', height: '100%', display: 'flex', flexDirection: 'column' }}\r\n          hoverable\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n            {icon}\r\n            <Title level={3} style={{ fontSize: '1.25rem', fontWeight: 700, color: '#1e293b', margin: '0 0 0 8px' }}>\r\n              {title}\r\n            </Title>\r\n          </div>\r\n          <div style={{ flex: 1, height: '320px' }}>\r\n            {children}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Sinf',\r\n      key: 'class',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <TeamOutlined style={{ color: '#64748b' }} />\r\n          <Text strong style={{ color: '#1e293b' }}>\r\n            {record.classGroup}\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'quvchilar',\r\n      key: 'students',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Avatar.Group maxCount={3} size=\"small\">\r\n            {record.students.slice(0, 3).map((student, index) => (\r\n              <Avatar\r\n                key={student.id}\r\n                style={{\r\n                  backgroundColor: '#f0f0f0',\r\n                  color: '#666',\r\n                  fontWeight: 600,\r\n                }}\r\n              >\r\n                {student.name ? student.name.charAt(0) : 'S'}\r\n              </Avatar>\r\n            ))}\r\n          </Avatar.Group>\r\n          <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n            {record.totalStudents} ta\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'average',\r\n      render: (_, record) => (\r\n        <div>\r\n          <Progress\r\n            percent={record.averageScore}\r\n            size=\"small\"\r\n            strokeColor={getPerformanceColor(record.performance)}\r\n            showInfo={false}\r\n            style={{ marginBottom: '4px' }}\r\n          />\r\n          <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n            {record.averageScore}%\r\n          </Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Jami testlar',\r\n      key: 'attempts',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.totalAttempts}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Ko\\'rsatkich',\r\n      key: 'performance',\r\n      render: (_, record) => (\r\n        <Tag\r\n          color={getPerformanceColor(record.performance)}\r\n          style={{\r\n            backgroundColor: `${getPerformanceColor(record.performance)}20`,\r\n            color: getPerformanceColor(record.performance),\r\n            fontWeight: 600\r\n          }}\r\n        >\r\n          {record.performance}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Amallar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          icon={<InfoCircleOutlined />}\r\n          onClick={() => navigate(`/admin/class-details/${record.classGroup}`)}\r\n          style={{ backgroundColor: '#2563eb', borderColor: '#2563eb' }}\r\n        >\r\n          Batafsil\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16 }}>Ma'lumotlar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '24px' }}>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '16px' }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{\r\n      paddingTop: '16px',\r\n      paddingBottom: '16px',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div className='animate__animated animate__slideInDown' style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          marginBottom: '8px'\r\n        }}>\r\n          <Title level={1} style={{\r\n            fontSize: '2.5rem',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '8px'\r\n          }}>\r\n            Sinflar statistikasi\r\n          </Title>\r\n        </div>\r\n        <Text style={{\r\n          fontSize: '1.125rem',\r\n          color: '#64748b',\r\n          fontWeight: 400\r\n        }}>\r\n          Barcha sinflarning umumiy ko'rsatkichlari va faoliyati\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Main Statistics Cards */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n            <StatCard\r\n              title=\"Jami sinflar\"\r\n              value={stats.totalClasses}\r\n              icon={<TeamOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n            <StatCard\r\n              title=\"Jami o'quvchilar\"\r\n              value={stats.totalStudents}\r\n              icon={<UserOutlined />}\r\n              color=\"#16a34a\"\r\n              trend={{ direction: 'up', value: '+12.5%' }}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n            <StatCard\r\n              title=\"O'rtacha o'quvchi/sinf\"\r\n              value={stats.averageStudentsPerClass}\r\n              icon={<BookOutlined />}\r\n              color=\"#7c3aed\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n            <StatCard\r\n              title=\"Eng yaxshi sinf\"\r\n              value={stats.topPerformingClass?.classGroup || 'N/A'}\r\n              icon={<TrophyOutlined />}\r\n              color=\"#f59e0b\"\r\n              suffix={`${stats.topPerformingClass?.averageScore || 0}%`}\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      <div style={{ marginTop: '16px' }}>\r\n        <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '500ms', marginBottom: '16px' }}>\r\n          <Card style={{\r\n            backgroundColor: '#eff6ff',\r\n            borderRadius: '12px',\r\n            padding: '16px 20px',\r\n            border: '1px solid #e2e8f0'\r\n          }}>\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 600,\r\n              color: '#1e293b',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              marginBottom: '16px'\r\n            }}>\r\n              <BarChartOutlined style={{ color: '#2563eb' }} />\r\n              Statistik ma'lumotlar va tahlillar\r\n            </Title>\r\n            \r\n            {/* Chart Management Controls */}\r\n            <div style={{\r\n              backgroundColor: '#ffffff',\r\n              borderRadius: '8px',\r\n              padding: '16px',\r\n              border: '1px solid #e2e8f0'\r\n            }}>\r\n              <Text style={{\r\n                fontSize: '14px',\r\n                fontWeight: 600,\r\n                color: '#374151',\r\n                display: 'block',\r\n                marginBottom: '12px'\r\n              }}>\r\n                Diagrammalar boshqaruvi\r\n              </Text>\r\n              <Row gutter={[16, 12]}>\r\n                <Col xs={24} sm={12} md={8}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>Natijalar taqsimoti</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts.classSizeDistribution}\r\n                      onChange={() => toggleChart('classSizeDistribution')}\r\n                      style={{ backgroundColor: visibleCharts.classSizeDistribution ? '#2563eb' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                <Col xs={24} sm={12} md={8}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>Sinf tahlili</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts.performanceComparison}\r\n                      onChange={() => toggleChart('performanceComparison')}\r\n                      style={{ backgroundColor: visibleCharts.performanceComparison ? '#8b5cf6' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                <Col xs={24} sm={12} md={8}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>Oylik o'sish</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts.monthlyActivity}\r\n                      onChange={() => toggleChart('monthlyActivity')}\r\n                      style={{ backgroundColor: visibleCharts.monthlyActivity ? '#16a34a' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                <Col xs={24} sm={12} md={8}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>Fanlar natijasi</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts.averageScoreTrend}\r\n                      onChange={() => toggleChart('averageScoreTrend')}\r\n                      style={{ backgroundColor: visibleCharts.averageScoreTrend ? '#f59e0b' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                <Col xs={24} sm={12} md={8}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>Yo'nalish taqsimoti</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts.studentEngagement}\r\n                      onChange={() => toggleChart('studentEngagement')}\r\n                      style={{ backgroundColor: visibleCharts.studentEngagement ? '#dc2626' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                <Col xs={24} sm={12} md={8}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>Faoliyat trendi</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts.classRankings}\r\n                      onChange={() => toggleChart('classRankings')}\r\n                      style={{ backgroundColor: visibleCharts.classRankings ? '#059669' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Charts Section */}\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"classSizeDistribution\"\r\n              title=\"Sinf hajmi taqsimoti\"\r\n              icon={<BarChartOutlined style={{ color: '#2563eb' }} />}\r\n              width={50}\r\n              animationDelay={100}\r\n            >\r\n              <Bar data={classSizeDistributionChart} options={barChartOptions} />\r\n            </ResizableChart>\r\n\r\n            <ResizableChart\r\n              chartKey=\"performanceComparison\"\r\n              title=\"Natijalar solishtiruvi\"\r\n              icon={<LineChartOutlined style={{ color: '#8b5cf6' }} />}\r\n              width={50}\r\n              animationDelay={200}\r\n            >\r\n              <Line data={performanceComparisonChart} options={chartOptions} />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"monthlyActivity\"\r\n              title=\"Oylik faoliyat\"\r\n              icon={<LineChartOutlined style={{ color: '#16a34a' }} />}\r\n              width={50}\r\n              animationDelay={300}\r\n            >\r\n              <Line data={monthlyActivityChart} options={chartOptions} />\r\n            </ResizableChart>\r\n\r\n            <ResizableChart\r\n              chartKey=\"averageScoreTrend\"\r\n              title=\"O'rtacha ball trendi\"\r\n              icon={<LineChartOutlined style={{ color: '#f59e0b' }} />}\r\n              width={50}\r\n              animationDelay={400}\r\n            >\r\n              <Line data={averageScoreTrendChart} options={chartOptions} />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"studentEngagement\"\r\n              title=\"O'quvchi ishtiroki\"\r\n              icon={<PieChartOutlined style={{ color: '#dc2626' }} />}\r\n              width={50}\r\n              animationDelay={500}\r\n            >\r\n              <Pie data={studentEngagementChart} options={pieChartOptions} />\r\n            </ResizableChart>\r\n\r\n            <ResizableChart\r\n              chartKey=\"classRankings\"\r\n              title=\"Sinf reytinglari\"\r\n              icon={<BarChartOutlined style={{ color: '#059669' }} />}\r\n              width={50}\r\n              animationDelay={600}\r\n            >\r\n              <Bar data={classRankingsChart} options={barChartOptions} />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent Activity */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '700ms' }}>\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            marginBottom: '24px'\r\n          }}\r\n        >\r\n          <Title level={3} style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '16px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px'\r\n          }}>\r\n            <CalendarOutlined style={{ color: '#2563eb' }} />\r\n            So'nggi faoliyat\r\n          </Title>\r\n          <Row gutter={[16, 16]}>\r\n            {stats.recentActivity.map((activity, index) => (\r\n              <Col xs={24} sm={12} md={8} key={index}>\r\n                <div style={{\r\n                  padding: '16px',\r\n                  backgroundColor: '#f8fafc',\r\n                  borderRadius: '8px',\r\n                  border: '1px solid #e2e8f0'\r\n                }}>\r\n                  <Text strong style={{ color: '#1e293b' }}>\r\n                    {activity.classGroup}\r\n                  </Text>\r\n                  <br />\r\n                  <Text style={{ color: '#64748b', fontSize: '14px' }}>\r\n                    {activity.action}\r\n                  </Text>\r\n                  <br />\r\n                  <Text style={{ color: '#94a3b8', fontSize: '12px' }}>\r\n                    {activity.time}\r\n                  </Text>\r\n                </div>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Classes Table */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '800ms' }}>\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          }}\r\n        >\r\n          <Title level={3} style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '24px'\r\n          }}>\r\n            Sinf ko'rsatkichlari\r\n          </Title>\r\n          <Table\r\n            columns={columns}\r\n            dataSource={stats.classStatistics}\r\n            rowKey=\"classGroup\"\r\n            pagination={{\r\n              pageSize: 10,\r\n              showSizeChanger: true,\r\n              showQuickJumper: true,\r\n              showTotal: (total) => `Jami ${total} ta sinf`,\r\n            }}\r\n            locale={{\r\n              emptyText: 'Sinflar mavjud emas'\r\n            }}\r\n          />\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClassesPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\ManageStudents.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":152,"column":6,"nodeType":"ArrayExpression","endLine":152,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadData]","fix":{"range":[5070,5072],"text":"[loadData]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'displayId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":325,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":325,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayId"},"fix":{"range":[11568,11662],"text":""},"desc":"Remove unused variable 'displayId'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Button,\r\n  Tag,\r\n  Alert,\r\n  Modal,\r\n  Typography,\r\n  Space,\r\n  Popconfirm,\r\n  Input,\r\n  Avatar,\r\n  Tabs,\r\n  Checkbox,\r\n  Row,\r\n  Col,\r\n  Tooltip,\r\n  Spin,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  DeleteOutlined,\r\n  EditOutlined,\r\n  SearchOutlined,\r\n  InfoCircleOutlined,\r\n  DownloadOutlined,\r\n  FileTextOutlined,\r\n  UserOutlined,\r\n  BlockOutlined,\r\n  CheckCircleOutlined,\r\n  TeamOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n} from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport * as XLSX from 'xlsx';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { TabPane } = Tabs;\r\n\r\nconst ManageStudents = () => {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('students');\r\n  const [students, setStudents] = useState([]);\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [attempts, setAttempts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [importModalVisible, setImportModalVisible] = useState(false);\r\n  const [exportModalVisible, setExportModalVisible] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [expandedClasses, setExpandedClasses] = useState(new Set());\r\n  const [importing, setImporting] = useState(false);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [classesPageSize, setClassesPageSize] = useState(10);\r\n  const fileInputRef = useRef(null);\r\n  \r\n  // Cache system for data\r\n  const [cache, setCache] = useState({\r\n    users: null,\r\n    attempts: null,\r\n    lastUpdated: null\r\n  });\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\r\n  \r\n  // Check if cache is valid\r\n  const isCacheValid = (lastUpdated) => {\r\n    if (!lastUpdated) return false;\r\n    return Date.now() - lastUpdated < CACHE_DURATION;\r\n  };\r\n  \r\n  // Load data with caching\r\n  const loadData = async (forceRefresh = false) => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      \r\n      // Check if we can use cached data\r\n      if (!forceRefresh && cache.users && cache.attempts && isCacheValid(cache.lastUpdated)) {\r\n        console.log('Using cached data');\r\n        setStudents(cache.users.filter(user => user.role === 'student'));\r\n        setTeachers(cache.users.filter(user => user.role === 'teacher'));\r\n        setAttempts(cache.attempts);\r\n        return;\r\n      }\r\n      \r\n      console.log('Loading fresh data from API');\r\n      \r\n      const [allUsersResponse, allAttemptsResponse] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getAttempts()\r\n      ]);\r\n      \r\n      // Handle both possible response formats\r\n      const allUsers = allUsersResponse.results || allUsersResponse;\r\n      const allAttempts = allAttemptsResponse.results || allAttemptsResponse;\r\n      \r\n      console.log('Loaded users:', allUsers.length);\r\n      console.log('Loaded attempts:', allAttempts.length);\r\n      \r\n      const allStudents = allUsers.filter(user => user.role === 'student');\r\n      const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n      \r\n      console.log('Filtered students:', allStudents.length);\r\n      console.log('Filtered teachers:', allTeachers.length);\r\n      \r\n      // Update cache\r\n      setCache({\r\n        users: allUsers,\r\n        attempts: allAttempts,\r\n        lastUpdated: Date.now()\r\n      });\r\n      \r\n      setStudents(allStudents);\r\n      setTeachers(allTeachers);\r\n      setAttempts(allAttempts);\r\n    } catch (error) {\r\n      console.error('Failed to load data:', error);\r\n      setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi: ' + (error.message || 'Noma\\'lum xatolik'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateStudentId = (firstName, lastName, classGroup, direction, randomDigits) => {\r\n    const lastNameUpper = lastName.toUpperCase().replace(\"'\", '');\r\n    const firstNameInitial = firstName.charAt(0).toUpperCase();\r\n    const grade = classGroup.split('-').slice(0, 2).join('');\r\n    const directionCode = direction === 'natural' ? 'N' : 'E';\r\n    return `${lastNameUpper}${firstNameInitial}T${grade}${directionCode}${randomDigits}@test`;\r\n  };\r\n\r\n  const generateStudentUsername = (firstName, lastName, classGroup, direction) => {\r\n    const lastNameLower = lastName.toLowerCase();\r\n    const firstNameInitial = firstName.charAt(0).toLowerCase();\r\n    const classCode = classGroup.split('-').slice(0, 2).join('');\r\n    const directionCode = direction === 'natural' ? 'n' : 'e';\r\n    return `${lastNameLower}${firstNameInitial}${classCode}${directionCode}`;\r\n  };\r\n\r\n  const generateStudentEmail = (firstName, lastName, classGroup, direction) => {\r\n    const username = generateStudentUsername(firstName, lastName, classGroup, direction);\r\n    return `${username}@student.testplatform.com`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const handleDelete = async (studentId) => {\r\n    try {\r\n      await apiService.deleteUser(studentId);\r\n      setStudents(students.filter(student => student.id !== studentId));\r\n      // Reload data to refresh the view\r\n      const [allUsers, allAttempts] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getAttempts()\r\n      ]);\r\n      const allStudents = allUsers.filter(user => user.role === 'student');\r\n      const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n      setStudents(allStudents);\r\n      setTeachers(allTeachers);\r\n      setAttempts(allAttempts.results || allAttempts);\r\n      setSuccess('O\\'quvchi muvaffaqiyatli o\\'chirildi!');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to delete student:', error);\r\n      setError('O\\'quvchini o\\'chirishda xatolik yuz berdi');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  };\r\n\r\n\r\n  const handleEditClick = (student) => {\r\n    navigate(`/admin/edit-student/${student.id}`);\r\n  };\r\n\r\n  const handleBanStudent = async (studentId) => {\r\n    try {\r\n      await apiService.banUser(studentId, 'Admin tomonidan bloklandi');\r\n      // Reload students\r\n      const [allUsers, allAttempts] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getAttempts()\r\n      ]);\r\n      const allStudents = allUsers.filter(user => user.role === 'student');\r\n      const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n      setStudents(allStudents);\r\n      setTeachers(allTeachers);\r\n      setAttempts(allAttempts.results || allAttempts);\r\n      setSuccess('O\\'quvchi muvaffaqiyatli bloklandi!');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to ban student:', error);\r\n      setError('O\\'quvchini bloklashda xatolik yuz berdi');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  };\r\n\r\n  const handleUnbanStudent = async (studentId) => {\r\n    try {\r\n      await apiService.unbanUser(studentId);\r\n      // Reload students\r\n      const [allUsers, allAttempts] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getAttempts()\r\n      ]);\r\n      const allStudents = allUsers.filter(user => user.role === 'student');\r\n      const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n      setStudents(allStudents);\r\n      setTeachers(allTeachers);\r\n      setAttempts(allAttempts.results || allAttempts);\r\n      setSuccess('O\\'quvchi muvaffaqiyatli blokdan chiqarildi!');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to unban student:', error);\r\n      setError('O\\'quvchini blokdan chiqarishda xatolik yuz berdi');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  };\r\n\r\n  const handleExportToExcel = () => {\r\n    const exportData = students.map((student, index) => ({\r\n      'тДЦ': index + 1,\r\n      'Ism': student.name || '',\r\n      'Familiya': student.name ? student.name.split(' ').slice(1).join(' ') : '',\r\n      'Sinf': student.class_group || '',\r\n      'Yo\\'nalish': getDirectionLabel(student.direction),\r\n      'Testlar soni': getStudentAttemptCount(student.id),\r\n      'O\\'rtacha ball': getStudentAverageScore(student.id),\r\n      'Status': student.is_banned ? 'Bloklangan' : 'Faol',\r\n      'Ro\\'yxatdan o\\'tgan sana': student.registration_date ? new Date(student.registration_date).toLocaleDateString('uz-UZ') : '',\r\n      'Oxirgi faollik': getStudentLastActivity(student.id) || '',\r\n      'Display ID': student.display_id || student.username || ''\r\n    }));\r\n\r\n    const ws = XLSX.utils.json_to_sheet(exportData);\r\n    const colWidths = [\r\n      { wch: 5 },  // тДЦ\r\n      { wch: 15 }, // Ism\r\n      { wch: 15 }, // Familiya\r\n      { wch: 10 }, // Sinf\r\n      { wch: 15 }, // Yo'nalish\r\n      { wch: 12 }, // Testlar soni\r\n      { wch: 12 }, // O'rtacha ball\r\n      { wch: 10 }, // Status\r\n      { wch: 15 }, // Ro'yxatdan o'tgan sana\r\n      { wch: 15 }, // Oxirgi faollik\r\n      { wch: 20 }  // Display ID\r\n    ];\r\n    ws['!cols'] = colWidths;\r\n\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, 'O\\'quvchilar');\r\n\r\n    const currentDate = new Date().toISOString().split('T')[0];\r\n    const filename = `oquvchilar_${currentDate}.xlsx`;\r\n\r\n    XLSX.writeFile(wb, filename);\r\n    setExportModalVisible(false);\r\n  };\r\n\r\n  const handleImportFromExcel = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      setImporting(true);\r\n      setError('');\r\n\r\n      const data = await file.arrayBuffer();\r\n      const workbook = XLSX.read(data);\r\n      const sheetName = workbook.SheetNames[0];\r\n      const worksheet = workbook.Sheets[sheetName];\r\n      const jsonData = XLSX.utils.sheet_to_json(worksheet);\r\n\r\n      if (jsonData.length === 0) {\r\n        setError('Excel faylda ma\\'lumotlar topilmadi');\r\n        return;\r\n      }\r\n\r\n      let successCount = 0;\r\n      let errorCount = 0;\r\n      const errors = [];\r\n\r\n      for (const row of jsonData) {\r\n        try {\r\n          // Handle simple 4-column format: тДЦ, Ism, Familiya, Sinf\r\n          const rowIndex = jsonData.indexOf(row) + 2; // +2 because Excel rows start at 1 and we skip header\r\n\r\n          // Get values - could be by column name or by position\r\n          let firstName, lastName, classGroup;\r\n\r\n          if (row.Ism && row.Familiya && row.Sinf) {\r\n            // Named columns\r\n            firstName = row.Ism;\r\n            lastName = row.Familiya;\r\n            classGroup = row.Sinf;\r\n          } else {\r\n            // Try positional access (assuming order: тДЦ, Ism, Familiya, Sinf)\r\n            const values = Object.values(row);\r\n            if (values.length >= 4) {\r\n              firstName = values[1]; // Index 1 = Ism\r\n              lastName = values[2];  // Index 2 = Familiya\r\n              classGroup = values[3]; // Index 3 = Sinf\r\n            }\r\n          }\r\n\r\n          // Validate required fields\r\n          if (!firstName || !lastName || !classGroup) {\r\n            errors.push(`Qator ${rowIndex}: Ism, Familiya va Sinf maydonlari majburiy`);\r\n            errorCount++;\r\n            continue;\r\n          }\r\n\r\n          const fullName = `${firstName} ${lastName}`;\r\n          const direction = classGroup.endsWith('-A') ? 'exact' : classGroup.endsWith('-T') ? 'natural' : 'natural';\r\n\r\n          // Generate credentials\r\n          const randomDigits = Math.floor(Math.random() * 900) + 100;\r\n          const displayId = generateStudentId(firstName, lastName, classGroup, direction, randomDigits);\r\n          const username = generateStudentUsername(firstName, lastName, classGroup, direction);\r\n          const email = generateStudentEmail(firstName, lastName, classGroup, direction);\r\n\r\n          // Check if student already exists\r\n          const existingStudent = students.find(s => s.username === username);\r\n          if (existingStudent) {\r\n            errors.push(`Qator ${rowIndex}: ${fullName} - bu o'quvchi allaqachon mavjud`);\r\n            errorCount++;\r\n            continue;\r\n          }\r\n\r\n          // Create student\r\n          const studentData = {\r\n            email: email,\r\n            password: 'temp_password',\r\n            name: fullName,\r\n            role: 'student',\r\n            class_group: classGroup,\r\n            direction: direction,\r\n            registration_date: row['Ro\\'yxatdan o\\'tgan sana'] ? new Date(row['Ro\\'yxatdan o\\'tgan sana']).toISOString().split('T')[0] : new Date().toISOString().split('T')[0],\r\n          };\r\n\r\n          await apiService.post('/users/', studentData);\r\n          successCount++;\r\n\r\n        } catch (error) {\r\n          errors.push(`Qator ${jsonData.indexOf(row) + 2}: ${error.message || 'Xatolik'}`);\r\n          errorCount++;\r\n        }\r\n      }\r\n\r\n      // Reload data\r\n      const [allUsersResponse, allAttemptsResponse] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getAttempts()\r\n      ]);\r\n      const allUsers = allUsersResponse.results || allUsersResponse;\r\n      const allAttempts = allAttemptsResponse.results || allAttemptsResponse;\r\n      const allStudents = allUsers.filter(user => user.role === 'student');\r\n      const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n      setStudents(allStudents);\r\n      setTeachers(allTeachers);\r\n      setAttempts(allAttempts);\r\n\r\n      // Show results\r\n      let message = `Import yakunlandi!\\nMuvaffaqiyatli: ${successCount}\\nXatoliklar: ${errorCount}`;\r\n      if (errors.length > 0) {\r\n        message += '\\n\\nXatoliklar:\\n' + errors.slice(0, 5).join('\\n');\r\n        if (errors.length > 5) {\r\n          message += `\\n...va yana ${errors.length - 5} ta xatolik`;\r\n        }\r\n      }\r\n      setSuccess(message);\r\n      setImportModalVisible(false);\r\n\r\n    } catch (error) {\r\n      console.error('Import error:', error);\r\n      setError('Excel faylini o\\'qishda xatolik yuz berdi: ' + error.message);\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n\r\n    // Clear file input\r\n    event.target.value = '';\r\n  };\r\n\r\n  const getDirectionLabel = (direction) => {\r\n    return direction === 'natural' ? 'Tabiiy fanlar' : 'Aniq fanlar';\r\n  };\r\n\r\n  const getStudentAttemptCount = (studentId) => {\r\n    return attempts.filter(attempt => attempt.student === studentId).length;\r\n  };\r\n\r\n  const getStudentAverageScore = (studentId) => {\r\n    const studentAttempts = attempts.filter(attempt => attempt.student === studentId);\r\n    if (studentAttempts.length === 0) return 0;\r\n\r\n    const averageScore = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n    return Math.round(averageScore);\r\n  };\r\n\r\n  const getStudentLastActivity = (studentId) => {\r\n    const studentAttempts = attempts.filter(attempt => attempt.student === studentId);\r\n    if (studentAttempts.length === 0) return null;\r\n\r\n    const lastAttempt = studentAttempts.sort((a, b) => new Date(b.completed_at) - new Date(a.completed_at))[0];\r\n    return new Date(lastAttempt.completed_at).toLocaleString('uz-UZ');\r\n  };\r\n\r\n  // Group students by class\r\n  const groupStudentsByClass = () => {\r\n    const classGroups = {};\r\n    students.forEach(student => {\r\n      const classGroup = student.class_group || 'Noma\\'lum';\r\n      if (!classGroups[classGroup]) {\r\n        classGroups[classGroup] = [];\r\n      }\r\n      classGroups[classGroup].push(student);\r\n    });\r\n    return classGroups;\r\n  };\r\n\r\n  // Get class statistics\r\n  const getClassStatistics = (classStudents) => {\r\n    if (classStudents.length === 0) return { totalStudents: 0, averageScore: 0, totalAttempts: 0 };\r\n\r\n    let totalScore = 0;\r\n    let totalAttempts = 0;\r\n    let studentsWithAttempts = 0;\r\n\r\n    classStudents.forEach(student => {\r\n      const studentAttempts = attempts.filter(attempt => attempt.student === student.id);\r\n      totalAttempts += studentAttempts.length;\r\n\r\n      if (studentAttempts.length > 0) {\r\n        const studentAverage = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n        totalScore += studentAverage;\r\n        studentsWithAttempts++;\r\n      }\r\n    });\r\n\r\n    return {\r\n      totalStudents: classStudents.length,\r\n      averageScore: studentsWithAttempts > 0 ? Math.round(totalScore / studentsWithAttempts) : 0,\r\n      totalAttempts: totalAttempts\r\n    };\r\n  };\r\n\r\n  // Get class curator\r\n  const getClassCurator = (classGroup) => {\r\n    const baseClass = classGroup.split('-').slice(0, 2).join('-');\r\n    return teachers.find(teacher => teacher.curator_class === baseClass);\r\n  };\r\n\r\n  // Toggle class expansion\r\n  const toggleClassExpansion = (classGroup) => {\r\n    const newExpanded = new Set(expandedClasses);\r\n    if (newExpanded.has(classGroup)) {\r\n      newExpanded.delete(classGroup);\r\n    } else {\r\n      newExpanded.add(classGroup);\r\n    }\r\n    setExpandedClasses(newExpanded);\r\n  };\r\n\r\n  const classGroups = groupStudentsByClass();\r\n  const sortedClasses = Object.keys(classGroups).sort();\r\n\r\n  // Filter students and classes based on search term\r\n  const filteredStudents = students.filter(student => {\r\n    if (!searchTerm) return true;\r\n\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const name = student.name || '';\r\n    const displayId = student.display_id || student.username || '';\r\n\r\n    return name.toLowerCase().includes(searchLower) ||\r\n           displayId.toLowerCase().includes(searchLower);\r\n  });\r\n\r\n  const filteredClasses = sortedClasses.filter(classGroup => {\r\n    if (!searchTerm) return true;\r\n\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const classStudents = classGroups[classGroup];\r\n\r\n    // Check class name\r\n    if (classGroup.toLowerCase().includes(searchLower)) return true;\r\n\r\n    // Check curator name\r\n    const curator = getClassCurator(classGroup);\r\n    if (curator && curator.name && curator.name.toLowerCase().includes(searchLower)) return true;\r\n\r\n    // Check student names\r\n    return classStudents.some(student => {\r\n      const name = student.name || '';\r\n      const displayId = student.display_id || student.username || '';\r\n      return name.toLowerCase().includes(searchLower) || displayId.toLowerCase().includes(searchLower);\r\n    });\r\n  });\r\n\r\n  // Students table columns\r\n  const studentColumns = [\r\n    {\r\n      title: 'O\\'quvchi',\r\n      key: 'student',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: '#f0f0f0',\r\n              color: '#666',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            {record.name ? record.name.charAt(0) : 'S'}\r\n          </Avatar>\r\n          <div>\r\n            <Text strong style={{ color: '#1e293b' }}>\r\n              {record.name}\r\n            </Text>\r\n            <br />\r\n            <Text style={{ color: '#64748b', fontSize: '12px', fontFamily: 'monospace' }}>\r\n              {record.display_id || record.username}\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sinf',\r\n      dataIndex: 'class_group',\r\n      key: 'class_group',\r\n      render: (text) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {text || '-'}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Yo\\'nalish',\r\n      dataIndex: 'direction',\r\n      key: 'direction',\r\n      render: (direction) => (\r\n        <Tag\r\n          color={direction === 'natural' ? 'green' : 'blue'}\r\n          style={{\r\n            backgroundColor: direction === 'natural' ? '#ecfdf5' : '#eff6ff',\r\n            color: direction === 'natural' ? '#059669' : '#2563eb',\r\n            fontWeight: 600\r\n          }}\r\n        >\r\n          {getDirectionLabel(direction)}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Test urinishlari',\r\n      key: 'attempts',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {getStudentAttemptCount(record.id)}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'average',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {getStudentAverageScore(record.id)}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Status',\r\n      dataIndex: 'is_banned',\r\n      key: 'status',\r\n      render: (isBanned) => (\r\n        <Tag color={isBanned ? 'red' : 'green'}>\r\n          {isBanned ? 'Bloklangan' : 'Faol'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Amallar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Tooltip title=\"Batafsil\">\r\n            <Button\r\n              type=\"text\"\r\n              icon={<InfoCircleOutlined />}\r\n              onClick={() => navigate(`/admin/student-details/${record.id}`)}\r\n              style={{ color: '#2563eb' }}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Tahrirlash\">\r\n            <Button\r\n              type=\"text\"\r\n              icon={<EditOutlined />}\r\n              onClick={() => handleEditClick(record)}\r\n              style={{ color: '#059669' }}\r\n            />\r\n          </Tooltip>\r\n          {record.is_banned ? (\r\n            <Tooltip title=\"Blokdan chiqarish\">\r\n              <Button\r\n                type=\"text\"\r\n                icon={<CheckCircleOutlined />}\r\n                onClick={() => handleUnbanStudent(record.id)}\r\n                style={{ color: '#059669' }}\r\n              />\r\n            </Tooltip>\r\n          ) : (\r\n            <Tooltip title=\"Bloklash\">\r\n              <Button\r\n                type=\"text\"\r\n                icon={<BlockOutlined />}\r\n                onClick={() => handleBanStudent(record.id)}\r\n                style={{ color: '#dc2626' }}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n          <Popconfirm\r\n            title=\"O'quvchini o'chirishni tasdiqlang\"\r\n            description={\r\n              <div>\r\n                <div>Haqiqatan ham ushbu o'quvchini o'chirishni xohlaysizmi?</div>\r\n                <div style={{ marginTop: '8px', fontWeight: 'bold' }}>{record.name}</div>\r\n                <div style={{ fontSize: '12px', color: '#666' }}>ID: {record.display_id || record.username}</div>\r\n              </div>\r\n            }\r\n            onConfirm={() => handleDelete(record.id)}\r\n            okText=\"Ha, o'chirish\"\r\n            cancelText=\"Yo'q\"\r\n            okButtonProps={{ danger: true }}\r\n            placement=\"topRight\"\r\n          >\r\n            <Tooltip title=\"O'chirish\">\r\n              <Button\r\n                type=\"text\"\r\n                icon={<DeleteOutlined />}\r\n                style={{ color: '#dc2626' }}\r\n              />\r\n            </Tooltip>\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // Classes table columns\r\n  const classColumns = [\r\n    {\r\n      title: 'Sinf',\r\n      key: 'class',\r\n      render: (_, record) => {\r\n        const isExpanded = expandedClasses.has(record.classGroup);\r\n        return (\r\n          <Space>\r\n            <TeamOutlined style={{ color: '#64748b' }} />\r\n            <Text strong style={{ color: '#1e293b' }}>\r\n              {record.classGroup}\r\n            </Text>\r\n            <Button\r\n              type=\"text\"\r\n              icon={isExpanded ? <ArrowUpOutlined /> : <ArrowDownOutlined />}\r\n              onClick={() => toggleClassExpansion(record.classGroup)}\r\n              style={{ color: '#64748b' }}\r\n            />\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Sinf rahbari',\r\n      key: 'curator',\r\n      render: (_, record) => {\r\n        const curator = getClassCurator(record.classGroup);\r\n        return (\r\n          <Text style={{ color: curator ? '#64748b' : '#94a3b8', fontStyle: curator ? 'normal' : 'italic' }}>\r\n            {curator ? curator.name : 'Rahbar yo\\'q'}\r\n          </Text>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'O\\'quvchilar soni',\r\n      key: 'studentCount',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.stats.totalStudents}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Jami testlar',\r\n      key: 'totalTests',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.stats.totalAttempts}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'averageScore',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.stats.averageScore}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Amallar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          icon={<InfoCircleOutlined />}\r\n          onClick={() => navigate(`/admin/class-details/${record.classGroup}`)}\r\n          style={{ backgroundColor: '#2563eb', borderColor: '#2563eb' }}\r\n        >\r\n          Batafsil\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // Prepare classes data for table\r\n  const classesData = filteredClasses.map(classGroup => {\r\n    const classStudents = classGroups[classGroup];\r\n    const stats = getClassStatistics(classStudents);\r\n    return {\r\n      key: classGroup,\r\n      classGroup,\r\n      stats,\r\n      students: classStudents\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__slideInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          O'quvchilarni boshqarish\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          O'quvchilar va sinflar ma'lumotlarini boshqaring\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Alerts */}\r\n      {success && (\r\n        <div className=\"animate__animated animate__slideInRight\">\r\n          <Alert\r\n            message={success}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n            closable\r\n            onClose={() => setSuccess('')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"animate__animated animate__slideInRight\">\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n            closable\r\n            onClose={() => setError('')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Controls */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '24px'\r\n      }}>\r\n        <Input\r\n          placeholder=\"O'quvchi yoki sinf nomini qidirish...\"\r\n          prefix={<SearchOutlined />}\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{\r\n            width: '100%',\r\n            borderRadius: '8px',\r\n            marginRight: '10px'\r\n          }}\r\n        />\r\n        <Space>\r\n          <Button\r\n            type=\"default\"\r\n            icon={<FileTextOutlined />}\r\n            onClick={() => setImportModalVisible(true)}\r\n            style={{ \r\n              borderColor: '#7c3aed', \r\n              color: '#7c3aed',\r\n            }}\r\n          >\r\n            Excel fayldan import\r\n          </Button>\r\n          <Button\r\n            type=\"default\"\r\n            icon={<DownloadOutlined />}\r\n            onClick={() => setExportModalVisible(true)}\r\n            style={{ borderColor: '#059669', color: '#059669' }}\r\n          >\r\n            Excel faylga export\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<PlusOutlined />}\r\n            onClick={() => navigate('/admin/add-student')}\r\n            style={{\r\n              backgroundColor: '#2563eb',\r\n              borderColor: '#2563eb',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            O'quvchi qo'shish\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n\r\n      {/* Search Results Info */}\r\n      {searchTerm && (\r\n        <Text style={{ marginBottom: '16px', color: '#64748b' }}>\r\n          {activeTab === 'students' ? filteredStudents.length : filteredClasses.length} ta natija topildi\r\n        </Text>\r\n      )}\r\n\r\n      {/* Tabs */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '300ms' }}>\r\n        <Tabs activeKey={activeTab} onChange={setActiveTab} style={{ marginBottom: '24px' }}>\r\n        <TabPane tab=\"ЁЯСе O'quvchilar\" key=\"students\">\r\n            <Table\r\n              columns={studentColumns}\r\n              dataSource={filteredStudents}\r\n              rowKey=\"id\"\r\n              loading={loading}\r\n              pagination={{\r\n                pageSize: pageSize,\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total) => `Jami ${total} ta o'quvchi`,\r\n                pageSizeOptions: ['10', '20', '50', '100'],\r\n                onShowSizeChange: (current, size) => setPageSize(size),\r\n              }}\r\n              locale={{\r\n                emptyText: 'O\\'quvchilar mavjud emas'\r\n              }}\r\n             onRow={(record, index) => ({\r\n              className: 'animate__animated animate__fadeInLeft',\r\n              style: { \r\n              animationDelay: `${index * 100}ms`,\r\n              transition: 'all 0.3s ease'\r\n              },\r\n             onMouseEnter: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1.02)';\r\n              },\r\n             onMouseLeave: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1)';\r\n             }\r\n             })}\r\n            />\r\n\r\n        </TabPane>\r\n        \r\n        <TabPane tab=\"ЁЯПл Sinflar\" key=\"classes\">\r\n            <Table\r\n              columns={classColumns}\r\n              dataSource={classesData}\r\n              rowKey=\"classGroup\"\r\n              loading={loading}\r\n              pagination={{\r\n                pageSize: classesPageSize,\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total) => `Jami ${total} ta sinf`,\r\n                pageSizeOptions: ['10', '20', '50', '100'],\r\n                onShowSizeChange: (current, size) => setClassesPageSize(size),\r\n              }}\r\n              locale={{\r\n                emptyText: 'Sinflar mavjud emas'\r\n              }}\r\n              expandable={{\r\n                expandedRowKeys: Array.from(expandedClasses),\r\n                onExpandedRowsChange: (keys) => setExpandedClasses(new Set(keys)),\r\n                expandedRowRender: (record) => (\r\n                  <div style={{ padding: '16px', backgroundColor: '#f8fafc' }}>\r\n                    <Text strong style={{ marginBottom: '16px', display: 'block' }}>\r\n                      {record.classGroup} sinfi o'quvchilari:\r\n                    </Text>\r\n                    <Row gutter={[16, 16]}>\r\n                      {record.students.map((student) => (\r\n                        <Col xs={24} sm={12} md={8} lg={6} key={student.id}>\r\n                          <Card size=\"small\" style={{ backgroundColor: '#ffffff' }}>\r\n                            <Space>\r\n                              <Avatar\r\n                                size=\"small\"\r\n                                style={{\r\n                                  backgroundColor: '#f0f0f0',\r\n                                  color: '#666',\r\n                                }}\r\n                              >\r\n                                {student.name ? student.name.charAt(0) : 'S'}\r\n                              </Avatar>\r\n                              <div>\r\n                                <Text strong style={{ fontSize: '14px' }}>\r\n                                  {student.name}\r\n                                </Text>\r\n                                <br />\r\n                                <Text style={{ color: '#64748b', fontSize: '12px' }}>\r\n                                  {getStudentAverageScore(student.id)}% | {getStudentAttemptCount(student.id)} test\r\n                                </Text>\r\n                              </div>\r\n                            </Space>\r\n                          </Card>\r\n                        </Col>\r\n                      ))}\r\n                    </Row>\r\n                  </div>\r\n                ),\r\n              }}\r\n            />\r\n        </TabPane>\r\n      </Tabs>\r\n      </div>\r\n\r\n      {/* Empty State */}\r\n      {((activeTab === 'students' && filteredStudents.length === 0) || \r\n        (activeTab === 'classes' && filteredClasses.length === 0)) && !loading && (\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ textAlign: 'center', padding: '48px 0' }}>\r\n          <Text style={{ fontSize: '16px', color: '#64748b' }}>\r\n            {searchTerm ? 'Qidiruv bo\\'yicha natijalar topilmadi' : 'Ma\\'lumotlar mavjud emas'}\r\n          </Text>\r\n          <br />\r\n          {!searchTerm && (\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => navigate('/admin/add-student')}\r\n              style={{ marginTop: '16px' }}\r\n            >\r\n              Birinchi o'quvchini qo'shish\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n\r\n      {/* Export Modal */}\r\n      <Modal\r\n        title=\"Excel faylga export qilish\"\r\n        open={exportModalVisible}\r\n        onOk={handleExportToExcel}\r\n        onCancel={() => setExportModalVisible(false)}\r\n        okText=\"Export qilish\"\r\n        cancelText=\"Bekor qilish\"\r\n      >\r\n        <div>\r\n          <Text>Quyidagi ma'lumotlar Excel faylga export qilinadi. Jami {students.length} ta o'quvchi.</Text>\r\n          <Alert\r\n            message=\"Eslatma\"\r\n            description=\"Export qilish uchun Export qilish tugmasini bosing. Fayl avtomatik tarzda yuklab olinadi.\"\r\n            type=\"info\"\r\n            showIcon\r\n            style={{ marginTop: '16px' }}\r\n          />\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Import Modal */}\r\n      <Modal\r\n        title=\"Excel fayldan import qilish\"\r\n        open={importModalVisible}\r\n        onCancel={() => !importing && setImportModalVisible(false)}\r\n        footer={[\r\n          <Button key=\"cancel\" onClick={() => setImportModalVisible(false)} disabled={importing}>\r\n            Bekor qilish\r\n          </Button>,\r\n          <Button\r\n            key=\"upload\"\r\n            type=\"primary\"\r\n            loading={importing}\r\n            disabled={importing}\r\n            onClick={() => fileInputRef.current?.click()}\r\n            className={importing ? 'animate__animated animate__pulse' : ''}\r\n          >\r\n            {importing ? 'Import qilinmoqda...' : 'Fayl tanlash (.xlsx)'}\r\n          </Button>\r\n        ]}\r\n        maskClosable={!importing}\r\n        closable={!importing}\r\n      >\r\n        <div>\r\n          <Text>O'quvchilarni Excel fayldan import qilish uchun fayl quyidagi formatda bo'lishi kerak:</Text>\r\n\r\n          <div style={{ marginTop: '16px', marginBottom: '16px' }}>\r\n            <Text strong style={{ display: 'block', marginBottom: '8px' }}>Excel fayl namunasi:</Text>\r\n            <div style={{\r\n              backgroundColor: '#f8fafc',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '8px',\r\n              padding: '16px',\r\n              fontSize: '12px',\r\n              fontFamily: 'monospace'\r\n            }}>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '50px 100px 100px 100px', gap: '8px', marginBottom: '8px' }}>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>тДЦ</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Ism</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Familiya</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Sinf</div>\r\n              </div>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '50px 100px 100px 100px', gap: '8px' }}>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>1</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>Ahmad</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>Karimov</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>9-01-A</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <Alert\r\n            message=\"Fayl formati\"\r\n            description=\".xlsx (Excel 2007 va undan keyingi versiyalar)\"\r\n            type=\"info\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n          />\r\n\r\n          <Alert\r\n            message=\"Eslatma\"\r\n            description={\r\n              <div>\r\n                <div>тАв Sinf formati: 9-01-A (aniq fanlar) yoki 9-01-T (tabiiy fanlar)</div>\r\n                <div>тАв Import jarayonida mavjud o'quvchilar tekshiriladi</div>\r\n                <div>тАв Agar o'quvchi allaqachon mavjud bo'lsa, u o'tkazib yuboriladi</div>\r\n                <div>тАв Har bir o'quvchi uchun avtomatik ID va parol generatsiya qilinadi</div>\r\n              </div>\r\n            }\r\n            type=\"warning\"\r\n            showIcon\r\n          />\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Hidden file input */}\r\n      <input\r\n        type=\"file\"\r\n        ref={fileInputRef}\r\n        accept=\".xlsx\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleImportFromExcel}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageStudents;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\ManageTeachers.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'displayId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":182,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayId"},"fix":{"range":[6194,6265],"text":""},"desc":"Remove unused variable 'displayId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'record' is defined but never used.","line":277,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":277,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"record"},"fix":{"range":[9344,9352],"text":""},"desc":"Remove unused variable 'record'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Button,\r\n  Tag,\r\n  Alert,\r\n  Modal,\r\n  Typography,\r\n  Space,\r\n  Popconfirm,\r\n  Input,\r\n  Avatar,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined,\r\n  DeleteOutlined,\r\n  EditOutlined,\r\n  SearchOutlined,\r\n  InfoCircleOutlined,\r\n  DownloadOutlined,\r\n  FileTextOutlined,\r\n} from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport * as XLSX from 'xlsx';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst ManageTeachers = () => {\r\n  const navigate = useNavigate();\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [tests, setTests] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [importModalVisible, setImportModalVisible] = useState(false);\r\n  const [exportModalVisible, setExportModalVisible] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [importing, setImporting] = useState(false);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Load teachers from API\r\n      const allUsers = await apiService.getUsers();\r\n      const allTeachers = allUsers.filter((user) => user.role === 'teacher');\r\n      setTeachers(allTeachers);\r\n\r\n      // Load tests\r\n      const allTests = await apiService.getTests();\r\n      setTests(allTests);\r\n    } catch (error) {\r\n      console.error('Failed to load data:', error);\r\n      setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateTeacherId = (firstName, lastName, randomDigits) => {\r\n    const lastNameUpper = lastName.toUpperCase().replace(\"'\", '');\r\n    const firstNameUpper = firstName.toUpperCase().replace(\"'\", '');\r\n    return `${lastNameUpper}${firstNameUpper}USTOZ${randomDigits}@test`;\r\n  };\r\n\r\n  const generateTeacherUsername = (firstName, lastName) => {\r\n    const lastNameLower = lastName.toLowerCase();\r\n    const firstNameInitial = firstName.charAt(0).toLowerCase();\r\n    return `${lastNameLower}${firstNameInitial}oqituvchi`;\r\n  };\r\n\r\n  const generateTeacherEmail = (firstName, lastName) => {\r\n    const username = generateTeacherUsername(firstName, lastName);\r\n    return `${username}@teacher.testplatform.com`;\r\n  };\r\n\r\n  const handleExportToExcel = () => {\r\n    const exportData = teachers.map((teacher, index) => ({\r\n      'тДЦ': index + 1,\r\n      'Ism': teacher.name || '',\r\n      'Familiya': teacher.name ? teacher.name.split(' ').slice(1).join(' ') : '',\r\n      'Fanlar': teacher.subjects ? teacher.subjects.join(', ') : '',\r\n      'Kurator': teacher.is_curator ? 'Ha' : 'Yo\\'q',\r\n      'Kurator sinfi': teacher.curator_class || '',\r\n      'Testlar soni': tests.filter((test) => test.teacher === teacher.id).length,\r\n      'Display ID': teacher.display_id || teacher.username || '',\r\n    }));\r\n\r\n    const ws = XLSX.utils.json_to_sheet(exportData);\r\n    const colWidths = [\r\n      { wch: 5 }, // тДЦ\r\n      { wch: 15 }, // Ism\r\n      { wch: 15 }, // Familiya\r\n      { wch: 20 }, // Fanlar\r\n      { wch: 10 }, // Kurator\r\n      { wch: 15 }, // Kurator sinfi\r\n      { wch: 12 }, // Testlar soni\r\n      { wch: 20 }, // Display ID\r\n    ];\r\n    ws['!cols'] = colWidths;\r\n\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, 'O\\'qituvchilar');\r\n\r\n    const currentDate = new Date().toISOString().split('T')[0];\r\n    const filename = `oqituvchilar_${currentDate}.xlsx`;\r\n\r\n    XLSX.writeFile(wb, filename);\r\n    setExportModalVisible(false);\r\n  };\r\n\r\n  const handleImportFromExcel = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      setImporting(true);\r\n      setError('');\r\n\r\n      const data = await file.arrayBuffer();\r\n      const workbook = XLSX.read(data);\r\n      const sheetName = workbook.SheetNames[0];\r\n      const worksheet = workbook.Sheets[sheetName];\r\n      const jsonData = XLSX.utils.sheet_to_json(worksheet);\r\n\r\n      if (jsonData.length === 0) {\r\n        setError('Excel faylda ma\\'lumotlar topilmadi');\r\n        return;\r\n      }\r\n\r\n      let successCount = 0;\r\n      let errorCount = 0;\r\n      const errors = [];\r\n\r\n      for (const row of jsonData) {\r\n        try {\r\n          // Handle teacher import format: тДЦ, Ism, Familiya, Fanlar, Kurator, Kurator sinfi\r\n          const rowIndex = jsonData.indexOf(row) + 2;\r\n\r\n          // Get values - could be by column name or by position\r\n          let firstName, lastName, subjects, isCurator, curatorClass;\r\n\r\n          if (row.Ism && row.Familiya && row.Fanlar) {\r\n            // Named columns\r\n            firstName = row.Ism;\r\n            lastName = row.Familiya;\r\n            subjects = row.Fanlar;\r\n            isCurator = row.Kurator ? (row.Kurator.toLowerCase() === 'ha' || row.Kurator === '1') : false;\r\n            curatorClass = row['Kurator sinfi'] || '';\r\n          } else {\r\n            // Try positional access\r\n            const values = Object.values(row);\r\n            if (values.length >= 5) {\r\n              firstName = values[1]; // Index 1 = Ism\r\n              lastName = values[2];  // Index 2 = Familiya\r\n              subjects = values[3];  // Index 3 = Fanlar\r\n              isCurator = values[4] ? (String(values[4]).toLowerCase() === 'ha' || values[4] === '1') : false;\r\n              curatorClass = values[5] || ''; // Index 5 = Kurator sinfi\r\n            }\r\n          }\r\n\r\n          // Validate required fields\r\n          if (!firstName || !lastName || !subjects) {\r\n            errors.push(`Qator ${rowIndex}: Ism, Familiya va Fanlar maydonlari majburiy`);\r\n            errorCount++;\r\n            continue;\r\n          }\r\n\r\n          const fullName = `${firstName} ${lastName}`;\r\n          const subjectsArray = subjects.split(',').map(s => s.trim()).filter(s => s);\r\n\r\n          // Generate credentials\r\n          const randomDigits = Math.floor(Math.random() * 900) + 100;\r\n          const displayId = generateTeacherId(firstName, lastName, randomDigits);\r\n          const username = generateTeacherUsername(firstName, lastName);\r\n          const email = generateTeacherEmail(firstName, lastName);\r\n\r\n          // Check if teacher already exists\r\n          const existingTeacher = teachers.find(t => t.username === username);\r\n          if (existingTeacher) {\r\n            errors.push(`Qator ${rowIndex}: ${fullName} - bu o'qituvchi allaqachon mavjud`);\r\n            errorCount++;\r\n            continue;\r\n          }\r\n\r\n          // Create teacher\r\n          const teacherData = {\r\n            email: email,\r\n            password: 'temp_password',\r\n            name: fullName,\r\n            role: 'teacher',\r\n            subjects: subjectsArray,\r\n            is_curator: isCurator,\r\n            curator_class: isCurator ? curatorClass : '',\r\n          };\r\n\r\n          await apiService.post('/users/', teacherData);\r\n          successCount++;\r\n\r\n        } catch (error) {\r\n          errors.push(`Qator ${jsonData.indexOf(row) + 2}: ${error.message || 'Xatolik'}`);\r\n          errorCount++;\r\n        }\r\n      }\r\n\r\n      // Reload data\r\n      const allUsers = await apiService.getUsers();\r\n      const allTeachers = allUsers.filter((user) => user.role === 'teacher');\r\n      setTeachers(allTeachers);\r\n\r\n      // Show results\r\n      let message = `Import yakunlandi!\\nMuvaffaqiyatli: ${successCount}\\nXatoliklar: ${errorCount}`;\r\n      if (errors.length > 0) {\r\n        message += '\\n\\nXatoliklar:\\n' + errors.slice(0, 5).join('\\n');\r\n        if (errors.length > 5) {\r\n          message += `\\n...va yana ${errors.length - 5} ta xatolik`;\r\n        }\r\n      }\r\n      setSuccess(message);\r\n      setImportModalVisible(false);\r\n\r\n    } catch (error) {\r\n      console.error('Import error:', error);\r\n      setError('Excel faylini o\\'qishda xatolik yuz berdi: ' + error.message);\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n\r\n    // Clear file input\r\n    event.target.value = '';\r\n  };\r\n\r\n  const handleDelete = async (teacherId) => {\r\n    try {\r\n      await apiService.deleteUser(teacherId);\r\n      setTeachers(teachers.filter((teacher) => teacher.id !== teacherId));\r\n      setSuccess('O\\'qituvchi muvaffaqiyatli o\\'chirildi!');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to delete teacher:', error);\r\n      setError('O\\'qituvchini o\\'chirishda xatolik yuz berdi');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  };\r\n\r\n  const handleEditClick = (teacher) => {\r\n    navigate(`/admin/edit-teacher/${teacher.id}`);\r\n  };\r\n\r\n  // Filter teachers based on search term\r\n  const filteredTeachers = teachers.filter((teacher) => {\r\n    if (!searchTerm) return true;\r\n\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const name = teacher.name || '';\r\n    const displayId = teacher.display_id || teacher.username || '';\r\n\r\n    return (\r\n      name.toLowerCase().includes(searchLower) ||\r\n      displayId.toLowerCase().includes(searchLower)\r\n    );\r\n  });\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Ism',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record) => (\r\n        <Space>\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: '#f0f0f0',\r\n              color: '#666',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            {text ? text.charAt(0) : 'T'}\r\n          </Avatar>\r\n          <Text strong style={{ color: '#1e293b' }}>\r\n            {text}\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'display_id',\r\n      key: 'display_id',\r\n      render: (text) => (\r\n        <Text\r\n          style={{\r\n            fontFamily: 'monospace',\r\n            fontWeight: 600,\r\n            fontSize: '12px',\r\n            backgroundColor: '#f1f5f9',\r\n            padding: '4px 8px',\r\n            borderRadius: '6px',\r\n            color: '#475569',\r\n          }}\r\n        >\r\n          {text}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Fanlar',\r\n      dataIndex: 'subjects',\r\n      key: 'subjects',\r\n      render: (subjects) => (\r\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px' }}>\r\n          {subjects?.map((subject) => (\r\n            <Tag\r\n              key={subject}\r\n              style={{\r\n                backgroundColor: '#eff6ff',\r\n                color: '#1d4ed8',\r\n                fontSize: '12px',\r\n                fontWeight: 500,\r\n                borderRadius: '6px',\r\n                border: 'none',\r\n                margin: 0,\r\n              }}\r\n            >\r\n              {subject}\r\n            </Tag>\r\n          ))}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Kurator',\r\n      dataIndex: 'is_curator',\r\n      key: 'is_curator',\r\n      render: (isCurator) => (\r\n        <Tag\r\n          color={isCurator ? 'green' : 'default'}\r\n          style={{\r\n            backgroundColor: isCurator ? '#ecfdf5' : '#f1f5f9',\r\n            color: isCurator ? '#059669' : '#64748b',\r\n            fontWeight: 600,\r\n            borderRadius: '6px',\r\n          }}\r\n        >\r\n          {isCurator ? 'Ha' : 'Yo\\'q'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Kurator sinfi',\r\n      dataIndex: 'curator_class',\r\n      key: 'curator_class',\r\n      render: (text) => (\r\n        <Text\r\n          style={{\r\n            fontWeight: 500,\r\n            color: text ? '#1e293b' : '#64748b',\r\n          }}\r\n        >\r\n          {text || '-'}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Yaratgan testlari',\r\n      key: 'test_count',\r\n      render: (_, record) => (\r\n        <Text\r\n          style={{\r\n            fontWeight: 700,\r\n            color: '#2563eb',\r\n            fontSize: '18px',\r\n          }}\r\n        >\r\n          {tests.filter((test) => test.teacher === record.id).length}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakatlar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<InfoCircleOutlined />}\r\n            onClick={() => navigate(`/admin/teacher-details/${record.id}`)}\r\n            style={{ color: '#2563eb' }}\r\n          >\r\n            Batafsil\r\n          </Button>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<EditOutlined />}\r\n            onClick={() => handleEditClick(record)}\r\n            style={{ color: '#059669' }}\r\n          />\r\n          <Popconfirm\r\n            title=\"O'qituvchini o'chirishni tasdiqlang\"\r\n            description={\r\n              <div>\r\n                <div>Haqiqatan ham ushbu o'qituvchini o'chirishni xohlaysizmi?</div>\r\n                <div style={{ marginTop: '8px', fontWeight: 'bold' }}>{record.name}</div>\r\n                <div style={{ fontSize: '12px', color: '#666' }}>ID: {record.display_id || record.username}</div>\r\n                <div style={{ fontSize: '12px', color: '#666' }}>Fanlar: {record.subjects?.join(', ') || 'Aniqlanmagan'}</div>\r\n              </div>\r\n            }\r\n            onConfirm={() => handleDelete(record.id)}\r\n            okText=\"Ha, o'chirish\"\r\n            cancelText=\"Yo'q\"\r\n            okButtonProps={{ danger: true }}\r\n            placement=\"topRight\"\r\n          >\r\n            <Button\r\n              type=\"text\"\r\n              icon={<DeleteOutlined />}\r\n              style={{ color: '#dc2626' }}\r\n            />\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__slideInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          O'qituvchilarni boshqarish\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          O'qituvchilar ma'lumotlarini boshqaring\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Alerts */}\r\n      {success && (\r\n        <div className=\"animate__animated animate__slideInRight\">\r\n          <Alert\r\n            message={success}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n            closable\r\n            onClose={() => setSuccess('')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"animate__animated animate__slideInRight\">\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n            closable\r\n            onClose={() => setError('')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Controls */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '24px'\r\n      }}>\r\n        <Input\r\n          placeholder=\"O'qituvchi nomini qidirish...\"\r\n          prefix={<SearchOutlined />}\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{\r\n            width: '100%',\r\n            borderRadius: '8px',\r\n            marginRight: '8px'\r\n          }}\r\n        />\r\n        <Space>\r\n          <Button\r\n            type=\"default\"\r\n            icon={<FileTextOutlined />}\r\n            onClick={() => setImportModalVisible(true)}\r\n            style={{ borderColor: '#7c3aed', color: '#7c3aed' }}\r\n          >\r\n            Excel fayldan import\r\n          </Button>\r\n          <Button\r\n            type=\"default\"\r\n            icon={<DownloadOutlined />}\r\n            onClick={() => setExportModalVisible(true)}\r\n            style={{ borderColor: '#059669', color: '#059669' }}\r\n          >\r\n            Excel faylga export\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<PlusOutlined />}\r\n            onClick={() => navigate('/admin/add-teacher')}\r\n            style={{\r\n              backgroundColor: '#2563eb',\r\n              borderColor: '#2563eb',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            O'qituvchi qo'shish\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n\r\n      {/* Search Results Info */}\r\n      {searchTerm && (\r\n        <Text style={{ marginBottom: '16px', color: '#64748b' }}>\r\n          {filteredTeachers.length} ta o'qituvchi topildi\r\n        </Text>\r\n      )}\r\n\r\n      {/* Table */}\r\n      <div className=\"animate__animated animate__fadeInUpBig\" style={{ animationDelay: '300ms' }}>\r\n        <Table\r\n          columns={columns}\r\n          dataSource={filteredTeachers}\r\n          rowKey=\"id\"\r\n          loading={loading}\r\n          pagination={{\r\n            pageSize: pageSize,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total) => `Jami ${total} ta o'qituvchi`,\r\n            pageSizeOptions: ['10', '20', '50', '100'],\r\n            onShowSizeChange: (current, size) => setPageSize(size),\r\n          }}\r\n          locale={{\r\n            emptyText: 'O\\'qituvchilar mavjud emas'\r\n          }}\r\n          onRow={(record, index) => ({\r\n            className: 'animate__animated animate__fadeInLeft',\r\n            style: { \r\n              animationDelay: `${index * 100}ms`,\r\n              transition: 'all 0.3s ease'\r\n            },\r\n            onMouseEnter: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1.02)';\r\n            },\r\n            onMouseLeave: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1)';\r\n            }\r\n          })}\r\n        />\r\n      </div>\r\n\r\n      {/* Empty State */}\r\n      {filteredTeachers.length === 0 && !loading && (\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ textAlign: 'center', padding: '48px 0' }}>\r\n          <Text style={{ fontSize: '16px', color: '#64748b' }}>\r\n            {searchTerm ? 'Qidiruv bo\\'yicha o\\'qituvchilar topilmadi' : 'Hech qanday o\\'qituvchi mavjud emas'}\r\n          </Text>\r\n          <br />\r\n          {!searchTerm && (\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => navigate('/admin/add-teacher')}\r\n              style={{ marginTop: '16px' }}\r\n            >\r\n              Birinchi o'qituvchini qo'shish\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n\r\n      {/* Export Modal */}\r\n      <Modal\r\n        title=\"Excel faylga export qilish\"\r\n        open={exportModalVisible}\r\n        onOk={handleExportToExcel}\r\n        onCancel={() => setExportModalVisible(false)}\r\n        okText=\"Export qilish\"\r\n        cancelText=\"Bekor qilish\"\r\n      >\r\n        <div>\r\n          <Text>Quyidagi ma'lumotlar Excel faylga export qilinadi. Jami {teachers.length} ta o'qituvchi.</Text>\r\n          <Alert\r\n            message=\"Eslatma\"\r\n            description=\"Export qilish uchun Export qilish tugmasini bosing. Fayl avtomatik tarzda yuklab olinadi.\"\r\n            type=\"info\"\r\n            showIcon\r\n            style={{ marginTop: '16px' }}\r\n          />\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Import Modal */}\r\n      <Modal\r\n        title=\"Excel fayldan import qilish\"\r\n        open={importModalVisible}\r\n        onCancel={() => !importing && setImportModalVisible(false)}\r\n        width={800}\r\n        style={{ top: 20 }}\r\n        footer={[\r\n          <Button key=\"cancel\" onClick={() => setImportModalVisible(false)} disabled={importing}>\r\n            Bekor qilish\r\n          </Button>,\r\n          <Button\r\n            key=\"upload\"\r\n            type=\"primary\"\r\n            loading={importing}\r\n            disabled={importing}\r\n            onClick={() => fileInputRef.current?.click()}\r\n            className={importing ? 'animate__animated animate__pulse' : ''}\r\n          >\r\n            {importing ? 'Import qilinmoqda...' : 'Fayl tanlash (.xlsx)'}\r\n          </Button>\r\n        ]}\r\n        maskClosable={!importing}\r\n        closable={!importing}\r\n      >\r\n        <div>\r\n          <Text>O'qituvchilarni Excel fayldan import qilish uchun fayl quyidagi formatda bo'lishi kerak:</Text>\r\n\r\n          <div style={{ marginTop: '16px', marginBottom: '16px' }}>\r\n            <Text strong style={{ display: 'block', marginBottom: '8px' }}>Excel fayl namunasi:</Text>\r\n            <div style={{\r\n              backgroundColor: '#f8fafc',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '8px',\r\n              padding: '16px',\r\n              fontSize: '12px',\r\n              fontFamily: 'monospace'\r\n            }}>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '50px 100px 100px 120px 80px 100px', gap: '8px', marginBottom: '8px' }}>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>тДЦ</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Ism</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Familiya</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Fanlar</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Kurator</div>\r\n                <div style={{ fontWeight: 'bold', backgroundColor: '#e2e8f0', padding: '4px', textAlign: 'center' }}>Kurator sinfi</div>\r\n              </div>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '50px 100px 100px 120px 80px 100px', gap: '8px' }}>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>1</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>Ahmad</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>Karimov</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>Matematika, Fizika</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>Ha</div>\r\n                <div style={{ padding: '4px', textAlign: 'center' }}>9-01-A</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <Alert\r\n            message=\"Fayl formati\"\r\n            description=\".xlsx (Excel 2007 va undan keyingi versiyalar)\"\r\n            type=\"info\"\r\n            showIcon\r\n            style={{ marginBottom: '16px' }}\r\n          />\r\n\r\n          <Alert\r\n            message=\"Eslatma\"\r\n            description={\r\n              <div>\r\n                <div>тАв Fanlar vergul bilan ajratilgan bo'lishi kerak</div>\r\n                <div>тАв Kurator maydoni: \"Ha\" yoki \"Yo'q\"</div>\r\n                <div>тАв Kurator sinfi faqat kurator bo'lsa to'ldiriladi</div>\r\n                <div>тАв Import jarayonida mavjud o'qituvchilar tekshiriladi</div>\r\n                <div>тАв Agar o'qituvchi allaqachon mavjud bo'lsa, u o'tkazib yuboriladi</div>\r\n                <div>тАв Har bir o'qituvchi uchun avtomatik ID va parol generatsiya qilinadi</div>\r\n              </div>\r\n            }\r\n            type=\"warning\"\r\n            showIcon\r\n          />\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Hidden file input */}\r\n      <input\r\n        type=\"file\"\r\n        ref={fileInputRef}\r\n        accept=\".xlsx\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleImportFromExcel}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageTeachers;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\ManageTests.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\Questions.jsx","messages":[{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":142,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":142,"endColumn":132,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4794,5214],"text":"{ const aGrades = (a.target_grades && Array.isArray(a.target_grades) && a.target_grades.length > 0) ? a.target_grades : [];\r\n          const bGrades = (b.target_grades && Array.isArray(b.target_grades) && b.target_grades.length > 0) ? b.target_grades : [];\r\n          aValue = aGrades.length > 0 ? (parseInt(aGrades[0]) || 0) : 0;\r\n          bValue = bGrades.length > 0 ? (parseInt(bGrades[0]) || 0) : 0;\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":143,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":143,"endColumn":132,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4794,5214],"text":"{ const aGrades = (a.target_grades && Array.isArray(a.target_grades) && a.target_grades.length > 0) ? a.target_grades : [];\r\n          const bGrades = (b.target_grades && Array.isArray(b.target_grades) && b.target_grades.length > 0) ? b.target_grades : [];\r\n          aValue = aGrades.length > 0 ? (parseInt(aGrades[0]) || 0) : 0;\r\n          bValue = bGrades.length > 0 ? (parseInt(bGrades[0]) || 0) : 0;\r\n          break; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Button,\r\n  Typography,\r\n  Select,\r\n  Input,\r\n  Alert,\r\n  Collapse,\r\n  Space,\r\n  Tag,\r\n} from 'antd';\r\nimport {\r\n  LockOutlined,\r\n  SearchOutlined,\r\n  ClearOutlined,\r\n  DownOutlined,\r\n  UpOutlined,\r\n} from '@ant-design/icons';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Option } = Select;\r\nconst { Panel } = Collapse;\r\n\r\nconst Questions = () => {\r\n  const [tests, setTests] = useState([]);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [password, setPassword] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n\r\n  // Sorting and filtering states\r\n  const [sortBy, setSortBy] = useState('created_at');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [subjectFilter, setSubjectFilter] = useState('');\r\n  const [teacherFilter, setTeacherFilter] = useState('');\r\n  const [gradeFilter, setGradeFilter] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Always require password on page load/refresh\r\n    // No persistent authentication\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      // Load tests and questions using public endpoints (no authentication required)\r\n      const [testsResponse, questionsResponse] = await Promise.all([\r\n        apiService.getPublicTests(),\r\n        apiService.getPublicQuestions()\r\n      ]);\r\n\r\n      const allTests = testsResponse.results || testsResponse;\r\n      const allQuestions = questionsResponse.results || questionsResponse;\r\n\r\n      setTests(allTests);\r\n      setQuestions(allQuestions);\r\n\r\n      console.log('Questions page data loaded:', {\r\n        tests: allTests.length,\r\n        questions: allQuestions.length\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to load questions data:', err);\r\n      setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePasswordSubmit = (e) => {\r\n    e.preventDefault();\r\n    setPasswordError('');\r\n\r\n    if (password === 'katya2010') {\r\n      setIsAuthenticated(true);\r\n      loadData();\r\n    } else {\r\n      setPasswordError('Noto\\'g\\'ri parol');\r\n    }\r\n  };\r\n\r\n  // Get unique subjects, teachers, and grades for filters\r\n  const subjects = [...new Set(tests.map(test => test.subject).filter(Boolean))];\r\n  const teachers = [...new Set(tests.map(test => test.teacher_name).filter(Boolean))];\r\n\r\n  // Safely extract grades from all tests\r\n  const allGrades = [];\r\n  tests.forEach(test => {\r\n    if (test && test.target_grades && Array.isArray(test.target_grades)) {\r\n      test.target_grades.forEach(grade => {\r\n        if (grade && typeof grade === 'string' && grade.trim()) {\r\n          allGrades.push(grade.trim());\r\n        }\r\n      });\r\n    }\r\n  });\r\n  const grades = [...new Set(allGrades)].sort((a, b) => {\r\n    const aNum = parseInt(a) || 0;\r\n    const bNum = parseInt(b) || 0;\r\n    return aNum - bNum;\r\n  });\r\n\r\n  // Filter and sort tests\r\n  const filteredAndSortedTests = tests\r\n    .filter(test => {\r\n      const matchesSubject = !subjectFilter || test.subject === subjectFilter;\r\n      const matchesTeacher = !teacherFilter || test.teacher_name === teacherFilter;\r\n      const matchesGrade = !gradeFilter || (test.target_grades && Array.isArray(test.target_grades) && test.target_grades.includes(gradeFilter));\r\n      const matchesSearch = !searchQuery ||\r\n        test.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        test.subject.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (test.teacher_name && test.teacher_name.toLowerCase().includes(searchQuery.toLowerCase())) ||\r\n        (test.target_grades && Array.isArray(test.target_grades) && test.target_grades.some(grade => grade.toLowerCase().includes(searchQuery.toLowerCase())));\r\n\r\n      return matchesSubject && matchesTeacher && matchesGrade && matchesSearch;\r\n    })\r\n    .sort((a, b) => {\r\n      let aValue, bValue;\r\n\r\n      switch (sortBy) {\r\n        case 'title':\r\n          aValue = a.title.toLowerCase();\r\n          bValue = b.title.toLowerCase();\r\n          break;\r\n        case 'subject':\r\n          aValue = a.subject.toLowerCase();\r\n          bValue = b.subject.toLowerCase();\r\n          break;\r\n        case 'teacher':\r\n          aValue = (a.teacher_name || '').toLowerCase();\r\n          bValue = (b.teacher_name || '').toLowerCase();\r\n          break;\r\n        case 'target_grades':\r\n          // Sort by first grade in the array, or 0 if no grades\r\n          const aGrades = (a.target_grades && Array.isArray(a.target_grades) && a.target_grades.length > 0) ? a.target_grades : [];\r\n          const bGrades = (b.target_grades && Array.isArray(b.target_grades) && b.target_grades.length > 0) ? b.target_grades : [];\r\n          aValue = aGrades.length > 0 ? (parseInt(aGrades[0]) || 0) : 0;\r\n          bValue = bGrades.length > 0 ? (parseInt(bGrades[0]) || 0) : 0;\r\n          break;\r\n        case 'created_at':\r\n        default:\r\n          aValue = new Date(a.created_at);\r\n          bValue = new Date(b.created_at);\r\n          break;\r\n      }\r\n\r\n      if (sortOrder === 'asc') {\r\n        return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n      } else {\r\n        return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n      }\r\n    });\r\n\r\n  // Get questions for a specific test\r\n  const getTestQuestions = (testId) => {\r\n    return questions.filter(q => q.test === testId);\r\n  };\r\n\r\n  // Get correct answer for a question\r\n  const getCorrectAnswer = (question) => {\r\n    // First check if there's a direct correct_answer field and it's not empty\r\n    if (question.correct_answer && question.correct_answer.trim()) {\r\n      return question.correct_answer.trim();\r\n    }\r\n\r\n    // Then check options array for multiple choice questions\r\n    if (question.options && Array.isArray(question.options) && question.options.length > 0) {\r\n      const correctOption = question.options.find(option => option.is_correct === true);\r\n      if (correctOption) {\r\n        return correctOption.text || correctOption.option_text || correctOption.answer || 'Noma\\'lum';\r\n      }\r\n    }\r\n\r\n    // If no correct answer found, return unknown\r\n    return 'Noma\\'lum';\r\n  };\r\n\r\n  // Password protection\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        backgroundColor: '#f8fafc',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '24px'\r\n      }}>\r\n        <Card\r\n          style={{\r\n            maxWidth: 400,\r\n            width: '100%',\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '16px',\r\n            boxShadow: '0 8px 25px -5px rgba(0, 0, 0, 0.1)',\r\n            overflow: 'hidden'\r\n          }}\r\n        >\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n            color: 'white',\r\n            padding: '32px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <LockOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n            <Title level={4} style={{ margin: 0, color: 'white', fontWeight: 700 }}>\r\n              Parol kiritish\r\n            </Title>\r\n            <Text style={{ opacity: 0.9, display: 'block', marginTop: '8px', color: 'white' }}>\r\n              Davom etish uchun parolni kiriting\r\n            </Text>\r\n          </div>\r\n\r\n          <Card style={{ border: 'none', boxShadow: 'none' }} bodyStyle={{ padding: '32px' }}>\r\n            {passwordError && (\r\n              <Alert\r\n                message={passwordError}\r\n                type=\"error\"\r\n                showIcon\r\n                style={{ marginBottom: '24px' }}\r\n              />\r\n            )}\r\n\r\n            <form onSubmit={handlePasswordSubmit}>\r\n              <Input.Password\r\n                placeholder=\"Parol\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                autoFocus\r\n                style={{\r\n                  marginBottom: '24px',\r\n                  borderRadius: '12px',\r\n                  padding: '12px'\r\n                }}\r\n              />\r\n\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                block\r\n                size=\"large\"\r\n                style={{\r\n                  backgroundColor: '#2563eb',\r\n                  borderColor: '#2563eb',\r\n                  padding: '12px',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                  borderRadius: '12px',\r\n                  height: 'auto'\r\n                }}\r\n              >\r\n                Kirish\r\n              </Button>\r\n            </form>\r\n          </Card>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        padding: '24px',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px'\r\n      }}>\r\n        <div>Yuklanmoqda...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '24px' }}>\r\n        <Title level={1} style={{ marginBottom: '24px', color: '#1e293b' }}>\r\n          Savollar\r\n        </Title>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '24px' }}>\r\n      <div style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b' }}>\r\n          Barcha Savollar\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b', display: 'block', marginTop: '8px' }}>\r\n          Barcha testlar va ularning to'g'ri javoblari\r\n        </Text>\r\n      </div>\r\n\r\n      <Card\r\n        style={{\r\n          marginBottom: '24px',\r\n          backgroundColor: '#f8fafc',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n        }}\r\n        bodyStyle={{ padding: '24px' }}\r\n      >\r\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '16px', alignItems: 'center' }}>\r\n          <Input\r\n            placeholder=\"Qidirish...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            prefix={<SearchOutlined />}\r\n            style={{\r\n              minWidth: 250,\r\n              borderRadius: '8px'\r\n            }}\r\n          />\r\n\r\n          <Select\r\n            value={subjectFilter}\r\n            onChange={(value) => setSubjectFilter(value)}\r\n            placeholder=\"Barcha fanlar\"\r\n            style={{ minWidth: 150 }}\r\n          >\r\n            <Option value=\"\">Barcha fanlar</Option>\r\n            {subjects.map(subject => (\r\n              <Option key={subject} value={subject}>{subject}</Option>\r\n            ))}\r\n          </Select>\r\n\r\n          <Select\r\n            value={teacherFilter}\r\n            onChange={(value) => setTeacherFilter(value)}\r\n            placeholder=\"Barcha ustozlar\"\r\n            style={{ minWidth: 150 }}\r\n          >\r\n            <Option value=\"\">Barcha ustozlar</Option>\r\n            {teachers.map(teacher => (\r\n              <Option key={teacher} value={teacher}>{teacher}</Option>\r\n            ))}\r\n          </Select>\r\n\r\n          <Select\r\n            value={gradeFilter}\r\n            onChange={(value) => setGradeFilter(value)}\r\n            placeholder=\"Barcha sinflar\"\r\n            style={{ minWidth: 120 }}\r\n          >\r\n            <Option value=\"\">Barcha sinflar</Option>\r\n            {grades.map(grade => (\r\n              <Option key={grade} value={grade}>{grade}-sinf</Option>\r\n            ))}\r\n          </Select>\r\n\r\n          <Select\r\n            value={`${sortBy}_${sortOrder}`}\r\n            onChange={(value) => {\r\n              const [field, order] = value.split('_');\r\n              setSortBy(field);\r\n              setSortOrder(order);\r\n            }}\r\n            placeholder=\"Saralash\"\r\n            style={{ minWidth: 180 }}\r\n          >\r\n            <Option value=\"created_at_desc\">Yangi avval</Option>\r\n            <Option value=\"created_at_asc\">Eski avval</Option>\r\n            <Option value=\"title_asc\">Sarlavha (A-Z)</Option>\r\n            <Option value=\"title_desc\">Sarlavha (Z-A)</Option>\r\n            <Option value=\"subject_asc\">Fan (A-Z)</Option>\r\n            <Option value=\"subject_desc\">Fan (Z-A)</Option>\r\n            <Option value=\"target_grades_asc\">Sinflar (1-11)</Option>\r\n            <Option value=\"target_grades_desc\">Sinflar (11-1)</Option>\r\n          </Select>\r\n\r\n          <Button\r\n            icon={<ClearOutlined />}\r\n            onClick={() => {\r\n              setSubjectFilter('');\r\n              setTeacherFilter('');\r\n              setGradeFilter('');\r\n              setSearchQuery('');\r\n              setSortBy('created_at');\r\n              setSortOrder('desc');\r\n            }}\r\n            style={{\r\n              borderColor: '#e2e8f0',\r\n              color: '#374151'\r\n            }}\r\n          >\r\n            Tozalash\r\n          </Button>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Results Summary */}\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Text style={{ color: '#64748b' }}>\r\n          Jami: {filteredAndSortedTests.length} ta test topildi\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Tests List */}\r\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n        {filteredAndSortedTests.map((test) => {\r\n          const testQuestions = getTestQuestions(test.id);\r\n\r\n          return (\r\n            <Card\r\n              key={test.id}\r\n              style={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e2e8f0',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            >\r\n              <Collapse\r\n                ghost\r\n                expandIcon={({ isActive }) => isActive ? <UpOutlined /> : <DownOutlined />}\r\n              >\r\n                <Panel\r\n                  header={\r\n                    <div style={{ width: '100%' }}>\r\n                      <Title level={4} style={{ margin: 0, marginBottom: '8px', color: '#1e293b' }}>\r\n                        {test.title}\r\n                      </Title>\r\n                      <Space wrap>\r\n                        <Tag\r\n                          color={test.subject === 'Ingliz tili' ? 'blue' : 'default'}\r\n                          style={{ fontWeight: 600 }}\r\n                        >\r\n                          {test.subject}\r\n                        </Tag>\r\n                        <Text style={{ color: '#64748b' }}>\r\n                          {test.teacher_name || 'Noma\\'lum ustoz'}\r\n                        </Text>\r\n                        <Text style={{ color: '#64748b' }}>\r\n                          {test.total_questions} ta savol\r\n                        </Text>\r\n                        <Text style={{ color: '#64748b' }}>\r\n                          Sinflar: {test.target_grades && Array.isArray(test.target_grades) && test.target_grades.length > 0 ? test.target_grades.join(', ') : 'Barcha sinflar'}\r\n                        </Text>\r\n                        <Text style={{ color: '#64748b' }}>\r\n                          {new Date(test.created_at).toLocaleDateString('uz-UZ')}\r\n                        </Text>\r\n                      </Space>\r\n                    </div>\r\n                  }\r\n                  key={test.id}\r\n                >\r\n                  {testQuestions.length > 0 ? (\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '24px', paddingTop: '16px' }}>\r\n                      {testQuestions.map((question, qIndex) => (\r\n                        <Card\r\n                          key={question.id}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: '#f8fafc',\r\n                            border: '1px solid #e2e8f0',\r\n                            borderRadius: '8px',\r\n                          }}\r\n                        >\r\n                          <Title level={5} style={{ margin: 0, marginBottom: '16px', color: '#1e293b' }}>\r\n                            {qIndex + 1}. {question.text}\r\n                          </Title>\r\n\r\n                          {question.image && (\r\n                            <div style={{ marginBottom: '16px' }}>\r\n                              <img\r\n                                src={question.image}\r\n                                alt=\"Savol rasmi\"\r\n                                style={{\r\n                                  maxWidth: '100%',\r\n                                  maxHeight: '200px',\r\n                                  borderRadius: '8px',\r\n                                  border: '1px solid #e2e8f0'\r\n                                }}\r\n                              />\r\n                            </div>\r\n                          )}\r\n\r\n                          {question.options && question.options.length > 0 && (\r\n                            <div style={{ marginBottom: '16px' }}>\r\n                              <Text style={{\r\n                                fontSize: '14px',\r\n                                fontWeight: 600,\r\n                                color: '#64748b',\r\n                                marginBottom: '8px',\r\n                                display: 'block'\r\n                              }}>\r\n                                Variantlar:\r\n                              </Text>\r\n                              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                                {question.options.map((option, oIndex) => {\r\n                                  const optionImageField = ['option_a_image', 'option_b_image', 'option_c_image', 'option_d_image'][oIndex];\r\n                                  const optionImage = question[optionImageField];\r\n\r\n                                  return (\r\n                                    <div\r\n                                      key={oIndex}\r\n                                      style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '12px',\r\n                                        padding: '8px',\r\n                                        borderRadius: '4px',\r\n                                        backgroundColor: option.is_correct ? '#ecfdf5' : '#ffffff',\r\n                                        border: option.is_correct ? '1px solid #10b981' : '1px solid #e2e8f0'\r\n                                      }}\r\n                                    >\r\n                                      <Text style={{\r\n                                        fontSize: '14px',\r\n                                        fontWeight: option.is_correct ? 600 : 400,\r\n                                        color: option.is_correct ? '#059669' : '#374151'\r\n                                      }}>\r\n                                        {String.fromCharCode(65 + oIndex)}. {option.text || option.option_text || option.answer || 'Variant yo\\'q'}\r\n                                        {option.is_correct && ' тЬУ'}\r\n                                      </Text>\r\n                                      {optionImage && (\r\n                                        <img\r\n                                          src={optionImage}\r\n                                          alt={`Option ${String.fromCharCode(65 + oIndex)}`}\r\n                                          style={{\r\n                                            maxWidth: '60px',\r\n                                            maxHeight: '40px',\r\n                                            borderRadius: '4px',\r\n                                            border: '1px solid #e2e8f0',\r\n                                            objectFit: 'contain'\r\n                                          }}\r\n                                          onError={(e) => {\r\n                                            console.error('Option image failed to load:', optionImage);\r\n                                            e.target.style.display = 'none';\r\n                                          }}\r\n                                        />\r\n                                      )}\r\n                                    </div>\r\n                                  );\r\n                                })}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          <Card\r\n                            size=\"small\"\r\n                            style={{\r\n                              backgroundColor: getCorrectAnswer(question) === 'Noma\\'lum' ? '#fefce8' : '#ecfdf5',\r\n                              border: `1px solid ${getCorrectAnswer(question) === 'Noma\\'lum' ? '#eab308' : '#10b981'}`,\r\n                              borderRadius: '6px',\r\n                            }}\r\n                          >\r\n                            <Text style={{\r\n                              fontSize: '14px',\r\n                              fontWeight: 600,\r\n                              color: getCorrectAnswer(question) === 'Noma\\'lum' ? '#92400e' : '#059669',\r\n                              marginBottom: '8px',\r\n                              display: 'block'\r\n                            }}>\r\n                              To'g'ri javob:\r\n                            </Text>\r\n                            <Text style={{\r\n                              fontSize: '16px',\r\n                              fontWeight: 600,\r\n                              color: getCorrectAnswer(question) === 'Noma\\'lum' ? '#b45309' : '#047857'\r\n                            }}>\r\n                              {getCorrectAnswer(question)}\r\n                            </Text>\r\n                            {getCorrectAnswer(question) === 'Noma\\'lum' && (\r\n                              <Text style={{\r\n                                fontSize: '12px',\r\n                                color: '#92400e',\r\n                                marginTop: '8px',\r\n                                fontStyle: 'italic',\r\n                                display: 'block'\r\n                              }}>\r\n                                тЪая╕П Bu savol uchun to'g'ri javob o'rnatilmagan\r\n                              </Text>\r\n                            )}\r\n                          </Card>\r\n                        </Card>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <Text style={{ color: '#64748b', fontStyle: 'italic' }}>\r\n                      Bu test uchun savollar topilmadi\r\n                    </Text>\r\n                  )}\r\n                </Panel>\r\n              </Collapse>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {filteredAndSortedTests.length === 0 && (\r\n        <div style={{ textAlign: 'center', marginTop: '32px' }}>\r\n          <Text style={{ fontSize: '16px', color: '#64748b' }}>\r\n            Testlar topilmadi\r\n          </Text>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Questions;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\StatisticsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":87,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[1679,1710],"text":""},"desc":"Remove unused variable 'navigate'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'chartRefs' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":88,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"chartRefs"},"fix":{"range":[1714,1743],"text":""},"desc":"Remove unused variable 'chartRefs'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":418,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":418,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":436,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":436,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":459,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":459,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":482,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":482,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":511,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":511,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":534,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":534,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":557,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":557,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":586,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":586,"endColumn":25},{"ruleId":"no-unused-vars","severity":2,"message":"'subtitle' is defined but never used.","line":937,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":937,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"subtitle"},"fix":{"range":[26942,26952],"text":""},"desc":"Remove unused variable 'subtitle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getInsightColor' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1084,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":1084,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"getInsightColor"},"fix":{"range":[31430,31696],"text":""},"desc":"Remove unused variable 'getInsightColor'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'checked' is defined but never used.","line":1349,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":1349,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"checked"},"fix":{"range":[40628,40635],"text":""},"desc":"Remove unused variable 'checked'."}]}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  Progress,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Button,\r\n  Timeline,\r\n  Divider,\r\n  Tooltip,\r\n  Switch,\r\n} from 'antd';\r\nimport {\r\n  DashboardOutlined,\r\n  UserOutlined,\r\n  TeamOutlined,\r\n  BookOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  CalendarOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  ClockCircleOutlined,\r\n  StarOutlined,\r\n  SafetyCertificateOutlined,\r\n  InfoCircleOutlined,\r\n  LineChartOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n  PlusOutlined,\r\n} from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title as ChartTitle,\r\n  Tooltip as ChartTooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line, Bar, Pie, Doughnut, Radar } from 'react-chartjs-2';\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  ChartTitle,\r\n  ChartTooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst { Title, Text } = Typography;\r\n\r\n// Google Analytics Tracking\r\nconst trackEvent = (eventName, parameters = {}) => {\r\n  if (typeof window !== 'undefined' && window.gtag) {\r\n    window.gtag('event', eventName, {\r\n      event_category: 'Statistics',\r\n      event_label: 'Statistics Page',\r\n      ...parameters\r\n    });\r\n  }\r\n};\r\n\r\nconst StatisticsPage = () => {\r\n  const navigate = useNavigate();\r\n  const chartRefs = useRef({});\r\n  const [stats, setStats] = useState({\r\n    // Overview stats\r\n    totalUsers: 0,\r\n    totalStudents: 0,\r\n    totalTeachers: 0,\r\n    totalTests: 0,\r\n    totalAttempts: 0,\r\n    averageScore: 0,\r\n\r\n    // Growth metrics\r\n    studentGrowth: 0,\r\n    testGrowth: 0,\r\n    attemptGrowth: 0,\r\n    scoreGrowth: 0,\r\n\r\n    // Detailed analytics\r\n    classPerformance: [],\r\n    topStudents: [],\r\n    popularTests: [],\r\n    subjectAnalytics: [],\r\n    weeklyActivity: [],\r\n    monthlyTrends: [],\r\n\r\n    // Recent insights\r\n    recentActivities: [],\r\n    insights: [],\r\n    alerts: []\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Card toggle states\r\n  const [visibleCards, setVisibleCards] = useState({\r\n    totalUsers: true,\r\n    totalTests: true,\r\n    totalAttempts: true,\r\n    averageScore: true,\r\n    // Individual chart toggles\r\n    monthlyTrends: true,\r\n    weeklyActivity: true,\r\n    subjectPerformance: true,\r\n    classPerformance: true,\r\n    userRole: true,\r\n    subjectRadar: true,\r\n    testTypes: true\r\n  });\r\n\r\n\r\n\r\n  // Toggle functions for cards\r\n  const toggleCard = (cardKey) => {\r\n    setVisibleCards(prev => ({\r\n      ...prev,\r\n      [cardKey]: !prev[cardKey]\r\n    }));\r\n  };\r\n\r\n  // Fetch comprehensive statistics\r\n  useEffect(() => {\r\n    const fetchComprehensiveStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Track page view\r\n        trackEvent('page_view', {\r\n          page_title: 'Statistics Page',\r\n          page_location: window.location.href\r\n        });\r\n\r\n        const [usersData, testsData, attemptsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getTests(),\r\n          apiService.getAttempts()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const tests = testsData.results || testsData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n\r\n        // Calculate basic metrics\r\n        const totalUsers = users.length;\r\n        const totalStudents = users.filter(user => user.role === 'student').length;\r\n        const totalTeachers = users.filter(user => user.role === 'teacher').length;\r\n        const totalTests = tests.length;\r\n        const totalAttempts = attempts.length;\r\n\r\n        const scores = attempts.map(attempt => attempt.score || 0);\r\n        const averageScore = scores.length > 0\r\n          ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n          : 0;\r\n\r\n        // Class performance analysis\r\n        const students = users.filter(user => user.role === 'student');\r\n        const classGroups = {};\r\n\r\n        students.forEach(student => {\r\n          const classGroup = student.class_group || \"Noma'lum\";\r\n          if (!classGroups[classGroup]) {\r\n            classGroups[classGroup] = {\r\n              name: classGroup,\r\n              students: [],\r\n              totalTests: 0,\r\n              totalScore: 0,\r\n              activeStudents: 0\r\n            };\r\n          }\r\n          classGroups[classGroup].students.push(student);\r\n          if (!student.is_banned) {\r\n            classGroups[classGroup].activeStudents++;\r\n          }\r\n\r\n          // Calculate class test statistics\r\n          const studentAttempts = attempts.filter(attempt => attempt.student === student.id);\r\n          classGroups[classGroup].totalTests += studentAttempts.length;\r\n\r\n          if (studentAttempts.length > 0) {\r\n            const avgScore = studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / studentAttempts.length;\r\n            classGroups[classGroup].totalScore += avgScore;\r\n          }\r\n        });\r\n\r\n        const classPerformance = Object.values(classGroups).map(cls => ({\r\n          ...cls,\r\n          averageScore: cls.students.length > 0\r\n            ? Math.round(cls.totalScore / cls.students.filter(s =>\r\n              attempts.some(a => a.student === s.id)).length) || 0\r\n            : 0\r\n        })).sort((a, b) => b.averageScore - a.averageScore);\r\n\r\n        // Top students analysis\r\n        const studentAnalytics = students.map(student => {\r\n          const studentAttempts = attempts.filter(attempt => attempt.student === student.id);\r\n          const testCount = studentAttempts.length;\r\n          const avgScore = testCount > 0\r\n            ? Math.round(studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / testCount)\r\n            : 0;\r\n\r\n          return {\r\n            id: student.id,\r\n            name: student.name || student.username,\r\n            classGroup: student.class_group || \"Noma'lum\",\r\n            testCount,\r\n            averageScore: avgScore,\r\n            isBanned: student.is_banned,\r\n            registrationDate: student.registration_date\r\n          };\r\n        });\r\n\r\n        const topStudents = studentAnalytics\r\n          .filter(student => !student.isBanned && student.testCount > 0)\r\n          .sort((a, b) => b.averageScore - a.averageScore)\r\n          .slice(0, 10);\r\n\r\n        // Popular tests analysis\r\n        const testAnalytics = tests.map(test => {\r\n          const testAttempts = attempts.filter(attempt => attempt.test === test.id);\r\n          const attemptCount = testAttempts.length;\r\n          const avgScore = attemptCount > 0\r\n            ? Math.round(testAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / attemptCount)\r\n            : 0;\r\n\r\n          const teacher = users.find(user => user.id === test.teacher);\r\n\r\n          return {\r\n            id: test.id,\r\n            title: test.title,\r\n            subject: test.subject,\r\n            teacherName: teacher ? teacher.name || teacher.username : \"Noma'lum\",\r\n            attemptCount,\r\n            averageScore: avgScore,\r\n            isActive: test.is_active !== false\r\n          };\r\n        });\r\n\r\n        const popularTests = testAnalytics\r\n          .sort((a, b) => b.attemptCount - a.attemptCount)\r\n          .slice(0, 10);\r\n\r\n        // Subject analytics\r\n        const subjectGroups = {};\r\n        testAnalytics.forEach(test => {\r\n          const subject = test.subject || \"Noma'lum\";\r\n          if (!subjectGroups[subject]) {\r\n            subjectGroups[subject] = {\r\n              subject,\r\n              totalTests: 0,\r\n              totalAttempts: 0,\r\n              averageScore: 0,\r\n              activeTests: 0\r\n            };\r\n          }\r\n          subjectGroups[subject].totalTests++;\r\n          subjectGroups[subject].totalAttempts += test.attemptCount;\r\n          if (test.isActive) {\r\n            subjectGroups[subject].activeTests++;\r\n          }\r\n        });\r\n\r\n        const subjectAnalytics = Object.values(subjectGroups).map(subject => ({\r\n          ...subject,\r\n          averageScore: subject.totalAttempts > 0\r\n            ? Math.round(testAnalytics\r\n              .filter(t => t.subject === subject.subject)\r\n              .reduce((sum, t) => sum + t.averageScore, 0) /\r\n              testAnalytics.filter(t => t.subject === subject.subject).length)\r\n            : 0\r\n        })).sort((a, b) => b.totalAttempts - a.totalAttempts);\r\n\r\n        // Weekly activity data (last 7 days)\r\n        const weeklyActivity = [];\r\n\r\n        // Monthly trends (last 6 months)\r\n        const monthlyTrends = [];\r\n\r\n        // Generate insights and alerts\r\n        const insights = [\r\n          {\r\n            type: 'positive',\r\n            title: \"A'lo natijalar\",\r\n            description: `${topStudents.length} ta o'quvchi 80% dan yuqori ball oldi`,\r\n            impact: 'high'\r\n          },\r\n          {\r\n            type: 'info',\r\n            title: 'Faol sinflar',\r\n            description: `${classPerformance.filter(c => c.averageScore > 70).length} ta sinf o'rtacha 70% dan yuqori ko'rsatkichga ega`,\r\n            impact: 'medium'\r\n          },\r\n          {\r\n            type: 'warning',\r\n            title: \"E'tibor kerak\",\r\n            description: `${students.filter(s => s.is_banned).length} ta o'quvchi bloklangan holatda`,\r\n            impact: 'low'\r\n          }\r\n        ];\r\n\r\n        const alerts = [\r\n          {\r\n            type: 'success',\r\n            message: `Jami ${totalAttempts} ta test urinish qayd etildi`,\r\n            time: '2 soat oldin'\r\n          },\r\n          {\r\n            type: 'info',\r\n            message: `Yangi test yaratildi: \"Algebra asoslari\"`,\r\n            time: '4 soat oldin'\r\n          },\r\n          {\r\n            type: 'warning',\r\n            message: `5 ta o'quvchi bir hafta davomida test ishlashmagan`,\r\n            time: '1 kun oldin'\r\n          }\r\n        ];\r\n\r\n        // Recent activities\r\n        const recentActivities = [\r\n          {\r\n            type: 'student_registration',\r\n            title: 'Yangi o\\'quvchi ro\\'yxatdan o\\'tdi',\r\n            description: 'Ahmad Karimov 9-01-A sinfiga qo\\'shildi',\r\n            time: '30 daqiqa oldin',\r\n            icon: <UserOutlined style={{ color: '#16a34a' }} />\r\n          },\r\n          {\r\n            type: 'test_completion',\r\n            title: 'Test yakunlandi',\r\n            description: 'Fizika testida 15 ta o\\'quvchi ishtirok etdi',\r\n            time: '1 soat oldin',\r\n            icon: <BookOutlined style={{ color: '#2563eb' }} />\r\n          },\r\n          {\r\n            type: 'high_score',\r\n            title: 'Yuqori ball',\r\n            description: 'Laylo Azimova 95% ball oldi',\r\n            time: '2 soat oldin',\r\n            icon: <TrophyOutlined style={{ color: '#f59e0b' }} />\r\n          },\r\n          {\r\n            type: 'test_created',\r\n            title: 'Yangi test',\r\n            description: 'Kimyo fani bo\\'yicha test yaratildi',\r\n            time: '3 soat oldin',\r\n            icon: <PlusOutlined style={{ color: '#7c3aed' }} />\r\n          }\r\n        ];\r\n\r\n        setStats({\r\n          totalUsers,\r\n          totalStudents,\r\n          totalTeachers,\r\n          totalTests,\r\n          totalAttempts,\r\n          averageScore,\r\n          studentGrowth: 12.5,\r\n          testGrowth: 8.3,\r\n          attemptGrowth: 15.7,\r\n          scoreGrowth: 3.2,\r\n          classPerformance,\r\n          topStudents,\r\n          popularTests,\r\n          subjectAnalytics,\r\n          weeklyActivity,\r\n          monthlyTrends,\r\n          recentActivities,\r\n          insights,\r\n          alerts\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching comprehensive statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchComprehensiveStatistics();\r\n  }, []);\r\n\r\n  // Chart Configuration and Data\r\n  const createGradient = (ctx, color1, color2) => {\r\n    if (!ctx || !ctx.createLinearGradient) {\r\n      return color1;\r\n    }\r\n    try {\r\n      const gradient = ctx.createLinearGradient(0, 0, 0, 400);\r\n      gradient.addColorStop(0, color1);\r\n      gradient.addColorStop(1, color2);\r\n      return gradient;\r\n    } catch (error) {\r\n      return color1;\r\n    }\r\n  };\r\n\r\n  const monthlyTrendsChart = {\r\n    labels: stats.monthlyTrends.map(item => item.month),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'quvchilar',\r\n        data: stats.monthlyTrends.map(item => item.students),\r\n        borderColor: '#2563eb',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(37, 99, 235, 0.3)';\r\n            return createGradient(ctx, 'rgba(37, 99, 235, 0.3)', 'rgba(37, 99, 235, 0.05)');\r\n          } catch (error) {\r\n            return 'rgba(37, 99, 235, 0.3)';\r\n          }\r\n        },\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#2563eb',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n      {\r\n        label: 'Testlar',\r\n        data: stats.monthlyTrends.map(item => item.tests),\r\n        borderColor: '#7c3aed',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(124, 58, 237, 0.3)';\r\n            return createGradient(ctx, 'rgba(124, 58, 237, 0.3)', 'rgba(124, 58, 237, 0.05)');\r\n          } catch (error) {\r\n            return 'rgba(124, 58, 237, 0.3)';\r\n          }\r\n        },\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#7c3aed',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n      {\r\n        label: 'Urinishlar',\r\n        data: stats.monthlyTrends.map(item => item.attempts),\r\n        borderColor: '#059669',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(5, 150, 105, 0.3)';\r\n            return createGradient(ctx, 'rgba(5, 150, 105, 0.3)', 'rgba(5, 150, 105, 0.05)');\r\n          } catch (error) {\r\n            return 'rgba(5, 150, 105, 0.3)';\r\n          }\r\n        },\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#059669',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const weeklyActivityChart = {\r\n    labels: stats.weeklyActivity.map(item => item.dayName),\r\n    datasets: [\r\n      {\r\n        label: 'Ro\\'yxatdan o\\'tish',\r\n        data: stats.weeklyActivity.map(item => item.registrations),\r\n        borderColor: '#f59e0b',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(245, 158, 11, 0.3)';\r\n            return createGradient(ctx, 'rgba(245, 158, 11, 0.3)', 'rgba(245, 158, 11, 0.05)');\r\n          } catch (error) {\r\n            return 'rgba(245, 158, 11, 0.3)';\r\n          }\r\n        },\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#f59e0b',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n      {\r\n        label: 'Test urinishlari',\r\n        data: stats.weeklyActivity.map(item => item.testAttempts),\r\n        borderColor: '#dc2626',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(220, 38, 38, 0.3)';\r\n            return createGradient(ctx, 'rgba(220, 38, 38, 0.3)', 'rgba(220, 38, 38, 0.05)');\r\n          } catch (error) {\r\n            return 'rgba(220, 38, 38, 0.3)';\r\n          }\r\n        },\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#dc2626',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n      {\r\n        label: 'Yangi testlar',\r\n        data: stats.weeklyActivity.map(item => item.newTests),\r\n        borderColor: '#16a34a',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(22, 163, 74, 0.3)';\r\n            return createGradient(ctx, 'rgba(22, 163, 74, 0.3)', 'rgba(22, 163, 74, 0.05)');\r\n          } catch (error) {\r\n            return 'rgba(22, 163, 74, 0.3)';\r\n          }\r\n        },\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#16a34a',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const subjectPerformanceChart = {\r\n    labels: stats.subjectAnalytics.map(item => item.subject),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: stats.subjectAnalytics.map(item => item.averageScore),\r\n        borderColor: '#8b5cf6',\r\n        backgroundColor: (context) => {\r\n          try {\r\n            const chart = context?.chart;\r\n            const { ctx, chartArea } = chart || {};\r\n            if (!chartArea || !ctx) return 'rgba(139, 92, 246, 0.4)';\r\n            return createGradient(ctx, 'rgba(139, 92, 246, 0.4)', 'rgba(139, 92, 246, 0.1)');\r\n          } catch (error) {\r\n            return 'rgba(139, 92, 246, 0.4)';\r\n          }\r\n        },\r\n        borderWidth: 4,\r\n        fill: true,\r\n        tension: 0.3,\r\n        pointBackgroundColor: '#8b5cf6',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 3,\r\n        pointRadius: 8,\r\n        pointHoverRadius: 10,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // Additional Charts\r\n  const classPerformanceBarChart = {\r\n    labels: stats.classPerformance.slice(0, 8).map(item => item.name),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: stats.classPerformance.slice(0, 8).map(item => item.averageScore),\r\n        backgroundColor: [\r\n          'rgba(37, 99, 235, 0.8)',\r\n          'rgba(124, 58, 237, 0.8)',\r\n          'rgba(5, 150, 105, 0.8)',\r\n          'rgba(245, 158, 11, 0.8)',\r\n          'rgba(220, 38, 38, 0.8)',\r\n          'rgba(22, 163, 74, 0.8)',\r\n          'rgba(139, 92, 246, 0.8)',\r\n          'rgba(236, 72, 153, 0.8)'\r\n        ],\r\n        borderColor: [\r\n          '#2563eb',\r\n          '#7c3aed',\r\n          '#059669',\r\n          '#f59e0b',\r\n          '#dc2626',\r\n          '#16a34a',\r\n          '#8b5cf6',\r\n          '#ec4899'\r\n        ],\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const userRolePieChart = {\r\n    labels: ['O\\'quvchilar', 'O\\'qituvchilar', 'Boshqaruvchilar'],\r\n    datasets: [\r\n      {\r\n        data: [stats.totalStudents, stats.totalTeachers, Math.max(stats.totalUsers - stats.totalStudents - stats.totalTeachers, 0)],\r\n        backgroundColor: [\r\n          '#2563eb',\r\n          '#7c3aed',\r\n          '#059669'\r\n        ],\r\n        borderColor: [\r\n          '#ffffff',\r\n          '#ffffff',\r\n          '#ffffff'\r\n        ],\r\n        borderWidth: 3,\r\n        hoverOffset: 10,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const subjectPerformanceRadarChart = {\r\n    labels: stats.subjectAnalytics.slice(0, 6).map(item => item.subject),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: stats.subjectAnalytics.slice(0, 6).map(item => item.averageScore),\r\n        backgroundColor: 'rgba(139, 92, 246, 0.2)',\r\n        borderColor: '#8b5cf6',\r\n        borderWidth: 3,\r\n        pointBackgroundColor: '#8b5cf6',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n      {\r\n        label: 'Jami testlar',\r\n        data: stats.subjectAnalytics.slice(0, 6).map(item => item.totalTests),\r\n        backgroundColor: 'rgba(37, 99, 235, 0.2)',\r\n        borderColor: '#2563eb',\r\n        borderWidth: 3,\r\n        pointBackgroundColor: '#2563eb',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const testDifficultyDoughnutChart = {\r\n    labels: ['Oson', 'O\\'rta', 'Qiyin', 'Juda qiyin'],\r\n    datasets: [\r\n        {\r\n          data: [\r\n            stats.popularTests.filter(test => test.averageScore >= 80).length,\r\n            stats.popularTests.filter(test => test.averageScore >= 60 && test.averageScore < 80).length,\r\n            stats.popularTests.filter(test => test.averageScore >= 40 && test.averageScore < 60).length,\r\n            stats.popularTests.filter(test => test.averageScore < 40).length\r\n          ],\r\n          backgroundColor: [\r\n            '#10b981',\r\n            '#f59e0b',\r\n            '#ef4444',\r\n            '#7c2d12'\r\n          ],\r\n          borderColor: [\r\n            '#ffffff',\r\n            '#ffffff',\r\n            '#ffffff',\r\n            '#ffffff'\r\n          ],\r\n          borderWidth: 3,\r\n          hoverOffset: 15,\r\n        },\r\n      ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: {\r\n            size: 12,\r\n            weight: 600,\r\n          },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        mode: 'index',\r\n        intersect: false,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n        titleFont: {\r\n          size: 14,\r\n          weight: 'bold',\r\n        },\r\n        bodyFont: {\r\n          size: 13,\r\n        },\r\n      },\r\n    },\r\n    interaction: {\r\n      mode: 'nearest',\r\n      axis: 'x',\r\n      intersect: false,\r\n    },\r\n    scales: {\r\n      x: {\r\n        display: true,\r\n        grid: {\r\n          display: true,\r\n          color: 'rgba(0, 0, 0, 0.05)',\r\n        },\r\n        ticks: {\r\n          color: '#6b7280',\r\n          font: {\r\n            size: 11,\r\n            weight: 500,\r\n          },\r\n        },\r\n      },\r\n      y: {\r\n        display: true,\r\n        grid: {\r\n          display: true,\r\n          color: 'rgba(0, 0, 0, 0.05)',\r\n        },\r\n        ticks: {\r\n          color: '#6b7280',\r\n          font: {\r\n            size: 11,\r\n            weight: 500,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    animation: {\r\n      duration: 2500,\r\n      easing: 'easeOutElastic(1, .6)',\r\n      delay: (context) => {\r\n        // Stagger animations for multiple datasets\r\n        let delay = 0;\r\n        if (context.type === 'data' && context.mode === 'default') {\r\n          delay = context.dataIndex * 300 + context.datasetIndex * 100;\r\n        }\r\n        return delay;\r\n      },\r\n    },\r\n  };\r\n\r\n  const barChartOptions = {\r\n    ...chartOptions,\r\n    plugins: {\r\n      ...chartOptions.plugins,\r\n      legend: {\r\n        ...chartOptions.plugins.legend,\r\n        display: false\r\n      }\r\n    },\r\n    scales: {\r\n      ...chartOptions.scales,\r\n      y: {\r\n        ...chartOptions.scales.y,\r\n        beginAtZero: true,\r\n        max: 100\r\n      }\r\n    },\r\n    animation: {\r\n      ...chartOptions.animation,\r\n      delay: (context) => {\r\n        if (context.type === 'data' && context.mode === 'default') {\r\n          return context.dataIndex * 100;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n  };\r\n\r\n  const pieChartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'bottom',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: {\r\n            size: 12,\r\n            weight: 600,\r\n          },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n        titleFont: {\r\n          size: 14,\r\n          weight: 'bold',\r\n        },\r\n        bodyFont: {\r\n          size: 13,\r\n        },\r\n      },\r\n    },\r\n    animation: {\r\n      animateRotate: true,\r\n      animateScale: true,\r\n      duration: 2500,\r\n      easing: 'easeOutBounce',\r\n    },\r\n  };\r\n\r\n  const radarChartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: {\r\n            size: 12,\r\n            weight: 600,\r\n          },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n        titleFont: {\r\n          size: 14,\r\n          weight: 'bold',\r\n        },\r\n        bodyFont: {\r\n          size: 13,\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      r: {\r\n        beginAtZero: true,\r\n        max: 100,\r\n        grid: {\r\n          color: 'rgba(0, 0, 0, 0.1)',\r\n        },\r\n        pointLabels: {\r\n          color: '#6b7280',\r\n          font: {\r\n            size: 11,\r\n            weight: 500,\r\n          },\r\n        },\r\n        ticks: {\r\n          color: '#6b7280',\r\n          font: {\r\n            size: 10,\r\n          },\r\n          stepSize: 20,\r\n        },\r\n      },\r\n    },\r\n    animation: {\r\n      duration: 3000,\r\n      easing: 'easeOutElastic(1, .8)',\r\n    },\r\n  };\r\n\r\n  const handleChartClick = (chartName) => {\r\n    trackEvent('chart_interaction', {\r\n      chart_name: chartName,\r\n      interaction_type: 'click'\r\n    });\r\n  };\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix, trend, subtitle }) => (\r\n    <div>\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          transition: 'all 0.3s ease',\r\n          marginBottom: '12px'\r\n        }}\r\n        styles={{ body: { padding: '24px' } }}\r\n        hoverable\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Text\r\n              style={{\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#64748b',\r\n                display: 'block',\r\n                marginBottom: '8px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              styles={{\r\n                content: {\r\n                  fontSize: '32px',\r\n                  fontWeight: 700,\r\n                  color: '#1e293b',\r\n                  lineHeight: 1.2\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              backgroundColor: color,\r\n              borderRadius: '12px',\r\n              padding: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '16px'\r\n            }}\r\n          >\r\n            {React.cloneElement(icon, {\r\n              style: {\r\n                fontSize: '28px',\r\n                color: '#ffffff'\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n      {trend && (\r\n        <Card\r\n          style={{\r\n            backgroundColor: trend.direction === 'up' ? '#f0fdf4' : '#fef2f2',\r\n            border: `1px solid ${trend.direction === 'up' ? '#bbf7d0' : '#fecaca'}`,\r\n            borderRadius: '8px',\r\n            padding: '12px 16px'\r\n          }}\r\n          bodyStyle={{ padding: '12px 16px' }}\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            {trend.direction === 'up' ? (\r\n              <ArrowUpOutlined style={{ color: '#16a34a', fontSize: '14px', marginRight: '6px' }} />\r\n            ) : (\r\n              <ArrowDownOutlined style={{ color: '#dc2626', fontSize: '14px', marginRight: '6px' }} />\r\n            )}\r\n            <Text style={{\r\n              fontSize: '13px',\r\n              fontWeight: 600,\r\n              color: trend.direction === 'up' ? '#16a34a' : '#dc2626'\r\n            }}>\r\n              {trend.value} o'tgan oyga nisbatan\r\n            </Text>\r\n          </div>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // Animation delay helper\r\n  const getAnimationDelay = (index) => {\r\n    return index * 200; // 200ms delay between each chart\r\n  };\r\n\r\n  // Resizable Chart Component with entrance animations\r\n  const ResizableChart = ({ chartKey, title, icon, children, width, index = 0 }) => {\r\n    const isVisible = visibleCards[chartKey];\r\n\r\n    if (!isVisible) return null;\r\n\r\n    return (\r\n      <div\r\n        className=\"animate__animated animate__fadeInUp\"\r\n        style={{\r\n          width: `${width || 50}%`,\r\n          padding: '0 8px',\r\n          animationDelay: `${getAnimationDelay(index)}ms`,\r\n          animationDuration: '0.8s',\r\n          animationFillMode: 'both'\r\n        }}\r\n      >\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            height: '400px',\r\n          }}\r\n          bodyStyle={{ padding: '16px', height: '100%', display: 'flex', flexDirection: 'column' }}\r\n          hoverable\r\n        >\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            marginBottom: '16px'\r\n          }}>\r\n            {icon}\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              margin: '0 0 0 8px'\r\n            }}>\r\n              {title}\r\n            </Title>\r\n          </div>\r\n          <div style={{ flex: 1, height: '320px' }}>\r\n            {children}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getInsightColor = (type) => {\r\n    switch (type) {\r\n      case 'positive': return '#16a34a';\r\n      case 'warning': return '#f59e0b';\r\n      case 'info': return '#2563eb';\r\n      case 'negative': return '#dc2626';\r\n      default: return '#64748b';\r\n    }\r\n  };\r\n\r\n  const columns = {\r\n    classes: [\r\n      {\r\n        title: 'Sinf',\r\n        dataIndex: 'name',\r\n        key: 'name',\r\n        render: (text) => (\r\n          <Text strong style={{ color: '#1e293b' }}>{text}</Text>\r\n        ),\r\n      },\r\n      {\r\n        title: 'O\\'quvchilar',\r\n        dataIndex: 'students',\r\n        key: 'students',\r\n        render: (students) => (\r\n          <Text style={{ color: '#64748b' }}>{students.length} ta</Text>\r\n        ),\r\n      },\r\n      {\r\n        title: 'Faol',\r\n        dataIndex: 'activeStudents',\r\n        key: 'activeStudents',\r\n        render: (count) => (\r\n          <Text style={{ color: '#16a34a', fontWeight: 600 }}>{count} ta</Text>\r\n        ),\r\n      },\r\n      {\r\n        title: 'O\\'rtacha ball',\r\n        dataIndex: 'averageScore',\r\n        key: 'averageScore',\r\n        render: (score) => (\r\n          <Text style={{ color: score >= 70 ? '#16a34a' : score >= 50 ? '#f59e0b' : '#dc2626', fontWeight: 600 }}>\r\n            {score}%\r\n          </Text>\r\n        ),\r\n      },\r\n    ],\r\n    students: [\r\n      {\r\n        title: 'O\\'quvchi',\r\n        dataIndex: 'name',\r\n        key: 'name',\r\n        render: (text, record) => (\r\n          <Space>\r\n            <Text strong style={{ color: '#1e293b' }}>{text}</Text>\r\n            <Text style={{ color: '#64748b', fontSize: '12px' }}>({record.classGroup})</Text>\r\n          </Space>\r\n        ),\r\n      },\r\n      {\r\n        title: 'Testlar',\r\n        dataIndex: 'testCount',\r\n        key: 'testCount',\r\n        render: (count) => (\r\n          <Text style={{ color: '#2563eb', fontWeight: 600 }}>{count}</Text>\r\n        ),\r\n      },\r\n      {\r\n        title: 'O\\'rtacha ball',\r\n        dataIndex: 'averageScore',\r\n        key: 'averageScore',\r\n        render: (score) => (\r\n          <Tag color={score >= 80 ? 'green' : score >= 60 ? 'orange' : 'red'}>\r\n            {score}%\r\n          </Tag>\r\n        ),\r\n      },\r\n    ],\r\n    tests: [\r\n      {\r\n        title: 'Test',\r\n        dataIndex: 'title',\r\n        key: 'title',\r\n        render: (text, record) => (\r\n          <Space direction=\"vertical\" size=\"small\">\r\n            <Text strong style={{ color: '#1e293b' }}>{text}</Text>\r\n            <Text style={{ color: '#64748b', fontSize: '12px' }}>\r\n              {record.subject} тАв {record.teacherName}\r\n            </Text>\r\n          </Space>\r\n        ),\r\n      },\r\n      {\r\n        title: 'Urinishlar',\r\n        dataIndex: 'attemptCount',\r\n        key: 'attemptCount',\r\n        render: (count) => (\r\n          <Text style={{ color: '#7c3aed', fontWeight: 600 }}>{count}</Text>\r\n        ),\r\n      },\r\n      {\r\n        title: 'O\\'rtacha ball',\r\n        dataIndex: 'averageScore',\r\n        key: 'averageScore',\r\n        render: (score) => (\r\n          <Text style={{ color: '#059669', fontWeight: 600 }}>{score}%</Text>\r\n        ),\r\n      },\r\n    ]\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16 }}>Ma'lumotlar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '24px' }}>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '16px' }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className='animate__animated animate__slideInDown' style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          Umumiy statistika\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Platformaning to'liq analitikasi va insights\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Overview Statistics with Entrance Animations */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n            <StatCard\r\n              title=\"Jami foydalanuvchilar\"\r\n              value={stats.totalUsers}\r\n              icon={<UserOutlined />}\r\n              color=\"#2563eb\"\r\n              trend={{ direction: 'up', value: `+${stats.studentGrowth}%` }}\r\n              subtitle={`${stats.totalStudents} o'quvchi, ${stats.totalTeachers} o'qituvchi`}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n            <StatCard\r\n              title=\"Jami testlar\"\r\n              value={stats.totalTests}\r\n              icon={<BookOutlined />}\r\n              color=\"#7c3aed\"\r\n              trend={{ direction: 'up', value: `+${stats.testGrowth}%` }}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n            <StatCard\r\n              title=\"Jami urinishlar\"\r\n              value={stats.totalAttempts}\r\n              icon={<TrophyOutlined />}\r\n              color=\"#059669\"\r\n              trend={{ direction: 'up', value: `+${stats.attemptGrowth}%` }}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={stats.averageScore}\r\n              suffix=\"%\"\r\n              icon={<RiseOutlined />}\r\n              color=\"#f59e0b\"\r\n              trend={{ direction: 'up', value: `+${stats.scoreGrowth}%` }}\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '500ms', marginBottom: '16px' }}>\r\n        <Card style={{\r\n          backgroundColor: '#eff6ff',\r\n          borderRadius: '12px',\r\n          padding: '16px 20px',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <Title level={3} style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 600,\r\n            color: '#1e293b',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            marginBottom: '16px'\r\n          }}>\r\n            <BarChartOutlined style={{ color: '#2563eb' }} />\r\n            Statistik ma'lumotlar va tahlillar\r\n          </Title>\r\n\r\n          {/* Chart Management Controls */}\r\n          <div style={{\r\n            backgroundColor: '#ffffff',\r\n            borderRadius: '8px',\r\n            padding: '16px',\r\n            border: '1px solid #e2e8f0'\r\n          }}>\r\n            <Text style={{\r\n              fontSize: '14px',\r\n              fontWeight: 600,\r\n              color: '#374151',\r\n              display: 'block',\r\n              marginBottom: '12px'\r\n            }}>\r\n              Diagrammalar boshqaruvi\r\n            </Text>\r\n            <Row gutter={[16, 12]}>\r\n              {[\r\n                { key: 'monthlyTrends', label: 'Oylik tendensiyalar', icon: <LineChartOutlined style={{ color: '#2563eb' }} /> },\r\n                { key: 'weeklyActivity', label: 'Haftalik faoliyat', icon: <CalendarOutlined style={{ color: '#f59e0b' }} /> },\r\n                { key: 'subjectPerformance', label: 'Fanlar natijalari', icon: <BarChartOutlined style={{ color: '#8b5cf6' }} /> },\r\n                { key: 'classPerformance', label: 'Sinf natijalari', icon: <BarChartOutlined style={{ color: '#059669' }} /> },\r\n                { key: 'userRole', label: 'Foydalanuvchilar tarkibi', icon: <PieChartOutlined style={{ color: '#f59e0b' }} /> },\r\n                { key: 'subjectRadar', label: 'Fanlar radar', icon: <RiseOutlined style={{ color: '#8b5cf6' }} /> },\r\n                { key: 'testTypes', label: 'Test turlari', icon: <BookOutlined style={{ color: '#7c3aed' }} /> }\r\n              ].map(chart => (\r\n                <Col xs={24} sm={12} md={8} key={chart.key}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>{chart.label}</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCards[chart.key]}\r\n                      onChange={(checked) => toggleCard(chart.key)}\r\n                      style={{ backgroundColor: visibleCards[chart.key] ? '#2563eb' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div>\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"monthlyTrends\"\r\n              title=\"Oylik tendensiyalar\"\r\n              icon={<LineChartOutlined style={{ color: '#2563eb' }} />}\r\n              width={50}\r\n              index={0}\r\n            >\r\n              <Line\r\n                data={monthlyTrendsChart}\r\n                options={chartOptions}\r\n                onClick={() => handleChartClick('monthly_trends')}\r\n              />\r\n            </ResizableChart>\r\n\r\n            <ResizableChart\r\n              chartKey=\"weeklyActivity\"\r\n              title=\"Haftalik faoliyat\"\r\n              icon={<CalendarOutlined style={{ color: '#f59e0b' }} />}\r\n              width={50}\r\n              index={1}\r\n            >\r\n              <Line\r\n                data={weeklyActivityChart}\r\n                options={chartOptions}\r\n                onClick={() => handleChartClick('weekly_activity')}\r\n              />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"subjectPerformance\"\r\n              title=\"Fanlar bo'yicha natijalar\"\r\n              icon={<BarChartOutlined style={{ color: '#8b5cf6' }} />}\r\n              width={100}\r\n              index={2}\r\n            >\r\n              <Line\r\n                data={subjectPerformanceChart}\r\n                options={{\r\n                  ...chartOptions,\r\n                  plugins: {\r\n                    ...chartOptions.plugins,\r\n                    legend: {\r\n                      ...chartOptions.plugins.legend,\r\n                      display: false\r\n                    }\r\n                  }\r\n                }}\r\n                onClick={() => handleChartClick('subject_performance')}\r\n              />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n\r\n        {/* Additional Charts Section */}\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"classPerformance\"\r\n              title=\"Sinf natijalari\"\r\n              icon={<BarChartOutlined style={{ color: '#059669' }} />}\r\n              width={50}\r\n              index={3}\r\n            >\r\n              <Bar\r\n                data={classPerformanceBarChart}\r\n                options={barChartOptions}\r\n                onClick={() => handleChartClick('class_performance_bar')}\r\n              />\r\n            </ResizableChart>\r\n\r\n            <ResizableChart\r\n              chartKey=\"userRole\"\r\n              title=\"Foydalanuvchilar tarkibi\"\r\n              icon={<PieChartOutlined style={{ color: '#f59e0b' }} />}\r\n              width={50}\r\n              index={4}\r\n            >\r\n              <Pie\r\n                data={userRolePieChart}\r\n                options={pieChartOptions}\r\n                onClick={() => handleChartClick('user_role_pie')}\r\n              />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <Row gutter={[0, 24]}>\r\n            <ResizableChart\r\n              chartKey=\"subjectRadar\"\r\n              title=\"Fanlar radar\"\r\n              icon={<RiseOutlined style={{ color: '#8b5cf6' }} />}\r\n              width={50}\r\n              index={5}\r\n            >\r\n              <Radar\r\n                data={subjectPerformanceRadarChart}\r\n                options={radarChartOptions}\r\n                onClick={() => handleChartClick('subject_radar')}\r\n              />\r\n            </ResizableChart>\r\n\r\n            <ResizableChart\r\n              chartKey=\"testTypes\"\r\n              title=\"Test turlari\"\r\n              icon={<BookOutlined style={{ color: '#7c3aed' }} />}\r\n              width={50}\r\n              index={6}\r\n            >\r\n              <Pie\r\n                data={testDifficultyDoughnutChart}\r\n                options={pieChartOptions}\r\n                onClick={() => handleChartClick('test_types_pie')}\r\n              />\r\n            </ResizableChart>\r\n          </Row>\r\n        </div>\r\n\r\n        {/* Top Classes and Students Analytics */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n          <Col xs={24} lg={12}>\r\n            <Card\r\n              style={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e2e8f0',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            >\r\n              <Title level={3} style={{\r\n                fontSize: '1.25rem',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n                marginBottom: '16px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px'\r\n              }}>\r\n                <TeamOutlined style={{ color: '#16a34a' }} />\r\n                Top 5 sinflar\r\n              </Title>\r\n              <Table\r\n                dataSource={stats.classPerformance.slice(0, 5)}\r\n                columns={columns.classes}\r\n                pagination={false}\r\n                size=\"small\"\r\n                rowKey=\"name\"\r\n              />\r\n            </Card>\r\n          </Col>\r\n\r\n          <Col xs={24} lg={12}>\r\n            <Card\r\n              style={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e2e8f0',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            >\r\n              <Title level={3} style={{\r\n                fontSize: '1.25rem',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n                marginBottom: '16px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px'\r\n              }}>\r\n                <StarOutlined style={{ color: '#f59e0b' }} />\r\n                Top 5 o'quvchilar\r\n              </Title>\r\n              <Table\r\n                dataSource={stats.topStudents.slice(0, 5)}\r\n                columns={columns.students}\r\n                pagination={false}\r\n                size=\"small\"\r\n                rowKey=\"id\"\r\n              />\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Popular Tests Analytics */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n          <Col xs={24}>\r\n            <Card\r\n              style={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e2e8f0',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            >\r\n              <Title level={3} style={{\r\n                fontSize: '1.25rem',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n                marginBottom: '16px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px'\r\n              }}>\r\n                <BookOutlined style={{ color: '#7c3aed' }} />\r\n                Eng mashhur testlar\r\n              </Title>\r\n              <Table\r\n                dataSource={stats.popularTests.slice(0, 5)}\r\n                columns={columns.tests}\r\n                pagination={false}\r\n                size=\"small\"\r\n                rowKey=\"id\"\r\n              />\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StatisticsPage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\StudentDetails.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'emojiPositions' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":37,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"emojiPositions"},"fix":{"range":[956,970],"text":""},"desc":"Remove unused variable 'emojiPositions'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport 'animate.css'\r\nimport {\r\n  Card,\r\n  Button,\r\n  Typography,\r\n  Avatar,\r\n  Tag,\r\n  Table,\r\n  Alert,\r\n  Space,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  TrophyOutlined,\r\n  CheckCircleOutlined,\r\n  FileTextOutlined,\r\n  ClockCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport apiService from '../../data/apiService';\r\nimport { shouldShowPremiumFeatures } from '../../utils/premiumVisibility';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst StudentDetails = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [student, setStudent] = useState(null);\r\n  const [attempts, setAttempts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [averageScore, setAverageScore] = useState(0);\r\n  const [highestScore, setHighestScore] = useState(0);\r\n  const [emojiPositions, setEmojiPositions] = useState([]);\r\n\r\n  const generateRandomPositions = (emojiCount) => {\r\n    const positions = [];\r\n    for (let i = 0; i < emojiCount; i++) {\r\n      positions.push({\r\n        left: Math.random() * 100,\r\n        top: Math.random() * 100,\r\n        delay: Math.random() * 5,\r\n        duration: 15 + Math.random() * 10,\r\n        scale: 0.7 + Math.random() * 0.6,\r\n        rotation: Math.random() * 360\r\n      });\r\n    }\r\n    return positions;\r\n  };\r\n\r\n  const getDirectionLabel = (direction) => {\r\n    if (direction === 'natural') return 'Tabiiy fanlar';\r\n    if (direction === 'exact') return 'Aniq fanlar';\r\n    return 'Yo\\'nalish kiritilmagan';\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadStudentDetails = async () => {\r\n      try {\r\n        const users = await apiService.getUsers();\r\n        const studentData = users.find(user => user.id === parseInt(id));\r\n        setStudent(studentData);\r\n\r\n        if (studentData.selected_emojis && studentData.selected_emojis.length > 0) {\r\n          setEmojiPositions(generateRandomPositions(studentData.selected_emojis.length));\r\n        }\r\n\r\n        const allAttempts = await apiService.getAttempts({ student: id });\r\n        setAttempts(allAttempts);\r\n\r\n        const scores = allAttempts.map(attempt => attempt.score || 0);\r\n        const avgScore = scores.length > 0 ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length) : 0;\r\n        const highScore = scores.length > 0 ? Math.round(Math.max(...scores)) : 0;\r\n        setAverageScore(avgScore);\r\n        setHighestScore(highScore);\r\n      } catch (error) {\r\n        console.error('Failed to load student details:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadStudentDetails();\r\n  }, [id]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"animate__animated animate__fadeIn\" style={{\r\n        padding: '24px',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column',\r\n        gap: '16px'\r\n      }}>\r\n        <div className=\"animate__animated animate__bounce animate__infinite\">\r\n          <div style={{\r\n            width: '40px',\r\n            height: '40px',\r\n            border: '4px solid #e2e8f0',\r\n            borderTop: '4px solid #2563eb',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite'\r\n          }}></div>\r\n        </div>\r\n        <div className=\"animate__animated animate__pulse\" style={{\r\n          color: '#64748b',\r\n          fontSize: '16px',\r\n          fontWeight: 500\r\n        }}>Yuklanmoqda...</div>\r\n        <style>{`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n          .animate__hover-lift:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);\r\n          }\r\n          .animate__hover-float:hover {\r\n            transform: translateY(-1px);\r\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!student) {\r\n    return (\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px' }}>\r\n        <div className=\"animate__animated animate__bounceIn\" style={{ \r\n          textAlign: 'center', \r\n          padding: '48px 0',\r\n          backgroundColor: '#f8fafc',\r\n          borderRadius: '12px',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <FileTextOutlined style={{ \r\n            fontSize: '64px', \r\n            color: '#cbd5e1', \r\n            marginBottom: '16px',\r\n            display: 'block'\r\n          }} />\r\n          <Text style={{ \r\n            color: '#64748b', \r\n            fontSize: '18px', \r\n            fontWeight: 500,\r\n            display: 'block',\r\n            marginBottom: '24px'\r\n          }}>O'quvchi topilmadi</Text>\r\n          <Button\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={() => navigate('/admin/students')}\r\n            className=\"animate__animated animate__pulse animate__infinite\"\r\n            style={{ \r\n              marginTop: '16px',\r\n              borderColor: '#2563eb',\r\n              color: '#2563eb'\r\n            }}\r\n          >\r\n            Orqaga\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Test nomi',\r\n      dataIndex: 'test_title',\r\n      key: 'test_title',\r\n      render: (text, record) => (\r\n        <Text strong style={{ color: '#1e293b' }}>\r\n          {text || `Test ${record.test}`}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Ball',\r\n      dataIndex: 'score',\r\n      key: 'score',\r\n      render: (score) => (\r\n        <Tag\r\n          color={score >= 70 ? 'green' : score >= 50 ? 'orange' : 'red'}\r\n          style={{ fontWeight: 600 }}\r\n        >\r\n          {score?.toFixed(1)}%\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Topshirgan sana',\r\n      dataIndex: 'submitted_at',\r\n      key: 'submitted_at',\r\n      render: (date) => (\r\n        <Text style={{ color: '#64748b' }}>\r\n          {new Date(date).toLocaleString('uz-UZ')}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sarflangan vaqt',\r\n      dataIndex: 'time_taken',\r\n      key: 'time_taken',\r\n      render: (time) => (\r\n        <Text style={{ color: '#64748b' }}>\r\n          {Math.floor(time / 60)}:{(time % 60).toString().padStart(2, '0')}\r\n        </Text>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__fadeInDown\" style={{\r\n        marginBottom: '24px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '16px'\r\n      }}>\r\n        <Button\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={() => navigate('/admin/students')}\r\n          className=\"animate__animated animate__hover-lift\"\r\n          style={{\r\n            borderColor: '#2563eb',\r\n            color: '#2563eb',\r\n            transition: 'all 0.3s ease'\r\n          }}\r\n        >\r\n          Orqaga\r\n        </Button>\r\n        <Title level={2} className=\"animate__animated animate__fadeInRight\" style={{ \r\n          margin: 0, \r\n          color: '#1e293b',\r\n          animationDelay: '0.2s'\r\n        }}>\r\n          {student.name} - Batafsil ma'lumotlar\r\n        </Title>\r\n      </div>\r\n\r\n      {/* Profile Card */}\r\n      <Card\r\n        className=\"animate__animated animate__fadeInUp\"\r\n        style={{\r\n          marginBottom: '24px',\r\n          background: shouldShowPremiumFeatures(student, null) && student.background_gradient?.css\r\n            ? student.background_gradient.css\r\n            : shouldShowPremiumFeatures(student, null)\r\n              ? `\r\n                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),\r\n                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),\r\n                linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)\r\n              `\r\n              : 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',\r\n          borderRadius: '20px',\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n          minHeight: '220px',\r\n          border: '0px solid rgba(255, 255, 255, 0.1)',\r\n          transition: 'all 0.3s ease'\r\n        }}\r\n        bodyStyle={{ padding: '32px' }}\r\n      >\r\n        {/* Premium Badge */}\r\n        {shouldShowPremiumFeatures(student, null) && (\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: 20,\r\n            right: 20,\r\n            zIndex: 2\r\n          }}>\r\n            <Tag\r\n              icon={<TrophyOutlined />}\r\n              color=\"gold\"\r\n              style={{\r\n                fontWeight: 'bold',\r\n                fontSize: '14px',\r\n                padding: '4px 12px'\r\n              }}\r\n            >\r\n              PREMIUM\r\n            </Tag>\r\n          </div>\r\n        )}\r\n\r\n        <Row gutter={24} align=\"middle\">\r\n          {/* Profile Photo */}\r\n          <Col className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.3s' }}>\r\n            <div style={{ position: 'relative' }}>\r\n              <Avatar\r\n                src={student.profile_photo_url}\r\n                size={150}\r\n                className=\"animate__animated animate__fadeInUp\"\r\n                style={{\r\n                  border: '4px solid rgba(255, 255, 255, 0.8)',\r\n                  boxShadow: '0 8px 32px rgba(0,0,0,0.2)',\r\n                  backgroundColor: shouldShowPremiumFeatures(student, null) ? '#ffffff' : '#2563eb',\r\n                  fontSize: shouldShowPremiumFeatures(student, null) ? undefined : '48px',\r\n                  fontWeight: 'bold',\r\n                  color: shouldShowPremiumFeatures(student, null) ? '#2563eb' : '#ffffff',\r\n                  transition: 'all 0.3s ease',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                {!student.profile_photo_url && student.name.charAt(0).toUpperCase()}\r\n              </Avatar>\r\n\r\n              {/* Premium Checkmark */}\r\n              {shouldShowPremiumFeatures(student, null) && (\r\n                <div \r\n                  style={{\r\n                    position: 'absolute',\r\n                    bottom: 10,\r\n                    right: 10,\r\n                    backgroundColor: '#10b981',\r\n                    borderRadius: '50%',\r\n                    width: 32,\r\n                    height: 32,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    border: '3px solid rgba(255, 255, 255, 0.8)',\r\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.2)',\r\n                    transition: 'all 0.3s ease',\r\n                    animationDelay: '0.8s',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <CheckCircleOutlined \r\n                    style={{ \r\n                      color: 'white', \r\n                      fontSize: '16px',\r\n                      transition: 'all 0.3s ease'\r\n                    }} \r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </Col>\r\n\r\n          {/* Profile Info */}\r\n          <Col flex=\"auto\" className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.4s' }}>\r\n            <div style={{\r\n              color: student.is_premium ? '#ffffff' : '#1e293b',\r\n              textAlign: 'left'\r\n            }}>\r\n              <Title level={2} style={{\r\n                margin: 0,\r\n                marginBottom: '2px',\r\n                fontWeight: 700,\r\n                textShadow: student.is_premium ? '0 2px 4px rgba(0,0,0,0.3)' : 'none'\r\n              }}>\r\n                {student.name}\r\n              </Title>\r\n\r\n              {student.profile_status && (\r\n                <Text style={{\r\n                  fontSize: '18px',\r\n                  fontStyle: 'italic',\r\n                  opacity: 0.9,\r\n                  display: 'block',\r\n                  marginBottom: '24px',\r\n                  textShadow: student.is_premium ? '0 1px 2px rgba(0,0,0,0.3)' : 'none'\r\n                }}>\r\n                  \"{student.profile_status}\"\r\n                </Text>\r\n              )}\r\n\r\n              <Space wrap className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.5s' }}>\r\n                <Tag \r\n                  color=\"green\" \r\n                  className=\"animate__animated animate__fadeInUp\"\r\n                  style={{ \r\n                    fontWeight: 600,\r\n                    transition: 'all 0.3s ease',\r\n                    animationDelay: '0.6s'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.target.style.transform = 'scale(1.05)';\r\n                    e.target.style.boxShadow = '0 2px 8px rgba(34, 197, 94, 0.3)';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.target.style.transform = 'scale(1)';\r\n                    e.target.style.boxShadow = 'none';\r\n                  }}\r\n                >\r\n                  O'quvchi\r\n                </Tag>\r\n                <Tag \r\n                  color=\"blue\" \r\n                  className=\"animate__animated animate__fadeInUp\"\r\n                  style={{ \r\n                    fontWeight: 600,\r\n                    transition: 'all 0.3s ease',\r\n                    animationDelay: '0.7s'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.target.style.transform = 'scale(1.05)';\r\n                    e.target.style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.target.style.transform = 'scale(1)';\r\n                    e.target.style.boxShadow = 'none';\r\n                  }}\r\n                >\r\n                  {student.class_group || 'Noma\\'lum'} sinf\r\n                </Tag>\r\n                <Tag \r\n                  color=\"default\" \r\n                  className=\"animate__animated animate__fadeInUp\"\r\n                  style={{ \r\n                    fontWeight: 600,\r\n                    transition: 'all 0.3s ease',\r\n                    animationDelay: '0.8s'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.target.style.transform = 'scale(1.05)';\r\n                    e.target.style.boxShadow = '0 2px 8px rgba(107, 114, 128, 0.3)';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.target.style.transform = 'scale(1)';\r\n                    e.target.style.boxShadow = 'none';\r\n                  }}\r\n                >\r\n                  {getDirectionLabel(student.direction)}\r\n                </Tag>\r\n              </Space>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Card>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"animate__animated animate__fadeInUp\">\r\n        <Row gutter={24} style={{ marginBottom: '24px' }}>\r\n          <Col xs={24} sm={12} md={6}>\r\n            <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n              <Card\r\n                style={{\r\n                  backgroundColor: '#ffffff',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n                styles={{ body: { padding: '24px' } }}\r\n              >\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                  <div style={{ flex: 1 }}>\r\n                    <Text\r\n                      style={{\r\n                        fontSize: '12px',\r\n                        fontWeight: 600,\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px',\r\n                        color: '#64748b',\r\n                        display: 'block',\r\n                        marginBottom: '8px'\r\n                      }}\r\n                    >\r\n                      Topshirilgan testlar\r\n                    </Text>\r\n                    <Statistic\r\n                      value={attempts.length}\r\n                      styles={{\r\n                        content: {\r\n                          fontSize: '40px',\r\n                          fontWeight: 700,\r\n                          color: '#1e293b',\r\n                          lineHeight: 1.2\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      backgroundColor: '#2563eb',\r\n                      borderRadius: '12px',\r\n                      padding: '16px',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      marginLeft: '16px'\r\n                    }}\r\n                  >\r\n                    <FileTextOutlined style={{ fontSize: '32px', color: '#ffffff' }} />\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n\r\n          <Col xs={24} sm={12} md={6}>\r\n            <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n              <Card\r\n                style={{\r\n                  backgroundColor: '#ffffff',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n                styles={{ body: { padding: '24px' } }}\r\n              >\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                  <div style={{ flex: 1 }}>\r\n                    <Text\r\n                      style={{\r\n                        fontSize: '12px',\r\n                        fontWeight: 600,\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px',\r\n                        color: '#64748b',\r\n                        display: 'block',\r\n                        marginBottom: '8px'\r\n                      }}\r\n                    >\r\n                      O'rtacha ball\r\n                    </Text>\r\n                    <Statistic\r\n                      value={averageScore}\r\n                      suffix=\"%\"\r\n                      styles={{\r\n                        content: {\r\n                          fontSize: '40px',\r\n                          fontWeight: 700,\r\n                          color: '#1e293b',\r\n                          lineHeight: 1.2\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      backgroundColor: '#16a34a',\r\n                      borderRadius: '12px',\r\n                      padding: '16px',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      marginLeft: '16px'\r\n                    }}\r\n                  >\r\n                    <TrophyOutlined style={{ fontSize: '32px', color: '#ffffff' }} />\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n\r\n          <Col xs={24} sm={12} md={6}>\r\n            <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n              <Card\r\n                style={{\r\n                  backgroundColor: '#ffffff',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n                styles={{ body: { padding: '24px' } }}\r\n              >\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                  <div style={{ flex: 1 }}>\r\n                    <Text\r\n                      style={{\r\n                        fontSize: '12px',\r\n                        fontWeight: 600,\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px',\r\n                        color: '#64748b',\r\n                        display: 'block',\r\n                        marginBottom: '8px'\r\n                      }}\r\n                    >\r\n                      Eng yuqori ball\r\n                    </Text>\r\n                    <Statistic\r\n                      value={highestScore}\r\n                      suffix=\"%\"\r\n                      styles={{\r\n                        content: {\r\n                          fontSize: '40px',\r\n                          fontWeight: 700,\r\n                          color: '#1e293b',\r\n                          lineHeight: 1.2\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      backgroundColor: '#d97706',\r\n                      borderRadius: '12px',\r\n                      padding: '16px',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      marginLeft: '16px'\r\n                    }}\r\n                  >\r\n                    <TrophyOutlined style={{ fontSize: '32px', color: '#ffffff' }} />\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n\r\n          <Col xs={24} sm={12} md={6}>\r\n            <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n              <Card\r\n                style={{\r\n                  backgroundColor: '#ffffff',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n                styles={{ body: { padding: '28px' } }}\r\n              >\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                  <div style={{ flex: 1 }}>\r\n                    <Text\r\n                      style={{\r\n                        fontSize: '12px',\r\n                        fontWeight: 600,\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px',\r\n                        color: '#64748b',\r\n                        display: 'block',\r\n                        marginBottom: '8px'\r\n                      }}\r\n                    >\r\n                      Premium status\r\n                    </Text>\r\n                    <Statistic\r\n                      value={student?.is_premium ? 'Faol' : 'Yo\\'q'}\r\n                      styles={{\r\n                        content: {\r\n                          fontSize: '32px',\r\n                          fontWeight: 700,\r\n                          color: '#1e293b',\r\n                          lineHeight: 1.2\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      backgroundColor: student?.is_premium ? '#dc2626' : '#6b7280',\r\n                      borderRadius: '12px',\r\n                      padding: '16px',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      marginLeft: '16px'\r\n                    }}\r\n                  >\r\n                    <TrophyOutlined style={{ fontSize: '32px', color: '#ffffff' }} />\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n      {/* Test Results Table */}\r\n      <Card\r\n        className=\"animate__animated animate__fadeInUp\"\r\n        title={\r\n          <span className=\"animate__animated animate__slideInRight\">\r\n            {`Test natijalari (${attempts.length})`}\r\n          </span>\r\n        }\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          transition: 'all 0.3s ease',\r\n          overflow: 'hidden'\r\n        }}\r\n        bodyStyle={{ padding: '0' }}\r\n      >\r\n        {attempts.length === 0 ? (\r\n          <div className=\"animate__animated animate__bounceIn\" style={{\r\n            textAlign: 'center',\r\n            padding: '48px 24px',\r\n            backgroundColor: '#f8fafc',\r\n            borderRadius: '8px',\r\n            border: '1px solid #e2e8f0',\r\n            margin: '24px'\r\n          }}>\r\n            <FileTextOutlined \r\n              className=\"animate__animated animate__pulse animate__infinite\" \r\n              style={{ \r\n                fontSize: '48px', \r\n                color: '#cbd5e1', \r\n                marginBottom: '16px',\r\n                display: 'block'\r\n              }} \r\n            />\r\n            <Text style={{ color: '#64748b', fontSize: '16px', fontWeight: 500 }}>\r\n              Hali testlar topshirilmagan\r\n            </Text>\r\n          </div>\r\n        ) : (\r\n          <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '0.2s' }}>\r\n            <Table\r\n              className=\"animate__animated animate__fadeInUp\"\r\n              columns={columns}\r\n              dataSource={attempts}\r\n              rowKey=\"id\"\r\n              pagination={{\r\n                pageSize: 10,\r\n                showSizeChanger: true,\r\n                showQuickJumper: true,\r\n                showTotal: (total) => `Jami ${total} ta test`,\r\n                className: 'animate__animated animate__fadeInUp',\r\n                style: { animationDelay: '0.3s' }\r\n              }}\r\n              locale={{\r\n                emptyText: 'Test natijalari mavjud emas'\r\n              }}\r\n              rowClassName={(record, index) => \r\n                `animate__animated animate__fadeInUp ${\r\n                  index % 2 === 0 ? 'table-row-even' : 'table-row-odd'\r\n                }`\r\n              }\r\n              onRow={(record, index) => ({\r\n                className: `animate__animated animate__fadeInUp ${\r\n                  index % 2 === 0 ? 'table-row-even' : 'table-row-odd'\r\n                }`,\r\n                style: { \r\n                  animationDelay: `${0.1 + index * 0.05}s`,\r\n                  transition: 'all 0.3s ease',\r\n                  cursor: 'pointer'\r\n                },\r\n                onMouseEnter: (e) => {\r\n                  e.currentTarget.style.backgroundColor = '#f0f9ff';\r\n                  e.currentTarget.style.transform = 'scale(1.01)';\r\n                  e.currentTarget.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';\r\n                },\r\n                onMouseLeave: (e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent';\r\n                  e.currentTarget.style.transform = 'scale(1)';\r\n                  e.currentTarget.style.boxShadow = 'none';\r\n                }\r\n              })}\r\n            />\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentDetails;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\StudentRatings.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'attempts' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"attempts"},"fix":{"range":[417,425],"text":""},"desc":"Remove unused variable 'attempts'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'record' is defined but never used.","line":309,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":309,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"record"},"fix":{"range":[9651,9658],"text":""},"desc":"Remove unused variable 'record'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":309,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":309,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[9657,9664],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Typography,\r\n  Tag,\r\n  Input,\r\n} from 'antd';\r\nimport {\r\n  SearchOutlined,\r\n} from '@ant-design/icons';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst StudentRatings = () => {\r\n  const [originalStudents, setOriginalStudents] = useState([]);\r\n  const [attempts, setAttempts] = useState([]);\r\n\r\n  const [sortField, setSortField] = useState('average_score');\r\n  const [sortDirection, setSortDirection] = useState('desc');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadStudents = async () => {\r\n      try {\r\n        const allUsers = await apiService.getUsers();\r\n        const studentUsers = allUsers.filter((user) => user.role === 'student');\r\n\r\n        const allAttempts = await apiService.getAttempts();\r\n        setAttempts(allAttempts);\r\n\r\n        // Calculate test statistics for each student\r\n        const studentsWithStats = studentUsers.map(student => {\r\n          const studentAttempts = allAttempts.filter(attempt => attempt.student === student.id);\r\n          const testCount = studentAttempts.length;\r\n          const averageScore = testCount > 0\r\n            ? studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / testCount\r\n            : 0;\r\n\r\n          return {\r\n            ...student,\r\n            total_tests_taken: testCount,\r\n            average_score: averageScore\r\n          };\r\n        });\r\n\r\n        setOriginalStudents(studentsWithStats);\r\n      } catch (error) {\r\n        console.error('Failed to load students:', error);\r\n      }\r\n    };\r\n    loadStudents();\r\n  }, []);\r\n\r\n  const students = useMemo(() => {\r\n    if (originalStudents.length === 0) return [];\r\n\r\n    let filteredStudents = [...originalStudents];\r\n\r\n    // Apply search filter\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      filteredStudents = filteredStudents.filter(student =>\r\n        (student.class_group && student.class_group.toLowerCase().includes(term)) ||\r\n        (student.name && student.name.toLowerCase().includes(term)) ||\r\n        (student.username && student.username.toLowerCase().includes(term))\r\n      );\r\n    }\r\n\r\n    return filteredStudents.sort((a, b) => {\r\n      let aValue, bValue;\r\n\r\n      switch (sortField) {\r\n        case 'average_score':\r\n          aValue = a.average_score || 0;\r\n          bValue = b.average_score || 0;\r\n          break;\r\n        case 'total_tests_taken':\r\n          aValue = a.total_tests_taken || 0;\r\n          bValue = b.total_tests_taken || 0;\r\n          break;\r\n        case 'name':\r\n          aValue = (a.name || a.username || '').toLowerCase();\r\n          bValue = (b.name || b.username || '').toLowerCase();\r\n          if (sortDirection === 'asc') {\r\n            return aValue.localeCompare(bValue);\r\n          } else {\r\n            return bValue.localeCompare(aValue);\r\n          }\r\n        case 'class_group':\r\n          aValue = (a.class_group || '').toLowerCase();\r\n          bValue = (b.class_group || '').toLowerCase();\r\n          if (sortDirection === 'asc') {\r\n            return aValue.localeCompare(bValue);\r\n          } else {\r\n            return bValue.localeCompare(aValue);\r\n          }\r\n        case 'direction':\r\n          aValue = (a.direction || '').toLowerCase();\r\n          bValue = (b.direction || '').toLowerCase();\r\n          if (sortDirection === 'asc') {\r\n            return aValue.localeCompare(bValue);\r\n          } else {\r\n            return bValue.localeCompare(aValue);\r\n          }\r\n        case 'registration_date':\r\n          aValue = a.registration_date ? new Date(a.registration_date).getTime() : 0;\r\n          bValue = b.registration_date ? new Date(b.registration_date).getTime() : 0;\r\n          break;\r\n        default:\r\n          return 0;\r\n      }\r\n\r\n      if (sortDirection === 'asc') {\r\n        return aValue - bValue;\r\n      } else {\r\n        return bValue - aValue;\r\n      }\r\n    });\r\n  }, [sortField, sortDirection, originalStudents, searchTerm]);\r\n\r\n\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('desc');\r\n    }\r\n  };\r\n\r\n  const handleTestCountClick = (studentId) => {\r\n    const student = students.find(s => s.id === studentId);\r\n    if (student) {\r\n      alert(`Testlar soni: ${student.total_tests_taken || 0}`);\r\n    }\r\n  };\r\n\r\n  const handleAverageScoreClick = (studentId) => {\r\n    const student = students.find(s => s.id === studentId);\r\n    if (student) {\r\n      alert(`O'rtacha ball: ${(student.average_score || 0).toFixed(1)}%`);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('name')}>\r\n          Ism\r\n        </div>\r\n      ),\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record) => (\r\n        <Text strong style={{ color: '#1e293b' }}>\r\n          {text || record.username}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('class_group')}>\r\n          Sinflar\r\n        </div>\r\n      ),\r\n      dataIndex: 'class_group',\r\n      key: 'class_group',\r\n      render: (text) => (\r\n        <Text style={{ color: '#1e293b', fontWeight: 500 }}>\r\n          {text}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('total_tests_taken')}>\r\n          Testlar soni\r\n        </div>\r\n      ),\r\n      dataIndex: 'total_tests_taken',\r\n      key: 'total_tests_taken',\r\n      render: (value, record) => (\r\n        <Text\r\n          style={{\r\n            fontWeight: 700,\r\n            color: '#2563eb',\r\n            fontSize: '18px',\r\n            cursor: 'pointer'\r\n          }}\r\n          onClick={() => handleTestCountClick(record.id)}\r\n        >\r\n          {value || 0}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('average_score')}>\r\n          O'rtacha ball\r\n        </div>\r\n      ),\r\n      dataIndex: 'average_score',\r\n      key: 'average_score',\r\n      render: (value, record) => (\r\n        <Text\r\n          style={{\r\n            fontWeight: 700,\r\n            color: '#059669',\r\n            fontSize: '18px',\r\n            cursor: 'pointer'\r\n          }}\r\n          onClick={() => handleAverageScoreClick(record.id)}\r\n        >\r\n          {(value || 0).toFixed(1)}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('direction')}>\r\n          Yo'nalish\r\n        </div>\r\n      ),\r\n      dataIndex: 'direction',\r\n      key: 'direction',\r\n      render: (direction) => {\r\n        if (direction) {\r\n          return (\r\n            <Tag\r\n              color={direction === 'natural' ? 'green' : 'blue'}\r\n              style={{ fontWeight: 600 }}\r\n            >\r\n              {direction === 'natural' ? 'Tabiiy fanlar' : 'Aniq fanlar'}\r\n            </Tag>\r\n          );\r\n        }\r\n        return (\r\n          <Text style={{ color: '#64748b', fontStyle: 'italic' }}>\r\n            To'ldirilmagan\r\n          </Text>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: (\r\n        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }} onClick={() => handleSort('registration_date')}>\r\n          Ro'yxatdan o'tgan sana\r\n        </div>\r\n      ),\r\n      dataIndex: 'registration_date',\r\n      key: 'registration_date',\r\n      render: (date) => (\r\n        <Text style={{\r\n          fontWeight: 500,\r\n          color: date ? '#1e293b' : '#64748b'\r\n        }}>\r\n          {date ? new Date(date).toLocaleDateString() : 'To\\'ldirilmagan'}\r\n        </Text>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__slideInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          O'quvchilar reytingi\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Sinf va yo'nalish bo'yicha o'quvchilarni ularning test natijalari asosida reytinglash\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Search Input */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ marginBottom: '24px' }}>\r\n        <Input\r\n          placeholder=\"Sinf yoki rahbar nomini qidirish...\"\r\n          prefix={<SearchOutlined />}\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{\r\n            borderRadius: '8px',\r\n            maxWidth: '100%'\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Students Table */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '300ms' }}>\r\n        <Table\r\n          dataSource={students}\r\n          columns={columns}\r\n          rowKey=\"id\"\r\n          pagination={{ \r\n            pageSize: 10,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total) => `Jami ${total} ta o'quvchi`,\r\n          }}\r\n          rowClassName={(record, index) => `animate__animated animate__fadeInLeft`}\r\n          onRow={(record, index) => ({\r\n            className: 'animate__animated animate__fadeInLeft',\r\n            style: { \r\n              animationDelay: `${index * 100}ms`,\r\n              transition: 'all 0.3s ease'\r\n            },\r\n            onMouseEnter: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1.02)';\r\n            },\r\n            onMouseLeave: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1)';\r\n            }\r\n          })}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentRatings;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\StudentsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setChartWidths' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":98,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setChartWidths"},"fix":{"range":[2028,2044],"text":""},"desc":"Remove unused variable 'setChartWidths'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'tests' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":129,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"tests"},"fix":{"range":[2885,2930],"text":""},"desc":"Remove unused variable 'tests'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'checked' is defined but never used.","line":850,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":850,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"checked"},"fix":{"range":[26409,26416],"text":""},"desc":"Remove unused variable 'checked'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  Progress,\r\n  Table,\r\n  Avatar,\r\n  Tag,\r\n  Space,\r\n  Button,\r\n  Tooltip,\r\n  Switch,\r\n} from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  TeamOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  BookOutlined,\r\n  CalendarOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  InfoCircleOutlined,\r\n  SafetyCertificateOutlined,\r\n  ClockCircleOutlined,\r\n  LineChartOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title as ChartTitle,\r\n  Tooltip as ChartTooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line, Bar, Pie, Doughnut, Radar } from 'react-chartjs-2';\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  ChartTitle,\r\n  ChartTooltip,\r\n  Legend,\r\n  Filler\r\n);\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst StudentsPage = () => {\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalStudents: 0,\r\n    activeStudents: 0,\r\n    bannedStudents: 0,\r\n    averageScore: 0,\r\n    totalTests: 0,\r\n    topPerformers: [],\r\n    studentStatistics: [],\r\n    recentActivity: [],\r\n    classDistribution: [],\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Chart visibility states\r\n  const [visibleCharts, setVisibleCharts] = useState({\r\n    performanceDistribution: true,\r\n    classAnalysis: true,\r\n    monthlyGrowth: true,\r\n    subjectPerformance: true,\r\n    directionDistribution: true,\r\n    activityTrend: true\r\n  });\r\n  \r\n  // Chart width control states\r\n  const [chartWidths, setChartWidths] = useState({\r\n    performanceDistribution: 50,\r\n    classAnalysis: 50,\r\n    monthlyGrowth: 50,\r\n    subjectPerformance: 100,\r\n    directionDistribution: 50,\r\n    activityTrend: 50\r\n  });\r\n  \r\n  // Toggle functions for charts\r\n  const toggleChart = (chartKey) => {\r\n    setVisibleCharts(prev => ({\r\n      ...prev,\r\n      [chartKey]: !prev[chartKey]\r\n    }));\r\n  };\r\n\r\n  // Fetch student statistics\r\n  useEffect(() => {\r\n    const fetchStudentStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        const [usersData, attemptsData, testsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts(),\r\n          apiService.getTests()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n        const tests = testsData.results || testsData;\r\n\r\n        // Filter students\r\n        const students = users.filter(user => user.role === 'student');\r\n        const bannedStudents = students.filter(student => student.is_banned);\r\n        const activeStudents = students.filter(student => !student.is_banned);\r\n\r\n        // Calculate student performance\r\n        const studentStatistics = students.map(student => {\r\n          const studentAttempts = attempts.filter(attempt => attempt.student === student.id);\r\n          const testCount = studentAttempts.length;\r\n          const averageScore = testCount > 0 \r\n            ? studentAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / testCount\r\n            : 0;\r\n\r\n          return {\r\n            id: student.id,\r\n            name: student.name || student.username,\r\n            displayId: student.display_id || student.username,\r\n            classGroup: student.class_group || 'Noma\\'lum',\r\n            direction: student.direction,\r\n            testCount,\r\n            averageScore: Math.round(averageScore),\r\n            isBanned: student.is_banned,\r\n            registrationDate: student.registration_date,\r\n            lastActivity: testCount > 0 ? studentAttempts.sort((a, b) => new Date(b.submitted_at) - new Date(a.submitted_at))[0].submitted_at : null,\r\n            performance: averageScore >= 80 ? 'Yuqori' : averageScore >= 60 ? 'O\\'rta' : 'Past'\r\n          };\r\n        });\r\n\r\n        // Calculate overall statistics\r\n        const totalTests = attempts.length;\r\n        const averageScore = studentStatistics.length > 0 \r\n          ? Math.round(studentStatistics.reduce((sum, student) => sum + student.averageScore, 0) / studentStatistics.length)\r\n          : 0;\r\n\r\n        // Get top performers (top 10)\r\n        const topPerformers = studentStatistics\r\n          .filter(student => !student.isBanned && student.testCount > 0)\r\n          .sort((a, b) => b.averageScore - a.averageScore)\r\n          .slice(0, 10);\r\n\r\n        // Class distribution\r\n        const classGroups = {};\r\n        students.forEach(student => {\r\n          const classGroup = student.class_group || 'Noma\\'lum';\r\n          if (!classGroups[classGroup]) {\r\n            classGroups[classGroup] = { total: 0, active: 0, banned: 0 };\r\n          }\r\n          classGroups[classGroup].total++;\r\n          if (student.is_banned) {\r\n            classGroups[classGroup].banned++;\r\n          } else {\r\n            classGroups[classGroup].active++;\r\n          }\r\n        });\r\n\r\n        const classDistribution = Object.entries(classGroups).map(([classGroup, data]) => ({\r\n          classGroup,\r\n          ...data\r\n        })).sort((a, b) => b.total - a.total);\r\n\r\n        // Recent activity (simulated based on registration dates)\r\n        const recentRegistrations = students\r\n          .filter(student => student.registration_date)\r\n          .sort((a, b) => new Date(b.registration_date) - new Date(a.registration_date))\r\n          .slice(0, 5)\r\n          .map(student => ({\r\n            studentName: student.name || student.username,\r\n            classGroup: student.class_group || 'Noma\\'lum',\r\n            action: 'Ro\\'yxatdan o\\'tdi',\r\n            time: new Date(student.registration_date).toLocaleDateString('uz-UZ'),\r\n            type: 'registration'\r\n          }));\r\n\r\n        setStats({\r\n          totalStudents: students.length,\r\n          activeStudents: activeStudents.length,\r\n          bannedStudents: bannedStudents.length,\r\n          averageScore,\r\n          totalTests,\r\n          topPerformers,\r\n          studentStatistics,\r\n          recentActivity: recentRegistrations,\r\n          classDistribution\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching student statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStudentStatistics();\r\n  }, []);\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix, trend }) => (\r\n    <div>\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          transition: 'all 0.3s ease',\r\n          marginBottom: '12px'\r\n        }}\r\n        styles={{ body: { padding: '24px' } }}\r\n        hoverable\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Text\r\n              style={{\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#64748b',\r\n                display: 'block',\r\n                marginBottom: '8px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              styles={{\r\n                content: {\r\n                  fontSize: '32px',\r\n                  fontWeight: 700,\r\n                  color: '#1e293b',\r\n                  lineHeight: 1.2\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              backgroundColor: color,\r\n              borderRadius: '12px',\r\n              padding: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '16px'\r\n            }}\r\n          >\r\n            {React.cloneElement(icon, {\r\n              style: {\r\n                fontSize: '28px',\r\n                color: '#ffffff'\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n      {trend && (\r\n        <Card\r\n          style={{\r\n            backgroundColor: trend.direction === 'up' ? '#f0fdf4' : '#fef2f2',\r\n            border: `1px solid ${trend.direction === 'up' ? '#bbf7d0' : '#fecaca'}`,\r\n            borderRadius: '8px',\r\n            padding: '12px 16px'\r\n          }}\r\n          bodyStyle={{ padding: '12px 16px' }}\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            {trend.direction === 'up' ? (\r\n              <ArrowUpOutlined style={{ color: '#16a34a', fontSize: '14px', marginRight: '6px' }} />\r\n            ) : (\r\n              <ArrowDownOutlined style={{ color: '#dc2626', fontSize: '14px', marginRight: '6px' }} />\r\n            )}\r\n            <Text style={{ \r\n              fontSize: '13px', \r\n              fontWeight: 600,\r\n              color: trend.direction === 'up' ? '#16a34a' : '#dc2626'\r\n            }}>\r\n              {trend.value} o'tgan oyga nisbatan\r\n            </Text>\r\n          </div>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const getPerformanceColor = (performance) => {\r\n    switch (performance) {\r\n      case 'Yuqori': return '#16a34a';\r\n      case 'O\\'rta': return '#f59e0b';\r\n      case 'Past': return '#dc2626';\r\n      default: return '#64748b';\r\n    }\r\n  };\r\n\r\n  const getDirectionColor = (direction) => {\r\n    return direction === 'natural' ? '#059669' : '#2563eb';\r\n  };\r\n\r\n  // Chart Data Configuration\r\n  const performanceDistributionChart = {\r\n    labels: ['Yuqori (80%+)', 'O\\'rta (60-79%)', 'Past (<60%)'],\r\n    datasets: [\r\n      {\r\n        data: [\r\n          stats.studentStatistics.filter(s => s.averageScore >= 80).length,\r\n          stats.studentStatistics.filter(s => s.averageScore >= 60 && s.averageScore < 80).length,\r\n          stats.studentStatistics.filter(s => s.averageScore < 60).length\r\n        ],\r\n        backgroundColor: ['#16a34a', '#f59e0b', '#dc2626'],\r\n        borderColor: ['#ffffff', '#ffffff', '#ffffff'],\r\n        borderWidth: 3,\r\n        hoverOffset: 15,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const classAnalysisChart = {\r\n    labels: stats.classDistribution.slice(0, 8).map(cls => cls.classGroup),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'quvchilar soni',\r\n        data: stats.classDistribution.slice(0, 8).map(cls => cls.total),\r\n        backgroundColor: [\r\n          'rgba(37, 99, 235, 0.8)',\r\n          'rgba(124, 58, 237, 0.8)',\r\n          'rgba(5, 150, 105, 0.8)',\r\n          'rgba(245, 158, 11, 0.8)',\r\n          'rgba(220, 38, 38, 0.8)',\r\n          'rgba(22, 163, 74, 0.8)',\r\n          'rgba(139, 92, 246, 0.8)',\r\n          'rgba(236, 72, 153, 0.8)'\r\n        ],\r\n        borderColor: [\r\n          '#2563eb', '#7c3aed', '#059669', '#f59e0b', \r\n          '#dc2626', '#16a34a', '#8b5cf6', '#ec4899'\r\n        ],\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const monthlyGrowthChart = {\r\n    labels: ['Yan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],\r\n    datasets: [\r\n      {\r\n        label: 'Ro\\'yxatdan o\\'tgan o\\'quvchilar',\r\n        data: [45, 52, 38, 65, 42, 58],\r\n        borderColor: '#2563eb',\r\n        backgroundColor: 'rgba(37, 99, 235, 0.3)',\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#2563eb',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const subjectPerformanceChart = {\r\n    labels: ['Matematika', 'Fizika', 'Kimyo', 'Biologiya', 'Tarix'],\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: [78, 72, 85, 69, 76],\r\n        borderColor: '#8b5cf6',\r\n        backgroundColor: 'rgba(139, 92, 246, 0.4)',\r\n        borderWidth: 4,\r\n        fill: true,\r\n        tension: 0.3,\r\n        pointBackgroundColor: '#8b5cf6',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 3,\r\n        pointRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const directionDistributionChart = {\r\n    labels: ['Tabiiy fanlar', 'Aniq fanlar'],\r\n    datasets: [\r\n      {\r\n        data: [\r\n          stats.studentStatistics.filter(s => s.direction === 'natural').length,\r\n          stats.studentStatistics.filter(s => s.direction === 'exact').length\r\n        ],\r\n        backgroundColor: ['#059669', '#2563eb'],\r\n        borderColor: ['#ffffff', '#ffffff'],\r\n        borderWidth: 3,\r\n        hoverOffset: 15,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const activityTrendChart = {\r\n    labels: ['Dushanba', 'Seshanba', 'Chorshanba', 'Payshanba', 'Juma', 'Shanba', 'Yakshanba'],\r\n    datasets: [\r\n      {\r\n        label: 'Aktiv o\\'quvchilar',\r\n        data: [120, 135, 98, 142, 156, 89, 67],\r\n        borderColor: '#16a34a',\r\n        backgroundColor: 'rgba(22, 163, 74, 0.3)',\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#16a34a',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: { size: 12, weight: 600 },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        display: true,\r\n        grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },\r\n        ticks: { color: '#6b7280', font: { size: 11, weight: 500 } },\r\n      },\r\n      y: {\r\n        display: true,\r\n        grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },\r\n        ticks: { color: '#6b7280', font: { size: 11, weight: 500 } },\r\n      },\r\n    },\r\n    animation: { \r\n      duration: 2000, \r\n      easing: 'easeInOutQuart',\r\n      animateRotate: true,\r\n      animateScale: true,\r\n    },\r\n  };\r\n\r\n  const barChartOptions = {\r\n    ...chartOptions,\r\n    plugins: { ...chartOptions.plugins, legend: { ...chartOptions.plugins.legend, display: false } },\r\n    scales: { ...chartOptions.scales, y: { ...chartOptions.scales.y, beginAtZero: true } }\r\n  };\r\n\r\n  const pieChartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'bottom',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: { size: 12, weight: 600 },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n      },\r\n    },\r\n    animation: { \r\n      duration: 2000, \r\n      easing: 'easeInOutQuart',\r\n      animateRotate: true,\r\n      animateScale: true,\r\n    },\r\n  };\r\n\r\n  // Animation delay helper\r\n  const getAnimationDelay = (index) => {\r\n    return index * 200; // 200ms delay between each chart\r\n  };\r\n\r\n  // Resizable Chart Component with entrance animations\r\n  const ResizableChart = ({ chartKey, title, icon, children, width, index = 0 }) => {\r\n    const chartWidth = chartWidths[chartKey] || width || 50;\r\n    const isVisible = visibleCharts[chartKey];\r\n    \r\n    if (!isVisible) return null;\r\n    \r\n    return (\r\n      <div \r\n        className=\"animate__animated animate__fadeInUp\"\r\n        style={{ \r\n          width: `${chartWidth}%`, \r\n          padding: '0 8px',\r\n          animationDelay: `${getAnimationDelay(index)}ms`,\r\n          animationDuration: '0.8s',\r\n          animationFillMode: 'both'\r\n        }}\r\n      >\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            height: '400px',\r\n          }}\r\n          bodyStyle={{ padding: '16px', height: '100%', display: 'flex', flexDirection: 'column' }}\r\n          hoverable\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n            {icon}\r\n            <Title level={3} style={{ fontSize: '1.25rem', fontWeight: 700, color: '#1e293b', margin: '0 0 0 8px' }}>\r\n              {title}\r\n            </Title>\r\n          </div>\r\n          <div style={{ flex: 1, height: '320px' }}>\r\n            {children}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'O\\'quvchi',\r\n      key: 'student',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: record.isBanned ? '#fca5a5' : '#f0f0f0',\r\n              color: record.isBanned ? '#dc2626' : '#666',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            {record.name ? record.name.charAt(0) : 'S'}\r\n          </Avatar>\r\n          <div>\r\n            <Text strong style={{ color: record.isBanned ? '#dc2626' : '#1e293b' }}>\r\n              {record.name}\r\n            </Text>\r\n            <br />\r\n            <Text style={{ color: '#64748b', fontSize: '12px', fontFamily: 'monospace' }}>\r\n              {record.displayId}\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sinf',\r\n      key: 'class',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <TeamOutlined style={{ color: '#64748b' }} />\r\n          <Text strong style={{ color: '#1e293b' }}>\r\n            {record.classGroup}\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Yo\\'nalish',\r\n      key: 'direction',\r\n      render: (_, record) => (\r\n        <Tag\r\n          style={{\r\n            backgroundColor: `${getDirectionColor(record.direction)}20`,\r\n            color: getDirectionColor(record.direction),\r\n            fontWeight: 600\r\n          }}\r\n        >\r\n          {record.direction === 'natural' ? 'Tabiiy fanlar' : 'Aniq fanlar'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Testlar',\r\n      key: 'tests',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.testCount}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'average',\r\n      render: (_, record) => (\r\n        <div>\r\n          <Progress\r\n            percent={record.averageScore}\r\n            size=\"small\"\r\n            strokeColor={getPerformanceColor(record.performance)}\r\n            showInfo={false}\r\n            style={{ marginBottom: '4px' }}\r\n          />\r\n          <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n            {record.averageScore}%\r\n          </Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Ko\\'rsatkich',\r\n      key: 'performance',\r\n      render: (_, record) => (\r\n        <Tag\r\n          color={getPerformanceColor(record.performance)}\r\n          style={{\r\n            backgroundColor: `${getPerformanceColor(record.performance)}20`,\r\n            color: getPerformanceColor(record.performance),\r\n            fontWeight: 600\r\n          }}\r\n        >\r\n          {record.performance}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Status',\r\n      key: 'status',\r\n      render: (_, record) => (\r\n        <Tag color={record.isBanned ? 'red' : 'green'}>\r\n          {record.isBanned ? 'Bloklangan' : 'Faol'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Amallar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          icon={<InfoCircleOutlined />}\r\n          onClick={() => navigate(`/admin/student-details/${record.id}`)}\r\n          style={{ backgroundColor: '#2563eb', borderColor: '#2563eb' }}\r\n        >\r\n          Batafsil\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16 }}>Ma'lumotlar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '24px' }}>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '16px' }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className='animate__animated animate__slideInDown' style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          O'quvchilar statistikasi\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Barcha o'quvchilarning umumiy ko'rsatkichlari va faoliyati\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Statistics Cards with Entrance Animations */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n            <StatCard\r\n              title=\"Jami o'quvchilar\"\r\n              value={stats.totalStudents}\r\n              icon={<UserOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n            <StatCard\r\n              title=\"Faol o'quvchilar\"\r\n              value={stats.activeStudents}\r\n              icon={<SafetyCertificateOutlined />}\r\n              color=\"#16a34a\"\r\n              trend={{ direction: 'up', value: '+8.3%' }}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n            <StatCard\r\n              title=\"Bloklangan\"\r\n              value={stats.bannedStudents}\r\n              icon={<UserOutlined />}\r\n              color=\"#dc2626\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={stats.averageScore}\r\n              suffix=\"%\"\r\n              icon={<TrophyOutlined />}\r\n              color=\"#f59e0b\"\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '500ms', marginBottom: '16px' }}>\r\n        <Card style={{\r\n          backgroundColor: '#eff6ff',\r\n          borderRadius: '12px',\r\n          padding: '16px 20px',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <Title level={3} style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 600,\r\n            color: '#1e293b',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            marginBottom: '16px'\r\n          }}>\r\n            <BarChartOutlined style={{ color: '#2563eb' }} />\r\n            Statistik ma'lumotlar va tahlillar\r\n          </Title>\r\n          \r\n          {/* Chart Management Controls */}\r\n          <div style={{\r\n            backgroundColor: '#ffffff',\r\n            borderRadius: '8px',\r\n            padding: '16px',\r\n            border: '1px solid #e2e8f0'\r\n          }}>\r\n            <Text style={{\r\n              fontSize: '14px',\r\n              fontWeight: 600,\r\n              color: '#374151',\r\n              display: 'block',\r\n              marginBottom: '12px'\r\n            }}>\r\n              Diagrammalar boshqaruvi\r\n            </Text>\r\n            <Row gutter={[16, 12]}>\r\n              {[\r\n                { key: 'performanceDistribution', label: 'Natijalar taqsimoti', icon: <PieChartOutlined style={{ color: '#8b5cf6' }} /> },\r\n                { key: 'classAnalysis', label: 'Sinf tahlili', icon: <BarChartOutlined style={{ color: '#2563eb' }} /> },\r\n                { key: 'monthlyGrowth', label: 'Oylik o\\'sish', icon: <LineChartOutlined style={{ color: '#16a34a' }} /> },\r\n                { key: 'subjectPerformance', label: 'Fanlar natijasi', icon: <BarChartOutlined style={{ color: '#f59e0b' }} /> },\r\n                { key: 'directionDistribution', label: 'Yo\\'nalish taqsimoti', icon: <PieChartOutlined style={{ color: '#059669' }} /> },\r\n                { key: 'activityTrend', label: 'Faoliyat trendi', icon: <LineChartOutlined style={{ color: '#dc2626' }} /> }\r\n              ].map(chart => (\r\n                <Col xs={24} sm={12} md={8} key={chart.key}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>{chart.label}</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts[chart.key]}\r\n                      onChange={(checked) => toggleChart(chart.key)}\r\n                      style={{ backgroundColor: visibleCharts[chart.key] ? '#2563eb' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Row gutter={[0, 24]}>\r\n          <ResizableChart\r\n            chartKey=\"performanceDistribution\"\r\n            title=\"Natijalar taqsimoti\"\r\n            icon={<PieChartOutlined style={{ color: '#8b5cf6' }} />}\r\n            width={50}\r\n            index={0}\r\n          >\r\n            <Pie data={performanceDistributionChart} options={pieChartOptions} />\r\n          </ResizableChart>\r\n\r\n          <ResizableChart\r\n            chartKey=\"classAnalysis\"\r\n            title=\"Sinf tahlili\"\r\n            icon={<BarChartOutlined style={{ color: '#2563eb' }} />}\r\n            width={50}\r\n            index={1}\r\n          >\r\n            <Bar data={classAnalysisChart} options={barChartOptions} />\r\n          </ResizableChart>\r\n        </Row>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Row gutter={[0, 24]}>\r\n          <ResizableChart\r\n            chartKey=\"monthlyGrowth\"\r\n            title=\"Oylik o'sish\"\r\n            icon={<LineChartOutlined style={{ color: '#16a34a' }} />}\r\n            width={50}\r\n            index={2}\r\n          >\r\n            <Line data={monthlyGrowthChart} options={chartOptions} />\r\n          </ResizableChart>\r\n\r\n          <ResizableChart\r\n            chartKey=\"subjectPerformance\"\r\n            title=\"Fanlar bo'yicha natijalar\"\r\n            icon={<BarChartOutlined style={{ color: '#f59e0b' }} />}\r\n            width={50}\r\n            index={3}\r\n          >\r\n            <Line data={subjectPerformanceChart} options={chartOptions} />\r\n          </ResizableChart>\r\n        </Row>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Row gutter={[0, 24]}>\r\n          <ResizableChart\r\n            chartKey=\"directionDistribution\"\r\n            title=\"Yo'nalish taqsimoti\"\r\n            icon={<PieChartOutlined style={{ color: '#059669' }} />}\r\n            width={50}\r\n            index={4}\r\n          >\r\n            <Pie data={directionDistributionChart} options={pieChartOptions} />\r\n          </ResizableChart>\r\n\r\n          <ResizableChart\r\n            chartKey=\"activityTrend\"\r\n            title=\"Faoliyat trendi\"\r\n            icon={<LineChartOutlined style={{ color: '#dc2626' }} />}\r\n            width={50}\r\n            index={5}\r\n          >\r\n            <Line data={activityTrendChart} options={chartOptions} />\r\n          </ResizableChart>\r\n        </Row>\r\n      </div>\r\n\r\n      {/* Top Performers and Class Distribution */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        {/* Top Performers */}\r\n        <Col xs={24} lg={12}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              marginBottom: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px'\r\n            }}>\r\n              <TrophyOutlined style={{ color: '#f59e0b' }} />\r\n              Eng yaxshi o'quvchilar\r\n            </Title>\r\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n              {stats.topPerformers.map((student, index) => (\r\n                <div key={student.id} style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  padding: '12px',\r\n                  backgroundColor: '#f8fafc',\r\n                  borderRadius: '8px'\r\n                }}>\r\n                  <Space>\r\n                    <div style={{\r\n                      width: '24px',\r\n                      height: '24px',\r\n                      backgroundColor: index < 3 ? '#f59e0b' : '#e2e8f0',\r\n                      color: index < 3 ? '#ffffff' : '#64748b',\r\n                      borderRadius: '50%',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '12px',\r\n                      fontWeight: 'bold'\r\n                    }}>\r\n                      {index + 1}\r\n                    </div>\r\n                    <div>\r\n                      <Text strong style={{ color: '#1e293b' }}>\r\n                        {student.name}\r\n                      </Text>\r\n                      <br />\r\n                      <Text style={{ color: '#64748b', fontSize: '12px' }}>\r\n                        {student.classGroup}\r\n                      </Text>\r\n                    </div>\r\n                  </Space>\r\n                  <Text strong style={{ color: '#059669', fontSize: '16px' }}>\r\n                    {student.averageScore}%\r\n                  </Text>\r\n                </div>\r\n              ))}\r\n            </Space>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* Class Distribution */}\r\n        <Col xs={24} lg={12}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              marginBottom: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px'\r\n            }}>\r\n              <TeamOutlined style={{ color: '#2563eb' }} />\r\n              Sinf bo'yicha taqsimot\r\n            </Title>\r\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n              {stats.classDistribution.slice(0, 8).map((cls) => (\r\n                <div key={cls.classGroup} style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  padding: '8px 0',\r\n                  borderBottom: '1px solid #f1f5f9'\r\n                }}>\r\n                  <Text strong style={{ color: '#1e293b' }}>\r\n                    {cls.classGroup}\r\n                  </Text>\r\n                  <Space>\r\n                    <Tag color=\"blue\">{cls.active} faol</Tag>\r\n                    {cls.banned > 0 && <Tag color=\"red\">{cls.banned} bloklangan</Tag>}\r\n                    <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n                      Jami: {cls.total}\r\n                    </Text>\r\n                  </Space>\r\n                </div>\r\n              ))}\r\n            </Space>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Recent Activity */}\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          marginBottom: '24px'\r\n        }}\r\n      >\r\n        <Title level={3} style={{\r\n          fontSize: '1.25rem',\r\n          fontWeight: 700,\r\n          color: '#1e293b',\r\n          marginBottom: '16px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px'\r\n        }}>\r\n          <CalendarOutlined style={{ color: '#2563eb' }} />\r\n          So'nggi faoliyat\r\n        </Title>\r\n        <Row gutter={[16, 16]}>\r\n          {stats.recentActivity.map((activity, index) => (\r\n            <Col xs={24} sm={12} md={8} key={index}>\r\n              <div style={{\r\n                padding: '16px',\r\n                backgroundColor: '#f8fafc',\r\n                borderRadius: '8px',\r\n                border: '1px solid #e2e8f0'\r\n              }}>\r\n                <Text strong style={{ color: '#1e293b' }}>\r\n                  {activity.studentName}\r\n                </Text>\r\n                <br />\r\n                <Text style={{ color: '#64748b', fontSize: '14px' }}>\r\n                  {activity.action}\r\n                </Text>\r\n                <br />\r\n                <Text style={{ color: '#94a3b8', fontSize: '12px' }}>\r\n                  {activity.time}\r\n                </Text>\r\n              </div>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n      </Card>\r\n\r\n      {/* Students Table */}\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n        }}\r\n      >\r\n        <Title level={3} style={{\r\n          fontSize: '1.25rem',\r\n          fontWeight: 700,\r\n          color: '#1e293b',\r\n          marginBottom: '24px'\r\n        }}>\r\n          O'quvchilar ro'yxati\r\n        </Title>\r\n        <Table\r\n          columns={columns}\r\n          dataSource={stats.studentStatistics}\r\n          rowKey=\"id\"\r\n          pagination={{\r\n            pageSize: 10,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total) => `Jami ${total} ta o'quvchi`,\r\n          }}\r\n          locale={{\r\n            emptyText: 'O\\'quvchilar mavjud emas'\r\n          }}\r\n        />\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentsPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\TeacherDetails.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\TestDetails.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\TestStatistics.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'record' is defined but never used.","line":357,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":357,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"record"},"fix":{"range":[10799,10806],"text":""},"desc":"Remove unused variable 'record'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":357,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":357,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[10805,10812],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport dayjs from 'dayjs';\r\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\r\ndayjs.extend(isSameOrAfter);\r\nimport 'animate.css';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Button,\r\n  Tag,\r\n  Typography,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n} from 'antd';\r\nimport {\r\n  EyeOutlined,\r\n  SearchOutlined,\r\n  FilterOutlined,\r\n} from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst TestStatistics = () => {\r\n  const navigate = useNavigate();\r\n  const [tests, setTests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [subjectFilter, setSubjectFilter] = useState('');\r\n  const [teacherFilter, setTeacherFilter] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [dateFilter, setDateFilter] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loadTests = async () => {\r\n      try {\r\n        const allTestsData = await apiService.getTests();\r\n        const allTests = allTestsData.results || allTestsData;\r\n        setTests(allTests);\r\n      } catch (error) {\r\n        console.error('Failed to load tests:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadTests();\r\n  }, []);\r\n\r\n  // Filter tests based on all filter criteria\r\n  const displayTests = useMemo(() => {\r\n    const testsArray = Array.isArray(tests) ? tests : [];\r\n\r\n    let filteredTests = testsArray;\r\n\r\n    // Apply search filter\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase().trim();\r\n      filteredTests = filteredTests.filter(test => {\r\n        const teacherName = `${test.teacher_name || ''} ${test.teacher_surname || ''}`.toLowerCase();\r\n        const title = test.title ? test.title.toLowerCase() : '';\r\n        const subject = test.subject ? test.subject.toLowerCase() : '';\r\n\r\n        return title.includes(searchLower) ||\r\n          teacherName.includes(searchLower) ||\r\n          subject.includes(searchLower);\r\n      });\r\n    }\r\n\r\n    // Apply subject filter\r\n    if (subjectFilter && subjectFilter.trim()) {\r\n      const subjectFilterLower = subjectFilter.toLowerCase().trim();\r\n      filteredTests = filteredTests.filter(test =>\r\n        test.subject && test.subject.toLowerCase().includes(subjectFilterLower)\r\n      );\r\n    }\r\n\r\n    // Apply teacher filter\r\n    if (teacherFilter && teacherFilter.trim()) {\r\n      const teacherFilterLower = teacherFilter.toLowerCase().trim();\r\n      filteredTests = filteredTests.filter(test => {\r\n        const teacherName = `${test.teacher_name || ''} ${test.teacher_surname || ''}`.toLowerCase();\r\n        return teacherName.includes(teacherFilterLower);\r\n      });\r\n    }\r\n\r\n    // Apply status filter\r\n    if (statusFilter !== '') {\r\n      const isActiveFilter = statusFilter === 'active';\r\n      filteredTests = filteredTests.filter(test => test.is_active === isActiveFilter);\r\n    }\r\n\r\n    // Apply date filter\r\n    if (dateFilter) {\r\n      const filterDate = dayjs(dateFilter).startOf('day');\r\n      filteredTests = filteredTests.filter(test => {\r\n        if (!test.created_at) return false;\r\n        const testDate = dayjs(test.created_at);\r\n        return testDate.isSameOrAfter(filterDate);\r\n      });\r\n    }\r\n\r\n    return filteredTests;\r\n  }, [tests, searchTerm, subjectFilter, teacherFilter, statusFilter, dateFilter]);\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Test nomi',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n      render: (text) => (\r\n        <Text strong style={{ color: '#1e293b' }}>\r\n          {text}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'qituvchi',\r\n      dataIndex: 'teacher_name',\r\n      key: 'teacher_name',\r\n      render: (text, record) => (\r\n        <Text style={{ color: '#64748b' }}>\r\n          {text || ''} {record.teacher_surname || ''}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Fan',\r\n      dataIndex: 'subject',\r\n      key: 'subject',\r\n      render: (subject) => (\r\n        <Tag color=\"blue\" style={{ fontWeight: 500 }}>\r\n          {subject}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Savollar',\r\n      dataIndex: 'total_questions',\r\n      key: 'total_questions',\r\n      render: (value) => (\r\n        <Text style={{ fontWeight: 700, color: '#2563eb' }}>\r\n          {value}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Vaqt (daqiqa)',\r\n      dataIndex: 'time_limit',\r\n      key: 'time_limit',\r\n      render: (value) => (\r\n        <Text style={{ fontWeight: 700, color: '#059669' }}>\r\n          {value}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Urinishlar',\r\n      dataIndex: 'attempt_count',\r\n      key: 'attempt_count',\r\n      render: (value) => (\r\n        <Text style={{ fontWeight: 700, color: '#2563eb' }}>\r\n          {value || 0}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      dataIndex: 'average_score',\r\n      key: 'average_score',\r\n      render: (value) => (\r\n        <Text style={{ fontWeight: 700, color: '#059669' }}>\r\n          {(value || 0).toFixed(1)}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Status',\r\n      dataIndex: 'is_active',\r\n      key: 'status',\r\n      render: (isActive) => (\r\n        <Tag color={isActive ? 'green' : 'default'}>\r\n          {isActive ? 'Faol' : 'Nofaol'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakatlar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<EyeOutlined />}\r\n          onClick={() => navigate(`/admin/test-details/${record.id}`)}\r\n          style={{\r\n            backgroundColor: '#059669',\r\n            borderColor: '#059669',\r\n            fontWeight: 600,\r\n            transition: 'all 0.3s ease'\r\n          }}\r\n          className=\"animate__animated\"\r\n        >\r\n          Batafsil\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        padding: '24px',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <div>Loading...</div>\r\n        <Text style={{ marginTop: '16px', color: '#64748b' }}>\r\n          Tests are loading...\r\n        </Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className=\"animate__animated animate__slideInDown\" style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          Testlar reytingi\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Barcha testlarning batafsil statistikasi va natijalari\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Search and Filters Row */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{\r\n        marginBottom: '24px',\r\n        display: 'flex',\r\n        gap: '12px',\r\n        flexWrap: 'wrap',\r\n        alignItems: 'center'\r\n      }}>\r\n        {/* Search Input */}\r\n        <Input\r\n          placeholder=\"Test nomi, o'qituvchi yoki fan nomi bo'yicha qidirish...\"\r\n          prefix={<SearchOutlined />}\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{\r\n            borderRadius: '8px',\r\n            minWidth: '300px',\r\n            flex: '1'\r\n          }}\r\n        />\r\n\r\n        {/* Subject Filter */}\r\n        <Select\r\n          placeholder=\"Fan bo'yicha\"\r\n          value={subjectFilter}\r\n          onChange={setSubjectFilter}\r\n          style={{\r\n            borderRadius: '8px',\r\n            minWidth: '150px',\r\n            width: '200px'\r\n          }}\r\n          allowClear\r\n        >\r\n          <Select.Option value=\"Matematika\">Matematika</Select.Option>\r\n          <Select.Option value=\"Fizika\">Fizika</Select.Option>\r\n          <Select.Option value=\"Kimyo\">Kimyo</Select.Option>\r\n          <Select.Option value=\"Biologiya\">Biologiya</Select.Option>\r\n          <Select.Option value=\"Tarix\">Tarix</Select.Option>\r\n          <Select.Option value=\"Geografiya\">Geografiya</Select.Option>\r\n          <Select.Option value=\"Ingliz tili\">Ingliz tili</Select.Option>\r\n          <Select.Option value=\"Ona tili\">Ona tili</Select.Option>\r\n          <Select.Option value=\"Adabiyot\">Adabiyot</Select.Option>\r\n        </Select>\r\n\r\n        {/* Teacher Filter */}\r\n        <Select\r\n          placeholder=\"O'qituvchi bo'yicha\"\r\n          value={teacherFilter}\r\n          onChange={setTeacherFilter}\r\n          style={{\r\n            borderRadius: '8px',\r\n            minWidth: '180px',\r\n            width: '220px'\r\n          }}\r\n          allowClear\r\n          showSearch\r\n          filterOption={(input, option) =>\r\n            option.children.toLowerCase().includes(input.toLowerCase())\r\n          }\r\n        >\r\n          {Array.from(new Set(tests.map(test =>\r\n            `${test.teacher_name || ''} ${test.teacher_surname || ''}`.trim()\r\n          ).filter(name => name))).map(teacherName => (\r\n            <Select.Option key={teacherName} value={teacherName}>\r\n              {teacherName}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n\r\n        {/* Status Filter */}\r\n        <Select\r\n          placeholder=\"Status bo'yicha\"\r\n          value={statusFilter}\r\n          onChange={setStatusFilter}\r\n          style={{\r\n            borderRadius: '8px',\r\n            minWidth: '120px',\r\n            width: '150px'\r\n          }}\r\n          allowClear\r\n        >\r\n          <Select.Option value=\"active\">Faol</Select.Option>\r\n          <Select.Option value=\"inactive\">Nofaol</Select.Option>\r\n        </Select>\r\n\r\n        {/* Date Filter */}\r\n        <DatePicker\r\n          placeholder=\"Sana bo'yicha\"\r\n          value={dateFilter}\r\n          onChange={setDateFilter}\r\n          style={{\r\n            borderRadius: '8px',\r\n            minWidth: '140px',\r\n            width: '160px'\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '300ms' }}>\r\n        <Table\r\n          columns={columns}\r\n          dataSource={displayTests}\r\n          rowKey=\"id\"\r\n          pagination={{\r\n            pageSize: 10,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total) => `Jami ${total} ta test`,\r\n          }}\r\n          locale={{\r\n            emptyText: searchTerm ? 'Qidiruv natijasi topilmadi' : 'Testlar topilmadi'\r\n          }}\r\n          rowClassName={(record, index) => `animate__animated animate__fadeInLeft`}\r\n          onRow={(record, index) => ({\r\n            className: 'animate__animated animate__fadeInLeft',\r\n            style: {\r\n              animationDelay: `${index * 100}ms`,\r\n              transition: 'all 0.3s ease'\r\n            },\r\n            onMouseEnter: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1.02)';\r\n            },\r\n            onMouseLeave: (e) => {\r\n              e.currentTarget.style.transform = 'scale(1)';\r\n            }\r\n          })}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TestStatistics;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\admin\\TestsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setChartWidths' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":99,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setChartWidths"},"fix":{"range":[2054,2070],"text":""},"desc":"Remove unused variable 'setChartWidths'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'checked' is defined but never used.","line":882,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":882,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"checked"},"fix":{"range":[27169,27176],"text":""},"desc":"Remove unused variable 'checked'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  Progress,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Button,\r\n  Tooltip,\r\n  Switch,\r\n} from 'antd';\r\nimport {\r\n  BookOutlined,\r\n  UserOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  ClockCircleOutlined,\r\n  CalendarOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  InfoCircleOutlined,\r\n  PlayCircleOutlined,\r\n  StopOutlined,\r\n  CheckCircleOutlined,\r\n  LineChartOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title as ChartTitle,\r\n  Tooltip as ChartTooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line, Bar, Pie, Doughnut, Radar } from 'react-chartjs-2';\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  ChartTitle,\r\n  ChartTooltip,\r\n  Legend,\r\n  Filler\r\n);\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst TestsPage = () => {\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalTests: 0,\r\n    activeTests: 0,\r\n    inactiveTests: 0,\r\n    totalAttempts: 0,\r\n    averageScore: 0,\r\n    popularTests: [],\r\n    testStatistics: [],\r\n    recentActivity: [],\r\n    subjectDistribution: [],\r\n    difficultyDistribution: [],\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Chart visibility states\r\n  const [visibleCharts, setVisibleCharts] = useState({\r\n    subjectDistribution: true,\r\n    difficultyAnalysis: true,\r\n    monthlyCreation: true,\r\n    performanceTrend: true,\r\n    testPopularity: true,\r\n    teacherActivity: true\r\n  });\r\n  \r\n  // Chart width control states\r\n  const [chartWidths, setChartWidths] = useState({\r\n    subjectDistribution: 50,\r\n    difficultyAnalysis: 50,\r\n    monthlyCreation: 50,\r\n    performanceTrend: 100,\r\n    testPopularity: 50,\r\n    teacherActivity: 50\r\n  });\r\n  \r\n  // Toggle functions for charts\r\n  const toggleChart = (chartKey) => {\r\n    setVisibleCharts(prev => ({\r\n      ...prev,\r\n      [chartKey]: !prev[chartKey]\r\n    }));\r\n  };\r\n\r\n  // Fetch test statistics\r\n  useEffect(() => {\r\n    const fetchTestStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        const [testsData, attemptsData, usersData] = await Promise.all([\r\n          apiService.getTests(),\r\n          apiService.getAttempts(),\r\n          apiService.getUsers()\r\n        ]);\r\n\r\n        const tests = testsData.results || testsData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n        const users = usersData.results || usersData;\r\n\r\n        // Calculate test performance and statistics\r\n        const testStatistics = tests.map(test => {\r\n          const testAttempts = attempts.filter(attempt => attempt.test === test.id);\r\n          const attemptCount = testAttempts.length;\r\n          const averageScore = attemptCount > 0 \r\n            ? testAttempts.reduce((sum, attempt) => sum + (attempt.score || 0), 0) / attemptCount\r\n            : 0;\r\n\r\n          // Get teacher name\r\n          const teacher = users.find(user => user.id === test.teacher);\r\n          const teacherName = teacher ? teacher.name || teacher.username : 'Noma\\'lum';\r\n\r\n          return {\r\n            id: test.id,\r\n            title: test.title,\r\n            subject: test.subject,\r\n            teacherName,\r\n            totalQuestions: test.total_questions || 0,\r\n            timeLimit: test.time_limit || 0,\r\n            difficulty: test.difficulty || 'O\\'rta',\r\n            isActive: test.is_active !== false,\r\n            attemptCount,\r\n            averageScore: Math.round(averageScore),\r\n            createdAt: test.created_at,\r\n            performance: averageScore >= 80 ? 'Yuqori' : averageScore >= 60 ? 'O\\'rta' : 'Past'\r\n          };\r\n        });\r\n\r\n        // Calculate overall statistics\r\n        const totalTests = tests.length;\r\n        const activeTests = tests.filter(test => test.is_active !== false).length;\r\n        const inactiveTests = totalTests - activeTests;\r\n        const totalAttempts = attempts.length;\r\n        const averageScore = testStatistics.length > 0 \r\n          ? Math.round(testStatistics.reduce((sum, test) => sum + test.averageScore, 0) / testStatistics.length)\r\n          : 0;\r\n\r\n        // Get popular tests (top 10 by attempt count)\r\n        const popularTests = testStatistics\r\n          .sort((a, b) => b.attemptCount - a.attemptCount)\r\n          .slice(0, 10);\r\n\r\n        // Subject distribution\r\n        const subjectGroups = {};\r\n        testStatistics.forEach(test => {\r\n          const subject = test.subject || 'Noma\\'lum';\r\n          if (!subjectGroups[subject]) {\r\n            subjectGroups[subject] = { total: 0, active: 0, totalAttempts: 0 };\r\n          }\r\n          subjectGroups[subject].total++;\r\n          if (test.isActive) {\r\n            subjectGroups[subject].active++;\r\n          }\r\n          subjectGroups[subject].totalAttempts += test.attemptCount;\r\n        });\r\n\r\n        const subjectDistribution = Object.entries(subjectGroups).map(([subject, data]) => ({\r\n          subject,\r\n          ...data\r\n        })).sort((a, b) => b.totalAttempts - a.totalAttempts);\r\n\r\n        // Difficulty distribution\r\n        const difficultyGroups = {};\r\n        testStatistics.forEach(test => {\r\n          const difficulty = test.difficulty || 'O\\'rta';\r\n          if (!difficultyGroups[difficulty]) {\r\n            difficultyGroups[difficulty] = { total: 0, active: 0, totalAttempts: 0 };\r\n          }\r\n          difficultyGroups[difficulty].total++;\r\n          if (test.isActive) {\r\n            difficultyGroups[difficulty].active++;\r\n          }\r\n          difficultyGroups[difficulty].totalAttempts += test.attemptCount;\r\n        });\r\n\r\n        const difficultyDistribution = Object.entries(difficultyGroups).map(([difficulty, data]) => ({\r\n          difficulty,\r\n          ...data\r\n        }));\r\n\r\n        // Recent activity (simulated based on test creation dates)\r\n        const recentTestCreations = tests\r\n          .filter(test => test.created_at)\r\n          .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\r\n          .slice(0, 5)\r\n          .map(test => {\r\n            const teacher = users.find(user => user.id === test.teacher);\r\n            return {\r\n              testTitle: test.title,\r\n              subject: test.subject,\r\n              teacher: teacher ? teacher.name || teacher.username : 'Noma\\'lum',\r\n              action: 'Test yaratildi',\r\n              time: new Date(test.created_at).toLocaleDateString('uz-UZ'),\r\n              type: 'test_creation'\r\n            };\r\n          });\r\n\r\n        setStats({\r\n          totalTests,\r\n          activeTests,\r\n          inactiveTests,\r\n          totalAttempts,\r\n          averageScore,\r\n          popularTests,\r\n          testStatistics,\r\n          recentActivity: recentTestCreations,\r\n          subjectDistribution,\r\n          difficultyDistribution\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching test statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTestStatistics();\r\n  }, []);\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix, trend }) => (\r\n    <div>\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          transition: 'all 0.3s ease',\r\n          marginBottom: '12px'\r\n        }}\r\n        styles={{ body: { padding: '24px' } }}\r\n        hoverable\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Text\r\n              style={{\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#64748b',\r\n                display: 'block',\r\n                marginBottom: '8px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              styles={{\r\n                content: {\r\n                  fontSize: '32px',\r\n                  fontWeight: 700,\r\n                  color: '#1e293b',\r\n                  lineHeight: 1.2\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              backgroundColor: color,\r\n              borderRadius: '12px',\r\n              padding: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '16px'\r\n            }}\r\n          >\r\n            {React.cloneElement(icon, {\r\n              style: {\r\n                fontSize: '28px',\r\n                color: '#ffffff'\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n      {trend && (\r\n        <Card\r\n          style={{\r\n            backgroundColor: trend.direction === 'up' ? '#f0fdf4' : '#fef2f2',\r\n            border: `1px solid ${trend.direction === 'up' ? '#bbf7d0' : '#fecaca'}`,\r\n            borderRadius: '8px',\r\n            padding: '12px 16px'\r\n          }}\r\n          bodyStyle={{ padding: '12px 16px' }}\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n            {trend.direction === 'up' ? (\r\n              <ArrowUpOutlined style={{ color: '#16a34a', fontSize: '14px', marginRight: '6px' }} />\r\n            ) : (\r\n              <ArrowDownOutlined style={{ color: '#dc2626', fontSize: '14px', marginRight: '6px' }} />\r\n            )}\r\n            <Text style={{ \r\n              fontSize: '13px', \r\n              fontWeight: 600,\r\n              color: trend.direction === 'up' ? '#16a34a' : '#dc2626'\r\n            }}>\r\n              {trend.value} o'tgan oyga nisbatan\r\n            </Text>\r\n          </div>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const getPerformanceColor = (performance) => {\r\n    switch (performance) {\r\n      case 'Yuqori': return '#16a34a';\r\n      case 'O\\'rta': return '#f59e0b';\r\n      case 'Past': return '#dc2626';\r\n      default: return '#64748b';\r\n    }\r\n  };\r\n\r\n  const getDifficultyColor = (difficulty) => {\r\n    switch (difficulty) {\r\n      case 'Oson': return '#059669';\r\n      case 'O\\'rta': return '#f59e0b';\r\n      case 'Qiyin': return '#dc2626';\r\n      default: return '#64748b';\r\n    }\r\n  };\r\n\r\n  const getSubjectColor = (subject) => {\r\n    const colors = {\r\n      'Matematika': '#2563eb',\r\n      'Fizika': '#7c3aed',\r\n      'Kimyo': '#059669',\r\n      'Biologiya': '#16a34a',\r\n      'Tarix': '#dc2626',\r\n      'Geografiya': '#0ea5e9',\r\n      'Ingliz tili': '#f59e0b',\r\n      'Ona tili': '#8b5cf6',\r\n      'Adabiyot': '#ec4899',\r\n    };\r\n    return colors[subject] || '#64748b';\r\n  };\r\n\r\n  // Chart Data Configuration\r\n  const subjectDistributionChart = {\r\n    labels: stats.subjectDistribution.slice(0, 8).map(subject => subject.subject),\r\n    datasets: [\r\n      {\r\n        label: 'Jami testlar',\r\n        data: stats.subjectDistribution.slice(0, 8).map(subject => subject.total),\r\n        backgroundColor: [\r\n          'rgba(37, 99, 235, 0.8)',\r\n          'rgba(124, 58, 237, 0.8)',\r\n          'rgba(5, 150, 105, 0.8)',\r\n          'rgba(245, 158, 11, 0.8)',\r\n          'rgba(220, 38, 38, 0.8)',\r\n          'rgba(22, 163, 74, 0.8)',\r\n          'rgba(139, 92, 246, 0.8)',\r\n          'rgba(236, 72, 153, 0.8)'\r\n        ],\r\n        borderColor: [\r\n          '#2563eb', '#7c3aed', '#059669', '#f59e0b', \r\n          '#dc2626', '#16a34a', '#8b5cf6', '#ec4899'\r\n        ],\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const difficultyAnalysisChart = {\r\n    labels: stats.difficultyDistribution.map(diff => diff.difficulty),\r\n    datasets: [\r\n      {\r\n        data: stats.difficultyDistribution.map(diff => diff.total),\r\n        backgroundColor: ['#059669', '#f59e0b', '#dc2626'],\r\n        borderColor: ['#ffffff', '#ffffff', '#ffffff'],\r\n        borderWidth: 3,\r\n        hoverOffset: 15,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const monthlyCreationChart = {\r\n    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],\r\n    datasets: [\r\n      {\r\n        label: 'Yaratilgan testlar',\r\n        data: [12, 19, 8, 15, 25, 18],\r\n        borderColor: '#2563eb',\r\n        backgroundColor: 'rgba(37, 99, 235, 0.3)',\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#2563eb',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const performanceTrendChart = {\r\n    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: [74, 76, 72, 78, 75, 79],\r\n        borderColor: '#16a34a',\r\n        backgroundColor: 'rgba(22, 163, 74, 0.3)',\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: '#16a34a',\r\n        pointBorderColor: '#ffffff',\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const testPopularityChart = {\r\n    labels: ['Matematika', 'Fizika', 'Kimyo', 'Biologiya', 'Tarix'],\r\n    datasets: [\r\n      {\r\n        label: 'Urinishlar soni',\r\n        data: [156, 142, 98, 87, 76],\r\n        backgroundColor: 'rgba(245, 158, 11, 0.8)',\r\n        borderColor: '#f59e0b',\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const teacherActivityChart = {\r\n    labels: ['Faol', 'Nofaol'],\r\n    datasets: [\r\n      {\r\n        data: [stats.activeTests, stats.inactiveTests],\r\n        backgroundColor: ['#16a34a', '#dc2626'],\r\n        borderColor: ['#ffffff', '#ffffff'],\r\n        borderWidth: 3,\r\n        hoverOffset: 15,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: { size: 12, weight: 600 },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        display: true,\r\n        grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },\r\n        ticks: { color: '#6b7280', font: { size: 11, weight: 500 } },\r\n      },\r\n      y: {\r\n        display: true,\r\n        grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },\r\n        ticks: { color: '#6b7280', font: { size: 11, weight: 500 } },\r\n      },\r\n    },\r\n    animation: { duration: 2000, easing: 'easeInOutQuart' },\r\n  };\r\n\r\n  const barChartOptions = {\r\n    ...chartOptions,\r\n    plugins: { ...chartOptions.plugins, legend: { ...chartOptions.plugins.legend, display: false } },\r\n    scales: { ...chartOptions.scales, y: { ...chartOptions.scales.y, beginAtZero: true } }\r\n  };\r\n\r\n  const pieChartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'bottom',\r\n        labels: {\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n          font: { size: 12, weight: 600 },\r\n          color: '#374151',\r\n          padding: 20,\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n        cornerRadius: 8,\r\n        padding: 12,\r\n      },\r\n    },\r\n    animation: { duration: 2000, easing: 'easeInOutQuart' },\r\n  };\r\n\r\n  // Animation delay helper\r\n  const getAnimationDelay = (index) => {\r\n    return index * 150; // 150ms delay between each chart\r\n  };\r\n\r\n  // Resizable Chart Component with entrance animations\r\n  const ResizableChart = ({ chartKey, title, icon, children, width, index = 0 }) => {\r\n    const chartWidth = chartWidths[chartKey] || width || 50;\r\n    const isVisible = visibleCharts[chartKey];\r\n    \r\n    if (!isVisible) return null;\r\n    \r\n    return (\r\n      <div \r\n        className=\"animate__animated animate__fadeInUp\"\r\n        style={{ \r\n          width: `${chartWidth}%`, \r\n          padding: '0 8px',\r\n          animationDelay: `${getAnimationDelay(index)}ms`,\r\n          animationDuration: '0.8s',\r\n          animationFillMode: 'both'\r\n        }}\r\n      >\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            height: '400px',\r\n          }}\r\n          bodyStyle={{ padding: '16px', height: '100%', display: 'flex', flexDirection: 'column' }}\r\n          hoverable\r\n        >\r\n          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n            {icon}\r\n            <Title level={3} style={{ fontSize: '1.25rem', fontWeight: 700, color: '#1e293b', margin: '0 0 0 8px' }}>\r\n              {title}\r\n            </Title>\r\n          </div>\r\n          <div style={{ flex: 1, height: '320px' }}>\r\n            {children}\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Test nomi',\r\n      key: 'test',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <div style={{\r\n            width: '40px',\r\n            height: '40px',\r\n            backgroundColor: getSubjectColor(record.subject) + '20',\r\n            borderRadius: '8px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n          }}>\r\n            <BookOutlined style={{ color: getSubjectColor(record.subject), fontSize: '18px' }} />\r\n          </div>\r\n          <div>\r\n            <Text strong style={{ color: '#1e293b' }}>\r\n              {record.title}\r\n            </Text>\r\n            <br />\r\n            <Text style={{ color: '#64748b', fontSize: '12px' }}>\r\n              {record.subject}\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'qituvchi',\r\n      key: 'teacher',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <UserOutlined style={{ color: '#64748b' }} />\r\n          <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n            {record.teacherName}\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Savollar',\r\n      key: 'questions',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.totalQuestions}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Vaqt (daq)',\r\n      key: 'time',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <ClockCircleOutlined style={{ color: '#64748b' }} />\r\n          <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n            {record.timeLimit}\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Urinishlar',\r\n      key: 'attempts',\r\n      render: (_, record) => (\r\n        <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n          {record.attemptCount}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'average',\r\n      render: (_, record) => (\r\n        <div>\r\n          <Progress\r\n            percent={record.averageScore}\r\n            size=\"small\"\r\n            strokeColor={getPerformanceColor(record.performance)}\r\n            showInfo={false}\r\n            style={{ marginBottom: '4px' }}\r\n          />\r\n          <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n            {record.averageScore}%\r\n          </Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Qiyinchilik',\r\n      key: 'difficulty',\r\n      render: (_, record) => (\r\n        <Tag\r\n          color={getDifficultyColor(record.difficulty)}\r\n          style={{\r\n            backgroundColor: `${getDifficultyColor(record.difficulty)}20`,\r\n            color: getDifficultyColor(record.difficulty),\r\n            fontWeight: 600\r\n          }}\r\n        >\r\n          {record.difficulty}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Status',\r\n      key: 'status',\r\n      render: (_, record) => (\r\n        <Tag color={record.isActive ? 'green' : 'default'} icon={record.isActive ? <CheckCircleOutlined /> : <StopOutlined />}>\r\n          {record.isActive ? 'Faol' : 'Nofaol'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Amallar',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          icon={<InfoCircleOutlined />}\r\n          onClick={() => navigate(`/admin/test-details/${record.id}`)}\r\n          style={{ backgroundColor: '#2563eb', borderColor: '#2563eb' }}\r\n        >\r\n          Batafsil\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        flexDirection: 'column'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16 }}>Ma'lumotlar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '24px' }}>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginBottom: '16px' }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ padding: '24px 0' }}>\r\n      {/* Header */}\r\n      <div className='animate__animated animate__slideInDown' style={{\r\n        marginBottom: '24px',\r\n        paddingBottom: '16px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={1} style={{ margin: 0, color: '#1e293b', marginBottom: '8px' }}>\r\n          Testlar statistikasi\r\n        </Title>\r\n        <Text style={{ fontSize: '18px', color: '#64748b' }}>\r\n          Barcha testlarning umumiy ko'rsatkichlari va faoliyati\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Statistics Cards with Entrance Animations */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n            <StatCard\r\n              title=\"Jami testlar\"\r\n              value={stats.totalTests}\r\n              icon={<BookOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n            <StatCard\r\n              title=\"Faol testlar\"\r\n              value={stats.activeTests}\r\n              icon={<PlayCircleOutlined />}\r\n              color=\"#16a34a\"\r\n              trend={{ direction: 'up', value: '+5.2%' }}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n            <StatCard\r\n              title=\"Jami urinishlar\"\r\n              value={stats.totalAttempts}\r\n              icon={<TrophyOutlined />}\r\n              color=\"#7c3aed\"\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={stats.averageScore}\r\n              suffix=\"%\"\r\n              icon={<RiseOutlined />}\r\n              color=\"#f59e0b\"\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '500ms', marginBottom: '16px' }}>\r\n        <Card style={{\r\n          backgroundColor: '#eff6ff',\r\n          borderRadius: '12px',\r\n          padding: '16px 20px',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <Title level={3} style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 600,\r\n            color: '#1e293b',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            marginBottom: '16px'\r\n          }}>\r\n            <BarChartOutlined style={{ color: '#2563eb' }} />\r\n            Statistik ma'lumotlar va tahlillar\r\n          </Title>\r\n          \r\n          {/* Chart Management Controls */}\r\n          <div style={{\r\n            backgroundColor: '#ffffff',\r\n            borderRadius: '8px',\r\n            padding: '16px',\r\n            border: '1px solid #e2e8f0'\r\n          }}>\r\n            <Text style={{\r\n              fontSize: '14px',\r\n              fontWeight: 600,\r\n              color: '#374151',\r\n              display: 'block',\r\n              marginBottom: '12px'\r\n            }}>\r\n              Diagrammalar boshqaruvi\r\n            </Text>\r\n            <Row gutter={[16, 12]}>\r\n              {[\r\n                { key: 'subjectDistribution', label: 'Fanlar taqsimoti', icon: <BarChartOutlined style={{ color: '#2563eb' }} /> },\r\n                { key: 'difficultyAnalysis', label: 'Qiyinchilik tahlili', icon: <PieChartOutlined style={{ color: '#f59e0b' }} /> },\r\n                { key: 'monthlyCreation', label: 'Oylik yaratish', icon: <LineChartOutlined style={{ color: '#16a34a' }} /> },\r\n                { key: 'performanceTrend', label: 'Natijalar trendi', icon: <LineChartOutlined style={{ color: '#059669' }} /> },\r\n                { key: 'testPopularity', label: 'Test mashhurligi', icon: <BarChartOutlined style={{ color: '#dc2626' }} /> },\r\n                { key: 'teacherActivity', label: 'O\\'qituvchi faoliyati', icon: <PieChartOutlined style={{ color: '#8b5cf6' }} /> }\r\n              ].map(chart => (\r\n                <Col xs={24} sm={12} md={8} key={chart.key}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#f8fafc',\r\n                    borderRadius: '6px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <Text style={{ fontSize: '13px', color: '#64748b', fontWeight: 500 }}>{chart.label}</Text>\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={visibleCharts[chart.key]}\r\n                      onChange={(checked) => toggleChart(chart.key)}\r\n                      style={{ backgroundColor: visibleCharts[chart.key] ? '#2563eb' : '#d1d5db' }}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Row gutter={[0, 24]}>\r\n          <ResizableChart\r\n            chartKey=\"subjectDistribution\"\r\n            title=\"Fanlar bo'yicha taqsimot\"\r\n            icon={<BarChartOutlined style={{ color: '#2563eb' }} />}\r\n            width={50}\r\n            index={0}\r\n          >\r\n            <Bar data={subjectDistributionChart} options={barChartOptions} />\r\n          </ResizableChart>\r\n\r\n          <ResizableChart\r\n            chartKey=\"difficultyAnalysis\"\r\n            title=\"Qiyinchilik tahlili\"\r\n            icon={<PieChartOutlined style={{ color: '#f59e0b' }} />}\r\n            width={50}\r\n            index={1}\r\n          >\r\n            <Pie data={difficultyAnalysisChart} options={pieChartOptions} />\r\n          </ResizableChart>\r\n        </Row>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Row gutter={[0, 24]}>\r\n          <ResizableChart\r\n            chartKey=\"monthlyCreation\"\r\n            title=\"Oylik test yaratish\"\r\n            icon={<LineChartOutlined style={{ color: '#16a34a' }} />}\r\n            width={50}\r\n            index={2}\r\n          >\r\n            <Line data={monthlyCreationChart} options={chartOptions} />\r\n          </ResizableChart>\r\n\r\n          <ResizableChart\r\n            chartKey=\"performanceTrend\"\r\n            title=\"Test natijalari trendi\"\r\n            icon={<LineChartOutlined style={{ color: '#059669' }} />}\r\n            width={50}\r\n            index={3}\r\n          >\r\n            <Line data={performanceTrendChart} options={chartOptions} />\r\n          </ResizableChart>\r\n        </Row>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <Row gutter={[0, 24]}>\r\n          <ResizableChart\r\n            chartKey=\"testPopularity\"\r\n            title=\"Test mashhurligi\"\r\n            icon={<BarChartOutlined style={{ color: '#dc2626' }} />}\r\n            width={50}\r\n            index={4}\r\n          >\r\n            <Bar data={testPopularityChart} options={barChartOptions} />\r\n          </ResizableChart>\r\n\r\n          <ResizableChart\r\n            chartKey=\"teacherActivity\"\r\n            title=\"O'qituvchi faoliyati\"\r\n            icon={<PieChartOutlined style={{ color: '#8b5cf6' }} />}\r\n            width={50}\r\n            index={5}\r\n          >\r\n            <Pie data={teacherActivityChart} options={pieChartOptions} />\r\n          </ResizableChart>\r\n        </Row>\r\n      </div>\r\n\r\n      {/* Popular Tests and Subject Distribution */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        {/* Popular Tests */}\r\n        <Col xs={24} lg={12}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              marginBottom: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px'\r\n            }}>\r\n              <TrophyOutlined style={{ color: '#f59e0b' }} />\r\n              Mashhur testlar\r\n            </Title>\r\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n              {stats.popularTests.map((test, index) => (\r\n                <div key={test.id} style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  padding: '12px',\r\n                  backgroundColor: '#f8fafc',\r\n                  borderRadius: '8px'\r\n                }}>\r\n                  <Space>\r\n                    <div style={{\r\n                      width: '24px',\r\n                      height: '24px',\r\n                      backgroundColor: index < 3 ? '#f59e0b' : '#e2e8f0',\r\n                      color: index < 3 ? '#ffffff' : '#64748b',\r\n                      borderRadius: '50%',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '12px',\r\n                      fontWeight: 'bold'\r\n                    }}>\r\n                      {index + 1}\r\n                    </div>\r\n                    <div>\r\n                      <Text strong style={{ color: '#1e293b' }}>\r\n                        {test.title}\r\n                      </Text>\r\n                      <br />\r\n                      <Text style={{ color: '#64748b', fontSize: '12px' }}>\r\n                        {test.subject} тАв {test.teacherName}\r\n                      </Text>\r\n                    </div>\r\n                  </Space>\r\n                  <Space direction=\"vertical\" align=\"end\">\r\n                    <Text strong style={{ color: '#2563eb', fontSize: '16px' }}>\r\n                      {test.attemptCount} urinish\r\n                    </Text>\r\n                    <Text style={{ color: '#059669', fontSize: '12px' }}>\r\n                      {test.averageScore}% o'rtacha\r\n                    </Text>\r\n                  </Space>\r\n                </div>\r\n              ))}\r\n            </Space>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* Subject Distribution */}\r\n        <Col xs={24} lg={12}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Title level={3} style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              marginBottom: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px'\r\n            }}>\r\n              <BookOutlined style={{ color: '#2563eb' }} />\r\n              Fan bo'yicha taqsimot\r\n            </Title>\r\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n              {stats.subjectDistribution.slice(0, 8).map((subject) => (\r\n                <div key={subject.subject} style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  padding: '8px 0',\r\n                  borderBottom: '1px solid #f1f5f9'\r\n                }}>\r\n                  <Space>\r\n                    <div style={{\r\n                      width: '12px',\r\n                      height: '12px',\r\n                      backgroundColor: getSubjectColor(subject.subject),\r\n                      borderRadius: '50%'\r\n                    }} />\r\n                    <Text strong style={{ color: '#1e293b' }}>\r\n                      {subject.subject}\r\n                    </Text>\r\n                  </Space>\r\n                  <Space>\r\n                    <Tag color=\"blue\">{subject.active} faol</Tag>\r\n                    <Text style={{ color: '#64748b', fontWeight: 600 }}>\r\n                      {subject.totalAttempts} urinish\r\n                    </Text>\r\n                  </Space>\r\n                </div>\r\n              ))}\r\n            </Space>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Recent Activity */}\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          marginBottom: '24px'\r\n        }}\r\n      >\r\n        <Title level={3} style={{\r\n          fontSize: '1.25rem',\r\n          fontWeight: 700,\r\n          color: '#1e293b',\r\n          marginBottom: '16px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px'\r\n        }}>\r\n          <CalendarOutlined style={{ color: '#2563eb' }} />\r\n          So'nggi faoliyat\r\n        </Title>\r\n        <Row gutter={[16, 16]}>\r\n          {stats.recentActivity.map((activity, index) => (\r\n            <Col xs={24} sm={12} md={8} key={index}>\r\n              <div style={{\r\n                padding: '16px',\r\n                backgroundColor: '#f8fafc',\r\n                borderRadius: '8px',\r\n                border: '1px solid #e2e8f0'\r\n              }}>\r\n                <Text strong style={{ color: '#1e293b' }}>\r\n                  {activity.testTitle}\r\n                </Text>\r\n                <br />\r\n                <Text style={{ color: '#64748b', fontSize: '14px' }}>\r\n                  {activity.action}\r\n                </Text>\r\n                <br />\r\n                <Text style={{ color: '#94a3b8', fontSize: '12px' }}>\r\n                  {activity.teacher} тАв {activity.time}\r\n                </Text>\r\n              </div>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n      </Card>\r\n\r\n      {/* Tests Table */}\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n        }}\r\n      >\r\n        <Title level={3} style={{\r\n          fontSize: '1.25rem',\r\n          fontWeight: 700,\r\n          color: '#1e293b',\r\n          marginBottom: '24px'\r\n        }}>\r\n          Testlar ro'yxati\r\n        </Title>\r\n        <Table\r\n          columns={columns}\r\n          dataSource={stats.testStatistics}\r\n          rowKey=\"id\"\r\n          pagination={{\r\n            pageSize: 10,\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            showTotal: (total) => `Jami ${total} ta test`,\r\n          }}\r\n          locale={{\r\n            emptyText: 'Testlar mavjud emas'\r\n          }}\r\n        />\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TestsPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\AddAdmin.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":44,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  Typography,\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Alert,\r\n  Space,\r\n  Spin,\r\n  Divider,\r\n  ConfigProvider,\r\n} from 'antd';\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst AddAdmin = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const isEditMode = !!id;\r\n\r\n  const [form] = Form.useForm();\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(isEditMode);\r\n\r\n  React.useEffect(() => {\r\n    if (isEditMode) {\r\n      const loadAdminData = async () => {\r\n        try {\r\n          const admin = await apiService.getUser(id);\r\n          if (admin) {\r\n            const nameParts = admin.name ? admin.name.split(' ') : ['', ''];\r\n            form.setFieldsValue({\r\n              firstName: nameParts[0] || '',\r\n              lastName: nameParts.slice(1).join(' ') || '',\r\n              email: admin.email || '',\r\n              organization: admin.organization || 'Default Organization',\r\n            });\r\n          }\r\n        } catch (error) {\r\n          setError('Admin ma\\'lumotlarini yuklashda xatolik yuz berdi');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      loadAdminData();\r\n    }\r\n  }, [id, isEditMode, form]);\r\n\r\n  const handleSubmit = async (values) => {\r\n    setError('');\r\n    setSuccess('');\r\n    try {\r\n      const adminData = { name: `${values.firstName} ${values.lastName}` };\r\n      if (isEditMode) {\r\n        const updateData = {\r\n          first_name: values.firstName,\r\n          last_name: values.lastName,\r\n          name: adminData.name,\r\n          organization: values.organization,\r\n        };\r\n        if (values.password) updateData.password = values.password;\r\n        await apiService.updateUser(id, updateData);\r\n        setSuccess('ADMIN MA\\'LUMOTLARI YANGILANDI!');\r\n      } else {\r\n        await apiService.post('/users/', {\r\n          username: values.email,\r\n          email: values.email,\r\n          password: values.password,\r\n          role: 'admin',\r\n          first_name: values.firstName,\r\n          last_name: values.lastName,\r\n          name: adminData.name,\r\n          organization: values.organization,\r\n        });\r\n        setSuccess('YANGI ADMIN MUVAFFAQIYATLI QO\\'SHILDI!');\r\n        form.resetFields();\r\n      }\r\n    } catch (err) {\r\n      setError('Xatolik yuz berdi: ' + (err.message || 'Noma\\'lum xatolik'));\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 800 }}>YUKLANMOQDA...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div style={{ padding: '40px 0' }}>\r\n        {/* Brutalist Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={() => navigate('/headadmin/admins')}\r\n            style={{ marginBottom: 24, fontWeight: 800, textTransform: 'uppercase', padding: 0 }}\r\n          >\r\n            ORTGA QAYTISH\r\n          </Button>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '2.5rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            {isEditMode ? 'Profilni Tahrirlash' : 'Yangi Admin Qo\\'shish'}\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Administrator ma'lumotlarini aniq va to'g'ri kiriting.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {success && (\r\n          <Alert\r\n            message={success}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ borderRadius: 0, border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, marginBottom: '24px', maxWidth: '800px' }}\r\n          />\r\n        )}\r\n\r\n        {error && (\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ borderRadius: 0, border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, marginBottom: '24px', maxWidth: '800px' }}\r\n          />\r\n        )}\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ \r\n          maxWidth: '800px',\r\n          padding: '40px',\r\n          border: '4px solid #000',\r\n          boxShadow: '15px 15px 0px #000',\r\n          backgroundColor: '#fff',\r\n          margin: '0 auto'\r\n        }}>\r\n          <Form\r\n            form={form}\r\n            layout=\"vertical\"\r\n            onFinish={handleSubmit}\r\n            size=\"large\"\r\n          >\r\n            <Space style={{ width: '100%' }} size=\"large\" direction=\"vertical\">\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                <Form.Item name=\"firstName\" label={<Text style={{ fontWeight: 900 }}>ISM</Text>} rules={[{ required: true }]}>\r\n                  <Input style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n                </Form.Item>\r\n                <Form.Item name=\"lastName\" label={<Text style={{ fontWeight: 900 }}>FAMILIYA</Text>} rules={[{ required: true }]}>\r\n                  <Input style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n                </Form.Item>\r\n              </div>\r\n\r\n              <Form.Item name=\"email\" label={<Text style={{ fontWeight: 900 }}>EMAIL MANZIL</Text>} rules={[{ required: true, type: 'email' }]}>\r\n                <Input disabled={isEditMode} style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n              </Form.Item>\r\n\r\n              <Form.Item name=\"password\" label={<Text style={{ fontWeight: 900 }}>{isEditMode ? \"YANGI PAROL (IXTIYORIY)\" : \"PAROL\"}</Text>} rules={[{ required: !isEditMode, min: 6 }]}>\r\n                <Input.Password style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n              </Form.Item>\r\n\r\n              <Form.Item name=\"organization\" label={<Text style={{ fontWeight: 900 }}>TASHKILOT</Text>} rules={[{ required: true }]}>\r\n                <Input style={{ borderRadius: 0, border: '3px solid #000' }} />\r\n              </Form.Item>\r\n\r\n              <Divider style={{ borderTop: '4px solid #000', margin: '20px 0' }} />\r\n\r\n              <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '16px' }}>\r\n                <Button \r\n                  onClick={() => navigate('/headadmin/admins')}\r\n                  style={{ borderRadius: 0, border: '3px solid #000', height: '50px', fontWeight: 900, padding: '0 30px' }}\r\n                >BEKOR QILISH</Button>\r\n                <Button \r\n                  type=\"primary\"\r\n                  htmlType=\"submit\"\r\n                  style={{ borderRadius: 0, border: '3px solid #000', height: '50px', fontWeight: 900, padding: '0 30px', backgroundColor: '#000', color: '#fff' }}\r\n                >{isEditMode ? 'SAQLASH' : 'QO\\'SHISH'}</Button>\r\n              </div>\r\n            </Space>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default AddAdmin;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\AdminDetails.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":41,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Typography,\r\n  Button,\r\n  Avatar,\r\n  Row,\r\n  Col,\r\n  Alert,\r\n  Spin,\r\n  Space,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  UserOutlined,\r\n  MailOutlined,\r\n  CalendarOutlined,\r\n  SafetyCertificateOutlined,\r\n  BankOutlined,\r\n} from '@ant-design/icons';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst AdminDetails = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const [admin, setAdmin] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const adminData = await apiService.getUser(id);\r\n        setAdmin(adminData);\r\n      } catch (error) {\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    if (id) loadData();\r\n  }, [id]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 800 }}>YUKLANMOQDA...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div style={{ padding: '40px 0' }}>\r\n        {/* Brutalist Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <Button\r\n            type=\"text\"\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={() => navigate('/headadmin/admins')}\r\n            style={{ marginBottom: 24, fontWeight: 800, textTransform: 'uppercase', padding: 0 }}\r\n          >\r\n            ORTGA QAYTISH\r\n          </Button>\r\n          \r\n          <div style={{ \r\n            display: 'inline-block', \r\n            backgroundColor: '#000', \r\n            color: '#fff', \r\n            padding: '8px 16px', \r\n            fontWeight: 900, \r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            Tafsilotlar\r\n          </div>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '2.5rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            Admin Profili\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Administrator haqida batafsil ma'lumotlar va tizimdagi huquqlari.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ borderRadius: 0, border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, marginBottom: '24px', maxWidth: '800px' }}\r\n          />\r\n        )}\r\n\r\n        {admin && (\r\n          <div className=\"animate__animated animate__fadeIn\" style={{ maxWidth: '900px', margin: '0 auto' }}>\r\n            <Row gutter={[32, 32]}>\r\n              {/* Profile Card */}\r\n              <Col xs={24} md={8}>\r\n                <div style={{ \r\n                  padding: '40px 24px', \r\n                  border: '4px solid #000', \r\n                  boxShadow: '10px 10px 0px #000', \r\n                  backgroundColor: '#fff',\r\n                  textAlign: 'center'\r\n                }}>\r\n                  <Avatar\r\n                    size={120}\r\n                    icon={<SafetyCertificateOutlined />}\r\n                    style={{ backgroundColor: '#000', borderRadius: 0, border: '4px solid #000', marginBottom: '20px' }}\r\n                  />\r\n                  <Title level={3} style={{ fontWeight: 900, textTransform: 'uppercase', margin: 0 }}>{admin.name}</Title>\r\n                  <Text style={{ fontWeight: 700, color: '#666', fontSize: '12px' }}>ADMINISTRATOR</Text>\r\n                </div>\r\n              </Col>\r\n\r\n              {/* Info Card */}\r\n              <Col xs={24} md={16}>\r\n                <div style={{ \r\n                  padding: '40px', \r\n                  border: '4px solid #000', \r\n                  boxShadow: '10px 10px 0px #000', \r\n                  backgroundColor: '#fff'\r\n                }}>\r\n                  <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                      <UserOutlined style={{ fontSize: '24px', color: '#000' }} />\r\n                      <div>\r\n                        <Text style={{ fontSize: '12px', fontWeight: 900, color: '#999', textTransform: 'uppercase' }}>Foydalanuvchi nomi</Text>\r\n                        <Paragraph style={{ fontSize: '18px', fontWeight: 800, margin: 0 }}>{admin.name.toUpperCase()}</Paragraph>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                      <MailOutlined style={{ fontSize: '24px', color: '#000' }} />\r\n                      <div>\r\n                        <Text style={{ fontSize: '12px', fontWeight: 900, color: '#999', textTransform: 'uppercase' }}>Email manzil</Text>\r\n                        <Paragraph style={{ fontSize: '18px', fontWeight: 800, margin: 0 }}>{admin.email}</Paragraph>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                      <BankOutlined style={{ fontSize: '24px', color: '#000' }} />\r\n                      <div>\r\n                        <Text style={{ fontSize: '12px', fontWeight: 900, color: '#999', textTransform: 'uppercase' }}>Tashkilot</Text>\r\n                        <Paragraph style={{ fontSize: '18px', fontWeight: 800, margin: 0 }}>{admin.organization?.toUpperCase() || 'ANIQLANMAGAN'}</Paragraph>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                      <CalendarOutlined style={{ fontSize: '24px', color: '#000' }} />\r\n                      <div>\r\n                        <Text style={{ fontSize: '12px', fontWeight: 900, color: '#999', textTransform: 'uppercase' }}>Ro'yxatdan o'tgan sana</Text>\r\n                        <Paragraph style={{ fontSize: '18px', fontWeight: 800, margin: 0 }}>\r\n                          {admin.registration_date ? new Date(admin.registration_date).toLocaleDateString('uz-UZ') : 'NOMA\\'LUM'}\r\n                        </Paragraph>\r\n                      </div>\r\n                    </div>\r\n                  </Space>\r\n\r\n                  <Divider style={{ borderTop: '4px solid #000', margin: '40px 0' }} />\r\n\r\n                  <div style={{ display: 'flex', gap: '16px' }}>\r\n                    <Button \r\n                      type=\"primary\" \r\n                      onClick={() => navigate(`/headadmin/edit-admin/${admin.id}`)}\r\n                      style={{ borderRadius: 0, border: '3px solid #000', height: '50px', fontWeight: 900, padding: '0 30px', backgroundColor: '#000', color: '#fff' }}\r\n                    >TAHRIRLASH</Button>\r\n                    <Button \r\n                      onClick={() => navigate('/headadmin/admins')}\r\n                      style={{ borderRadius: 0, border: '3px solid #000', height: '50px', fontWeight: 900, padding: '0 30px' }}\r\n                    >ORTGA</Button>\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default AdminDetails;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\AppSettings.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\ContactMessages.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\HeadAdminOverview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":30,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[620,654],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  UserOutlined,\r\n  TeamOutlined,\r\n  SafetyCertificateOutlined,\r\n  BookOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  CrownOutlined\r\n} from '@ant-design/icons';\r\nimport apiService from '../../data/apiService';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst HeadAdminOverview = () => {\r\n  const { currentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalUsers: 0,\r\n    totalAdmins: 0,\r\n    totalTeachers: 0,\r\n    totalStudents: 0,\r\n    totalSellers: 0,\r\n    totalTests: 0,\r\n    totalAttempts: 0,\r\n    activeTests: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const [usersData, testsData, attemptsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getTests(),\r\n          apiService.getAttempts()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const tests = testsData.results || testsData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n\r\n        setStats({\r\n          totalUsers: users.length,\r\n          totalAdmins: users.filter(user => user.role === 'admin' || user.role === 'head_admin').length,\r\n          totalTeachers: users.filter(user => user.role === 'teacher').length,\r\n          totalStudents: users.filter(user => user.role === 'student').length,\r\n          totalSellers: users.filter(user => user.role === 'seller').length,\r\n          totalTests: tests.length,\r\n          totalAttempts: attempts.length,\r\n          activeTests: tests.filter(test => test.is_active !== false).length,\r\n        });\r\n      } catch (error) {\r\n        console.error('Error fetching statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchStatistics();\r\n  }, []);\r\n\r\n  const StatBox = ({ title, value, icon, delay, suffix }) => (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: delay }}>\r\n      <Card\r\n        style={{\r\n          borderRadius: 0,\r\n          border: '4px solid #000',\r\n          boxShadow: '10px 10px 0px #000',\r\n          backgroundColor: '#fff',\r\n        }}\r\n        styles={{ body: { padding: '24px' } }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '20px' }}>\r\n          <div>\r\n            <Text style={{ \r\n              fontSize: '12px', \r\n              fontWeight: 900, \r\n              textTransform: 'uppercase', \r\n              letterSpacing: '0.1em',\r\n              color: '#000',\r\n              display: 'block',\r\n              marginBottom: '4px'\r\n            }}>\r\n              {title}\r\n            </Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              valueStyle={{ \r\n                fontSize: '36px', \r\n                fontWeight: 900, \r\n                color: '#000',\r\n                letterSpacing: '-1px',\r\n                lineHeight: 1\r\n              }}\r\n            />\r\n          </div>\r\n          <div style={{ \r\n            display: 'inline-flex', \r\n            alignItems: 'center', \r\n            justifyContent: 'center',\r\n            width: '50px',\r\n            height: '50px',\r\n            backgroundColor: '#000',\r\n            color: '#fff',\r\n            border: '2px solid #000',\r\n            flexShrink: 0\r\n          }}>\r\n            {React.cloneElement(icon, { style: { fontSize: '24px' } })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 800, textTransform: 'uppercase' }}>Yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div style={{ padding: '40px 0' }}>\r\n        {/* Brutalist Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ \r\n            display: 'inline-block', \r\n            backgroundColor: '#000', \r\n            color: '#fff', \r\n            padding: '8px 16px', \r\n            fontWeight: 900, \r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            Head Admin Umumiy\r\n          </div>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '2.5rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            Platforma Statistikasi\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Butun platforma bo'ylab foydalanuvchilar, testlar va urinishlar haqida to'liq hisobot.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert \r\n            message={error} \r\n            type=\"error\" \r\n            showIcon \r\n            style={{ \r\n              borderRadius: 0, \r\n              border: '3px solid #000', \r\n              boxShadow: '6px 6px 0px #000',\r\n              fontWeight: 800,\r\n              marginBottom: '40px'\r\n            }} \r\n          />\r\n        )}\r\n\r\n        {/* Statistics Grid */}\r\n        <Row gutter={[32, 32]}>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Jami foydalanuvchilar\"\r\n              value={stats.totalUsers}\r\n              icon={<UserOutlined />}\r\n              delay=\"0.1s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Adminlar\"\r\n              value={stats.totalAdmins}\r\n              icon={<SafetyCertificateOutlined />}\r\n              delay=\"0.2s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"O'qituvchilar\"\r\n              value={stats.totalTeachers}\r\n              icon={<BookOutlined />}\r\n              delay=\"0.3s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"O'quvchilar\"\r\n              value={stats.totalStudents}\r\n              icon={<TeamOutlined />}\r\n              delay=\"0.4s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Sotuvchilar\"\r\n              value={stats.totalSellers}\r\n              icon={<CrownOutlined />}\r\n              delay=\"0.5s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Jami testlar\"\r\n              value={stats.totalTests}\r\n              icon={<RiseOutlined />}\r\n              delay=\"0.6s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Urinishlar\"\r\n              value={stats.totalAttempts}\r\n              icon={<TrophyOutlined />}\r\n              delay=\"0.7s\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Faol testlar\"\r\n              value={stats.activeTests}\r\n              icon={<RiseOutlined />}\r\n              delay=\"0.8s\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        <Divider style={{ margin: '48px 0', borderTop: '4px solid #000' }} />\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '0.9s' }}>\r\n          <Title level={2} style={{ fontWeight: 900, textTransform: 'uppercase', marginBottom: '32px' }}>\r\n            Tezkor Amallar\r\n          </Title>\r\n          <Row gutter={[32, 32]}>\r\n            <Col xs={24} sm={12} lg={8}>\r\n              <Card\r\n                hoverable\r\n                onClick={() => navigate('/headadmin/settings')}\r\n                style={{\r\n                  borderRadius: 0,\r\n                  border: '4px solid #000',\r\n                  boxShadow: '10px 10px 0px #000',\r\n                  cursor: 'pointer',\r\n                  height: '100%'\r\n                }}\r\n              >\r\n                <div style={{ textAlign: 'center', padding: '12px' }}>\r\n                  <RiseOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                  <Title level={4} style={{ fontWeight: 800, textTransform: 'uppercase', margin: 0 }}>Sayt Sozlamalari</Title>\r\n                  <Text style={{ fontWeight: 600 }}>Header va Welcome page qismlarini boshqarish</Text>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n            <Col xs={24} sm={12} lg={8}>\r\n              <Card\r\n                hoverable\r\n                onClick={() => navigate('/headadmin/admins')}\r\n                style={{\r\n                  borderRadius: 0,\r\n                  border: '4px solid #000',\r\n                  boxShadow: '10px 10px 0px #000',\r\n                  cursor: 'pointer',\r\n                  height: '100%'\r\n                }}\r\n              >\r\n                <div style={{ textAlign: 'center', padding: '12px' }}>\r\n                  <SafetyCertificateOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                  <Title level={4} style={{ fontWeight: 800, textTransform: 'uppercase', margin: 0 }}>Adminlarni Boshqarish</Title>\r\n                  <Text style={{ fontWeight: 600 }}>Yangi adminlar qo'shish va tahrirlash</Text>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n            <Col xs={24} sm={12} lg={8}>\r\n              <Card\r\n                hoverable\r\n                onClick={() => navigate('/headadmin/messages')}\r\n                style={{\r\n                  borderRadius: 0,\r\n                  border: '4px solid #000',\r\n                  boxShadow: '10px 10px 0px #000',\r\n                  cursor: 'pointer',\r\n                  height: '100%'\r\n                }}\r\n              >\r\n                <div style={{ textAlign: 'center', padding: '12px' }}>\r\n                  <UserOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n                  <Title level={4} style={{ fontWeight: 800, textTransform: 'uppercase', margin: 0 }}>Aloqa Xabarlari</Title>\r\n                  <Text style={{ fontWeight: 600 }}>Foydalanuvchilardan kelgan murojaatlar</Text>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default HeadAdminOverview;\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\ManageAdmins.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\headadmin\\ManageNews.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":129,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNews } from '../../context/NewsContext';\r\nimport { \r\n  Button, \r\n  Input, \r\n  Select, \r\n  Upload, \r\n  Card, \r\n  List, \r\n  message, \r\n  Typography, \r\n  Space, \r\n  ConfigProvider, \r\n  Row, \r\n  Col,\r\n  Tabs\r\n} from 'antd';\r\nimport { UploadOutlined, DeleteOutlined, EditOutlined, FileImageOutlined } from '@ant-design/icons';\r\nimport 'animate.css';\r\n\r\nconst { TextArea } = Input;\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Option } = Select;\r\n\r\nconst ManageNews = () => {\r\n  const { news, addNews, deleteNews, updateNews } = useNews();\r\n  const [editingId, setEditingId] = useState(null);\r\n  \r\n  // Form State - Multi-language\r\n  const [titles, setTitles] = useState({ uz: '', ru: '', en: '' });\r\n  const [descriptions, setDescriptions] = useState({ uz: '', ru: '', en: '' });\r\n  \r\n  const [mediaType, setMediaType] = useState('image');\r\n  const [mediaUrl, setMediaUrl] = useState('');\r\n  const [fileList, setFileList] = useState([]);\r\n\r\n  // Handle File Upload\r\n  const handleUpload = ({ file }) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setMediaUrl(e.target.result);\r\n      setFileList([file]);\r\n      message.success('Media yuklandi!');\r\n    };\r\n    reader.readAsDataURL(file);\r\n    return false;\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    // Strict Validation: Check all 3 languages\r\n    const languages = ['uz', 'ru', 'en'];\r\n    const missingFields = [];\r\n\r\n    languages.forEach(lang => {\r\n      if (!titles[lang]) missingFields.push(`Sarlavha (${lang.toUpperCase()})`);\r\n      if (!descriptions[lang]) missingFields.push(`Tavsif (${lang.toUpperCase()})`);\r\n    });\r\n\r\n    if (missingFields.length > 0) {\r\n      message.error({\r\n        content: `Iltimos, quyidagilarni kiritishni unutmang: ${missingFields.join(', ')}`,\r\n        duration: 4\r\n      });\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('title_uz', titles.uz);\r\n    formData.append('description_uz', descriptions.uz);\r\n    formData.append('title_ru', titles.ru);\r\n    formData.append('description_ru', descriptions.ru);\r\n    formData.append('title_en', titles.en);\r\n    formData.append('description_en', descriptions.en);\r\n    \r\n    // Legacy fields\r\n    formData.append('title', titles.uz);\r\n    formData.append('description', descriptions.uz);\r\n\r\n    formData.append('media_type', mediaType);\r\n\r\n    if (fileList.length > 0) {\r\n      formData.append('media_file', fileList[0]);\r\n    }\r\n\r\n    try {\r\n      if (editingId) {\r\n        await updateNews(editingId, formData);\r\n        message.success('Yangilik tahrirlandi!');\r\n        setEditingId(null);\r\n      } else {\r\n        await addNews(formData);\r\n        message.success('Yangilik muvaffaqiyatli chop etildi!');\r\n      }\r\n\r\n      // Reset Form\r\n      setTitles({ uz: '', ru: '', en: '' });\r\n      setDescriptions({ uz: '', ru: '', en: '' });\r\n      setMediaUrl('');\r\n      setFileList([]);\r\n      setMediaType('image');\r\n    } catch (error) {\r\n      console.error(error);\r\n      message.error('Xatolik yuz berdi');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setEditingId(item.id);\r\n    setTitles({\r\n      uz: item.title_uz || item.title || '',\r\n      ru: item.title_ru || '',\r\n      en: item.title_en || ''\r\n    });\r\n    setDescriptions({\r\n      uz: item.description_uz || item.description || '',\r\n      ru: item.description_ru || '',\r\n      en: item.description_en || ''\r\n    });\r\n    setMediaType(item.media_type);\r\n    setMediaUrl(item.media_file);\r\n    setFileList([]);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await deleteNews(id);\r\n      message.success('O\\'chirildi');\r\n    } catch (error) {\r\n      message.error('Xatolik');\r\n    }\r\n  };\r\n\r\n  const cardStyle = {\r\n    borderRadius: 0,\r\n    border: '4px solid #000',\r\n    boxShadow: '10px 10px 0px #000',\r\n    marginBottom: '24px'\r\n  };\r\n\r\n  const tabItems = [\r\n    {\r\n      key: 'uz',\r\n      label: <span style={{ fontWeight: 800 }}>O'ZBEKCHA</span>,\r\n      children: (\r\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"middle\">\r\n          <div>\r\n            <Text strong style={{ fontSize: '0.7rem' }}>SARLAVHA (UZ)</Text>\r\n            <Input \r\n              placeholder=\"O'zbekcha sarlavha...\" \r\n              value={titles.uz} \r\n              onChange={e => setTitles({...titles, uz: e.target.value})} \r\n              size=\"large\"\r\n              style={{ border: '2px solid #000' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Text strong style={{ fontSize: '0.7rem' }}>TAVSIF (UZ)</Text>\r\n            <TextArea \r\n              rows={4} \r\n              placeholder=\"O'zbekcha tavsif...\" \r\n              value={descriptions.uz} \r\n              onChange={e => setDescriptions({...descriptions, uz: e.target.value})} \r\n              style={{ border: '2px solid #000' }}\r\n            />\r\n          </div>\r\n        </Space>\r\n      )\r\n    },\r\n    {\r\n      key: 'ru',\r\n      label: <span style={{ fontWeight: 800 }}>╨а╨г╨б╨б╨Ъ╨Ш╨Щ</span>,\r\n      children: (\r\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"middle\">\r\n          <div>\r\n            <Text strong style={{ fontSize: '0.7rem' }}>╨Ч╨Р╨У╨Ю╨Ы╨Ю╨Т╨Ю╨Ъ (RU)</Text>\r\n            <Input \r\n              placeholder=\"╨а╤Г╤Б╤Б╨║╨╕╨╣ ╨╖╨░╨│╨╛╨╗╨╛╨▓╨╛╨║...\" \r\n              value={titles.ru} \r\n              onChange={e => setTitles({...titles, ru: e.target.value})} \r\n              size=\"large\"\r\n              style={{ border: '2px solid #000' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Text strong style={{ fontSize: '0.7rem' }}>╨Ю╨Я╨Ш╨б╨Р╨Э╨Ш╨Х (RU)</Text>\r\n            <TextArea \r\n              rows={4} \r\n              placeholder=\"╨а╤Г╤Б╤Б╨║╨╛╨╡ ╨╛╨┐╨╕╤Б╨░╨╜╨╕╨╡...\" \r\n              value={descriptions.ru} \r\n              onChange={e => setDescriptions({...descriptions, ru: e.target.value})} \r\n              style={{ border: '2px solid #000' }}\r\n            />\r\n          </div>\r\n        </Space>\r\n      )\r\n    },\r\n    {\r\n      key: 'en',\r\n      label: <span style={{ fontWeight: 800 }}>ENGLISH</span>,\r\n      children: (\r\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"middle\">\r\n          <div>\r\n            <Text strong style={{ fontSize: '0.7rem' }}>TITLE (EN)</Text>\r\n            <Input \r\n              placeholder=\"English title...\" \r\n              value={titles.en} \r\n              onChange={e => setTitles({...titles, en: e.target.value})} \r\n              size=\"large\"\r\n              style={{ border: '2px solid #000' }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Text strong style={{ fontSize: '0.7rem' }}>DESCRIPTION (EN)</Text>\r\n            <TextArea \r\n              rows={4} \r\n              placeholder=\"English description...\" \r\n              value={descriptions.en} \r\n              onChange={e => setDescriptions({...descriptions, en: e.target.value})} \r\n              style={{ border: '2px solid #000' }}\r\n            />\r\n          </div>\r\n        </Space>\r\n      )\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n          fontFamily: \"'Inter', sans-serif\",\r\n        },\r\n        components: {\r\n          Tabs: {\r\n            titleFontSize: 14,\r\n            itemColor: '#999',\r\n            itemSelectedColor: '#000',\r\n            itemHoverColor: '#000',\r\n            inkBarColor: '#000',\r\n          }\r\n        }\r\n      }}\r\n    >\r\n      <div style={{ padding: '24px 0' }}>\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ \r\n            display: 'inline-block', \r\n            backgroundColor: '#000', \r\n            color: '#fff', \r\n            padding: '8px 16px', \r\n            fontWeight: 900, \r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            Yangilanishlar\r\n          </div>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '3rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            Platforma Yangiliklari\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Platformadagi barcha tizimli o'zgarishlar va yangiliklarni 3 tilda (UZ, RU, EN) shu yerdan boshqaring.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <Row gutter={40}>\r\n          <Col xs={24} lg={12}>\r\n            <Card \r\n              title={\r\n                <span style={{ textTransform: 'uppercase', fontWeight: 900, fontSize: '1rem' }}>\r\n                   {editingId ? \"Tahrirlash\" : \"Yangi xabar\"}\r\n                </span>\r\n              } \r\n              style={cardStyle}\r\n              headStyle={{ borderBottom: '4px solid #000' }}\r\n            >\r\n              <Tabs defaultActiveKey=\"uz\" items={tabItems} style={{ marginBottom: 24 }} />\r\n\r\n              <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\r\n                <Row gutter={20} align=\"bottom\">\r\n                  <Col span={10}>\r\n                    <div style={{ marginBottom: 4 }}>\r\n                      <Text strong style={{ fontSize: '0.7rem', color: '#666', textTransform: 'uppercase' }}>MEDIA TURI</Text>\r\n                    </div>\r\n                    <Select \r\n                      value={mediaType} \r\n                      onChange={setMediaType} \r\n                      style={{ width: '100%', border: '2px solid #000' }} \r\n                      size=\"large\"\r\n                    >\r\n                      <Option value=\"image\">Image</Option>\r\n                      <Option value=\"video\">Video</Option>\r\n                    </Select>\r\n                  </Col>\r\n                  <Col span={14}>\r\n                    <div style={{ marginBottom: 4 }}>\r\n                      <Text strong style={{ fontSize: '0.7rem', color: '#666', textTransform: 'uppercase' }}>FAYL YUKLASH</Text>\r\n                    </div>\r\n                    <Upload \r\n                      beforeUpload={() => false} \r\n                      onChange={handleUpload} \r\n                      maxCount={1} \r\n                      showUploadList={false}\r\n                      accept={mediaType === 'video' ? \"video/*\" : \"image/*\"}\r\n                    >\r\n                      <Button \r\n                        icon={<UploadOutlined />} \r\n                        size=\"large\" \r\n                        style={{ width: '100%', border: '2px solid #000', fontWeight: 700 }}\r\n                      >\r\n                        {fileList.length > 0 ? \"Fayl almashtirish\" : \"Tanlash\"}\r\n                      </Button>\r\n                    </Upload>\r\n                  </Col>\r\n                </Row>\r\n\r\n                {mediaUrl && (\r\n                  <div style={{ border: '4px solid #000', overflow: 'hidden', boxShadow: '5px 5px 0px #000' }}>\r\n                    {mediaType === 'video' ? (\r\n                      <video src={mediaUrl} controls style={{ width: '100%', display: 'block' }} />\r\n                    ) : (\r\n                      <img src={mediaUrl} alt=\"Preview\" style={{ width: '100%', display: 'block' }} />\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                <div style={{ display: 'flex', gap: 16 }}>\r\n                  <Button type=\"primary\" size=\"large\" onClick={handleSubmit} style={{ flex: 1, height: '50px', background: '#000' }}>\r\n                    {editingId ? \"SAQLASH\" : \"CHOP ETISH\"}\r\n                  </Button>\r\n                  {editingId && (\r\n                    <Button size=\"large\" onClick={() => { setEditingId(null); setTitles({ uz: '', ru: '', en: '' }); setDescriptions({ uz: '', ru: '', en: '' }); setMediaUrl(''); setFileList([]); }} style={{ height: '50px' }}>\r\n                      BEKOR QILISH\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </Space>\r\n            </Card>\r\n          </Col>\r\n\r\n          <Col xs={24} lg={12}>\r\n            <Title level={3} style={{ textTransform: 'uppercase', fontWeight: 800 }}>Arxiv</Title>\r\n            <List\r\n              dataSource={news}\r\n              renderItem={item => (\r\n                <Card \r\n                  style={{ ...cardStyle, boxShadow: '6px 6px 0px #000', marginBottom: 20 }}\r\n                  styles={{ body: { padding: 0 } }}\r\n                >\r\n                  <div style={{ display: 'flex' }}>\r\n                    {item.media_file && (\r\n                      <div style={{ width: '120px', minHeight: '120px', borderRight: '4px solid #000' }}>\r\n                        <img src={item.media_file} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                      </div>\r\n                    )}\r\n                    <div style={{ padding: 15, flex: 1, position: 'relative' }}>\r\n                      <div style={{ position: 'absolute', top: 10, right: 10, display: 'flex', gap: 5 }}>\r\n                        <Button size=\"small\" icon={<EditOutlined />} onClick={() => handleEdit(item)} />\r\n                        <Button size=\"small\" danger icon={<DeleteOutlined />} onClick={() => handleDelete(item.id)} />\r\n                      </div>\r\n                      <Text style={{ fontSize: '12px', color: '#666' }}>{new Date(item.created_at).toLocaleDateString()}</Text>\r\n                      <div style={{ fontWeight: 800, textTransform: 'uppercase' }}>{item.title_uz || item.title}</div>\r\n                      <Paragraph ellipsis={{ rows: 2 }} style={{ margin: 0, fontSize: '13px' }}>{item.description_uz || item.description}</Paragraph>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              )}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default ManageNews;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\seller\\ManagePrices.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[464,498],"text":""},"desc":"Remove unused variable 'currentUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { Typography, Button, Input, Alert, Switch, Tabs, Table, Space, ConfigProvider, Tag } from 'antd';\r\nimport { EditOutlined, SaveOutlined, CloseOutlined, StarOutlined } from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst ManagePrices = () => {\r\n  const { currentUser } = useAuth();\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [pricing, setPricing] = useState([]);\r\n  const [starPackages, setStarPackages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [editData, setEditData] = useState({});\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [pricingData, starData] = await Promise.all([\r\n        apiService.get('/pricing/'),\r\n        apiService.get('/star-packages/')\r\n      ]);\r\n      setPricing(pricingData.results || pricingData || []);\r\n      setStarPackages(starData.results || starData || []);\r\n    } catch (error) {\r\n      console.error('Failed to load data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setEditingId(item.id);\r\n    setEditData({\r\n      original_price: item.original_price,\r\n      discounted_price: item.discounted_price,\r\n      discount_percentage: item.discount_percentage,\r\n      is_active: item.is_active,\r\n    });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingId(null);\r\n    setEditData({});\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const endpoint = activeTab === 0 ? `/pricing/${editingId}/` : `/star-packages/${editingId}/`;\r\n      await apiService.patch(endpoint, editData);\r\n      await loadData();\r\n      setEditingId(null);\r\n      setEditData({});\r\n      setSuccessMessage('Saqlandi');\r\n      setTimeout(() => setSuccessMessage(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to save:', error);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setEditData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n          <div>\r\n            <div style={{ \r\n              display: 'inline-block', \r\n              backgroundColor: '#000', \r\n              color: '#fff', \r\n              padding: '8px 16px', \r\n              fontWeight: 900, \r\n              fontSize: '14px',\r\n              textTransform: 'uppercase',\r\n              letterSpacing: '0.2em',\r\n              marginBottom: '16px'\r\n            }}>\r\n              Narxlarni sozlash\r\n            </div>\r\n            <Title level={1} style={{ \r\n              margin: 0, \r\n              fontWeight: 900, \r\n              fontSize: '2.5rem', \r\n              lineHeight: 0.9, \r\n              textTransform: 'uppercase',\r\n              letterSpacing: '-0.05em',\r\n              color: '#000'\r\n            }}>\r\n              Narxlar & Paketlar\r\n            </Title>\r\n            <div style={{ \r\n              width: '80px', \r\n              height: '10px', \r\n              backgroundColor: '#000', \r\n              margin: '24px 0' \r\n            }}></div>\r\n            <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n              Premium obuna va yulduz paketlari narxlarini markaziy boshqaruv orqali tahrirlang.\r\n            </Paragraph>\r\n          </div>\r\n          \r\n          {editingId && (\r\n            <Button \r\n              icon={<CloseOutlined />} \r\n              onClick={handleCancel} \r\n              style={{ \r\n                borderRadius: 0, \r\n                border: '3px solid #000', \r\n                fontWeight: 900,\r\n                height: '50px',\r\n                padding: '0 24px'\r\n              }}\r\n            >\r\n              BEKOR QILISH\r\n            </Button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Success Message */}\r\n        {successMessage && (\r\n          <Alert\r\n            message={successMessage.toUpperCase()}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ \r\n              borderRadius: 0, \r\n              border: '3px solid #000', \r\n              boxShadow: '8px 8px 0px #000',\r\n              fontWeight: 900,\r\n              marginBottom: '32px',\r\n              backgroundColor: '#fff'\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {/* Tabs */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '32px' }}>\r\n          <Tabs\r\n            activeKey={activeTab.toString()}\r\n            onChange={(key) => setActiveTab(parseInt(key))}\r\n            tabBarStyle={{ marginBottom: 0 }}\r\n            items={[\r\n              { \r\n                key: '0', \r\n                label: <span style={{ fontWeight: 900, textTransform: 'uppercase', padding: '0 16px' }}>ЁЯТО Premium Obunalar</span> \r\n              },\r\n              { \r\n                key: '1', \r\n                label: <span style={{ fontWeight: 900, textTransform: 'uppercase', padding: '0 16px' }}>тнР Yulduz Paketlari</span> \r\n              },\r\n            ]}\r\n          />\r\n        </div>\r\n\r\n        {/* Pricing Table Section */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ \r\n          border: '4px solid #000', \r\n          boxShadow: '12px 12px 0px #000', \r\n          backgroundColor: '#fff',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <Table\r\n            dataSource={activeTab === 0 ? pricing : starPackages}\r\n            loading={loading}\r\n            pagination={false}\r\n            columns={activeTab === 0 ? [\r\n              { \r\n                title: 'OBUNA TURI', \r\n                dataIndex: 'plan_name', \r\n                key: 'plan_name',\r\n                render: (name) => <Text style={{ fontWeight: 900, textTransform: 'uppercase' }}>{name}</Text>\r\n              },\r\n              {\r\n                title: 'ASL NARX ($)',\r\n                dataIndex: 'original_price',\r\n                key: 'original_price',\r\n                render: (text, record) => editingId === record.id ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={editData.original_price}\r\n                    onChange={(e) => handleInputChange('original_price', parseFloat(e.target.value))}\r\n                    style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, width: '100px' }}\r\n                  />\r\n                ) : (\r\n                  <Text style={{ fontWeight: 700 }}>{text}</Text>\r\n                )\r\n              },\r\n              {\r\n                title: 'CHEGIRMA NARX ($)',\r\n                dataIndex: 'discounted_price',\r\n                key: 'discounted_price',\r\n                render: (text, record) => editingId === record.id ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={editData.discounted_price}\r\n                    onChange={(e) => handleInputChange('discounted_price', parseFloat(e.target.value))}\r\n                    style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, width: '100px' }}\r\n                  />\r\n                ) : (\r\n                  <Text style={{ fontWeight: 900, color: '#000' }}>{text}</Text>\r\n                )\r\n              },\r\n              {\r\n                title: 'CHEGIRMA (%)',\r\n                dataIndex: 'discount_percentage',\r\n                key: 'discount_percentage',\r\n                render: (text, record) => editingId === record.id ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={editData.discount_percentage}\r\n                    onChange={(e) => handleInputChange('discount_percentage', parseInt(e.target.value))}\r\n                    style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, width: '80px' }}\r\n                  />\r\n                ) : (\r\n                  <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, backgroundColor: '#000', color: '#fff' }}>{text}%</Tag>\r\n                )\r\n              },\r\n              {\r\n                title: 'HOLAT',\r\n                dataIndex: 'is_active',\r\n                key: 'is_active',\r\n                render: (active, record) => editingId === record.id ? (\r\n                  <Switch\r\n                    checked={editData.is_active}\r\n                    onChange={(checked) => handleInputChange('is_active', checked)}\r\n                  />\r\n                ) : (\r\n                  <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800, color: '#000', backgroundColor: active ? '#fff' : '#eee' }}>\r\n                    {active ? 'FAOL' : 'O\\'CHIK'}\r\n                  </Tag>\r\n                )\r\n              },\r\n              {\r\n                title: 'AMALLAR',\r\n                key: 'actions',\r\n                render: (_, record) => editingId === record.id ? (\r\n                  <Button \r\n                    icon={<SaveOutlined />} \r\n                    onClick={handleSave} \r\n                    style={{ \r\n                      borderRadius: 0, \r\n                      backgroundColor: '#000', \r\n                      color: '#fff', \r\n                      fontWeight: 900,\r\n                      border: 'none',\r\n                      height: '42px',\r\n                      width: '150px',\r\n                      padding: '0 20px'\r\n                    }}\r\n                  >SAQLASH</Button>\r\n                ) : (\r\n                  <Button \r\n                    icon={<EditOutlined />} \r\n                    onClick={() => handleEdit(record)}\r\n                    style={{ \r\n                      borderRadius: 0, \r\n                      border: '2px solid #000', \r\n                      fontWeight: 900,\r\n                      height: '42px',\r\n                      width: '150px',\r\n                      padding: '0 20px'\r\n                    }}\r\n                  >TAHRIRLASH</Button>\r\n                ),\r\n              },\r\n            ] : [\r\n              {\r\n                title: 'YULDUZLAR',\r\n                dataIndex: 'stars',\r\n                key: 'stars',\r\n                render: (stars) => (\r\n                  <Space>\r\n                    <StarOutlined style={{ color: '#000', fontWeight: 900 }} />\r\n                    <Text style={{ fontWeight: 900 }}>{stars} YULDUZ</Text>\r\n                  </Space>\r\n                )\r\n              },\r\n              {\r\n                title: 'ASL NARX ($)',\r\n                dataIndex: 'original_price',\r\n                key: 'original_price',\r\n                render: (text, record) => editingId === record.id ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={editData.original_price}\r\n                    onChange={(e) => handleInputChange('original_price', parseFloat(e.target.value))}\r\n                    style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, width: '100px' }}\r\n                  />\r\n                ) : (\r\n                  <Text style={{ fontWeight: 700 }}>{text}</Text>\r\n                )\r\n              },\r\n              {\r\n                title: 'CHEGIRMA NARX ($)',\r\n                dataIndex: 'discounted_price',\r\n                key: 'discounted_price',\r\n                render: (text, record) => editingId === record.id ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={editData.discounted_price}\r\n                    onChange={(e) => handleInputChange('discounted_price', parseFloat(e.target.value))}\r\n                    style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, width: '100px' }}\r\n                  />\r\n                ) : (\r\n                  <Text style={{ fontWeight: 900 }}>{text}</Text>\r\n                )\r\n              },\r\n              {\r\n                title: 'CHEGIRMA (%)',\r\n                dataIndex: 'discount_percentage',\r\n                key: 'discount_percentage',\r\n                render: (text, record) => editingId === record.id ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={editData.discount_percentage}\r\n                    onChange={(e) => handleInputChange('discount_percentage', parseInt(e.target.value))}\r\n                    style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, width: '80px' }}\r\n                  />\r\n                ) : (\r\n                  <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, backgroundColor: '#000', color: '#fff' }}>{text}%</Tag>\r\n                )\r\n              },\r\n              {\r\n                title: 'MASHHUR',\r\n                dataIndex: 'is_popular',\r\n                key: 'is_popular',\r\n                render: (popular, record) => editingId === record.id ? (\r\n                  <Switch\r\n                    checked={editData.is_popular}\r\n                    onChange={(checked) => handleInputChange('is_popular', checked)}\r\n                  />\r\n                ) : (\r\n                  <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800, backgroundColor: popular ? '#000' : '#fff', color: popular ? '#fff' : '#000' }}>\r\n                    {popular ? 'HA' : 'YO\\'Q'}\r\n                  </Tag>\r\n                )\r\n              },\r\n              {\r\n                title: 'HOLAT',\r\n                dataIndex: 'is_active',\r\n                key: 'is_active',\r\n                render: (active, record) => editingId === record.id ? (\r\n                  <Switch\r\n                    checked={editData.is_active}\r\n                    onChange={(checked) => handleInputChange('is_active', checked)}\r\n                  />\r\n                ) : (\r\n                  <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800, backgroundColor: active ? '#fff' : '#eee' }}>\r\n                    {active ? 'FAOL' : 'O\\'CHIK'}\r\n                  </Tag>\r\n                )\r\n              },\r\n              {\r\n                title: 'AMALLAR',\r\n                key: 'actions',\r\n                render: (_, record) => editingId === record.id ? (\r\n                  <Button \r\n                    icon={<SaveOutlined />} \r\n                    onClick={handleSave} \r\n                    style={{ \r\n                      borderRadius: 0, \r\n                      backgroundColor: '#000', \r\n                      color: '#fff', \r\n                      fontWeight: 900,\r\n                      border: 'none',\r\n                      height: '42px',\r\n                      width: '150px',\r\n                      padding: '0 20px'\r\n                    }}\r\n                  >SAQLASH</Button>\r\n                ) : (\r\n                  <Button \r\n                    icon={<EditOutlined />} \r\n                    onClick={() => handleEdit(record)}\r\n                    style={{ \r\n                      borderRadius: 0, \r\n                      border: '2px solid #000', \r\n                      fontWeight: 900,\r\n                      height: '42px',\r\n                      width: '150px',\r\n                      padding: '0 20px'\r\n                    }}\r\n                  >TAHRIRLASH</Button>\r\n                ),\r\n              },\r\n            ]}\r\n            rowKey=\"id\"\r\n            locale={{\r\n              emptyText: activeTab === 0 ? 'NARXLAR MAVJUD EMAS' : 'YULDUZ PAKETLARI MAVJUD EMAS',\r\n            }}\r\n            scroll={{ x: 1000 }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default ManagePrices;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\seller\\ManageStudents.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":28,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[1025,1059],"text":""},"desc":"Remove unused variable 'currentUser'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'premiumModalOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":34,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"premiumModalOpen"},"fix":{"range":[1347,1363],"text":""},"desc":"Remove unused variable 'premiumModalOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'selectedStudent' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":35,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"selectedStudent"},"fix":{"range":[1415,1430],"text":""},"desc":"Remove unused variable 'selectedStudent'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'starsDialogOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":37,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"starsDialogOpen"},"fix":{"range":[1537,1552],"text":""},"desc":"Remove unused variable 'starsDialogOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setStarsDialogOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":37,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setStarsDialogOpen"},"fix":{"range":[1552,1572],"text":""},"desc":"Remove unused variable 'setStarsDialogOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'givingStars' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":38,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"givingStars"},"fix":{"range":[1603,1614],"text":""},"desc":"Remove unused variable 'givingStars'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'filterStudents'. Either include it or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":47,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [students, searchTerm, filterStudents]","fix":{"range":[1815,1837],"text":"[students, searchTerm, filterStudents]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":116,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":116,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"response"},"fix":{"range":[4080,4166],"text":""},"desc":"Remove unused variable 'response'."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { Typography, Button, Input, Alert, Modal, Row, Col, Card, Table, Tag, Space, Select, ConfigProvider } from 'antd';\r\nimport { SearchOutlined, StarOutlined, StarFilled } from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\nimport PremiumModal from '../../components/PremiumModal';\r\nimport { useCountdown } from '../../hooks/useCountdown';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\n// Component for countdown timer\r\nconst StudentCountdown = ({ expiryDate }) => {\r\n  const { formattedTime, isExpired } = useCountdown(expiryDate);\r\n\r\n  if (isExpired) {\r\n    return <Text style={{ color: '#000', fontWeight: 900, textTransform: 'uppercase' }}>Tugagan</Text>;\r\n  }\r\n\r\n  return (\r\n    <Text style={{ color: '#000', fontWeight: 900, fontFamily: 'monospace', fontSize: '14px' }}>\r\n      {formattedTime}\r\n    </Text>\r\n  );\r\n};\r\n\r\nconst ManageStudents = () => {\r\n  const { currentUser } = useAuth();\r\n  const [students, setStudents] = useState([]);\r\n  const [filteredStudents, setFilteredStudents] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [premiumModalOpen, setPremiumModalOpen] = useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [starPackages, setStarPackages] = useState([]);\r\n  const [starsDialogOpen, setStarsDialogOpen] = useState(false);\r\n  const [givingStars, setGivingStars] = useState(false);\r\n  const [pricingPlans, setPricingPlans] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadStudents();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    filterStudents();\r\n  }, [students, searchTerm]);\r\n\r\n  const loadStudents = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [usersData, packagesResponse, pricingResponse] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.get('/star-packages/'),\r\n        apiService.get('/pricing/')\r\n      ]);\r\n      const users = usersData.results || usersData;\r\n      const studentUsers = users.filter(user => user.role === 'student');\r\n      setStudents(studentUsers);\r\n      setStarPackages(packagesResponse.results || packagesResponse || []);\r\n      setPricingPlans(pricingResponse.results || pricingResponse || []);\r\n    } catch (error) {\r\n      console.error('Failed to load data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filterStudents = () => {\r\n    if (!searchTerm) {\r\n      setFilteredStudents(students);\r\n    } else {\r\n      const filtered = students.filter(student =>\r\n        student.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        student.display_id?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        student.class_group?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n      setFilteredStudents(filtered);\r\n    }\r\n  };\r\n\r\n  const handleTogglePremium = (student, currentStatus) => {\r\n    if (currentStatus) {\r\n      revokePremium(student.id);\r\n    } else {\r\n      setSelectedStudent(student);\r\n      setPremiumModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleGrantPremium = async (studentId, pricingPlan) => {\r\n    try {\r\n      await apiService.grantPremium(studentId, pricingPlan.id);\r\n      await loadStudents();\r\n      setSuccessMessage(`MAVJUD: ${pricingPlan.plan_name}`);\r\n      setTimeout(() => setSuccessMessage(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to grant premium:', error);\r\n    }\r\n  };\r\n\r\n  const revokePremium = async (studentId) => {\r\n    try {\r\n      await apiService.revokePremium(studentId);\r\n      await loadStudents();\r\n      setSuccessMessage('PREMIUM OLIB TASHLANDI');\r\n      setTimeout(() => setSuccessMessage(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to revoke premium:', error);\r\n    }\r\n  };\r\n\r\n  const giveStarsToStudent = async (student, packageData) => {\r\n    try {\r\n      setGivingStars(true);\r\n      const response = await apiService.giveStars(student.id, { stars: packageData.stars });\r\n      await loadStudents();\r\n      setSuccessMessage(`${packageData.stars} YULDUZ BERILDI!`);\r\n      setTimeout(() => setSuccessMessage(''), 3000);\r\n    } catch (error) {\r\n      console.error('Failed to give stars:', error);\r\n    } finally {\r\n      setGivingStars(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ \r\n            display: 'inline-block', \r\n            backgroundColor: '#000', \r\n            color: '#fff', \r\n            padding: '8px 16px', \r\n            fontWeight: 900, \r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            Oquvchilarni boshqarish\r\n          </div>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '2.5rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            O'quvchilar Ro'yxati\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            O'quvchilarga premium status bering, yulduzlar qo'shing yoki ularning holatini kuzatib boring.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {successMessage && (\r\n          <Alert\r\n            message={successMessage}\r\n            type=\"success\"\r\n            showIcon\r\n            style={{ \r\n              borderRadius: 0, \r\n              border: '3px solid #000', \r\n              boxShadow: '6px 6px 0px #000',\r\n              fontWeight: 900,\r\n              marginBottom: '24px',\r\n              backgroundColor: '#fff'\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {/* Search Input */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '32px' }}>\r\n          <Input\r\n            placeholder=\"QIDIRISH...\"\r\n            size=\"large\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            prefix={<SearchOutlined style={{ color: '#000' }} />}\r\n            style={{ \r\n              borderRadius: 0, \r\n              border: '4px solid #000', \r\n              boxShadow: '8px 8px 0px #000',\r\n              height: '60px',\r\n              fontSize: '18px',\r\n              fontWeight: 800\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Table Section */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ border: '4px solid #000', boxShadow: '12px 12px 0px #000', backgroundColor: '#fff' }}>\r\n          <Table\r\n            dataSource={filteredStudents}\r\n            loading={loading}\r\n            rowKey=\"id\"\r\n            pagination={{ pageSize: 10, position: ['bottomCenter'] }}\r\n            columns={[\r\n              {\r\n                title: 'O\\'QUVCHI',\r\n                dataIndex: 'name',\r\n                key: 'name',\r\n                render: (name) => <Text style={{ fontWeight: 900, textTransform: 'uppercase' }}>{name || 'Noma\\'lum'}</Text>,\r\n              },\r\n              {\r\n                title: 'ID / LOGIN',\r\n                dataIndex: 'display_id',\r\n                key: 'display_id',\r\n                render: (id, rec) => <Text style={{ fontFamily: 'monospace', fontWeight: 700 }}>{id || rec.username}</Text>,\r\n              },\r\n              {\r\n                title: 'SINF',\r\n                dataIndex: 'class_group',\r\n                key: 'class_group',\r\n                render: (txt) => <Text style={{ fontWeight: 800 }}>{txt || '-'}</Text>,\r\n              },\r\n              {\r\n                title: 'YULDUZLAR',\r\n                dataIndex: 'stars',\r\n                key: 'stars',\r\n                render: (stars) => (\r\n                  <Space>\r\n                    <StarFilled style={{ color: '#000' }} />\r\n                    <Text style={{ fontWeight: 900 }}>{stars || 0}</Text>\r\n                  </Space>\r\n                ),\r\n              },\r\n              {\r\n                title: 'STATUS',\r\n                dataIndex: 'is_premium',\r\n                key: 'is_premium',\r\n                render: (is_p, record) => (\r\n                  <div style={{ \r\n                    border: '2px solid #000', \r\n                    padding: '4px 8px', \r\n                    backgroundColor: is_p ? '#000' : '#fff',\r\n                    color: is_p ? '#fff' : '#000',\r\n                    fontWeight: 900,\r\n                    textAlign: 'center',\r\n                    fontSize: '12px',\r\n                    textTransform: 'uppercase'\r\n                  }}>\r\n                    {is_p ? (record.premium_plan?.plan_name || 'MAXSUS') : 'ODDIY'}\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'TARIF VAQTI',\r\n                dataIndex: 'premium_expiry_date',\r\n                key: 'premium_expiry_date',\r\n                render: (date, record) => record.is_premium ? (\r\n                  <div style={{ border: '2px solid #000', padding: '4px 8px', display: 'inline-block' }}>\r\n                    <StudentCountdown expiryDate={date} />\r\n                  </div>\r\n                ) : '-',\r\n              },\r\n              {\r\n                title: 'AMALLAR',\r\n                key: 'actions',\r\n                render: (_, record) => (\r\n                  <Space size=\"middle\">\r\n                    {!record.is_premium && (\r\n                      <Select\r\n                        placeholder=\"TARIF TANLASH\"\r\n                        style={{ width: 140 }}\r\n                        size=\"small\"\r\n                        onChange={(val) => {\r\n                          const plan = pricingPlans.find(p => p.id === val);\r\n                          if (plan) handleGrantPremium(record.id, plan);\r\n                        }}\r\n                        options={pricingPlans.map(p => ({ value: p.id, label: p.plan_name }))}\r\n                      />\r\n                    )}\r\n                    {record.is_premium && (\r\n                      <Button \r\n                        size=\"small\" \r\n                        onClick={() => handleTogglePremium(record, record.is_premium)}\r\n                        style={{ \r\n                          borderRadius: 0, \r\n                          border: '2px solid #000', \r\n                          fontWeight: 900,\r\n                          backgroundColor: '#fff',\r\n                          color: '#000'\r\n                        }}\r\n                      >\r\n                        OLIB TASHLASH\r\n                      </Button>\r\n                    )}\r\n                    <Select\r\n                      placeholder=\"+ YULDUZ\"\r\n                      style={{ width: 120 }}\r\n                      size=\"small\"\r\n                      onChange={(val) => {\r\n                        const pkg = starPackages.find(p => p.id === val);\r\n                        if (pkg) giveStarsToStudent(record, pkg);\r\n                      }}\r\n                      options={starPackages.map(p => ({ value: p.id, label: `+${p.stars}` }))}\r\n                    />\r\n                  </Space>\r\n                ),\r\n              },\r\n            ]}\r\n            scroll={{ x: 1000 }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default ManageStudents;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\seller\\SellerOverview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'currentUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"currentUser"},"fix":{"range":[496,530],"text":""},"desc":"Remove unused variable 'currentUser'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'color' is defined but never used.","line":67,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"color"},"fix":{"range":[1818,1825],"text":""},"desc":"Remove unused variable 'color'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  ConfigProvider,\r\n} from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  TeamOutlined,\r\n  CrownOutlined,\r\n  DashboardOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst SellerOverview = () => {\r\n  const { currentUser } = useAuth();\r\n  const [stats, setStats] = useState({\r\n    totalStudents: 0,\r\n    premiumStudents: 0,\r\n    regularStudents: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadStats();\r\n  }, []);\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const allUsersData = await apiService.getUsers();\r\n      const allUsers = allUsersData.results || allUsersData;\r\n\r\n      const totalStudents = allUsers.filter(user => \r\n        user.role?.toLowerCase() === 'student' || user.is_student === true\r\n      ).length;\r\n      \r\n      const premiumStudents = allUsers.filter(user => {\r\n        const isStudent = user.role?.toLowerCase() === 'student' || user.is_student === true;\r\n        const isPremium = user.is_premium === true || user.premium_status === true;\r\n        return isStudent && isPremium;\r\n      }).length;\r\n\r\n      setStats({\r\n        totalStudents,\r\n        premiumStudents,\r\n        regularStudents: totalStudents - premiumStudents\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to load stats:', error);\r\n      setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const StatBox = ({ title, value, icon, color, delay, suffix }) => (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: delay }}>\r\n      <Card\r\n        style={{\r\n          borderRadius: 0,\r\n          border: '4px solid #000',\r\n          boxShadow: '10px 10px 0px #000',\r\n          backgroundColor: '#fff',\r\n        }}\r\n        styles={{ body: { padding: '24px' } }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '20px' }}>\r\n          <div>\r\n            <Text style={{ \r\n              fontSize: '14px', \r\n              fontWeight: 900, \r\n              textTransform: 'uppercase', \r\n              letterSpacing: '0.1em',\r\n              color: '#000',\r\n              display: 'block',\r\n              marginBottom: '4px'\r\n            }}>\r\n              {title}\r\n            </Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              valueStyle={{ \r\n                fontSize: '48px', \r\n                fontWeight: 900, \r\n                color: '#000',\r\n                letterSpacing: '-2px',\r\n                lineHeight: 1\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ \r\n            display: 'inline-flex', \r\n            alignItems: 'center', \r\n            justifyContent: 'center',\r\n            width: '60px',\r\n            height: '60px',\r\n            backgroundColor: '#000',\r\n            color: '#fff',\r\n            border: '2px solid #000',\r\n            flexShrink: 0\r\n          }}>\r\n            {React.cloneElement(icon, { style: { fontSize: '28px' } })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 800, textTransform: 'uppercase' }}>Yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div style={{ padding: '40px 0' }}>\r\n        {/* Brutalist Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ \r\n            display: 'inline-block', \r\n            backgroundColor: '#000', \r\n            color: '#fff', \r\n            padding: '8px 16px', \r\n            fontWeight: 900, \r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            Sotuvchi umumiy\r\n          </div>\r\n          <Title level={1} style={{ \r\n            margin: 0, \r\n            fontWeight: 900, \r\n            fontSize: '2.5rem', \r\n            lineHeight: 0.9, \r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            Analitika Ko'rinishi\r\n          </Title>\r\n          <div style={{ \r\n            width: '80px', \r\n            height: '10px', \r\n            backgroundColor: '#000', \r\n            margin: '24px 0' \r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            O'quvchilar balansi, premium obunalar va maktab statistikasi uchun markaziy boshqaruv paneli.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert \r\n            message={error} \r\n            type=\"error\" \r\n            showIcon \r\n            style={{ \r\n              borderRadius: 0, \r\n              border: '3px solid #000', \r\n              boxShadow: '6px 6px 0px #000',\r\n              fontWeight: 800,\r\n              marginBottom: '40px'\r\n            }} \r\n          />\r\n        )}\r\n\r\n        {/* Stats Grid */}\r\n        <Row gutter={[32, 32]}>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Jami o'quvchilar\"\r\n              value={stats.totalStudents}\r\n              icon={<TeamOutlined />}\r\n              delay=\"100ms\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Premium Talabalar\"\r\n              value={stats.premiumStudents}\r\n              icon={<CrownOutlined />}\r\n              delay=\"200ms\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Oddiy Talabalar\"\r\n              value={stats.regularStudents}\r\n              icon={<UserOutlined />}\r\n              delay=\"300ms\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatBox\r\n              title=\"Premium Ulush\"\r\n              value={stats.totalStudents > 0 ? Math.round((stats.premiumStudents / stats.totalStudents) * 100) : 0}\r\n              icon={<DashboardOutlined />}\r\n              suffix=\"%\"\r\n              delay=\"400ms\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Action Button Section (Brutalist Style) */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginTop: '80px' }}>\r\n          <div style={{ \r\n            border: '4px solid #000', \r\n            padding: '40px', \r\n            display: 'flex', \r\n            flexDirection: 'column', \r\n            alignItems: 'center', \r\n            textAlign: 'center',\r\n            backgroundColor: '#fff',\r\n            boxShadow: '15px 15px 0px #000'\r\n          }}>\r\n            <Title level={3} style={{ fontWeight: 900, textTransform: 'uppercase', marginBottom: '16px' }}>\r\n              Boshqaruvni boshlamoqchimisiz?\r\n            </Title>\r\n            <Paragraph style={{ fontWeight: 600, marginBottom: '24px' }}>\r\n              O'quvchilar ro'yxatini ko'rish va ularning holatini o'zgartirish uchun talabalar bo'limiga o'ting.\r\n            </Paragraph>\r\n            <button style={{\r\n              backgroundColor: '#000',\r\n              color: '#fff',\r\n              border: 'none',\r\n              padding: '16px 40px',\r\n              fontSize: '1.2rem',\r\n              fontWeight: 900,\r\n              textTransform: 'uppercase',\r\n              letterSpacing: '0.1em',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s ease',\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = '#333';\r\n              e.currentTarget.style.transform = 'translate(-4px, -4px)';\r\n              e.currentTarget.style.boxShadow = '4px 4px 0px #000';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = '#000';\r\n              e.currentTarget.style.transform = 'translate(0, 0)';\r\n              e.currentTarget.style.boxShadow = 'none';\r\n            }}\r\n            >\r\n              Talabalarni boshqarish\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default SellerOverview;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\ClassesRating.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":36,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[749,754],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":99,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[3073,3080],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Progress,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  TeamOutlined,\r\n  TrophyOutlined,\r\n  UserOutlined,\r\n  RiseOutlined,\r\n  BarChartOutlined,\r\n  ThunderboltOutlined,\r\n  StarOutlined,\r\n  CrownFilled,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst ClassesRating = () => {\r\n  const { currentUser } = useAuth();\r\n  const [classes, setClasses] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [myClassRank, setMyClassRank] = useState(null);\r\n  const [myClassData, setMyClassData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchClassesRating = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const [usersData, attemptsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n\r\n        const currentUserClassGroup = currentUser?.class_group;\r\n\r\n        // Group students by class\r\n        const classGroups = {};\r\n        const students = users.filter(user => user.role === 'student');\r\n\r\n        students.forEach(student => {\r\n          const classGroup = student.class_group || 'Noma\\'lum';\r\n          if (!classGroups[classGroup]) {\r\n            classGroups[classGroup] = {\r\n              name: classGroup,\r\n              students: [],\r\n              totalTests: 0,\r\n              totalScore: 0,\r\n              activeStudents: 0,\r\n              attempts: []\r\n            };\r\n          }\r\n          classGroups[classGroup].students.push(student);\r\n          if (!student.is_banned) {\r\n            classGroups[classGroup].activeStudents++;\r\n          }\r\n        });\r\n\r\n        // Calculate class statistics\r\n        Object.keys(classGroups).forEach(className => {\r\n          const classGroup = classGroups[className];\r\n          const classStudentIds = classGroup.students.map(s => s.id);\r\n\r\n          const classAttempts = attempts.filter(a => classStudentIds.includes(a.student));\r\n          classGroup.attempts = classAttempts;\r\n          classGroup.totalTests = classAttempts.length;\r\n\r\n          const scores = classAttempts.map(a => a.score || 0);\r\n          if (scores.length > 0) {\r\n            classGroup.averageScore = Math.round(scores.reduce((sum, s) => sum + s, 0) / scores.length);\r\n            classGroup.highestScore = Math.max(...scores);\r\n          } else {\r\n            classGroup.averageScore = 0;\r\n            classGroup.highestScore = 0;\r\n          }\r\n        });\r\n\r\n        // Convert to array and sort by average score\r\n        const classesArray = Object.values(classGroups)\r\n          .filter(cls => cls.students.length > 0)\r\n          .map((cls, index) => ({\r\n            ...cls,\r\n            studentCount: cls.students.length,\r\n            performance: cls.averageScore >= 80 ? 'A\\'lo' :\r\n              cls.averageScore >= 60 ? 'Yaxshi' :\r\n                cls.averageScore >= 40 ? 'Qoniqarli' : 'Qoniqarsiz'\r\n          }))\r\n          .sort((a, b) => b.averageScore - a.averageScore)\r\n          .map((cls, index) => ({\r\n            ...cls,\r\n            rank: index + 1\r\n          }));\r\n\r\n        setClasses(classesArray);\r\n\r\n        // Find current user's class rank\r\n        if (currentUserClassGroup) {\r\n          const myClassIndex = classesArray.findIndex(c => c.name === currentUserClassGroup);\r\n          if (myClassIndex !== -1) {\r\n            setMyClassRank(myClassIndex + 1);\r\n            setMyClassData(classesArray[myClassIndex]);\r\n          }\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching classes rating:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (currentUser) {\r\n      fetchClassesRating();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const getRankIcon = (rank) => {\r\n    if (rank === 1) return <CrownFilled style={{ color: '#f59e0b', fontSize: '32px' }} />;\r\n    if (rank === 2) return <TrophyOutlined style={{ color: '#94a3b8', fontSize: '32px' }} />;\r\n    if (rank === 3) return <TrophyOutlined style={{ color: '#d97706', fontSize: '32px' }} />;\r\n    return null;\r\n  };\r\n\r\n  const getRankColor = (rank) => {\r\n    if (rank === 1) return '#f59e0b';\r\n    if (rank === 2) return '#64748b';\r\n    if (rank === 3) return '#d97706';\r\n    return '#000';\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'O\\'rin',\r\n      key: 'rank',\r\n      width: 100,\r\n      render: (_, record) => (\r\n        <div style={{ textAlign: 'center' }}>\r\n          {record.rank <= 3 ? (\r\n            getRankIcon(record.rank)\r\n          ) : (\r\n            <Text style={{ fontWeight: 900, fontSize: '18px', color: '#1e293b' }}>\r\n              #{record.rank}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sinf',\r\n      key: 'name',\r\n      render: (_, record) => (\r\n        <Space size=\"large\">\r\n          <div style={{\r\n            width: '48px',\r\n            height: '48px',\r\n            backgroundColor: record.name === currentUser?.class_group ? '#2563eb' : '#fff',\r\n            color: record.name === currentUser?.class_group ? '#fff' : '#1e293b',\r\n            border: '3px solid #1e293b',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n          }}>\r\n            <TeamOutlined style={{ fontSize: '24px' }} />\r\n          </div>\r\n          <div>\r\n            <Text style={{ fontWeight: 900, fontSize: '16px', display: 'block', color: '#1e293b' }}>\r\n              {record.name} {record.name === currentUser?.class_group && <Tag style={{ borderRadius: 0, border: '2px solid #2563eb', backgroundColor: '#2563eb', color: '#fff', fontSize: '10px', fontWeight: 900, marginLeft: 8 }}>SIZNING SINF</Tag>}\r\n            </Text>\r\n            <Text style={{ color: '#666', fontWeight: 700, fontSize: '12px', textTransform: 'uppercase' }}>\r\n              {record.studentCount} O'QUVCHI\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Faoliyat',\r\n      key: 'activeStudents',\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 800, fontSize: '14px' }}>\r\n          {record.activeStudents} / {record.studentCount} faol\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Testlar',\r\n      key: 'totalTests',\r\n      width: 120,\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 800, fontSize: '16px' }}>\r\n          {record.totalTests}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'averageScore',\r\n      width: 180,\r\n      render: (_, record) => (\r\n        <div style={{\r\n          display: 'inline-block',\r\n          border: '3px solid #000',\r\n          padding: '4px 12px',\r\n          backgroundColor: record.averageScore >= 80 ? '#ecfdf5' : record.averageScore >= 60 ? '#eff6ff' : '#fff',\r\n          boxShadow: '4px 4px 0px #000'\r\n        }}>\r\n          <Text style={{ fontWeight: 900, fontSize: '16px' }}>{record.averageScore}%</Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Holat',\r\n      key: 'performance',\r\n      width: 150,\r\n      render: (_, record) => {\r\n        const colors = {\r\n          'A\\'lo': '#059669',\r\n          'Yaxshi': '#2563eb',\r\n          'Qoniqarli': '#d97706',\r\n          'Qoniqarsiz': '#dc2626'\r\n        };\r\n        return (\r\n          <Text style={{ color: colors[record.performance] || '#000', fontWeight: 900, textTransform: 'uppercase', fontSize: '12px' }}>\r\n            {record.performance}\r\n          </Text>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  if (loading) return <div style={{ display: 'flex', justifyContent: 'center', padding: '100px', flexDirection: 'column', alignItems: 'center' }}><Spin size=\"large\" /><Text style={{ marginTop: '16px', fontWeight: 900, textTransform: 'uppercase' }}>Yuklanmoqda...</Text></div>;\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Jamoaviy Reyting\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b', margin: 0 }}>\r\n            Sinflar <span style={{ color: '#2563eb' }}>reytingi</span>\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#334155', maxWidth: '600px' }}>\r\n            Platformadagi barcha sinflarning umumiy o'zlashtirish va faollik ko'rsatkichlari bo'yicha reyting jadvali.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {/* My Class Info Card */}\r\n        {myClassRank && myClassData && (\r\n          <div className=\"animate__animated animate__fadeInUp\" style={{\r\n            background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\r\n            color: '#fff',\r\n            padding: '32px',\r\n            border: '4px solid #1e293b',\r\n            boxShadow: '10px 10px 0px rgba(30, 41, 59, 0.2)',\r\n            marginBottom: '40px',\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n          }}>\r\n            <Row gutter={[32, 32]} align=\"middle\" style={{ position: 'relative', zIndex: 2 }}>\r\n              <Col xs={24} md={8}>\r\n                <Space direction=\"vertical\" size={0}>\r\n                  <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, textTransform: 'uppercase', fontSize: '12px' }}>\r\n                    Sizning sinfingiz o'rni\r\n                  </Text>\r\n                  <Title level={1} style={{ color: '#fff', margin: 0, fontWeight: 900, fontSize: '4rem' }}>\r\n                    #{myClassRank}\r\n                  </Title>\r\n                </Space>\r\n              </Col>\r\n              <Col xs={24} md={16}>\r\n                <Row gutter={[24, 24]}>\r\n                  <Col xs={12} sm={6}>\r\n                    <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, display: 'block', fontSize: '10px' }}>O'RTACHA BALL</Text>\r\n                    <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900 }}>{myClassData.averageScore}%</Title>\r\n                  </Col>\r\n                  <Col xs={12} sm={6}>\r\n                    <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, display: 'block', fontSize: '10px' }}>O'QUVCHILAR</Text>\r\n                    <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900 }}>{myClassData.studentCount}</Title>\r\n                  </Col>\r\n                  <Col xs={12} sm={6}>\r\n                    <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, display: 'block', fontSize: '10px' }}>TESTLAR</Text>\r\n                    <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900 }}>{myClassData.totalTests}</Title>\r\n                  </Col>\r\n                  <Col xs={12} sm={6}>\r\n                    <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, display: 'block', fontSize: '10px' }}>JAMI SINFLAR</Text>\r\n                    <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900 }}>{classes.length}</Title>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n            <RiseOutlined style={{\r\n              position: 'absolute',\r\n              right: '-20px',\r\n              bottom: '-20px',\r\n              fontSize: '180px',\r\n              color: 'rgba(255,255,255,0.07)'\r\n            }} />\r\n          </div>\r\n        )}\r\n\r\n        {/* Top 3 Podium */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '60px' }}>\r\n          {classes.slice(0, 3).map((cls, index) => (\r\n            <Col xs={24} sm={8} key={cls.name}>\r\n              <Card\r\n                className=\"animate__animated animate__fadeInUp\"\r\n                style={{\r\n                  border: `4px solid ${getRankColor(cls.rank)}`,\r\n                  borderRadius: 0,\r\n                  boxShadow: `8px 8px 0px ${getRankColor(cls.rank)}20`,\r\n                  backgroundColor: index === 0 ? '#fef3c7' : '#fff',\r\n                  textAlign: 'center',\r\n                  animationDelay: `${index * 0.1}s`,\r\n                  height: '100%'\r\n                }}\r\n              >\r\n                <div style={{ marginBottom: '16px' }}>{getRankIcon(cls.rank)}</div>\r\n                <div style={{\r\n                  width: '80px',\r\n                  height: '80px',\r\n                  backgroundColor: cls.name === currentUser?.class_group ? '#2563eb' : '#fff',\r\n                  color: cls.name === currentUser?.class_group ? '#fff' : getRankColor(cls.rank),\r\n                  border: `4px solid ${getRankColor(cls.rank)}`,\r\n                  margin: '0 auto 16px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center'\r\n                }}>\r\n                  <TeamOutlined style={{ fontSize: '40px' }} />\r\n                </div>\r\n                <Title level={3} style={{ fontWeight: 900, margin: '0 0 4px 0', textTransform: 'uppercase', fontSize: '1.2rem', color: getRankColor(cls.rank) }}>\r\n                  {cls.name}\r\n                </Title>\r\n                <Text style={{ fontWeight: 800, color: '#666', fontSize: '10px', textTransform: 'uppercase', display: 'block', marginBottom: '16px' }}>\r\n                  {cls.studentCount} O'QUVCHI\r\n                </Text>\r\n                <Divider style={{ borderColor: getRankColor(cls.rank), margin: '12px 0' }} />\r\n                <div style={{ display: 'flex', justifyContent: 'center', gap: '16px' }}>\r\n                  <div>\r\n                    <Text style={{ fontSize: '10px', fontWeight: 900, color: '#999', display: 'block' }}>BALL</Text>\r\n                    <Text style={{ fontSize: '1.5rem', fontWeight: 900, color: getRankColor(cls.rank) }}>{cls.averageScore}%</Text>\r\n                  </div>\r\n                  <div style={{ width: '1px', backgroundColor: '#e2e8f0' }}></div>\r\n                  <div>\r\n                    <Text style={{ fontSize: '10px', fontWeight: 900, color: '#999', display: 'block' }}>TESTS</Text>\r\n                    <Text style={{ fontSize: '1.5rem', fontWeight: 900, color: getRankColor(cls.rank) }}>{cls.totalTests}</Text>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n\r\n        {/* Main Table */}\r\n        <Card\r\n          style={{\r\n            border: '4px solid #1e293b',\r\n            boxShadow: '12px 12px 0px rgba(30, 41, 59, 0.15)',\r\n          }}\r\n          title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}><BarChartOutlined /> BARCHA SINFLAR REYTINGI</Text>}\r\n        >\r\n          <Table\r\n            columns={columns}\r\n            dataSource={classes}\r\n            rowKey=\"name\"\r\n            pagination={{\r\n              pageSize: 10,\r\n              showSizeChanger: false,\r\n              className: 'brutalist-pagination'\r\n            }}\r\n          />\r\n        </Card>\r\n      </div>\r\n\r\n      <style>{`\r\n        .brutalist-pagination .ant-pagination-item {\r\n          border: 2px solid #1e293b !important;\r\n          border-radius: 0 !important;\r\n          font-weight: 900 !important;\r\n        }\r\n        .brutalist-pagination .ant-pagination-item-active {\r\n          background-color: #2563eb !important;\r\n          border-color: #2563eb !important;\r\n        }\r\n        .brutalist-pagination .ant-pagination-item-active a {\r\n          color: #fff !important;\r\n        }\r\n        .ant-table-thead > tr > th {\r\n          background: #1e293b !important;\r\n          color: #fff !important;\r\n          border-radius: 0 !important;\r\n          font-weight: 900 !important;\r\n          text-transform: uppercase !important;\r\n          letter-spacing: 0.1em !important;\r\n        }\r\n        .ant-table-tbody > tr > td {\r\n          border-bottom: 2px solid #f1f5f9 !important;\r\n          color: #1e293b !important;\r\n        }\r\n        .ant-table {\r\n          border: 2px solid #1e293b !important;\r\n        }\r\n      `}</style>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default ClassesRating;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\Classmates.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\MyClassStatistics.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":92,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[1839,1844],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":454,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":454,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[17818,17825],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  Progress,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Switch,\r\n  Timeline,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  BookOutlined,\r\n  UserOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  ClockCircleOutlined,\r\n  CalendarOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  TeamOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n  LineChartOutlined,\r\n  StarOutlined,\r\n  SafetyCertificateOutlined,\r\n  FundOutlined,\r\n  ThunderboltOutlined,\r\n  ReadOutlined,\r\n  SettingOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title as ChartTitle,\r\n  Tooltip as ChartTooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line, Bar, Pie, Doughnut, Radar } from 'react-chartjs-2';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  ChartTitle,\r\n  ChartTooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst MyClassStatistics = () => {\r\n  const { currentUser } = useAuth();\r\n  const [stats, setStats] = useState({\r\n    totalStudents: 0,\r\n    activeStudents: 0,\r\n    classAverageScore: 0,\r\n    highestScore: 0,\r\n    totalTests: 0,\r\n    totalAttempts: 0,\r\n    subjectPerformance: [],\r\n    monthlyProgress: [],\r\n    difficultyAnalysis: [],\r\n    topStudents: [],\r\n    recentActivity: [],\r\n    classmates: [],\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Chart visibility states\r\n  const [visibleCharts, setVisibleCharts] = useState({\r\n    studentRanking: true,\r\n    subjectAverage: true,\r\n    classNotifications: true,\r\n    classPerformance: true,\r\n  });\r\n\r\n  // Toggle chart helper\r\n  const toggleChart = (key) => {\r\n    setVisibleCharts(prev => ({ ...prev, [key]: !prev[key] }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchClassStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const classGroup = currentUser?.class_group;\r\n        if (!classGroup) {\r\n          setError('Siz sinfga tegishli emassiz');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        const [usersData, attemptsData, testsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts(),\r\n          apiService.getTests()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n        const tests = testsData.results || testsData;\r\n\r\n        const classStudents = users.filter(\r\n          user => user.role === 'student' && user.class_group === classGroup\r\n        );\r\n\r\n        const totalStudents = classStudents.length;\r\n        const activeStudents = classStudents.filter(s => !s.is_banned).length;\r\n\r\n        const classAttempts = attempts.filter(\r\n          attempt => classStudents.some(student => student.id === attempt.student)\r\n        );\r\n\r\n        const totalAttempts = classAttempts.length;\r\n        const scores = classAttempts.map(attempt => attempt.score || 0);\r\n        const classAverageScore = scores.length > 0\r\n          ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n          : 0;\r\n\r\n        const highestScore = scores.length > 0 ? Math.max(...scores) : 0;\r\n\r\n        // Subject performance\r\n        const subjectGroups = {};\r\n        classAttempts.forEach(attempt => {\r\n          const test = tests.find(t => t.id === attempt.test);\r\n          const subject = test?.subject || 'Noma\\'lum fan';\r\n          if (!subjectGroups[subject]) {\r\n            subjectGroups[subject] = { total: 0, scores: [] };\r\n          }\r\n          subjectGroups[subject].scores.push(attempt.score || 0);\r\n        });\r\n\r\n        const subjectPerformance = Object.entries(subjectGroups).map(([subject, data]) => ({\r\n          subject,\r\n          averageScore: Math.round(data.scores.reduce((sum, s) => sum + s, 0) / data.scores.length),\r\n        })).sort((a, b) => b.averageScore - a.averageScore);\r\n\r\n        // Top students\r\n        const studentAnalytics = classStudents.map(student => {\r\n          const studentAttempts = attempts.filter(a => a.student === student.id);\r\n          const avgScore = studentAttempts.length > 0\r\n            ? Math.round(studentAttempts.reduce((sum, a) => sum + (a.score || 0), 0) / studentAttempts.length)\r\n            : 0;\r\n\r\n          return {\r\n            id: student.id,\r\n            name: student.name || student.username,\r\n            averageScore: avgScore,\r\n            testCount: studentAttempts.length\r\n          };\r\n        }).sort((a, b) => b.averageScore - a.averageScore);\r\n\r\n        setStats({\r\n          totalStudents,\r\n          activeStudents,\r\n          classAverageScore,\r\n          highestScore,\r\n          totalAttempts,\r\n          subjectPerformance,\r\n          topStudents: studentAnalytics.slice(0, 10),\r\n          classmates: studentAnalytics,\r\n          recentActivity: classAttempts.slice(0, 10).map(a => {\r\n            const student = classStudents.find(s => s.id === a.student);\r\n            return {\r\n              studentName: student?.name || 'Noma\\'lum',\r\n              score: a.score || 0,\r\n              date: a.submitted_at ? new Date(a.submitted_at).toLocaleDateString('uz-UZ') : '-'\r\n            };\r\n          })\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching class statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (currentUser) {\r\n      fetchClassStatistics();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const StatCard = ({ title, value, icon, description, color = '#2563eb' }) => (\r\n    <Card\r\n      style={{\r\n        backgroundColor: '#ffffff',\r\n        border: `4px solid ${color}`,\r\n        borderRadius: 0,\r\n        boxShadow: `8px 8px 0px ${color}20`,\r\n        height: '100%',\r\n      }}\r\n      bodyStyle={{ padding: '20px' }}\r\n    >\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '12px' }}>\r\n        <div style={{\r\n          backgroundColor: color,\r\n          width: '40px',\r\n          height: '40px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          color: '#fff'\r\n        }}>\r\n          {React.cloneElement(icon, { style: { fontSize: '20px' } })}\r\n        </div>\r\n      </div>\r\n      <Text style={{ fontSize: '11px', fontWeight: 800, textTransform: 'uppercase', letterSpacing: '0.1em', color: '#64748b', display: 'block' }}>\r\n        {title}\r\n      </Text>\r\n      <Title level={2} style={{ margin: '4px 0', fontWeight: 900, fontSize: '2.5rem', lineHeight: 1, color: '#1e293b' }}>\r\n        {value}\r\n      </Title>\r\n      {description && (\r\n        <Text style={{ fontSize: '10px', fontWeight: 700, color: '#94a3b8', textTransform: 'uppercase' }}>\r\n          {description}\r\n        </Text>\r\n      )}\r\n    </Card>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 700, textTransform: 'uppercase' }}>Sinf statistikasi yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Statistika\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b' }}>\r\n            Sinf <span style={{ color: '#2563eb' }}>statistikasi</span>\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#334155', maxWidth: '600px' }}>\r\n            Sinfingizning umumiy natijalari, fanlar bo'yicha o'rtacha ballar va faol o'quvchilar reytingi.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {/* Info Alerts (The Black Card) */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '40px' }}>\r\n          <Col span={24}>\r\n            <div className=\"animate__animated animate__fadeInUp\" style={{\r\n              background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\r\n              color: '#fff',\r\n              padding: '24px',\r\n              border: '4px solid #1e293b',\r\n              boxShadow: '10px 10px 0px rgba(30, 41, 59, 0.2)',\r\n              position: 'relative',\r\n              overflow: 'hidden'\r\n            }}>\r\n              <div style={{ position: 'relative', zIndex: 1 }}>\r\n                <Title level={3} style={{ color: '#fff', margin: 0, fontWeight: 900, textTransform: 'uppercase' }}>\r\n                  Sinf guruhingiz: {currentUser?.class_group || 'Noma\\'lum'}\r\n                </Title>\r\n                <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 700 }}>\r\n                  Jami {stats.totalStudents} o'quvchi, shundan {stats.activeStudents} nafari faol.\r\n                </Text>\r\n              </div>\r\n              <TeamOutlined style={{ position: 'absolute', right: '-20px', bottom: '-20px', fontSize: '120px', color: 'rgba(255,255,255,0.1)' }} />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Chart Controls */}\r\n        <Card style={{ border: '4px solid #1e293b', boxShadow: '8px 8px 0px rgba(30, 41, 59, 0.1)', marginBottom: '40px' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}><SettingOutlined /> KO'RSATKICHLARNI BOSHQARISH</Text>}>\r\n          <Row gutter={[24, 16]}>\r\n            {[\r\n              { key: 'studentRanking', label: 'O\\'quvchilar reytingi' },\r\n              { key: 'subjectAverage', label: 'Fanlar o\\'rtachasi' },\r\n              { key: 'classNotifications', label: 'Sinf xabarnomalari' },\r\n              { key: 'classPerformance', label: 'Sinf o\\'zlashtirishi' }\r\n            ].map(item => (\r\n              <Col xs={12} sm={8} key={item.key}>\r\n                <Space>\r\n                  <Switch size=\"small\" checked={visibleCharts[item.key]} onChange={() => toggleChart(item.key)} />\r\n                  <Text style={{ fontSize: '10px', fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}>{item.label}</Text>\r\n                </Space>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* Stats Grid */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '60px' }}>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatCard\r\n              title=\"Sinf o'rtachasi\"\r\n              value={`${stats.classAverageScore}%`}\r\n              icon={<RiseOutlined />}\r\n              description=\"Barcha o'quvchilar bo'yicha\"\r\n              color=\"#2563eb\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatCard\r\n              title=\"Eng yuqori ball\"\r\n              value={`${stats.highestScore}%`}\r\n              icon={<TrophyOutlined />}\r\n              description=\"Sinfning rekord natijasi\"\r\n              color=\"#f59e0b\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatCard\r\n              title=\"Jami urinishlar\"\r\n              value={stats.totalAttempts}\r\n              icon={<ThunderboltOutlined />}\r\n              description=\"Sinf bo'yicha jami test\"\r\n              color=\"#059669\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} lg={6}>\r\n            <StatCard\r\n              title=\"Faollik\"\r\n              value={`${Math.round((stats.activeStudents / stats.totalStudents) * 100)}%`}\r\n              icon={<TeamOutlined />}\r\n              description=\"O'quvchilar ishtiroki\"\r\n              color=\"#7c3aed\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row gutter={[32, 32]} style={{ marginBottom: '60px' }}>\r\n          {/* Top Students Table */}\r\n          {visibleCharts.studentRanking && (\r\n            <Col xs={24} lg={14}>\r\n              <Card title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#2563eb' }}>O'quvchi reytingi</Text>} style={{ border: '4px solid #2563eb', boxShadow: '12px 12px 0px rgba(37, 99, 235, 0.1)', height: '100%' }}>\r\n                <Table\r\n                  columns={[\r\n                    {\r\n                      title: 'тДЦ',\r\n                      key: 'index',\r\n                      render: (_, __, index) => <Text style={{ fontWeight: 900, color: '#1e293b' }}>{index + 1}</Text>,\r\n                      width: 50\r\n                    },\r\n                    {\r\n                      title: 'O\\'quvchi',\r\n                      dataIndex: 'name',\r\n                      key: 'name',\r\n                      render: (name, record) => (\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                          <div style={{ backgroundColor: record.id === currentUser.id ? '#2563eb' : '#1e293b', width: '24px', height: '24px', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '10px', fontWeight: 900 }}>\r\n                            {name.charAt(0)}\r\n                          </div>\r\n                          <Text style={{ fontWeight: 700, color: '#1e293b' }}>{name} {record.id === currentUser.id && <Tag color=\"blue\" style={{ fontSize: '9px', marginLeft: '4px', borderRadius: 0 }}>SIZ</Tag>}</Text>\r\n                        </div>\r\n                      )\r\n                    },\r\n                    {\r\n                      title: 'Testlar',\r\n                      dataIndex: 'testCount',\r\n                      key: 'testCount',\r\n                      render: (count) => <Text style={{ fontWeight: 700, color: '#1e293b' }}>{count}</Text>\r\n                    },\r\n                    {\r\n                      title: 'O\\'rtacha Ball',\r\n                      dataIndex: 'averageScore',\r\n                      key: 'averageScore',\r\n                      render: (score) => (\r\n                        <div style={{ border: '2px solid #2563eb', padding: '2px 8px', display: 'inline-block', backgroundColor: score >= 80 ? '#ecfdf5' : score >= 60 ? '#eff6ff' : '#fff' }}>\r\n                          <Text style={{ fontWeight: 900, color: score >= 80 ? '#059669' : score >= 60 ? '#2563eb' : '#dc2626' }}>{score}%</Text>\r\n                        </div>\r\n                      )\r\n                    }\r\n                  ]}\r\n                  dataSource={stats.topStudents}\r\n                  pagination={false}\r\n                  size=\"middle\"\r\n                  rowKey=\"id\"\r\n                />\r\n              </Card>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Subject Performance Bar Chart */}\r\n          {visibleCharts.subjectAverage && (\r\n            <Col xs={24} lg={10}>\r\n              <Card title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#f59e0b' }}>Fanlar o'rtachasi</Text>} style={{ border: '4px solid #f59e0b', boxShadow: '12px 12px 0px rgba(245, 158, 11, 0.1)', height: '100%' }}>\r\n                <div style={{ height: '400px' }}>\r\n                  <Bar\r\n                    data={{\r\n                      labels: stats.subjectPerformance.map(s => s.subject),\r\n                      datasets: [{\r\n                        label: 'O\\'rtacha Ball',\r\n                        data: stats.subjectPerformance.map(s => s.averageScore),\r\n                        backgroundColor: '#f59e0b',\r\n                        borderWidth: 0,\r\n                        barThickness: 25\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      maintainAspectRatio: false,\r\n                      plugins: { legend: { display: false } },\r\n                      scales: {\r\n                        x: { grid: { display: false }, ticks: { font: { weight: 800 }, color: '#1e293b' } },\r\n                        y: { beginAtZero: true, max: 100, grid: { borderDash: [5, 5], color: '#f1f5f9' }, ticks: { font: { weight: 800 }, color: '#1e293b' } }\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n\r\n        {/* Recently Activity and Pie Chart */}\r\n        <Row gutter={[32, 32]}>\r\n          {visibleCharts.classNotifications && (\r\n            <Col xs={24} lg={12}>\r\n              <Card title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#059669' }}>Sinf xabarnomalari</Text>} style={{ border: '4px solid #059669', boxShadow: '12px 12px 0px rgba(5, 150, 105, 0.1)' }}>\r\n                {stats.recentActivity.length === 0 ? (\r\n                  <div style={{ padding: '40px', textAlign: 'center' }}>\r\n                    <Text style={{ fontWeight: 800, color: '#94a3b8' }}>Hozircha harakatlar yo'q</Text>\r\n                  </div>\r\n                ) : (\r\n                  <Timeline\r\n                    items={stats.recentActivity.slice(0, 6).map((activity, index) => ({\r\n                      children: (\r\n                        <div style={{ backgroundColor: '#fff', border: '2px solid #1e293b', padding: '10px 15px', boxShadow: '4px 4px 0px rgba(30, 41, 59, 0.1)', marginBottom: '10px' }}>\r\n                          <Text style={{ fontWeight: 900, color: '#1e293b' }}>{activity.studentName}</Text>\r\n                          <Text style={{ margin: '0 8px', color: '#64748b' }}>test topshirdi:</Text>\r\n                          <Tag style={{ borderRadius: 0, border: '1.5px solid #2563eb', fontWeight: 800, color: '#2563eb', backgroundColor: activity.score >= 80 ? '#ecfdf5' : '#fff' }}>{activity.score}%</Tag>\r\n                          <div style={{ fontSize: '10px', fontWeight: 700, color: '#94a3b8', marginTop: '4px' }}>{activity.date}</div>\r\n                        </div>\r\n                      ),\r\n                      dot: <ThunderboltOutlined style={{ fontSize: '16px', color: '#2563eb' }} />\r\n                    }))}\r\n                  />\r\n                )}\r\n              </Card>\r\n            </Col>\r\n          )}\r\n\r\n          {visibleCharts.classPerformance && (\r\n            <Col xs={24} lg={12}>\r\n              <Card title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#7c3aed' }}>Sinf o'zlashtirishi</Text>} style={{ border: '4px solid #7c3aed', boxShadow: '12px 12px 0px rgba(124, 58, 237, 0.1)' }}>\r\n                <div style={{ height: '350px' }}>\r\n                  <Doughnut\r\n                    data={{\r\n                      labels: ['A\\'lo (80%+)', 'Yaxshi (60-80%)', 'Past (<60%)'],\r\n                      datasets: [{\r\n                        data: [\r\n                          stats.classmates.filter(c => c.averageScore >= 80).length,\r\n                          stats.classmates.filter(c => c.averageScore >= 60 && c.averageScore < 80).length,\r\n                          stats.classmates.filter(c => c.averageScore < 60).length\r\n                        ],\r\n                        backgroundColor: ['#2563eb', '#64748b', '#cbd5e1'],\r\n                        borderColor: '#fff',\r\n                        borderWidth: 4\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      maintainAspectRatio: false,\r\n                      plugins: {\r\n                        legend: {\r\n                          position: 'bottom',\r\n                          labels: { font: { weight: 800 }, color: '#000', usePointStyle: true }\r\n                        }\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n      </div>\r\n    </ConfigProvider >\r\n  );\r\n};\r\n\r\nexport default MyClassStatistics;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\PricingPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setCurrentUserData' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"setCurrentUserData"},"fix":{"range":[582,602],"text":""},"desc":"Remove unused variable 'setCurrentUserData'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'planId' is defined but never used.","line":223,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":223,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"planId"},"fix":{"range":[6713,6719],"text":""},"desc":"Remove unused variable 'planId'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Tag,\r\n  Table,\r\n  Alert,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  StarOutlined,\r\n  StarFilled,\r\n  SketchOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst PricingPage = () => {\r\n  const navigate = useNavigate();\r\n  const { currentUser, setCurrentUserData } = useAuth();\r\n  const [pricingPlans, setPricingPlans] = useState([]);\r\n  const [starPackages, setStarPackages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadPricingData = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Add timeout to prevent hanging\r\n        const timeoutPromise = new Promise((_, reject) =>\r\n          setTimeout(() => reject(new Error('Request timeout')), 10000)\r\n        );\r\n\r\n        const [pricingResponse, starResponse] = await Promise.all([\r\n          Promise.race([\r\n            apiService.get('/pricing/'),\r\n            timeoutPromise\r\n          ]),\r\n          Promise.race([\r\n            apiService.get('/star-packages/'),\r\n            timeoutPromise\r\n          ])\r\n        ]);\r\n\r\n        console.log('Pricing response:', pricingResponse);\r\n        console.log('Star packages response:', starResponse);\r\n\r\n        // Transform pricing data with fallback\r\n        const transformedPricing = (pricingResponse || []).map(plan => ({\r\n          key: plan.plan_type,\r\n          planType: plan.plan_name,\r\n          originalPrice: `${plan.original_price}`,\r\n          discountedPrice: `${plan.discounted_price}`,\r\n          discount: `${plan.discount_percentage}% Chegirma`,\r\n          popular: plan.plan_type === 'month', // Make month popular\r\n          color: plan.plan_type === 'week' ? '#2563eb' :\r\n            plan.plan_type === 'month' ? '#d97706' : '#16a34a'\r\n        }));\r\n\r\n        // Transform star packages data with fallback\r\n        const transformedStars = (starResponse || []).map(pkg => ({\r\n          key: `stars_${pkg.stars}`,\r\n          stars: pkg.stars,\r\n          originalPrice: `${pkg.original_price}`,\r\n          price: `${pkg.discounted_price}`,\r\n          discount: pkg.discount_text,\r\n          popular: pkg.is_popular,\r\n          color: pkg.stars >= 500 ? '#d97706' : '#f59e0b'\r\n        }));\r\n\r\n        // If no data from API, use fallback data\r\n        if (transformedPricing.length === 0) {\r\n          console.log('Using fallback pricing data');\r\n          setPricingPlans([\r\n            {\r\n              key: 'week',\r\n              planType: 'Haftalik obuna',\r\n              originalPrice: '$15',\r\n              discountedPrice: '$10',\r\n              discount: '33% Chegirma',\r\n              popular: false,\r\n              color: '#2563eb'\r\n            },\r\n            {\r\n              key: 'month',\r\n              planType: 'Oylik obuna',\r\n              originalPrice: '$50',\r\n              discountedPrice: '$35',\r\n              discount: '30% Chegirma',\r\n              popular: true,\r\n              color: '#d97706'\r\n            },\r\n            {\r\n              key: 'year',\r\n              planType: 'Yillik obuna',\r\n              originalPrice: '$500',\r\n              discountedPrice: '$300',\r\n              discount: '40% Chegirma',\r\n              popular: false,\r\n              color: '#16a34a'\r\n            }\r\n          ]);\r\n        } else {\r\n          setPricingPlans(transformedPricing);\r\n        }\r\n\r\n        // If no star packages from API, use fallback data\r\n        if (transformedStars.length === 0) {\r\n          console.log('Using fallback star packages data');\r\n          setStarPackages([\r\n            {\r\n              key: 'stars_100',\r\n              stars: 100,\r\n              originalPrice: '$5',\r\n              price: '$3',\r\n              discount: '40% Chegirma',\r\n              popular: false,\r\n              color: '#f59e0b'\r\n            },\r\n            {\r\n              key: 'stars_500',\r\n              stars: 500,\r\n              originalPrice: '$20',\r\n              price: '$15',\r\n              discount: '25% Chegirma',\r\n              popular: true,\r\n              color: '#d97706'\r\n            },\r\n            {\r\n              key: 'stars_1000',\r\n              stars: 1000,\r\n              originalPrice: '$35',\r\n              price: '$25',\r\n              discount: '29% Chegirma',\r\n              popular: false,\r\n              color: '#d97706'\r\n            }\r\n          ]);\r\n        } else {\r\n          setStarPackages(transformedStars);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load pricing data:', err);\r\n        setError('Narxlarni yuklashda xatolik yuz berdi. Fallback ma\\'lumotlar ishlatilmoqda.');\r\n\r\n        // Set fallback data on error\r\n        setPricingPlans([\r\n          {\r\n            key: 'week',\r\n            planType: 'Haftalik obuna',\r\n            originalPrice: '$15',\r\n            discountedPrice: '$10',\r\n            discount: '33% Chegirma',\r\n            popular: false,\r\n            color: '#2563eb'\r\n          },\r\n          {\r\n            key: 'month',\r\n            planType: 'Oylik obuna',\r\n            originalPrice: '$50',\r\n            discountedPrice: '$35',\r\n            discount: '30% Chegirma',\r\n            popular: true,\r\n            color: '#d97706'\r\n          },\r\n          {\r\n            key: 'year',\r\n            planType: 'Yillik obuna',\r\n            originalPrice: '$500',\r\n            discountedPrice: '$300',\r\n            discount: '40% Chegirma',\r\n            popular: false,\r\n            color: '#16a34a'\r\n          }\r\n        ]);\r\n\r\n        setStarPackages([\r\n          {\r\n            key: 'stars_100',\r\n            stars: 100,\r\n            originalPrice: '$5',\r\n            price: '$3',\r\n            discount: '40% Chegirma',\r\n            popular: false,\r\n            color: '#f59e0b'\r\n          },\r\n          {\r\n            key: 'stars_500',\r\n            stars: 500,\r\n            originalPrice: '$20',\r\n            price: '$15',\r\n            discount: '25% Chegirma',\r\n            popular: true,\r\n            color: '#d97706'\r\n          },\r\n          {\r\n            key: 'stars_1000',\r\n            stars: 1000,\r\n            originalPrice: '$35',\r\n            price: '$25',\r\n            discount: '29% Chegirma',\r\n            popular: false,\r\n            color: '#d97706'\r\n          }\r\n        ]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadPricingData();\r\n  }, [currentUser]);\r\n\r\n  const handlePurchase = (planId) => {\r\n    window.open('https://t.me/jonizz_devvvv', '_blank');\r\n  };\r\n\r\n  // Table columns for pricing plans\r\n  const pricingColumns = [\r\n    {\r\n      title: 'Obuna turi',\r\n      dataIndex: 'planType',\r\n      key: 'planType',\r\n      render: (text, record) => (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <Text style={{ fontWeight: 900, color: '#1e293b', fontSize: '1rem', textTransform: 'uppercase' }}>\r\n            {text}\r\n          </Text>\r\n          {record.popular && (\r\n            <Tag\r\n              style={{\r\n                backgroundColor: '#d97706',\r\n                color: 'white',\r\n                fontWeight: 900,\r\n                fontSize: '0.7rem',\r\n                margin: 0,\r\n                height: '24px',\r\n                lineHeight: '20px',\r\n                borderRadius: 0,\r\n                border: '2px solid rgba(255,255,255,0.4)'\r\n              }}\r\n            >\r\n              MASHHUR\r\n            </Tag>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Narx',\r\n      dataIndex: 'discountedPrice',\r\n      key: 'discountedPrice',\r\n      render: (text, record) => (\r\n        <div>\r\n          <Title level={3} style={{\r\n            fontWeight: 900,\r\n            color: record.color,\r\n            marginBottom: '4px',\r\n            marginTop: 0,\r\n            fontSize: '1.5rem'\r\n          }}>\r\n            {text}\r\n          </Title>\r\n          <Text style={{\r\n            color: '#64748b',\r\n            textDecoration: 'line-through',\r\n            fontSize: '0.875rem',\r\n            fontWeight: 700\r\n          }}>\r\n            {record.originalPrice}\r\n          </Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Chegirma',\r\n      dataIndex: 'discount',\r\n      key: 'discount',\r\n      render: (text) => (\r\n        <Tag\r\n          style={{\r\n            backgroundColor: '#ecfdf5',\r\n            color: '#059669',\r\n            fontWeight: 900,\r\n            fontSize: '0.875rem',\r\n            margin: 0,\r\n            borderRadius: 0,\r\n            border: '2px solid #059669'\r\n          }}\r\n        >\r\n          {text}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakat',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => handlePurchase(record.key)}\r\n          style={{\r\n            backgroundColor: record.color,\r\n            color: 'white',\r\n            fontWeight: 900,\r\n            border: '2px solid rgba(255,255,255,0.2)',\r\n            fontSize: '0.875rem',\r\n            padding: '8px 16px',\r\n            height: 'auto',\r\n            borderRadius: 0,\r\n            boxShadow: `4px 4px 0px rgba(0,0,0,0.05)`,\r\n            textTransform: 'uppercase'\r\n          }}\r\n        >\r\n          Sotib olish\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // Table columns for star packages\r\n  const starColumns = [\r\n    {\r\n      title: 'Yulduzlar soni',\r\n      dataIndex: 'stars',\r\n      key: 'stars',\r\n      render: (text, record) => (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <StarOutlined style={{ color: record.color }} />\r\n          <Text style={{\r\n            fontWeight: 700,\r\n            color: record.color,\r\n            fontSize: '1.125rem'\r\n          }}>\r\n            {text}\r\n          </Text>\r\n          {record.popular && (\r\n            <Tag\r\n              style={{\r\n                backgroundColor: '#d97706',\r\n                color: 'white',\r\n                fontWeight: 600,\r\n                fontSize: '0.7rem',\r\n                margin: 0,\r\n                height: '20px',\r\n                lineHeight: '20px'\r\n              }}\r\n            >\r\n              Mashhur\r\n            </Tag>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Narx',\r\n      dataIndex: 'price',\r\n      key: 'price',\r\n      render: (text, record) => (\r\n        <div>\r\n          <Title level={4} style={{\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '4px',\r\n            marginTop: 0\r\n          }}>\r\n            {text}\r\n          </Title>\r\n          <Text style={{\r\n            color: '#64748b',\r\n            textDecoration: 'line-through',\r\n            fontSize: '0.75rem'\r\n          }}>\r\n            {record.originalPrice}\r\n          </Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Chegirma',\r\n      dataIndex: 'discount',\r\n      key: 'discount',\r\n      render: (text) => (\r\n        <Tag\r\n          style={{\r\n            backgroundColor: '#ecfdf5',\r\n            color: '#059669',\r\n            fontWeight: 600,\r\n            fontSize: '0.75rem',\r\n            margin: 0\r\n          }}\r\n        >\r\n          {text}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakat',\r\n      key: 'action',\r\n      render: (_, record) => (\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => handlePurchase(record.key)}\r\n          style={{\r\n            backgroundColor: record.color,\r\n            color: 'white',\r\n            fontWeight: 900,\r\n            border: '2px solid rgba(255,255,255,0.2)',\r\n            fontSize: '0.875rem',\r\n            padding: '8px 16px',\r\n            height: 'auto',\r\n            borderRadius: 0,\r\n            boxShadow: `4px 4px 0px rgba(0,0,0,0.05)`,\r\n            textTransform: 'uppercase'\r\n          }}\r\n        >\r\n          Sotib olish\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{\r\n      paddingTop: '24px',\r\n      paddingBottom: '24px',\r\n      maxWidth: '1800px',\r\n      margin: '0 auto'\r\n    }}>\r\n      <div style={{ marginBottom: '60px' }}>\r\n        <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n          Market\r\n        </div>\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexWrap: 'wrap', gap: '24px' }}>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b', margin: 0 }}>\r\n            Narxlar <span style={{ color: '#2563eb' }}>Do'koni</span>\r\n          </Title>\r\n          <Button\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={() => navigate(-1)}\r\n            style={{\r\n              borderColor: '#e2e8f0',\r\n              borderWidth: '2px',\r\n              color: '#64748b',\r\n              fontWeight: 900,\r\n              borderRadius: 0,\r\n              boxShadow: '4px 4px 0px rgba(0,0,0,0.05)',\r\n              height: 'auto',\r\n              padding: '12px 24px',\r\n              textTransform: 'uppercase'\r\n            }}\r\n          >\r\n            ORQAGA\r\n          </Button>\r\n        </div>\r\n        <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n        <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px', marginBottom: 0 }}>\r\n          Premium imkoniyatlar, yulduzlar to'plami va maxsus obunalar bilan o'quv jarayoningizni yanada foydali qiling.\r\n        </Paragraph>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"animate__animated animate__fadeIn\">\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            style={{ marginBottom: '16px' }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {loading ? (\r\n        <div style={{ textAlign: 'center', padding: '32px 0' }}>\r\n          <Text>Yuklanmoqda...</Text>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Premium Plans Section */}\r\n          <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '200ms', marginBottom: '32px' }}>\r\n            <Title level={3} style={{\r\n              fontWeight: 600,\r\n              color: '#374151',\r\n              marginBottom: '16px',\r\n              textAlign: 'left'\r\n            }}>\r\n              <SketchOutlined style={{ color: '#2563eb', marginRight: '8px' }} /> Premium Obunalar\r\n            </Title>\r\n\r\n            <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '600ms' }}>\r\n              <Card style={{ border: '4px solid #2563eb', padding: 0, borderRadius: 0, boxShadow: '12px 12px 0px rgba(37, 99, 235, 0.1)', overflow: 'hidden' }}>\r\n                <Table\r\n                  columns={pricingColumns}\r\n                  dataSource={pricingPlans}\r\n                  pagination={false}\r\n                  rowClassName=\"brutalist-row\"\r\n                />\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Stars Section */}\r\n          <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '400ms', marginBottom: '32px' }}>\r\n            <Title level={3} style={{\r\n              fontWeight: 600,\r\n              color: '#374151',\r\n              marginBottom: '16px',\r\n              textAlign: 'left'\r\n            }}>\r\n              <StarFilled style={{ color: '#f59e0b', marginRight: '8px' }} /> Yulduzlar\r\n            </Title>\r\n\r\n            <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '800ms' }}>\r\n              <Card style={{ border: '4px solid #f59e0b', padding: 0, borderRadius: 0, boxShadow: '12px 12px 0px rgba(245, 158, 11, 0.1)', overflow: 'hidden' }}>\r\n                <Table\r\n                  columns={starColumns}\r\n                  dataSource={starPackages}\r\n                  pagination={false}\r\n                  rowClassName=\"brutalist-row\"\r\n                />\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PricingPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\ReceivedLessons.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLessons'. Either include it or remove the dependency array.","line":45,"column":6,"nodeType":"ArrayExpression","endLine":45,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser?.id, loadLessons]","fix":{"range":[1040,1057],"text":"[currentUser?.id, loadLessons]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  Typography,\r\n  Table,\r\n  Tag,\r\n  Alert,\r\n  Input,\r\n  Select,\r\n  Row,\r\n  Col,\r\n  ConfigProvider,\r\n  Spin,\r\n  Space,\r\n} from 'antd';\r\nimport {\r\n  BookOutlined,\r\n  SearchOutlined,\r\n  SortAscendingOutlined,\r\n  CalendarOutlined,\r\n  UserOutlined,\r\n  EnvironmentOutlined,\r\n  ClockCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nconst ReceivedLessons = () => {\r\n  const { currentUser } = useAuth();\r\n  const [lessons, setLessons] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [subjectFilter, setSubjectFilter] = useState('');\r\n  const [sortBy, setSortBy] = useState('topic');\r\n  const [pageSize, setPageSize] = useState(10);\r\n\r\n  useEffect(() => {\r\n    if (currentUser?.id) {\r\n      loadLessons();\r\n    }\r\n  }, [currentUser?.id]);\r\n\r\n  const loadLessons = () => {\r\n    try {\r\n      const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');\r\n      const lessonNotifications = notifications.filter(n =>\r\n        n.studentId === currentUser.id && n.type === 'lesson_reminder'\r\n      );\r\n\r\n      const studentLessons = lessonNotifications.map(notification => ({\r\n        id: notification.id,\r\n        topic: notification.lessonTopic,\r\n        subject: notification.subject,\r\n        description: notification.lessonDescription,\r\n        room: notification.room,\r\n        lessonDate: notification.lessonDate,\r\n        lessonTime: notification.lessonTime,\r\n        teacherName: notification.teacherName,\r\n        sentAt: notification.createdAt,\r\n        difficulty: notification.difficulty || 'medium',\r\n      }));\r\n      setLessons(studentLessons);\r\n    } catch (error) {\r\n      console.error('Error loading lessons:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getFilteredLessons = () => {\r\n    if (!lessons) return [];\r\n    return lessons.filter(lesson => {\r\n      const matchesSearch = !searchTerm ||\r\n        lesson?.topic?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        lesson?.teacherName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        lesson?.subject?.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n      const matchesSubject = !subjectFilter || lesson?.subject === subjectFilter;\r\n\r\n      return matchesSearch && matchesSubject;\r\n    });\r\n  };\r\n\r\n  const getSortedLessons = () => {\r\n    const filteredLessons = getFilteredLessons();\r\n    const sorted = [...filteredLessons];\r\n\r\n    if (sortBy === 'subject') return sorted.sort((a, b) => (a?.subject || '').localeCompare(b?.subject || ''));\r\n    if (sortBy === 'date') return sorted.sort((a, b) => new Date(b.lessonDate) - new Date(a.lessonDate));\r\n    if (sortBy === 'teacher') return sorted.sort((a, b) => (a?.teacherName || '').localeCompare(b?.teacherName || ''));\r\n    if (sortBy === 'sentDate') return sorted.sort((a, b) => new Date(b.sentAt) - new Date(a.sentAt));\r\n    return sorted.sort((a, b) => (a?.topic || '').localeCompare(b?.topic || ''));\r\n  };\r\n\r\n  const allSubjects = [...new Set(lessons.map(lesson => lesson.subject).filter(Boolean))];\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Mavzu',\r\n      dataIndex: 'topic',\r\n      key: 'topic',\r\n      render: (topic, record) => (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 900 }}>L</div>\r\n          <div>\r\n            <Text style={{ fontWeight: 800, color: '#000', display: 'block' }}>{topic}</Text>\r\n            {record.description && (\r\n              <Text style={{ fontSize: '11px', color: '#666' }}>\r\n                {record.description.length > 60 ? record.description.substring(0, 60) + '...' : record.description}\r\n              </Text>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Fan',\r\n      dataIndex: 'subject',\r\n      key: 'subject',\r\n      render: (subject) => (\r\n        <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800, backgroundColor: '#fff', color: '#000', textTransform: 'uppercase', fontSize: '10px' }}>\r\n          {subject}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Vaqt / Joy',\r\n      key: 'datetime',\r\n      render: (_, record) => (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px', fontWeight: 700, fontSize: '12px' }}>\r\n            <CalendarOutlined /> {record.lessonDate}\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px', fontWeight: 700, fontSize: '12px' }}>\r\n            <ClockCircleOutlined /> {record.lessonTime}\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px', fontWeight: 700, fontSize: '11px', color: '#666' }}>\r\n            <EnvironmentOutlined /> {record.room}\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'qituvchi',\r\n      dataIndex: 'teacherName',\r\n      key: 'teacherName',\r\n      render: (name) => (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <UserOutlined />\r\n          <Text style={{ fontWeight: 700, fontSize: '12px' }}>{name}</Text>\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 700, textTransform: 'uppercase' }}>Darslar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Darslar\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '2.5rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#000' }}>\r\n            Qo'shimcha darslar\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#000', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            O'qituvchilaringiz tomonidan yuborilgan dars materiallari va qo'shimcha mashg'ulotlar.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {/* Filter Card */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '40px' }}>\r\n          <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}>\r\n            <Row gutter={[24, 16]} align=\"middle\">\r\n              <Col xs={24} md={14}>\r\n                <Search\r\n                  placeholder=\"Dars mavzusi yoki o'qituvchini qidirish...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  style={{ borderRadius: 0, width: '100%' }}\r\n                  size=\"large\"\r\n                />\r\n              </Col>\r\n              <Col xs={24} md={10}>\r\n                <div style={{ display: 'flex', gap: '12px', alignItems: 'center', justifyContent: 'flex-end', width: '100%' }}>\r\n                  <SortAscendingOutlined style={{ fontSize: '20px' }} />\r\n                  <Select value={sortBy} onChange={setSortBy} style={{ minWidth: '160px', flex: 1 }} size=\"large\">\r\n                    <Option value=\"topic\">Mavzu</Option>\r\n                    <Option value=\"subject\">Fan</Option>\r\n                    <Option value=\"date\">Dars sanasi</Option>\r\n                    <Option value=\"teacher\">O'qituvchi</Option>\r\n                    <Option value=\"sentDate\">Yuborilgan vaqt</Option>\r\n                  </Select>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n\r\n            {allSubjects.length > 0 && (\r\n              <div style={{ marginTop: '24px' }}>\r\n                <Text style={{ fontWeight: 800, textTransform: 'uppercase', fontSize: '10px', display: 'block', marginBottom: '8px' }}>Fanlar bo'yicha saralash:</Text>\r\n                <Space wrap>\r\n                  <Tag\r\n                    style={{\r\n                      cursor: 'pointer',\r\n                      borderRadius: 0,\r\n                      border: '2px solid #000',\r\n                      backgroundColor: !subjectFilter ? '#000' : '#fff',\r\n                      color: !subjectFilter ? '#fff' : '#000',\r\n                      fontWeight: 700,\r\n                      padding: '4px 12px'\r\n                    }}\r\n                    onClick={() => setSubjectFilter('')}\r\n                  >\r\n                    BARCHASI\r\n                  </Tag>\r\n                  {allSubjects.map(subject => (\r\n                    <Tag\r\n                      key={subject}\r\n                      style={{\r\n                        cursor: 'pointer',\r\n                        borderRadius: 0,\r\n                        border: '2px solid #000',\r\n                        backgroundColor: subjectFilter === subject ? '#000' : '#fff',\r\n                        color: subjectFilter === subject ? '#fff' : '#000',\r\n                        fontWeight: 700,\r\n                        padding: '4px 12px'\r\n                      }}\r\n                      onClick={() => setSubjectFilter(subjectFilter === subject ? '' : subject)}\r\n                    >\r\n                      {subject.toUpperCase()}\r\n                    </Tag>\r\n                  ))}\r\n                </Space>\r\n              </div>\r\n            )}\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Table/Content */}\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '0.3s' }}>\r\n          {lessons.length === 0 ? (\r\n            <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000', textAlign: 'center', padding: '60px' }}>\r\n              <BookOutlined style={{ fontSize: '64px', color: '#ccc', marginBottom: '24px' }} />\r\n              <Title level={4} style={{ fontWeight: 800 }}>Hozircha qo'shimcha darslar yo'q</Title>\r\n              <Paragraph style={{ color: '#666' }}>O'qituvchingiz dars yuborganida bu yerda paydo bo'ladi.</Paragraph>\r\n            </Card>\r\n          ) : (\r\n            <>\r\n              {getFilteredLessons().length > 0 && (\r\n                <div style={{ backgroundColor: '#000', color: '#fff', padding: '12px 20px', fontWeight: 800, marginBottom: '20px', border: '4px solid #000', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <span>Sizga {lessons.length} ta dars tayinlangan</span>\r\n                  <BookOutlined />\r\n                </div>\r\n              )}\r\n\r\n              <Table\r\n                columns={columns}\r\n                dataSource={getSortedLessons().map(l => ({ ...l, key: l.id }))}\r\n                pagination={{\r\n                  pageSize: pageSize,\r\n                  showSizeChanger: true,\r\n                  pageSizeOptions: ['10', '20', '50'],\r\n                  onShowSizeChange: (_, size) => setPageSize(size),\r\n                }}\r\n                rowHoverable={false}\r\n                style={{ border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}\r\n                scroll={{ x: 800 }}\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default ReceivedLessons;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\SearchTeachers.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setSubjectFilter' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":40,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"setSubjectFilter"},"fix":{"range":[934,952],"text":""},"desc":"Remove unused variable 'setSubjectFilter'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'studentAttempts' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":43,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"studentAttempts"},"fix":{"range":[1072,1087],"text":""},"desc":"Remove unused variable 'studentAttempts'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":52,"column":6,"nodeType":"ArrayExpression","endLine":52,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadData]","fix":{"range":[1432,1434],"text":"[loadData]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":89,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Typography,\r\n  Input,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Tag,\r\n  Space,\r\n  Alert,\r\n  Spin,\r\n  Select,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  SearchOutlined,\r\n  UserOutlined,\r\n  PlayCircleOutlined,\r\n  SortAscendingOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useServerTest } from '../../context/ServerTestContext';\r\nimport apiService from '../../data/apiService';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nconst SearchTeachers = () => {\r\n  const { currentUser } = useAuth();\r\n  const { checkActiveSession } = useServerTest();\r\n  const navigate = useNavigate();\r\n\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [subjectFilter, setSubjectFilter] = useState('');\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [tests, setTests] = useState([]);\r\n  const [studentAttempts, setStudentAttempts] = useState([]);\r\n  const [activeTestSessions, setActiveTestSessions] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [sortBy, setSortBy] = useState('name');\r\n  const [pageSize, setPageSize] = useState(10);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [usersData, testsData, attemptsData] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getTests(),\r\n        apiService.getAttempts({ student: currentUser.id })\r\n      ]);\r\n\r\n      const users = usersData.results || usersData;\r\n      const tests = testsData.results || testsData;\r\n      const attempts = attemptsData.results || attemptsData;\r\n\r\n      const teachersData = users.filter(user => user.role === 'teacher');\r\n\r\n      setTeachers(teachersData);\r\n      setTests(tests);\r\n      setStudentAttempts(attempts);\r\n\r\n      await checkActiveSessions(tests);\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkActiveSessions = async (allTests) => {\r\n    if (allTests.length === 0) return;\r\n    const sessionsMap = {};\r\n    for (const test of allTests) {\r\n      try {\r\n        const activeSession = await checkActiveSession(test.id);\r\n        if (activeSession) sessionsMap[test.id] = activeSession;\r\n      } catch (error) {\r\n        console.debug(`No active session for test ${test.id}`);\r\n      }\r\n    }\r\n    setActiveTestSessions(sessionsMap);\r\n  };\r\n\r\n  const getTeacherTests = (teacherId) => {\r\n    return tests.filter(test => test.teacher === teacherId);\r\n  };\r\n\r\n  const getActiveSessionsCountForTeacher = (teacherId) => {\r\n    const teacherTests = getTeacherTests(teacherId);\r\n    return teacherTests.filter(test => !!activeTestSessions[test.id]).length;\r\n  };\r\n\r\n  const getFilteredTeachers = () => {\r\n    return teachers.filter(teacher => {\r\n      const teacherName = teacher.name || '';\r\n      const matchesName = teacherName.toLowerCase().includes(searchTerm.toLowerCase());\r\n      const matchesSubject = !subjectFilter ||\r\n        teacher.subjects?.some(subject =>\r\n          subject.toLowerCase().includes(subjectFilter.toLowerCase())\r\n        );\r\n      return matchesName && matchesSubject;\r\n    });\r\n  };\r\n\r\n  const getSortedTeachers = () => {\r\n    const filteredTeachers = getFilteredTeachers();\r\n    if (sortBy === 'subjects') {\r\n      return filteredTeachers.sort((a, b) => (a.subjects?.[0] || '').localeCompare(b.subjects?.[0] || ''));\r\n    } else if (sortBy === 'test_count') {\r\n      return filteredTeachers.sort((a, b) => getTeacherTests(b.id).length - getTeacherTests(a.id).length);\r\n    } else if (sortBy === 'active_sessions') {\r\n      return filteredTeachers.sort((a, b) => getActiveSessionsCountForTeacher(b.id) - getActiveSessionsCountForTeacher(a.id));\r\n    } else {\r\n      return filteredTeachers.sort((a, b) => (a.name || '').localeCompare(b.name || ''));\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'O\\'qituvchi',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, record) => (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 900 }}>\r\n            {name ? name.charAt(0).toUpperCase() : 'T'}\r\n          </div>\r\n          <div>\r\n            <Text style={{ fontWeight: 700, fontSize: '0.9rem' }}>{name || 'Ismi ko\\'rsatilmagan'}</Text>\r\n            {record.bio && <div style={{ fontSize: '0.75rem', color: '#666' }}>{record.bio}</div>}\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Fanlar',\r\n      dataIndex: 'subjects',\r\n      key: 'subjects',\r\n      render: (subjects) => (\r\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px' }}>\r\n          {subjects?.map((subject) => (\r\n            <Tag key={subject} style={{ borderRadius: 0, border: '2px solid #000', backgroundColor: '#fff', fontWeight: 700, color: '#000', textTransform: 'uppercase', fontSize: '10px' }}>\r\n              {subject}\r\n            </Tag>\r\n          )) || <Text type=\"secondary\" style={{ fontSize: '12px' }}>Belgilanmagan</Text>}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Testlar',\r\n      key: 'testCount',\r\n      width: 100,\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 900, fontSize: '1rem' }}>{getTeacherTests(record.id).length}</Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakat',\r\n      key: 'actions',\r\n      width: 150,\r\n      render: (_, record) => {\r\n        const hasActive = getActiveSessionsCountForTeacher(record.id) > 0;\r\n        return (\r\n          <Button\r\n            type=\"primary\"\r\n            icon={hasActive ? <PlayCircleOutlined /> : <UserOutlined />}\r\n            onClick={() => navigate(`/student/teacher-details/${record.id}`)}\r\n            style={{\r\n              borderRadius: 0,\r\n              border: '2px solid #000',\r\n              boxShadow: '4px 4px 0px #000',\r\n              backgroundColor: hasActive ? '#000' : '#fff',\r\n              color: hasActive ? '#fff' : '#000',\r\n              fontWeight: 900,\r\n              textTransform: 'uppercase',\r\n              fontSize: '12px',\r\n              height: '36px'\r\n            }}\r\n          >\r\n            {hasActive ? 'Davom ettirish' : 'Ko\\'rish'}\r\n          </Button>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 700, textTransform: 'uppercase' }}>O'qituvchilar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider\r\n      theme={{\r\n        token: {\r\n          borderRadius: 0,\r\n          colorPrimary: '#000',\r\n        },\r\n      }}\r\n    >\r\n      <div style={{ padding: '40px 0' }}>\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{\r\n            display: 'inline-block',\r\n            backgroundColor: '#000',\r\n            color: '#fff',\r\n            padding: '8px 16px',\r\n            fontWeight: 700,\r\n            fontSize: '14px',\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.2em',\r\n            marginBottom: '16px'\r\n          }}>\r\n            Hamjamiyat\r\n          </div>\r\n          <Title level={1} style={{\r\n            margin: 0,\r\n            fontWeight: 900,\r\n            fontSize: '2.5rem',\r\n            lineHeight: 0.9,\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '-0.05em',\r\n            color: '#000'\r\n          }}>\r\n            O'qituvchilarni qidirish\r\n          </Title>\r\n          <div style={{\r\n            width: '80px',\r\n            height: '10px',\r\n            backgroundColor: '#000',\r\n            margin: '24px 0'\r\n          }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Bilim olish uchun tajribali ustozlarni toping va ularning mavjud testlaridan foydalaning.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {error && (\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            showIcon\r\n            style={{ borderRadius: 0, border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 600, marginBottom: '40px' }}\r\n          />\r\n        )}\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '40px' }}>\r\n          <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}>\r\n            <Row gutter={[24, 16]} align=\"middle\">\r\n              <Col xs={24} md={18}>\r\n                <Search\r\n                  placeholder=\"Ism yoki fan bo'yicha qidirish...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  style={{ borderRadius: 0, width: '100%' }}\r\n                  size=\"large\"\r\n                />\r\n              </Col>\r\n              <Col xs={24} md={6}>\r\n                <div style={{ display: 'flex', gap: '12px', alignItems: 'center', justifyContent: 'flex-end', width: '100%' }}>\r\n                  <SortAscendingOutlined style={{ fontSize: '20px' }} />\r\n                  <Select value={sortBy} onChange={setSortBy} style={{ width: 180 }} size=\"large\">\r\n                    <Option value=\"name\">Nomi bo'yicha</Option>\r\n                    <Option value=\"subjects\">Fan bo'yicha</Option>\r\n                    <Option value=\"test_count\">Testlar soni</Option>\r\n                    <Option value=\"active_sessions\">Faol seanslar</Option>\r\n                  </Select>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </div>\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '0.3s' }}>\r\n          <Table\r\n            columns={columns}\r\n            dataSource={getSortedTeachers().map(t => ({ ...t, key: t.id }))}\r\n            pagination={{\r\n              pageSize: pageSize,\r\n              showSizeChanger: true,\r\n              pageSizeOptions: ['10', '20', '50'],\r\n              onShowSizeChange: (_, size) => setPageSize(size),\r\n            }}\r\n            rowHoverable={false}\r\n            style={{ border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}\r\n            scroll={{ x: 800 }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default SearchTeachers;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\StudentOverview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\StudentProfile.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'curatorTeacher' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":33,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"curatorTeacher"},"fix":{"range":[1130,1144],"text":""},"desc":"Remove unused variable 'curatorTeacher'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'emojiPickerOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":42,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"emojiPickerOpen"},"fix":{"range":[1658,1673],"text":""},"desc":"Remove unused variable 'emojiPickerOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setEmojiPickerOpen' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":42,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"setEmojiPickerOpen"},"fix":{"range":[1673,1693],"text":""},"desc":"Remove unused variable 'setEmojiPickerOpen'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadStudentStats'. Either include it or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadStudentStats]","fix":{"range":[1896,1909],"text":"[currentUser, loadStudentStats]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":60,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'formattedTime' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":81,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"formattedTime"},"fix":{"range":[2980,2994],"text":""},"desc":"Remove unused variable 'formattedTime'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isExpired' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":81,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"isExpired"},"fix":{"range":[2993,3004],"text":""},"desc":"Remove unused variable 'isExpired'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":274,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":274,"endColumn":17},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":294,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":294,"endColumn":17}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { Card, Typography, Row, Col, Button, Avatar, Modal, Alert, Statistic } from 'antd';\r\nimport {\r\n  CameraOutlined,\r\n  EditOutlined,\r\n  CheckCircleOutlined,\r\n  TrophyOutlined,\r\n  BarChartOutlined,\r\n  UserOutlined,\r\n  BookOutlined,\r\n  ClockCircleOutlined,\r\n  StarOutlined,\r\n  ShoppingOutlined,\r\n  DeleteOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport apiService from '../../data/apiService';\r\nimport { useCountdown } from '../../hooks/useCountdown';\r\nimport { shouldShowPremiumFeatures } from '../../utils/premiumVisibility';\r\nimport GradientPicker from '../../components/GradientPicker';\r\n\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst StudentProfile = () => {\r\n  const { currentUser, setCurrentUserData, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [testCount, setTestCount] = useState(0);\r\n  const [averageScore, setAverageScore] = useState(0);\r\n  const [highestScore, setHighestScore] = useState(0);\r\n  const [curatorTeacher, setCuratorTeacher] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [profilePhoto, setProfilePhoto] = useState(null);\r\n  const [statusText, setStatusText] = useState('');\r\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [saveSuccess, setSaveSuccess] = useState(false);\r\n  const [deleteLoading, setDeleteLoading] = useState(false);\r\n  const [gradientPickerOpen, setGradientPickerOpen] = useState(false);\r\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState(false);\r\n  const [selectedGradient, setSelectedGradient] = useState(null);\r\n  const [selectedEmojis, setSelectedEmojis] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadStudentStats();\r\n  }, [currentUser]);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      setStatusText(currentUser.profile_status || '');\r\n      // Initialize gradient and emojis from current user data\r\n      if (currentUser.background_gradient) {\r\n        try {\r\n          const gradientData = typeof currentUser.background_gradient === 'string'\r\n            ? JSON.parse(currentUser.background_gradient)\r\n            : currentUser.background_gradient;\r\n          setSelectedGradient(gradientData);\r\n        } catch (e) {\r\n          setSelectedGradient(null);\r\n        }\r\n      }\r\n      if (currentUser.selected_emojis) {\r\n        setSelectedEmojis(currentUser.selected_emojis);\r\n      }\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Countdown timer for premium expiry\r\n  const handlePremiumExpire = async () => {\r\n    try {\r\n      // Refresh user data when premium expires\r\n      const updatedUser = await apiService.getUser(currentUser.id);\r\n      setCurrentUserData(updatedUser);\r\n    } catch (error) {\r\n      console.error('Failed to refresh user data on premium expiry:', error);\r\n    }\r\n  };\r\n\r\n  const { formattedTime, isExpired } = useCountdown(currentUser?.premium_expiry_date, handlePremiumExpire);\r\n\r\n  const loadStudentStats = async () => {\r\n    if (!currentUser) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const [attempts, users] = await Promise.all([\r\n        apiService.getAttempts({ student: currentUser.id }),\r\n        apiService.getUsers()\r\n      ]);\r\n      const attemptsList = attempts.results || attempts;\r\n      setTestCount(attemptsList.length);\r\n\r\n      // Calculate average and highest scores\r\n      const scores = attemptsList.map(attempt => attempt.score || 0);\r\n      const avgScore = scores.length > 0\r\n        ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n        : 0;\r\n      const highScore = scores.length > 0\r\n        ? Math.round(Math.max(...scores))\r\n        : 0;\r\n\r\n      setAverageScore(avgScore);\r\n      setHighestScore(highScore);\r\n\r\n      // Find curator teacher\r\n      const teachers = users.filter(user => user.role === 'teacher');\r\n      const curator = teachers.find(t => t.is_curator && t.curator_class === currentUser.class_group);\r\n      setCuratorTeacher(curator);\r\n    } catch (error) {\r\n      console.error('Error loading student stats:', error);\r\n      setTestCount(0);\r\n      setCuratorTeacher(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePhotoChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      // Check if it's a GIF or image\r\n      if (file.type.startsWith('image/')) {\r\n        setProfilePhoto(file);\r\n      } else {\r\n        alert('Faqat rasm fayllarini yuklash mumkin!');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    if (!currentUser) return;\r\n\r\n    setSaving(true);\r\n    try {\r\n      const formData = new FormData();\r\n\r\n      if (profilePhoto) {\r\n        formData.append('profile_photo', profilePhoto);\r\n      }\r\n\r\n      formData.append('profile_status', statusText);\r\n\r\n      // Add gradient if selected\r\n      if (selectedGradient) {\r\n        formData.append('background_gradient', JSON.stringify(selectedGradient));\r\n      }\r\n\r\n      // Add emojis if selected\r\n      if (selectedEmojis.length > 0) {\r\n        formData.append('selected_emojis', JSON.stringify(selectedEmojis));\r\n      }\r\n\r\n      const updatedUser = await apiService.patch(`/users/${currentUser.id}/`, formData, true);\r\n      setCurrentUserData(updatedUser);\r\n      setEditDialogOpen(false);\r\n      setProfilePhoto(null);\r\n      setSaveSuccess(true);\r\n      setTimeout(() => setSaveSuccess(false), 3000); // Hide success message after 3 seconds\r\n    } catch (error) {\r\n      console.error('Failed to update profile:', error);\r\n      if (error.message.includes('401')) {\r\n        alert('Sessiya muddati tugagan. Iltimos, qaytadan kiriting.');\r\n        logout();\r\n      } else {\r\n        alert('Profilni saqlashda xatolik yuz berdi');\r\n      }\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteProfileData = async () => {\r\n    if (!currentUser) return;\r\n\r\n    // Only allow deletion for the specific student ID\r\n    if (currentUser.id !== 'TO\\'XTAYEVJT9-03-AE114') {\r\n      alert('Bu funksiya faqat ma\\'lum o\\'quvchi uchun mavjud!');\r\n      return;\r\n    }\r\n\r\n    const confirmed = window.confirm(\r\n      'тЪая╕П Diqqat! Bu amalni bajarishdan oldin o\\'ylab ko\\'ring:\\n\\n' +\r\n      'тАв Profil rasmi o\\'chiriladi\\n' +\r\n      'тАв Status xabari o\\'chiriladi\\n' +\r\n      'тАв Bu amalni bekor qilib bo\\'lmaydi!\\n\\n' +\r\n      'Davom etishni xohlaysizmi?'\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    setDeleteLoading(true);\r\n    try {\r\n      await apiService.deleteStudentProfileData(currentUser.id);\r\n\r\n      // Refresh user data\r\n      const updatedUser = await apiService.getUser(currentUser.id);\r\n      setCurrentUserData(updatedUser);\r\n\r\n      alert('тЬЕ Profil ma\\'lumotlari muvaffaqiyatli o\\'chirildi!');\r\n    } catch (error) {\r\n      console.error('Failed to delete profile data:', error);\r\n      alert('тЭМ Profil ma\\'lumotlarini o\\'chirishda xatolik yuz berdi');\r\n    } finally {\r\n      setDeleteLoading(false);\r\n    }\r\n  };\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix }) => (\r\n    <Card\r\n      style={{\r\n        backgroundColor: '#ffffff',\r\n        border: `4px solid ${color}`,\r\n        borderRadius: 0,\r\n        boxShadow: `12px 12px 0px ${color}10`,\r\n        transition: 'all 0.3s ease',\r\n      }}\r\n      styles={{ body: { padding: '24px' } }}\r\n      hoverable\r\n    >\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n        <div style={{ flex: 1 }}>\r\n          <Text\r\n            style={{\r\n              fontSize: '12px',\r\n              fontWeight: 900,\r\n              textTransform: 'uppercase',\r\n              letterSpacing: '1px',\r\n              color: '#64748b',\r\n              display: 'block',\r\n              marginBottom: '8px'\r\n            }}\r\n          >\r\n            {title}\r\n          </Text>\r\n          <div style={{ display: 'flex', alignItems: 'baseline', gap: '4px' }}>\r\n            <Text style={{ fontSize: '32px', fontWeight: 900, color: '#1e293b' }}>{value}</Text>\r\n            {suffix && <Text style={{ fontSize: '18px', fontWeight: 700, color: color }}>{suffix}</Text>}\r\n          </div>\r\n        </div>\r\n        <div\r\n          style={{\r\n            backgroundColor: color,\r\n            borderRadius: 0,\r\n            padding: '12px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            marginLeft: '16px',\r\n            boxShadow: `4px 4px 0px ${color}40`,\r\n            border: '2px solid rgba(255,255,255,0.4)'\r\n          }}\r\n        >\r\n          {React.cloneElement(icon, {\r\n            style: {\r\n              fontSize: '24px',\r\n              color: '#ffffff'\r\n            }\r\n          })}\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n\r\n  // Profile background style based on premium status\r\n  const getProfileBackgroundStyle = () => {\r\n    if (shouldShowPremiumFeatures(currentUser, currentUser) && currentUser?.background_gradient) {\r\n      try {\r\n        const gradientData = typeof currentUser.background_gradient === 'string'\r\n          ? JSON.parse(currentUser.background_gradient)\r\n          : currentUser.background_gradient;\r\n        return { background: gradientData.css };\r\n      } catch (e) {\r\n        return { background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' };\r\n      }\r\n    }\r\n    if (shouldShowPremiumFeatures(currentUser, currentUser)) {\r\n      return {\r\n        background: `radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%), linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)`\r\n      };\r\n    }\r\n    return { background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)' };\r\n  };\r\n\r\n  // Check if current gradient is a custom premium gradient (not default)\r\n  const isCustomGradient = () => {\r\n    if (shouldShowPremiumFeatures(currentUser, currentUser) && currentUser?.background_gradient) {\r\n      try {\r\n        const gradientData = typeof currentUser.background_gradient === 'string'\r\n          ? JSON.parse(currentUser.background_gradient)\r\n          : currentUser.background_gradient;\r\n        return gradientData.name && gradientData.name !== 'Standart';\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{\r\n      paddingTop: '16px',\r\n      paddingBottom: '16px',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div style={{ marginBottom: '60px' }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          flexWrap: 'wrap',\r\n          gap: '24px'\r\n        }}>\r\n          <div>\r\n            <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n              Profil Ma'lumotlari\r\n            </div>\r\n            <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b', margin: 0 }}>\r\n              Mening <span style={{ color: '#2563eb' }}>ma'lumotlarim</span>\r\n            </Title>\r\n            <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n            <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px', marginBottom: 0 }}>\r\n              Shaxsiy ma'lumotlaringizni ko'rish, tahrirlash va hisobingizni boshqarish bo'limi.\r\n            </Paragraph>\r\n          </div>\r\n\r\n          {/* Action Buttons Container */}\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '12px',\r\n          }} className=\"header-actions\">\r\n            <Button\r\n              size=\"large\"\r\n              icon={<ShoppingOutlined />}\r\n              onClick={() => navigate('/student/pricing')}\r\n              style={{\r\n                backgroundColor: '#f59e0b',\r\n                color: 'white',\r\n                fontSize: '1rem',\r\n                fontWeight: 900,\r\n                padding: '12px 24px',\r\n                borderRadius: 0,\r\n                height: 'auto',\r\n                boxShadow: '8px 8px 0px rgba(245, 158, 11, 0.2)',\r\n                border: '4px solid #f59e0b',\r\n                textTransform: 'uppercase'\r\n              }}\r\n            >\r\n              Market\r\n            </Button>\r\n\r\n            {/* Edit Button - Only for premium users */}\r\n            {shouldShowPremiumFeatures(currentUser, currentUser) && (\r\n              <Button\r\n                size=\"large\"\r\n                icon={<EditOutlined />}\r\n                onClick={() => setEditDialogOpen(true)}\r\n                style={{\r\n                  backgroundColor: '#10b981',\r\n                  color: 'white',\r\n                  fontSize: '1rem',\r\n                  fontWeight: 900,\r\n                  padding: '12px 24px',\r\n                  borderRadius: 0,\r\n                  height: 'auto',\r\n                  boxShadow: '8px 8px 0px rgba(16, 185, 129, 0.2)',\r\n                  border: '4px solid #10b981',\r\n                  textTransform: 'uppercase'\r\n                }}\r\n              >\r\n                Tahrirlash\r\n              </Button>\r\n            )}\r\n\r\n            {/* Delete Profile Data Button - Only for specific student */}\r\n            {currentUser?.id === 'TO\\'XTAYEVJT9-03-AE114' && (\r\n              <Button\r\n                size=\"large\"\r\n                icon={<DeleteOutlined />}\r\n                onClick={handleDeleteProfileData}\r\n                loading={deleteLoading}\r\n                style={{\r\n                  backgroundColor: '#dc2626',\r\n                  color: 'white',\r\n                  fontSize: '1rem',\r\n                  fontWeight: 900,\r\n                  padding: '12px 24px',\r\n                  borderRadius: 0,\r\n                  height: 'auto',\r\n                  boxShadow: '8px 8px 0px rgba(220, 38, 38, 0.2)',\r\n                  border: '4px solid #dc2626',\r\n                  textTransform: 'uppercase'\r\n                }}\r\n              >\r\n                Profilni tozalash\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Success Message */}\r\n      {saveSuccess && (\r\n        <div className=\"animate__animated animate__fadeIn\">\r\n          <Alert\r\n            message=\"Profil muvaffaqiyatli saqlandi!\"\r\n            type=\"success\"\r\n            style={{\r\n              marginBottom: '16px',\r\n              backgroundColor: '#ecfdf5',\r\n              border: '4px solid #10b981',\r\n              color: '#059669',\r\n              borderRadius: 0,\r\n              boxShadow: '8px 8px 0px rgba(16, 185, 129, 0.1)',\r\n              fontWeight: 800\r\n            }}\r\n            showIcon\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Profile Card */}\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '200ms' }}>\r\n        <Card style={{\r\n          marginBottom: '24px',\r\n          borderRadius: 0,\r\n          border: `4px solid ${isCustomGradient() ? 'rgba(255,255,255,0.3)' : '#2563eb'}`,\r\n          boxShadow: isCustomGradient() ? '12px 12px 0px rgba(0,0,0,0.2)' : '12px 12px 0px rgba(37, 99, 235, 0.1)',\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n          minHeight: '200px',\r\n          ...getProfileBackgroundStyle()\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: { xs: 'column', md: 'row' },\r\n            alignItems: 'center',\r\n            padding: '32px',\r\n            minHeight: '200px',\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n          }}>\r\n            {/* Profile Photo */}\r\n            <div style={{\r\n              position: 'relative',\r\n              marginBottom: { xs: '12px', md: 0 },\r\n              marginRight: { xs: 0, md: '24px' },\r\n              zIndex: 3\r\n            }}>\r\n              {currentUser?.profile_photo_url ? (\r\n                <Avatar\r\n                  src={currentUser.profile_photo_url}\r\n                  size={140}\r\n                  style={{\r\n                    border: `6px solid ${isCustomGradient() ? '#fff' : '#2563eb'}`,\r\n                    boxShadow: '8px 8px 0px rgba(0,0,0,0.2)',\r\n                    backgroundColor: '#2563eb',\r\n                    borderRadius: 0\r\n                  }}\r\n                >\r\n                  {currentUser?.name.charAt(0).toUpperCase()}\r\n                </Avatar>\r\n              ) : (\r\n                <Avatar\r\n                  size={140}\r\n                  style={{\r\n                    fontSize: '4rem',\r\n                    fontWeight: 'bold',\r\n                    border: `6px solid ${isCustomGradient() ? '#fff' : '#2563eb'}`,\r\n                    boxShadow: '8px 8px 0px rgba(0,0,0,0.2)',\r\n                    backgroundColor: '#2563eb',\r\n                    color: '#ffffff',\r\n                    borderRadius: 0\r\n                  }}\r\n                >\r\n                  {currentUser?.name.charAt(0).toUpperCase()}\r\n                </Avatar>\r\n              )}\r\n            </div>\r\n\r\n            {/* Profile Info */}\r\n            <div style={{\r\n              textAlign: { xs: 'center', md: 'left' },\r\n              flex: 1,\r\n              color: isCustomGradient() ? '#ffffff' : '#1e293b',\r\n              position: 'relative',\r\n              marginLeft: \"16px\",\r\n              zIndex: 2\r\n            }}>\r\n              <Title level={1} style={{\r\n                fontWeight: 900,\r\n                fontSize: '3rem',\r\n                marginBottom: 0,\r\n                color: isCustomGradient() ? '#ffffff' : '#1e293b',\r\n                textShadow: isCustomGradient() ? '4px 4px 0px rgba(0,0,0,0.3)' : 'none',\r\n                textTransform: 'uppercase'\r\n              }}>\r\n                {currentUser?.name}\r\n              </Title>\r\n\r\n              {currentUser?.profile_status && (\r\n                <p style={{\r\n                  fontSize: '1.25rem',\r\n                  fontWeight: 800,\r\n                  marginBottom: '16px',\r\n                  fontStyle: 'italic',\r\n                  opacity: 0.9,\r\n                  color: isCustomGradient() ? '#ffffff' : '#1e293b',\r\n                  textShadow: isCustomGradient() ? '2px 2px 0px rgba(0,0,0,0.3)' : 'none'\r\n                }}>\r\n                  \"{currentUser.profile_status}\"\r\n                </p>\r\n              )}\r\n\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '12px', justifyContent: { xs: 'center', md: 'flex-start' } }}>\r\n                <span style={{\r\n                  backgroundColor: '#1e293b',\r\n                  color: '#fff',\r\n                  padding: '6px 16px',\r\n                  borderRadius: 0,\r\n                  fontWeight: 900,\r\n                  fontSize: '0.875rem',\r\n                  border: '2px solid rgba(255,255,255,0.2)',\r\n                  textTransform: 'uppercase'\r\n                }}>\r\n                  O'quvchi\r\n                </span>\r\n                <span style={{\r\n                  backgroundColor: '#2563eb',\r\n                  color: '#fff',\r\n                  padding: '6px 16px',\r\n                  borderRadius: 0,\r\n                  fontWeight: 900,\r\n                  fontSize: '0.875rem',\r\n                  border: '2px solid rgba(255,255,255,0.2)',\r\n                  textTransform: 'uppercase'\r\n                }}>\r\n                  {currentUser?.class_group || 'Noma\\'lum'} sinf\r\n                </span>\r\n                <span style={{\r\n                  backgroundColor: '#059669',\r\n                  color: '#fff',\r\n                  padding: '6px 16px',\r\n                  borderRadius: 0,\r\n                  fontWeight: 900,\r\n                  fontSize: '0.875rem',\r\n                  border: '2px solid rgba(255,255,255,0.2)',\r\n                  textTransform: 'uppercase'\r\n                }}>\r\n                  {currentUser?.direction === 'natural' ? 'Tabiiy fanlar' : currentUser?.direction === 'exact' ? 'Aniq fanlar' : 'Yo\\'nalish yo\\'q'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '400ms' }}>\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"Jami testlar\"\r\n              value={loading ? '...' : testCount}\r\n              icon={<BookOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={loading ? '...' : averageScore}\r\n              suffix=\"%\"\r\n              icon={<TrophyOutlined />}\r\n              color=\"#16a34a\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"Eng yuqori ball\"\r\n              value={loading ? '...' : highestScore}\r\n              suffix=\"%\"\r\n              icon={<BarChartOutlined />}\r\n              color=\"#059669\"\r\n            />\r\n          </Col>\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"Premium status\"\r\n              value={currentUser?.premium_info?.is_premium ? 'Faol' : 'Yo\\'q'}\r\n              icon={<StarOutlined />}\r\n              color={currentUser?.premium_info?.is_premium ? '#d97706' : '#6b7280'}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n\r\n\r\n\r\n      {/* Edit Profile Dialog */}\r\n      <Modal\r\n        title={\r\n          <div>\r\n            <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '4px 12px', fontWeight: 700, fontSize: '10px', textTransform: 'uppercase', letterSpacing: '0.15em', marginBottom: '8px', display: 'inline-block' }}>\r\n              Sozlamalar\r\n            </div>\r\n            <Title level={4} style={{ fontWeight: 900, fontSize: '1.5rem', textTransform: 'uppercase', letterSpacing: '-0.02em', color: '#1e293b', margin: 0 }}>\r\n              Profilni <span style={{ color: '#2563eb' }}>sozlash</span>\r\n            </Title>\r\n          </div>\r\n        }\r\n        open={editDialogOpen}\r\n        onOk={handleSaveProfile}\r\n        onCancel={() => setEditDialogOpen(false)}\r\n        okText=\"SAQLASH\"\r\n        cancelText=\"BEKOR QILISH\"\r\n        confirmLoading={saving}\r\n        width={600}\r\n        closeIcon={<span className=\"material-symbols-outlined\" style={{ color: '#000', fontWeight: 900 }}>close</span>}\r\n        style={{ top: 20 }}\r\n        modalRender={(modal) => (\r\n          <div style={{\r\n            border: '6px solid #000',\r\n            boxShadow: '16px 16px 0px rgba(0,0,0,1)',\r\n            borderRadius: 0,\r\n            overflow: 'hidden'\r\n          }}>\r\n            {modal}\r\n          </div>\r\n        )}\r\n        styles={{\r\n          header: {\r\n            borderRadius: 0,\r\n            borderBottom: '4px solid #000',\r\n            padding: '24px',\r\n            margin: 0,\r\n            backgroundColor: '#f8fafc'\r\n          },\r\n          body: {\r\n            padding: '32px',\r\n            backgroundColor: '#fff'\r\n          },\r\n          footer: {\r\n            borderRadius: 0,\r\n            borderTop: '4px solid #000',\r\n            padding: '24px',\r\n            margin: 0,\r\n            backgroundColor: '#f8fafc'\r\n          }\r\n        }}\r\n        okButtonProps={{\r\n          style: {\r\n            borderRadius: 0,\r\n            height: 'auto',\r\n            padding: '12px 32px',\r\n            fontWeight: 900,\r\n            fontSize: '1rem',\r\n            backgroundColor: '#2563eb',\r\n            border: '4px solid #000',\r\n            boxShadow: '4px 4px 0px #000',\r\n            textTransform: 'uppercase'\r\n          }\r\n        }}\r\n        cancelButtonProps={{\r\n          style: {\r\n            borderRadius: 0,\r\n            height: 'auto',\r\n            padding: '12px 32px',\r\n            fontWeight: 900,\r\n            fontSize: '1rem',\r\n            backgroundColor: '#fff',\r\n            color: '#000',\r\n            border: '4px solid #000',\r\n            boxShadow: '4px 4px 0px #000',\r\n            textTransform: 'uppercase'\r\n          }\r\n        }}\r\n      >\r\n        <div style={{ paddingTop: '8px' }}>\r\n          {/* Profile Photo Upload */}\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px' }}>\r\n              <div style={{ backgroundColor: '#f59e0b', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', borderRadius: 0 }}>\r\n                <CameraOutlined style={{ fontSize: '18px' }} />\r\n              </div>\r\n              <Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}>\r\n                Profil rasmi\r\n              </Title>\r\n            </div>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n              <Avatar\r\n                src={profilePhoto ? URL.createObjectURL(profilePhoto) : currentUser?.profile_photo_url}\r\n                size={100}\r\n                style={{\r\n                  border: '4px solid #f59e0b',\r\n                  boxShadow: '8px 8px 0px rgba(245, 158, 11, 0.1)',\r\n                  borderRadius: 0,\r\n                  backgroundColor: '#2563eb'\r\n                }}\r\n              >\r\n                {currentUser?.name.charAt(0).toUpperCase()}\r\n              </Avatar>\r\n              <div style={{ flex: 1 }}>\r\n                <Button\r\n                  onClick={() => document.getElementById('profile-photo-input').click()}\r\n                  style={{\r\n                    backgroundColor: '#f8fafc',\r\n                    borderColor: '#e2e8f0',\r\n                    borderWidth: '2px',\r\n                    color: '#1e293b',\r\n                    fontWeight: 900,\r\n                    borderRadius: 0,\r\n                    height: 'auto',\r\n                    padding: '10px 20px',\r\n                    boxShadow: '4px 4px 0px rgba(0, 0, 0, 0.05)',\r\n                    textTransform: 'uppercase'\r\n                  }}\r\n                >\r\n                  Rasm tanlash\r\n                </Button>\r\n                <input\r\n                  id=\"profile-photo-input\"\r\n                  type=\"file\"\r\n                  accept=\"image/*,.gif\"\r\n                  hidden\r\n                  onChange={handlePhotoChange}\r\n                />\r\n                <Text style={{ marginTop: '12px', display: 'block', fontSize: '0.85rem', color: '#64748b', fontWeight: 600 }}>\r\n                  GIF va rasm fayllarini yuklash mumkin\r\n                </Text>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status Message */}\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px' }}>\r\n              <div style={{ backgroundColor: '#3b82f6', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', borderRadius: 0 }}>\r\n                <EditOutlined style={{ fontSize: '18px' }} />\r\n              </div>\r\n              <Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}>\r\n                Status xabari\r\n              </Title>\r\n            </div>\r\n            <textarea\r\n              rows={3}\r\n              placeholder=\"Sizning status xabaringiz...\"\r\n              value={statusText}\r\n              onChange={(e) => setStatusText(e.target.value)}\r\n              style={{\r\n                width: '100%',\r\n                padding: '16px',\r\n                borderRadius: 0,\r\n                border: '4px solid #3b82f6',\r\n                fontSize: '1rem',\r\n                fontWeight: 600,\r\n                resize: 'none',\r\n                boxShadow: '8px 8px 0px rgba(59, 130, 246, 0.05)'\r\n              }}\r\n            />\r\n            <Text style={{ marginTop: '8px', display: 'block', fontSize: '0.85rem', color: '#64748b', fontWeight: 600 }}>\r\n              Status xabari boshqa o'quvchilarga ko'rinadi\r\n            </Text>\r\n          </div>\r\n\r\n          {/* Gradient Selection */}\r\n          <div style={{ marginBottom: '16px' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px' }}>\r\n              <div style={{ backgroundColor: '#10b981', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', borderRadius: 0 }}>\r\n                <StarOutlined style={{ fontSize: '18px' }} />\r\n              </div>\r\n              <Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}>\r\n                Profil fon gradienti\r\n              </Title>\r\n            </div>\r\n            <div\r\n              onClick={() => setGradientPickerOpen(true)}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '16px',\r\n                padding: '16px',\r\n                border: '4px solid #10b981',\r\n                borderRadius: 0,\r\n                cursor: 'pointer',\r\n                backgroundColor: '#fff',\r\n                boxShadow: '8px 8px 0px rgba(16, 185, 129, 0.05)'\r\n              }}\r\n            >\r\n              <div style={{\r\n                width: '60px',\r\n                height: '60px',\r\n                borderRadius: 0,\r\n                background: selectedGradient?.css || 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                border: '3px solid #10b981',\r\n                boxShadow: '4px 4px 0px rgba(16, 185, 129, 0.1)'\r\n              }} />\r\n              <div style={{ flex: 1 }}>\r\n                <Text style={{ fontWeight: 900, color: '#1e293b', fontSize: '1.1rem', textTransform: 'uppercase' }}>\r\n                  {selectedGradient?.name || 'Gradient tanlash'}\r\n                </Text>\r\n                <Text style={{ display: 'block', fontSize: '0.85rem', color: '#64748b', fontWeight: 600 }}>\r\n                  Premium profilingiz uchun chiroyli gradient tanlang\r\n                </Text>\r\n              </div>\r\n              <Button\r\n                style={{\r\n                  backgroundColor: '#2563eb',\r\n                  color: '#fff',\r\n                  fontWeight: 900,\r\n                  borderRadius: 0,\r\n                  border: '2px solid rgba(255,255,255,0.2)',\r\n                  boxShadow: '4px 4px 0px rgba(0,0,0,0.05)',\r\n                  textTransform: 'uppercase'\r\n                }}\r\n              >\r\n                Tanlash\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Gradient Picker Modal */}\r\n      <GradientPicker\r\n        open={gradientPickerOpen}\r\n        onClose={() => setGradientPickerOpen(false)}\r\n        selectedGradient={selectedGradient}\r\n        onGradientSelect={(gradient) => {\r\n          setSelectedGradient(gradient);\r\n          setGradientPickerOpen(false);\r\n        }}\r\n      />\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentProfile;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\StudentProfileView.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isOwnProfile' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":91,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOwnProfile"},"fix":{"range":[2682,2694],"text":""},"desc":"Remove unused variable 'isOwnProfile'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'placedGifts' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":93,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"placedGifts"},"fix":{"range":[2803,2814],"text":""},"desc":"Remove unused variable 'placedGifts'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setPlacedGifts' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":93,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setPlacedGifts"},"fix":{"range":[2814,2830],"text":""},"desc":"Remove unused variable 'setPlacedGifts'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'myGifts' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":94,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"myGifts"},"fix":{"range":[2858,2865],"text":""},"desc":"Remove unused variable 'myGifts'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setMyGifts' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":94,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"setMyGifts"},"fix":{"range":[2865,2877],"text":""},"desc":"Remove unused variable 'setMyGifts'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'displayGift' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":95,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"displayGift"},"fix":{"range":[2905,2916],"text":""},"desc":"Remove unused variable 'displayGift'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setDisplayGift' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":95,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"setDisplayGift"},"fix":{"range":[2916,2932],"text":""},"desc":"Remove unused variable 'setDisplayGift'."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Card, Typography, Button, Avatar, Tag, Row, Col, Alert, Statistic } from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  CheckCircleOutlined,\r\n  TrophyOutlined,\r\n  BarChartOutlined,\r\n  EditOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\nimport { shouldShowPremiumFeatures } from '../../utils/premiumVisibility';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst StatCard = ({ title, value, icon, color, suffix, valueComponent, iconColor = '#ffffff' }) => (\r\n  <Card\r\n    style={{\r\n      backgroundColor: '#ffffff',\r\n      border: `4px solid ${color}`,\r\n      borderRadius: 0,\r\n      boxShadow: `8px 8px 0px ${color}1A`,\r\n      transition: 'all 0.3s ease',\r\n    }}\r\n    styles={{ body: { padding: '24px' } }}\r\n  >\r\n    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n      <div style={{ flex: 1 }}>\r\n        <Text\r\n          style={{\r\n            fontSize: '0.75rem',\r\n            fontWeight: 900,\r\n            textTransform: 'uppercase',\r\n            letterSpacing: '0.1em',\r\n            color: '#64748b',\r\n            display: 'block',\r\n            marginBottom: '8px'\r\n          }}\r\n        >\r\n          {title}\r\n        </Text>\r\n        {valueComponent || (\r\n          <Statistic\r\n            value={value}\r\n            suffix={suffix}\r\n            styles={{\r\n              content: {\r\n                fontSize: '2.5rem',\r\n                fontWeight: 900,\r\n                color: '#1e293b',\r\n                lineHeight: 1.1\r\n              }\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n      <div\r\n        style={{\r\n          backgroundColor: color,\r\n          borderRadius: 0,\r\n          padding: '12px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          marginLeft: '16px',\r\n          border: '3px solid rgba(255,255,255,0.3)',\r\n          boxShadow: '4px 4px 0px rgba(0,0,0,0.05)'\r\n        }}\r\n      >\r\n        {React.cloneElement(icon, {\r\n          style: {\r\n            fontSize: '24px',\r\n            color: iconColor\r\n          }\r\n        })}\r\n      </div>\r\n    </div>\r\n  </Card>\r\n);\r\n\r\nconst StudentProfileView = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n  const [student, setStudent] = useState(null);\r\n  const [attempts, setAttempts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isOwnProfile, setIsOwnProfile] = useState(false);\r\n  const [emojiPositions, setEmojiPositions] = useState([]);\r\n  const [placedGifts, setPlacedGifts] = useState([]);\r\n  const [myGifts, setMyGifts] = useState([]);\r\n  const [displayGift, setDisplayGift] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loadStudentProfile = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Get all users to find the student\r\n        const users = await apiService.getUsers();\r\n        const studentData = users.find(user => user.id === parseInt(id));\r\n        setStudent(studentData);\r\n\r\n        if (!studentData) {\r\n          setError('O\\'quvchi topilmadi');\r\n          return;\r\n        }\r\n\r\n        // Check if this is the current user's own profile\r\n        setIsOwnProfile(currentUser?.id === parseInt(id));\r\n\r\n        // Get attempts by this student\r\n        const allAttempts = await apiService.getAttempts({ student: id });\r\n        setAttempts(allAttempts);\r\n\r\n        // Generate random positions for the emojis if they exist\r\n        const emojis = studentData.selected_emojis || [];\r\n        if (emojis.length > 0) {\r\n          setEmojiPositions(generateRandomPositions(emojis.length));\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Failed to load student profile:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadStudentProfile();\r\n  }, [id, currentUser]);\r\n\r\n  // Function to generate random positions for emojis\r\n  const generateRandomPositions = (emojiCount) => {\r\n    const positions = [];\r\n    for (let i = 0; i < emojiCount; i++) {\r\n      positions.push({\r\n        left: Math.random() * 100,\r\n        top: Math.random() * 100,\r\n        delay: Math.random() * 5,\r\n        duration: 15 + Math.random() * 10,\r\n        scale: 0.7 + Math.random() * 0.6,\r\n        rotation: Math.random() * 360\r\n      });\r\n    }\r\n    return positions;\r\n  };\r\n\r\n  // Calculate statistics\r\n  const totalTests = attempts.length;\r\n  const scores = attempts.map(attempt => attempt.score || 0);\r\n  const averageScore = scores.length > 0\r\n    ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n    : 0;\r\n  const highestScore = scores.length > 0\r\n    ? Math.round(Math.max(...scores))\r\n    : 0;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        paddingTop: '32px',\r\n        paddingBottom: '32px',\r\n        backgroundColor: '#ffffff',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px',\r\n        gap: '16px'\r\n      }}>\r\n        <Text>Yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !student) {\r\n    return (\r\n      <div style={{\r\n        paddingTop: '32px',\r\n        paddingBottom: '32px',\r\n        backgroundColor: '#ffffff',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px'\r\n      }}>\r\n        <Text type=\"danger\">{error || 'O\\'quvchi topilmadi'}</Text>\r\n        <Button\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={() => navigate(-1)}\r\n          style={{ marginTop: '8px' }}\r\n        >\r\n          Orqaga\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const profileBackgroundStyle = shouldShowPremiumFeatures(student, currentUser) && student.background_gradient\r\n    ? {\r\n      background: (typeof student.background_gradient === 'string'\r\n        ? JSON.parse(student.background_gradient).css\r\n        : student.background_gradient.css)\r\n    }\r\n    : shouldShowPremiumFeatures(student, currentUser)\r\n      ? {\r\n        background: `\r\n            radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),\r\n            radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),\r\n            linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)\r\n          `\r\n      }\r\n      : { background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)' };\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{ paddingTop: '0', paddingBottom: '16px', backgroundColor: '#ffffff' }}>\r\n      {/* Header */}\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n          O'quvchi profili\r\n        </div>\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexWrap: 'wrap', gap: '24px' }}>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b', margin: 0 }}>\r\n            Sinfdosh <span style={{ color: '#2563eb' }}>Profili</span>\r\n          </Title>\r\n          <Button\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={() => navigate(-1)}\r\n            style={{\r\n              borderColor: '#e2e8f0',\r\n              borderWidth: '2px',\r\n              color: '#64748b',\r\n              fontWeight: 900,\r\n              borderRadius: 0,\r\n              boxShadow: '4px 4px 0px rgba(0,0,0,0.05)',\r\n              height: 'auto',\r\n              padding: '12px 24px',\r\n              textTransform: 'uppercase'\r\n            }}\r\n          >\r\n            ORQAGA\r\n          </Button>\r\n        </div>\r\n        <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n        <Text style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px', display: 'block' }}>\r\n          Sinfdoshingizning yutuqlari, statistikasi va premium imkoniyatlari bilan tanishing.\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Premium Profile Card */}\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '200ms' }}>\r\n        <Card style={{\r\n          marginBottom: '32px',\r\n          ...profileBackgroundStyle,\r\n          borderRadius: 0,\r\n          border: '6px solid #1e293b',\r\n          boxShadow: '16px 16px 0px rgba(0,0,0,0.1)',\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n          minHeight: '280px',\r\n        }}>\r\n          {/* Premium Badge */}\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: 20,\r\n            right: 20,\r\n            zIndex: 2\r\n          }}>\r\n            <div\r\n              style={{\r\n                backgroundColor: '#fff',\r\n                color: '#d97706',\r\n                fontWeight: 900,\r\n                fontSize: '0.75rem',\r\n                padding: '8px 16px',\r\n                border: '3px solid #d97706',\r\n                boxShadow: '4px 4px 0px rgba(217, 119, 6, 0.2)',\r\n                textTransform: 'uppercase'\r\n              }}\r\n            >\r\n              PREMIUM\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: { xs: 'column', md: 'row' },\r\n            alignItems: 'center',\r\n            padding: '24px',\r\n            minHeight: '200px',\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n          }}>\r\n            {/* CSS Animations for Swimming Emojis */}\r\n            <style>{`\r\n            ${Array.from({ length: 20 }).map((_, i) => `\r\n              @keyframes swimAllEmojis-${i} {\r\n                0% { \r\n                  transform: translateX(${(i % 4 - 2) * 25}%) translateY(0%) rotate(${i * 18}deg) scale(${0.7 + (i % 3) * 0.1}); \r\n                }\r\n                25% { \r\n                  transform: translateX(${(i % 4 - 1) * 25}%) translateY(-20%) rotate(${i * 18 + 90}deg) scale(${0.7 + ((i + 1) % 3) * 0.1}); \r\n                }\r\n                50% { \r\n                  transform: translateX(${(i % 4) * 25}%) translateY(-40%) rotate(${i * 18 + 180}deg) scale(${0.7 + ((i + 2) % 3) * 0.1}); \r\n                }\r\n                75% { \r\n                  transform: translateX(${(i % 4 + 1) * 25}%) translateY(-20%) rotate(${i * 18 + 270}deg) scale(${0.7 + ((i + 1) % 3) * 0.1}); \r\n                }\r\n                100% { \r\n                  transform: translateX(${(i % 4 - 2) * 25}%) translateY(0%) rotate(${i * 18 + 360}deg) scale(${0.7 + (i % 3) * 0.1}); \r\n                }\r\n              }\r\n            `).join('')}\r\n          `}</style>\r\n\r\n            {/* Emoji Background for Premium Users */}\r\n            {shouldShowPremiumFeatures(student, currentUser) && student.selected_emojis && student.selected_emojis.length > 0 && (\r\n              <div style={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                pointerEvents: 'none',\r\n                zIndex: 1,\r\n                overflow: 'hidden'\r\n              }}>\r\n                {/* Floating emoji animation container */}\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  right: 0,\r\n                  bottom: 0,\r\n                  animation: 'swimEmojis 25s infinite linear'\r\n                }}>\r\n                  {/* Random positioned animated emojis */}\r\n                  {student.selected_emojis.map((emoji, index) => {\r\n                    const position = emojiPositions[index] || {\r\n                      left: Math.random() * 100,\r\n                      top: Math.random() * 100,\r\n                      delay: Math.random() * 5,\r\n                      duration: 15 + Math.random() * 10,\r\n                      scale: 0.7 + Math.random() * 0.6,\r\n                      rotation: Math.random() * 360\r\n                    };\r\n\r\n                    return (\r\n                      <div\r\n                        key={`emoji-${index}`}\r\n                        style={{\r\n                          position: 'absolute',\r\n                          fontSize: '3rem',\r\n                          opacity: 0.25 + (index % 3) * 0.05,\r\n                          color: 'rgba(255, 255, 255, 0.9)',\r\n                          filter: 'drop-shadow(0 4px 12px rgba(0,0,0,0.5))',\r\n                          left: `${position.left}%`,\r\n                          top: `${position.top}%`,\r\n                          transform: `rotate(${position.rotation}deg) scale(${position.scale})`,\r\n                          animation: `swimAllEmojis-${index % 20} ${position.duration}s infinite ease-in-out`,\r\n                          animationDelay: `${position.delay}s`,\r\n                          zIndex: 1\r\n                        }}\r\n                      >\r\n                        {emoji}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Profile Photo */}\r\n            <div style={{\r\n              position: 'relative',\r\n              marginBottom: { xs: '12px', md: 0 },\r\n              marginRight: { xs: 0, md: '16px' },\r\n              zIndex: 3\r\n            }}>\r\n              {student.profile_photo ? (\r\n                <Avatar\r\n                  src={student.profile_photo}\r\n                  size={160}\r\n                  style={{\r\n                    borderRadius: 0,\r\n                    border: '6px solid #fff',\r\n                    boxShadow: '6px 6px 0px rgba(0,0,0,0.1)',\r\n                    backgroundColor: shouldShowPremiumFeatures(student, currentUser) ? '#ffffff' : '#2563eb'\r\n                  }}\r\n                >\r\n                  {student.name.charAt(0).toUpperCase()}\r\n                </Avatar>\r\n              ) : (\r\n                <Avatar\r\n                  size={160}\r\n                  style={{\r\n                    fontSize: '5rem',\r\n                    fontWeight: 900,\r\n                    borderRadius: 0,\r\n                    border: '6px solid #fff',\r\n                    boxShadow: '6px 6px 0px rgba(0,0,0,0.1)',\r\n                    backgroundColor: shouldShowPremiumFeatures(student, currentUser) ? '#ffffff' : '#2563eb',\r\n                    color: shouldShowPremiumFeatures(student, currentUser) ? '#2563eb' : '#ffffff'\r\n                  }}\r\n                >\r\n                  {student.name.charAt(0).toUpperCase()}\r\n                </Avatar>\r\n              )}\r\n\r\n              {/* Premium Checkmark */}\r\n              {shouldShowPremiumFeatures(student, currentUser) && (\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  bottom: -10,\r\n                  right: -10,\r\n                  backgroundColor: '#10b981',\r\n                  width: 48,\r\n                  height: 48,\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  border: '4px solid #fff',\r\n                  boxShadow: '4px 4px 0px rgba(0,0,0,0.1)',\r\n                  zIndex: 4\r\n                }}>\r\n                  <CheckCircleOutlined style={{ color: 'white', fontSize: '1.8rem' }} />\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Profile Info */}\r\n            <div style={{\r\n              textAlign: { xs: 'center', md: 'left' },\r\n              flex: 1,\r\n              color: student.is_premium ? '#ffffff' : '#1e293b',\r\n              position: 'relative',\r\n              marginLeft: '16px',\r\n              zIndex: 2\r\n            }}>\r\n              <Title level={2} style={{\r\n                fontWeight: 900,\r\n                fontSize: '3.5rem',\r\n                marginBottom: '8px',\r\n                textShadow: student.is_premium ? '4px 4px 0px rgba(0,0,0,0.2)' : 'none',\r\n                color: student.is_premium ? '#ffffff' : '#1e293b',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '-0.02em'\r\n              }}>\r\n                {student.name}\r\n              </Title>\r\n\r\n              {student.profile_status && (\r\n                <div style={{\r\n                  backgroundColor: 'rgba(255,255,255,0.1)',\r\n                  padding: '12px 20px',\r\n                  borderLeft: '6px solid #fff',\r\n                  marginBottom: '20px',\r\n                  maxWidth: '500px'\r\n                }}>\r\n                  <Text style={{\r\n                    fontSize: '1.2rem',\r\n                    fontWeight: 600,\r\n                    fontStyle: 'italic',\r\n                    color: student.is_premium ? '#ffffff' : '#1e293b'\r\n                  }}>\r\n                    \"{student.profile_status}\"\r\n                  </Text>\r\n                </div>\r\n              )}\r\n\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '12px', justifyContent: { xs: 'center', md: 'flex-start' } }}>\r\n                <div\r\n                  style={{\r\n                    backgroundColor: student.is_premium ? 'rgba(255, 255, 255, 0.2)' : '#ecfdf5',\r\n                    color: student.is_premium ? '#ffffff' : '#059669',\r\n                    border: '2px solid #fff',\r\n                    fontWeight: 900,\r\n                    fontSize: '0.75rem',\r\n                    padding: '4px 12px',\r\n                    textTransform: 'uppercase'\r\n                  }}\r\n                >\r\n                  O'quvchi\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    backgroundColor: student.is_premium ? 'rgba(255, 255, 255, 0.2)' : '#eff6ff',\r\n                    color: student.is_premium ? '#ffffff' : '#2563eb',\r\n                    border: '2px solid #fff',\r\n                    fontWeight: 900,\r\n                    fontSize: '0.75rem',\r\n                    padding: '4px 12px',\r\n                    textTransform: 'uppercase'\r\n                  }}\r\n                >\r\n                  {student.class_group || 'Noma\\'lum'} sinf\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    backgroundColor: student.is_premium ? 'rgba(255, 255, 255, 0.2)' : '#f3f4f6',\r\n                    color: student.is_premium ? '#ffffff' : '#374151',\r\n                    border: '2px solid #fff',\r\n                    fontWeight: 900,\r\n                    fontSize: '0.75rem',\r\n                    padding: '4px 12px',\r\n                    textTransform: 'uppercase'\r\n                  }}\r\n                >\r\n                  {student.direction === 'natural' ? 'Tabiiy fanlar' : student.direction === 'exact' ? 'Aniq fanlar' : 'Yo\\'nalish yo\\'q'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '400ms' }}>\r\n        <Row gutter={[16, 16]} style={{ marginBottom: '16px' }}>\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"Jami testlar\"\r\n              value={totalTests}\r\n              icon={<BarChartOutlined />}\r\n              color=\"#2563eb\"\r\n            />\r\n          </Col>\r\n\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"O'rtacha ball\"\r\n              value={averageScore}\r\n              suffix=\"%\"\r\n              icon={<TrophyOutlined />}\r\n              color=\"#16a34a\"\r\n            />\r\n          </Col>\r\n\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"Eng yuqori ball\"\r\n              value={highestScore}\r\n              suffix=\"%\"\r\n              icon={<TrophyOutlined />}\r\n              color=\"#059669\"\r\n            />\r\n          </Col>\r\n\r\n          <Col xs={24} sm={12} md={6}>\r\n            <StatCard\r\n              title=\"Premium status\"\r\n              icon={<TrophyOutlined />}\r\n              color={student.is_premium ? '#fef3c7' : '#f3f4f6'}\r\n              iconColor={student.is_premium ? '#d97706' : '#6b7280'}\r\n              valueComponent={\r\n                <div>\r\n                  <Title level={3} style={{\r\n                    fontSize: '2rem',\r\n                    fontWeight: 700,\r\n                    color: student.is_premium ? '#d97706' : '#64748b',\r\n                    lineHeight: 1.2,\r\n                    marginBottom: student.is_premium ? 0 : '8px'\r\n                  }}>\r\n                    {student.is_premium ? 'Faol' : 'Yo\\'q'}\r\n                  </Title>\r\n                </div>\r\n              }\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentProfileView;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\StudentStatistics.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":102,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[2008,2013],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'i' is defined but never used.","line":524,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":524,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"i"},"fix":{"range":[21058,21061],"text":""},"desc":"Remove unused variable 'i'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Statistic,\r\n  Progress,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Button,\r\n  Tooltip,\r\n  Switch,\r\n  Rate,\r\n  Timeline,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  BookOutlined,\r\n  UserOutlined,\r\n  RiseOutlined,\r\n  TrophyOutlined,\r\n  ClockCircleOutlined,\r\n  CalendarOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  InfoCircleOutlined,\r\n  PlayCircleOutlined,\r\n  CheckCircleOutlined,\r\n  LineChartOutlined,\r\n  BarChartOutlined,\r\n  PieChartOutlined,\r\n  StarOutlined,\r\n  SafetyCertificateOutlined,\r\n  TeamOutlined,\r\n  ReadOutlined,\r\n  FundOutlined,\r\n  ThunderboltOutlined,\r\n  FireOutlined,\r\n  SettingOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title as ChartTitle,\r\n  Tooltip as ChartTooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line, Bar, Radar } from 'react-chartjs-2';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\n// Register Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  ChartTitle,\r\n  ChartTooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst StudentStatistics = () => {\r\n  const { currentUser } = useAuth();\r\n  const [stats, setStats] = useState({\r\n    totalTests: 0,\r\n    completedTests: 0,\r\n    averageScore: 0,\r\n    highestScore: 0,\r\n    lowestScore: 0,\r\n    totalAttempts: 0,\r\n    stars: 0,\r\n    classmatesCount: 0,\r\n    classActiveCount: 0,\r\n    recentActivity: [],\r\n    subjectPerformance: [],\r\n    monthlyProgress: [],\r\n    difficultyAnalysis: [],\r\n    recentTests: [],\r\n    improvementTrend: [],\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Chart visibility states\r\n  const [visibleCharts, setVisibleCharts] = useState({\r\n    monthlyTrend: true,\r\n    difficultyRadar: true,\r\n    subjectBars: true,\r\n    testHistory: true,\r\n    activityTimeline: true,\r\n  });\r\n\r\n  // Toggle chart helper\r\n  const toggleChart = (key) => {\r\n    setVisibleCharts(prev => ({ ...prev, [key]: !prev[key] }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchStudentStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const [attemptsData, testsData, userData, allUsersData] = await Promise.all([\r\n          apiService.getAttempts({ student: currentUser.id }),\r\n          apiService.getTests(),\r\n          apiService.getUser(currentUser.id),\r\n          apiService.getUsers()\r\n        ]);\r\n\r\n        const attempts = attemptsData.results || attemptsData;\r\n        const tests = testsData.results || testsData;\r\n        const user = userData;\r\n        const allUsers = allUsersData.results || allUsersData;\r\n\r\n        // Class info\r\n        const classGroup = currentUser?.class_group || 'Noma\\'lum';\r\n        const classStudents = allUsers.filter(u => u.role === 'student' && u.class_group === classGroup);\r\n        const classActiveCount = classStudents.filter(u => !u.is_banned).length;\r\n\r\n        // Calculate test statistics\r\n        const completedAttempts = attempts.filter(attempt => attempt.submitted_at);\r\n        const scores = completedAttempts.map(attempt => attempt.score || 0);\r\n\r\n        const averageScore = scores.length > 0\r\n          ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n          : 0;\r\n\r\n        const highestScore = scores.length > 0 ? Math.max(...scores) : 0;\r\n        const lowestScore = scores.length > 0 ? Math.min(...scores) : 0;\r\n\r\n        // Subject performance analysis\r\n        const subjectGroups = {};\r\n        completedAttempts.forEach(attempt => {\r\n          const test = tests.find(t => t.id === attempt.test);\r\n          const subject = test?.subject || 'Noma\\'lum fan';\r\n\r\n          if (!subjectGroups[subject]) {\r\n            subjectGroups[subject] = [];\r\n          }\r\n          subjectGroups[subject].push(attempt.score || 0);\r\n        });\r\n\r\n        const subjectPerformance = Object.entries(subjectGroups).map(([subject, s]) => ({\r\n          subject,\r\n          averageScore: Math.round(s.reduce((a, b) => a + b, 0) / s.length),\r\n        })).sort((a, b) => b.averageScore - a.averageScore);\r\n\r\n        // Monthly progress\r\n        const monthlyGroups = {};\r\n        const monthNames = [\"Yan\", \"Fev\", \"Mar\", \"Apr\", \"May\", \"Iyun\", \"Iyul\", \"Avg\", \"Sen\", \"Okt\", \"Noy\", \"Dek\"];\r\n\r\n        // Sort chronologically first to ensure correct accumulation order\r\n        const sortedAttempts = [...completedAttempts].sort((a, b) => new Date(a.submitted_at) - new Date(b.submitted_at));\r\n\r\n        sortedAttempts.forEach(attempt => {\r\n          if (!attempt.submitted_at) return;\r\n          const date = new Date(attempt.submitted_at);\r\n          const monthIdx = date.getMonth();\r\n          const year = date.getFullYear();\r\n          const key = `${year}-${monthIdx}`; // Unique key per month-year\r\n\r\n          if (!monthlyGroups[key]) {\r\n            monthlyGroups[key] = {\r\n              total: 0,\r\n              count: 0,\r\n              monthName: monthNames[monthIdx],\r\n              date: date // For sorting if needed\r\n            };\r\n          }\r\n          monthlyGroups[key].total += (attempt.score || 0);\r\n          monthlyGroups[key].count += 1;\r\n        });\r\n\r\n        const monthlyProgress = Object.values(monthlyGroups)\r\n          .sort((a, b) => a.date - b.date)\r\n          .slice(-6) // Take last 6 months\r\n          .map(item => ({\r\n            month: item.monthName,\r\n            average: Math.round(item.total / item.count)\r\n          }));\r\n\r\n        // Fill with current month if empty\r\n        if (monthlyProgress.length === 0) {\r\n          const currentMonth = new Date().getMonth();\r\n          monthlyProgress.push({ month: monthNames[currentMonth], average: 0 });\r\n        }\r\n\r\n        // Difficulty analysis\r\n        const difficultyGroups = { 'Oson': [], 'O\\'rta': [], 'Qiyin': [] };\r\n\r\n        const difficultyMap = {\r\n          'easy': 'Oson',\r\n          'medium': \"O'rta\",\r\n          'hard': 'Qiyin',\r\n          'oson': 'Oson',\r\n          'o\\'rta': \"O'rta\",\r\n          'orta': \"O'rta\",\r\n          'qiyin': 'Qiyin'\r\n        };\r\n\r\n        completedAttempts.forEach(attempt => {\r\n          const test = tests.find(t => t.id === attempt.test);\r\n          const rawDifficulty = (test?.difficulty || 'medium').toLowerCase();\r\n          const difficultyKey = difficultyMap[rawDifficulty] || \"O'rta\";\r\n\r\n          if (difficultyGroups[difficultyKey]) {\r\n            difficultyGroups[difficultyKey].push(attempt.score || 0);\r\n          }\r\n        });\r\n\r\n        const difficultyAnalysis = Object.entries(difficultyGroups).map(([difficulty, s]) => ({\r\n          difficulty,\r\n          averageScore: s.length > 0 ? Math.round(s.reduce((a, b) => a + b, 0) / s.length) : 0,\r\n        }));\r\n\r\n        setStats({\r\n          totalTests: tests.length,\r\n          completedTests: completedAttempts.length,\r\n          averageScore,\r\n          highestScore,\r\n          lowestScore,\r\n          totalAttempts: attempts.length,\r\n          stars: user.stars || 0,\r\n          classmatesCount: classStudents.length,\r\n          classActiveCount,\r\n          subjectPerformance,\r\n          monthlyProgress,\r\n          difficultyAnalysis,\r\n          recentTests: completedAttempts.sort((a, b) => new Date(b.submitted_at) - new Date(a.submitted_at)).slice(0, 5).map(a => {\r\n            const t = tests.find(test => test.id === a.test);\r\n            return {\r\n              id: a.id,\r\n              title: t?.title || 'Noma\\'lum',\r\n              subject: t?.subject || 'Noma\\'lum',\r\n              score: a.score || 0,\r\n              date: new Date(a.submitted_at).toLocaleDateString('uz-UZ'),\r\n            };\r\n          }),\r\n          recentActivity: completedAttempts.slice(0, 5).map(a => {\r\n            const t = tests.find(test => test.id === a.test);\r\n            return {\r\n              test: t?.title || 'Test',\r\n              score: a.score || 0,\r\n              subject: t?.subject || 'Fan',\r\n              time: new Date(a.submitted_at).toLocaleDateString('uz-UZ'),\r\n            };\r\n          })\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (currentUser) {\r\n      fetchStudentStatistics();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const StatCard = ({ title, value, icon, suffix, description, color = '#2563eb' }) => (\r\n    <Card\r\n      style={{\r\n        backgroundColor: '#ffffff',\r\n        border: `4px solid ${color}`,\r\n        borderRadius: 0,\r\n        boxShadow: `8px 8px 0px ${color}20`,\r\n        height: '100%',\r\n      }}\r\n      bodyStyle={{ padding: '20px' }}\r\n    >\r\n      <div style={{\r\n        backgroundColor: color,\r\n        width: '40px',\r\n        height: '40px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: '#fff',\r\n        marginBottom: '12px'\r\n      }}>\r\n        {React.cloneElement(icon, { style: { fontSize: '20px' } })}\r\n      </div>\r\n      <Text style={{ fontSize: '10px', fontWeight: 900, textTransform: 'uppercase', color: '#64748b', display: 'block' }}>\r\n        {title}\r\n      </Text>\r\n      <Title level={2} style={{ margin: '4px 0', fontWeight: 900, fontSize: '2.5rem', lineHeight: 1, color: '#1e293b' }}>\r\n        {value}{suffix}\r\n      </Title>\r\n      {description && <Text style={{ fontSize: '11px', fontWeight: 700, color: '#94a3b8' }}>{description}</Text>}\r\n    </Card>\r\n  );\r\n\r\n  const getPerformanceColor = (score) => {\r\n    if (score >= 80) return '#059669';\r\n    if (score >= 60) return '#2563eb';\r\n    return '#dc2626';\r\n  };\r\n\r\n  if (loading) return <div style={{ display: 'flex', justifyContent: 'center', padding: '100px' }}><Spin size=\"large\" /><Text style={{ marginLeft: '16px', fontWeight: 900 }}>YUKLANMOQDA...</Text></div>;\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Statistika\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b' }}>\r\n            Mening <span style={{ color: '#2563eb' }}>statistikam</span>\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Sizning o'quv natijalaringiz, o'zlashtirish ko'rsatkichlaringiz va fanlar bo'yicha tahliliy ma'lumotlaringiz.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {/* Image Matching Card (The Black One) */}\r\n        <div className=\"animate__animated animate__fadeInUp\" style={{\r\n          background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\r\n          color: '#fff',\r\n          padding: '32px',\r\n          border: '4px solid #1e293b',\r\n          boxShadow: '10px 10px 0px rgba(30, 41, 59, 0.2)',\r\n          marginBottom: '60px',\r\n          position: 'relative',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <div style={{ position: 'relative', zIndex: 2 }}>\r\n            <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900, textTransform: 'uppercase' }}>\r\n              Sinf guruhingiz: {currentUser?.class_group || 'NOMA\\'LUM'}\r\n            </Title>\r\n            <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800 }}>\r\n              Jami {stats.classmatesCount} o'quvchi, shundan {stats.classActiveCount} nafari faol.\r\n            </Text>\r\n          </div>\r\n          <TeamOutlined style={{\r\n            position: 'absolute',\r\n            right: '-20px',\r\n            bottom: '-20px',\r\n            fontSize: '180px',\r\n            color: 'rgba(255,255,255,0.07)'\r\n          }} />\r\n        </div>\r\n\r\n        {/* Chart Controls */}\r\n        <Card style={{ border: '4px solid #1e293b', boxShadow: '8px 8px 0px rgba(30, 41, 59, 0.1)', marginBottom: '40px' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}><SettingOutlined /> KO'RSATKICHLARNI BOSHQARISH</Text>}>\r\n          <Row gutter={[24, 16]}>\r\n            {[\r\n              { key: 'monthlyTrend', label: 'Oylik dinamika' },\r\n              { key: 'difficultyRadar', label: 'Qiyinchilik tahlili' },\r\n              { key: 'subjectBars', label: 'Fan ko\\'rsatkichlari' },\r\n              { key: 'testHistory', label: 'Testlar tarixi' },\r\n              { key: 'activityTimeline', label: 'Harakatlar xronikasi' }\r\n            ].map(item => (\r\n              <Col xs={12} sm={8} key={item.key}>\r\n                <Space>\r\n                  <Switch size=\"small\" checked={visibleCharts[item.key]} onChange={() => toggleChart(item.key)} />\r\n                  <Text style={{ fontSize: '10px', fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}>{item.label}</Text>\r\n                </Space>\r\n              </Col>\r\n            ))}\r\n          </Row>\r\n        </Card>\r\n\r\n        {/* Stats Grid */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '60px' }}>\r\n          <Col xs={24} sm={12} lg={6}><StatCard title=\"O'rtacha ball\" value={stats.averageScore} suffix=\"%\" icon={<RiseOutlined />} description=\"Barcha testlar bo'yicha\" color=\"#2563eb\" /></Col>\r\n          <Col xs={24} sm={12} lg={6}><StatCard title=\"Testlar\" value={stats.completedTests} icon={<BookOutlined />} description=\"Topshirilgan jami\" color=\"#059669\" /></Col>\r\n          <Col xs={24} sm={12} lg={6}><StatCard title=\"Eng yuqori\" value={stats.highestScore} suffix=\"%\" icon={<TrophyOutlined />} description=\"Rekord natijangiz\" color=\"#f59e0b\" /></Col>\r\n          <Col xs={24} sm={12} lg={6}><StatCard title=\"Yulduzlar\" value={stats.stars} icon={<StarOutlined />} description=\"To'plangan bonuslar\" color=\"#7c3aed\" /></Col>\r\n        </Row>\r\n\r\n        <Row gutter={[32, 32]}>\r\n          {/* Trends */}\r\n          {visibleCharts.monthlyTrend && (\r\n            <Col xs={24} lg={16}>\r\n              <Card style={{ border: '4px solid #2563eb', boxShadow: '12px 12px 0px rgba(37, 99, 235, 0.1)' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#2563eb' }}>Oylik o'sish dinamikasi</Text>}>\r\n                <div style={{ height: '350px' }}>\r\n                  <Line\r\n                    data={{\r\n                      labels: stats.monthlyProgress.map(m => m.month),\r\n                      datasets: [{\r\n                        label: 'O\\'rtacha ball',\r\n                        data: stats.monthlyProgress.map(m => m.average),\r\n                        borderColor: '#2563eb',\r\n                        borderWidth: 4,\r\n                        pointRadius: 6,\r\n                        pointBackgroundColor: '#fff',\r\n                        pointBorderWidth: 4,\r\n                        fill: true,\r\n                        backgroundColor: 'rgba(37, 99, 235, 0.05)',\r\n                        tension: 0\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      maintainAspectRatio: false,\r\n                      plugins: { legend: { display: false } },\r\n                      scales: {\r\n                        x: { grid: { display: false }, ticks: { font: { weight: 700 }, color: '#1e293b' } },\r\n                        y: { min: 0, max: 100, grid: { borderDash: [5, 5], color: '#f1f5f9' }, ticks: { font: { weight: 700 }, color: '#1e293b' } }\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Radar */}\r\n          {visibleCharts.difficultyRadar && (\r\n            <Col xs={24} lg={8}>\r\n              <Card style={{ border: '4px solid #f59e0b', boxShadow: '12px 12px 0px rgba(245, 158, 11, 0.1)', height: '100%' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#f59e0b' }}>Qiyinchilik tahlili</Text>}>\r\n                <div style={{ height: '350px' }}>\r\n                  <Radar\r\n                    data={{\r\n                      labels: stats.difficultyAnalysis.map(d => d.difficulty),\r\n                      datasets: [{\r\n                        label: 'O\\'rtacha ball',\r\n                        data: stats.difficultyAnalysis.map(d => d.averageScore),\r\n                        backgroundColor: 'rgba(37, 99, 235, 0.1)',\r\n                        borderColor: '#2563eb',\r\n                        borderWidth: 3,\r\n                        pointBackgroundColor: '#2563eb'\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      maintainAspectRatio: false,\r\n                      scales: {\r\n                        r: {\r\n                          beginAtZero: true,\r\n                          max: 100,\r\n                          ticks: { display: false },\r\n                          pointLabels: { font: { weight: 800, size: 12 }, color: '#1e293b' }\r\n                        }\r\n                      },\r\n                      plugins: { legend: { display: false } }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Bars */}\r\n          {visibleCharts.subjectBars && (\r\n            <Col xs={24} lg={12}>\r\n              <Card style={{ border: '4px solid #059669', boxShadow: '12px 12px 0px rgba(5, 150, 105, 0.1)' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#059669' }}>Fanlar bo'yicha ko'rsatkichlar</Text>}>\r\n                <div style={{ height: '350px' }}>\r\n                  <Bar\r\n                    data={{\r\n                      labels: stats.subjectPerformance.map(s => s.subject),\r\n                      datasets: [{\r\n                        data: stats.subjectPerformance.map(s => s.averageScore),\r\n                        backgroundColor: '#2563eb',\r\n                        barThickness: 30\r\n                      }]\r\n                    }}\r\n                    options={{\r\n                      responsive: true,\r\n                      maintainAspectRatio: false,\r\n                      plugins: { legend: { display: false } },\r\n                      scales: {\r\n                        x: { grid: { display: false }, ticks: { font: { weight: 700 }, color: '#1e293b' } },\r\n                        y: { min: 0, max: 100, grid: { borderDash: [5, 5], color: '#f1f5f9' }, ticks: { font: { weight: 700 }, color: '#1e293b' } }\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Table */}\r\n          {visibleCharts.testHistory && (\r\n            <Col xs={24} lg={12}>\r\n              <Card style={{ border: '4px solid #7c3aed', boxShadow: '12px 12px 0px rgba(124, 58, 237, 0.1)' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#7c3aed' }}>So'nggi testlar tarixi</Text>}>\r\n                <Table\r\n                  dataSource={stats.recentTests}\r\n                  pagination={false}\r\n                  size=\"small\"\r\n                  rowKey=\"id\"\r\n                  columns={[\r\n                    { title: 'Test', dataIndex: 'title', key: 'title', render: (t) => <Text style={{ fontWeight: 800, color: '#1e293b' }}>{t}</Text> },\r\n                    { title: 'Ball', dataIndex: 'score', key: 'score', render: (s) => <Tag style={{ borderRadius: 0, border: `2px solid ${getPerformanceColor(s)}`, fontWeight: 900, color: getPerformanceColor(s), backgroundColor: getPerformanceColor(s) + '10' }}>{s}%</Tag> },\r\n                    { title: 'Sana', dataIndex: 'date', key: 'date', render: (d) => <Text style={{ fontWeight: 700, fontSize: '11px', color: '#64748b' }}>{d}</Text> },\r\n                  ]}\r\n                />\r\n              </Card>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Timeline */}\r\n          {visibleCharts.activityTimeline && (\r\n            <Col xs={24}>\r\n              <Card style={{ border: '4px solid #1e293b', boxShadow: '12px 12px 0px rgba(30, 41, 59, 0.1)' }} title={<Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}>So'nggi harakatlar</Text>}>\r\n                <Timeline\r\n                  mode=\"alternate\"\r\n                  items={stats.recentActivity.map((a, i) => ({\r\n                    label: <Text style={{ fontWeight: 800, color: '#64748b' }}>{a.time}</Text>,\r\n                    dot: <FireOutlined style={{ fontSize: '18px', color: '#2563eb' }} />,\r\n                    children: (\r\n                      <div className=\"animate__animated animate__fadeIn\" style={{ backgroundColor: '#fff', border: '3px solid #1e293b', padding: '12px', boxShadow: '4px 4px 0px rgba(30, 41, 59, 0.1)', marginBottom: '16px' }}>\r\n                        <Text style={{ fontWeight: 900, display: 'block', color: '#1e293b' }}>{a.test}</Text>\r\n                        <Text style={{ fontSize: '12px', fontWeight: 700, color: '#64748b' }}>Fan: {a.subject}</Text>\r\n                        <Divider style={{ margin: '8px 0', borderColor: '#f1f5f9' }} />\r\n                        <Text style={{ fontWeight: 900, fontSize: '1.5rem', color: getPerformanceColor(a.score) }}>{a.score}%</Text>\r\n                      </div>\r\n                    )\r\n                  }))}\r\n                />\r\n              </Card>\r\n            </Col>\r\n          )}\r\n        </Row>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default StudentStatistics;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\StudentsRating.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":41,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[880,885],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getCardBg' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":132,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"getCardBg"},"fix":{"range":[4087,4259],"text":""},"desc":"Remove unused variable 'getCardBg'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Typography,\r\n  Alert,\r\n  Spin,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Input,\r\n  Avatar,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  TrophyOutlined,\r\n  SearchOutlined,\r\n  ArrowUpOutlined,\r\n  ArrowDownOutlined,\r\n  StarOutlined,\r\n  FireOutlined,\r\n  ThunderboltOutlined,\r\n  TeamOutlined,\r\n  CrownFilled,\r\n  StarFilled,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst StudentsRating = () => {\r\n  const { currentUser } = useAuth();\r\n  const [students, setStudents] = useState([]);\r\n  const [filteredStudents, setFilteredStudents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [myRank, setMyRank] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchStudentsRating = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const [usersData, attemptsData] = await Promise.all([\r\n          apiService.getUsers(),\r\n          apiService.getAttempts()\r\n        ]);\r\n\r\n        const users = usersData.results || usersData;\r\n        const attempts = attemptsData.results || attemptsData;\r\n\r\n        // Calculate student statistics\r\n        const studentAnalytics = users\r\n          .filter(user => user.role === 'student')\r\n          .map(student => {\r\n            const studentAttempts = attempts.filter(a => a.student === student.id);\r\n            const testCount = studentAttempts.length;\r\n            const scores = studentAttempts.map(a => a.score || 0);\r\n            const averageScore = scores.length > 0\r\n              ? Math.round(scores.reduce((sum, s) => sum + s, 0) / scores.length)\r\n              : 0;\r\n            const highestScore = scores.length > 0 ? Math.max(...scores) : 0;\r\n\r\n            return {\r\n              id: student.id,\r\n              name: student.name || student.username,\r\n              classGroup: student.class_group || 'Noma\\'lum',\r\n              testCount,\r\n              averageScore,\r\n              highestScore,\r\n              isBanned: student.is_banned,\r\n              profilePhoto: student.profile_photo_url,\r\n              stars: student.stars || 0\r\n            };\r\n          })\r\n          .filter(student => student.testCount > 0 && !student.isBanned)\r\n          .sort((a, b) => {\r\n            if (b.averageScore !== a.averageScore) {\r\n              return b.averageScore - a.averageScore;\r\n            }\r\n            return b.testCount - a.testCount;\r\n          });\r\n\r\n        const rankedStudents = studentAnalytics.map((student, index) => ({\r\n          ...student,\r\n          rank: index + 1\r\n        }));\r\n\r\n        setStudents(rankedStudents);\r\n        setFilteredStudents(rankedStudents);\r\n\r\n        const currentUserRank = rankedStudents.findIndex(s => s.id === currentUser?.id);\r\n        if (currentUserRank !== -1) {\r\n          setMyRank(currentUserRank + 1);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching students rating:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (currentUser) {\r\n      fetchStudentsRating();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const handleSearch = (value) => {\r\n    setSearchText(value);\r\n    const filtered = students.filter(student =>\r\n      student.name.toLowerCase().includes(value.toLowerCase()) ||\r\n      student.classGroup.toLowerCase().includes(value.toLowerCase())\r\n    );\r\n    setFilteredStudents(filtered);\r\n  };\r\n\r\n  const getRankIcon = (rank) => {\r\n    if (rank === 1) return <CrownFilled style={{ color: '#f59e0b', fontSize: '32px' }} />;\r\n    if (rank === 2) return <TrophyOutlined style={{ color: '#94a3b8', fontSize: '32px' }} />;\r\n    if (rank === 3) return <TrophyOutlined style={{ color: '#d97706', fontSize: '32px' }} />;\r\n    return null;\r\n  };\r\n\r\n  const getCardBg = (rank) => {\r\n    if (rank === 1) return '#fffbeb';\r\n    if (rank === 2) return '#f8fafc';\r\n    if (rank === 3) return '#fff7ed';\r\n    return '#fff';\r\n  };\r\n\r\n  const getRankColor = (rank) => {\r\n    if (rank === 1) return '#f59e0b';\r\n    if (rank === 2) return '#64748b';\r\n    if (rank === 3) return '#d97706';\r\n    return '#000';\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'O\\'rin',\r\n      key: 'rank',\r\n      width: 100,\r\n      render: (_, record) => (\r\n        <div style={{ textAlign: 'center' }}>\r\n          {record.rank <= 3 ? (\r\n            getRankIcon(record.rank)\r\n          ) : (\r\n            <Text style={{ fontWeight: 900, fontSize: '18px', color: '#000' }}>\r\n              #{record.rank}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'quvchi',\r\n      key: 'name',\r\n      render: (_, record) => (\r\n        <Space size=\"large\">\r\n          <Avatar\r\n            size={48}\r\n            src={record.profilePhoto}\r\n            style={{\r\n              border: '3px solid #1e293b',\r\n              borderRadius: 0,\r\n              backgroundColor: record.id === currentUser?.id ? '#2563eb' : '#fff',\r\n              color: record.id === currentUser?.id ? '#fff' : '#1e293b',\r\n            }}\r\n          >\r\n            {record.name.charAt(0).toUpperCase()}\r\n          </Avatar>\r\n          <div>\r\n            <Text style={{ fontWeight: 900, fontSize: '16px', display: 'block', color: '#000' }}>\r\n              {record.name} {record.id === currentUser?.id && <Tag style={{ borderRadius: 0, border: '2px solid #000', backgroundColor: '#000', color: '#fff', fontSize: '10px', fontWeight: 900, marginLeft: 8 }}>SIZ</Tag>}\r\n            </Text>\r\n            <Text style={{ color: '#666', fontWeight: 700, fontSize: '12px', textTransform: 'uppercase' }}>\r\n              {record.classGroup}\r\n            </Text>\r\n          </div>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Testlar',\r\n      key: 'testCount',\r\n      width: 120,\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 800, fontSize: '16px' }}>\r\n          {record.testCount}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'rtacha ball',\r\n      key: 'averageScore',\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <div style={{\r\n          display: 'inline-block',\r\n          border: '3px solid #000',\r\n          padding: '4px 12px',\r\n          backgroundColor: record.averageScore >= 80 ? '#ecfdf5' : record.averageScore >= 60 ? '#eff6ff' : '#fff',\r\n          boxShadow: '4px 4px 0px #000'\r\n        }}>\r\n          <Text style={{ fontWeight: 900, fontSize: '16px' }}>{record.averageScore}%</Text>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Eng yuqori',\r\n      key: 'highestScore',\r\n      width: 120,\r\n      render: (_, record) => (\r\n        <Text style={{ fontWeight: 800, color: '#059669', fontSize: '16px' }}>\r\n          {record.highestScore}%\r\n        </Text>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) return <div style={{ display: 'flex', justifyContent: 'center', padding: '100px', flexDirection: 'column', alignItems: 'center' }}><Spin size=\"large\" /><Text style={{ marginTop: '16px', fontWeight: 900, textTransform: 'uppercase' }}>Yuklanmoqda...</Text></div>;\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ padding: '40px 0' }}>\r\n        {/* Header */}\r\n        <div style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Reyting\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b', margin: 0 }}>\r\n            O'quvchilar <span style={{ color: '#2563eb' }}>reytingi</span>\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Platformadagi barcha o'quvchilarning o'zlashtirish ko'rsatkichlari va umumiy natijalari bo'yicha reyting jadvali.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {/* My Rank Card */}\r\n        {myRank && (\r\n          <div className=\"animate__animated animate__fadeInUp\" style={{\r\n            background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\r\n            color: '#fff',\r\n            padding: '32px',\r\n            border: '4px solid #1e293b',\r\n            boxShadow: '10px 10px 0px rgba(30, 41, 59, 0.2)',\r\n            marginBottom: '40px',\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n          }}>\r\n            <Row align=\"middle\" justify=\"space-between\" style={{ position: 'relative', zIndex: 2 }}>\r\n              <Col>\r\n                <Space direction=\"vertical\" size={0}>\r\n                  <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, textTransform: 'uppercase', fontSize: '12px' }}>\r\n                    Sizning o'rningiz\r\n                  </Text>\r\n                  <Title level={1} style={{ color: '#fff', margin: 0, fontWeight: 900, fontSize: '4rem' }}>\r\n                    #{myRank}\r\n                  </Title>\r\n                </Space>\r\n              </Col>\r\n              <Col style={{ textAlign: 'right' }}>\r\n                <Text style={{ color: 'rgba(255,255,255,0.7)', fontWeight: 800, textTransform: 'uppercase', fontSize: '12px' }}>\r\n                  Jami o'quvchilar\r\n                </Text>\r\n                <Title level={2} style={{ color: '#fff', margin: 0, fontWeight: 900 }}>\r\n                  {students.length}\r\n                </Title>\r\n              </Col>\r\n            </Row>\r\n            <TrophyOutlined style={{\r\n              position: 'absolute',\r\n              right: '-20px',\r\n              bottom: '-20px',\r\n              fontSize: '180px',\r\n              color: 'rgba(255,255,255,0.07)'\r\n            }} />\r\n          </div>\r\n        )}\r\n\r\n        {/* Top 3 Podium */}\r\n        <Row gutter={[24, 24]} style={{ marginBottom: '60px' }}>\r\n          {students.slice(0, 3).map((student, index) => (\r\n            <Col xs={24} sm={8} key={student.id}>\r\n              <Card\r\n                className=\"animate__animated animate__fadeInUp\"\r\n                style={{\r\n                  border: `4px solid ${getRankColor(student.rank)}`,\r\n                  borderRadius: 0,\r\n                  boxShadow: `8px 8px 0px ${getRankColor(student.rank)}20`,\r\n                  backgroundColor: index === 0 ? '#fef3c7' : '#fff',\r\n                  textAlign: 'center',\r\n                  animationDelay: `${index * 0.1}s`,\r\n                  height: '100%'\r\n                }}\r\n              >\r\n                <div style={{ marginBottom: '16px' }}>{getRankIcon(student.rank)}</div>\r\n                <Avatar\r\n                  size={80}\r\n                  src={student.profilePhoto}\r\n                  style={{ border: `4px solid ${getRankColor(student.rank)}`, borderRadius: 0, marginBottom: '16px' }}\r\n                >\r\n                  {student.name.charAt(0).toUpperCase()}\r\n                </Avatar>\r\n                <Title level={3} style={{ fontWeight: 900, margin: '0 0 4px 0', textTransform: 'uppercase', fontSize: '1.2rem', color: getRankColor(student.rank) }}>\r\n                  {student.name}\r\n                </Title>\r\n                <Text style={{ fontWeight: 800, color: '#666', fontSize: '10px', textTransform: 'uppercase', display: 'block', marginBottom: '16px' }}>\r\n                  {student.classGroup}\r\n                </Text>\r\n                <Divider style={{ borderColor: getRankColor(student.rank), margin: '12px 0' }} />\r\n                <div style={{ display: 'flex', justifyContent: 'center', gap: '16px' }}>\r\n                  <div>\r\n                    <Text style={{ fontSize: '10px', fontWeight: 900, color: '#999', display: 'block' }}>BALL</Text>\r\n                    <Text style={{ fontSize: '1.5rem', fontWeight: 900, color: getRankColor(student.rank) }}>{student.averageScore}%</Text>\r\n                  </div>\r\n                  <div style={{ width: '1px', backgroundColor: '#e2e8f0' }}></div>\r\n                  <div>\r\n                    <Text style={{ fontSize: '10px', fontWeight: 900, color: '#999', display: 'block' }}>TESTLAR</Text>\r\n                    <Text style={{ fontSize: '1.5rem', fontWeight: 900, color: getRankColor(student.rank) }}>{student.testCount}</Text>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n\r\n        {/* Search and Main Table */}\r\n        <Card\r\n          style={{\r\n            border: '4px solid #1e293b',\r\n            boxShadow: '12px 12px 0px rgba(30, 41, 59, 0.15)',\r\n          }}\r\n          title={\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '8px 0' }}>\r\n              <Text style={{ fontWeight: 900, textTransform: 'uppercase', color: '#1e293b' }}><TeamOutlined /> BARCHA O'QUVCHILAR</Text>\r\n              <Input\r\n                placeholder=\"QIDIRISH...\"\r\n                prefix={<SearchOutlined style={{ color: '#64748b' }} />}\r\n                value={searchText}\r\n                onChange={(e) => handleSearch(e.target.value)}\r\n                style={{\r\n                  width: '250px',\r\n                  border: '3px solid #1e293b',\r\n                  fontWeight: 700,\r\n                  borderRadius: 0,\r\n                  color: '#1e293b'\r\n                }}\r\n                allowClear\r\n              />\r\n            </div>\r\n          }\r\n        >\r\n          <Table\r\n            columns={columns}\r\n            dataSource={filteredStudents}\r\n            rowKey=\"id\"\r\n            pagination={{\r\n              pageSize: 15,\r\n              showSizeChanger: false,\r\n              className: 'brutalist-pagination'\r\n            }}\r\n          />\r\n        </Card>\r\n      </div>\r\n\r\n      <style>{`\r\n        .brutalist-pagination .ant-pagination-item {\r\n          border: 2px solid #1e293b !important;\r\n          border-radius: 0 !important;\r\n          font-weight: 900 !important;\r\n        }\r\n        .brutalist-pagination .ant-pagination-item-active {\r\n          background-color: #2563eb !important;\r\n          border-color: #2563eb !important;\r\n        }\r\n        .brutalist-pagination .ant-pagination-item-active a {\r\n          color: #fff !important;\r\n        }\r\n        .brutalist-pagination .ant-pagination-prev .ant-pagination-item-link,\r\n        .brutalist-pagination .ant-pagination-next .ant-pagination-item-link {\r\n          border: 2px solid #1e293b !important;\r\n          border-radius: 0 !important;\r\n        }\r\n        .ant-table-thead > tr > th {\r\n          background: #1e293b !important;\r\n          color: #fff !important;\r\n          border-radius: 0 !important;\r\n          font-weight: 900 !important;\r\n          text-transform: uppercase !important;\r\n          letter-spacing: 0.1em !important;\r\n        }\r\n        .ant-table-tbody > tr > td {\r\n          border-bottom: 2px solid #f1f5f9 !important;\r\n          color: #1e293b !important;\r\n        }\r\n        .ant-table {\r\n          border: 2px solid #1e293b !important;\r\n        }\r\n      `}</style>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default StudentsRating;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\SubmitTest.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'selectedTest' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"selectedTest"},"fix":{"range":[722,741],"text":""},"desc":"Remove unused variable 'selectedTest'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSubmit'. Either include it or remove the dependency array.","line":34,"column":6,"nodeType":"ArrayExpression","endLine":34,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [handleSubmit]","fix":{"range":[988,990],"text":"[handleSubmit]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'fetchError' is defined but never used.","line":67,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":28},{"ruleId":"no-unused-vars","severity":2,"message":"'scoreColor' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":124,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"scoreColor"},"fix":{"range":[3870,3948],"text":""},"desc":"Remove unused variable 'scoreColor'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, Typography, Button, Spin, ConfigProvider, Result } from 'antd';\r\nimport {\r\n  CheckCircleOutlined,\r\n  CloseCircleOutlined,\r\n  ArrowLeftOutlined,\r\n  ReloadOutlined,\r\n  TrophyOutlined,\r\n  FrownOutlined\r\n} from '@ant-design/icons';\r\nimport { useServerTest } from '../../context/ServerTestContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst SubmitTest = () => {\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n  const {\r\n    currentSession,\r\n    submitTest,\r\n    clearSession,\r\n    selectedTest,\r\n  } = useServerTest();\r\n\r\n  const [submissionResult, setSubmissionResult] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Auto-submit when component mounts\r\n    handleSubmit();\r\n  }, []);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!currentSession) {\r\n      setSubmissionResult({ success: false, error: 'Sessiya topilmadi. Qaytadan boshlang.' });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const result = await submitTest();\r\n      if (result && result.success) {\r\n        setSubmissionResult(result);\r\n      } else {\r\n        setSubmissionResult({ success: false, error: result?.error || 'Test topshirishda muammo yuz berdi.' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to submit test:', error);\r\n      if (error.message && (error.message.includes('Test already completed') || error.message.includes('DUPLICATE_ATTEMPT'))) {\r\n        try {\r\n          const attempts = await apiService.getAttempts({\r\n            student: currentUser.id,\r\n            test: currentSession.test\r\n          });\r\n          if (attempts && attempts.length > 0) {\r\n            const latestAttempt = attempts[attempts.length - 1];\r\n            setSubmissionResult({\r\n              success: true,\r\n              score: latestAttempt.score\r\n            });\r\n          } else {\r\n            setSubmissionResult({ success: false, error: 'Test allaqachon tugagan, lekin natija topilmadi.' });\r\n          }\r\n        } catch (fetchError) {\r\n          setSubmissionResult({ success: false, error: 'Test allaqachon tugagan.' });\r\n        }\r\n      } else {\r\n        setSubmissionResult({ success: false, error: error.message || 'Test topshirishda xatolik yuz berdi.' });\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleBackToTests = () => {\r\n    clearSession();\r\n    navigate('/student/take-test');\r\n  };\r\n\r\n  const handleViewResults = () => {\r\n    navigate('/student/results');\r\n  };\r\n\r\n  const commonButtonStyle = {\r\n    borderRadius: 0,\r\n    border: '3px solid #000',\r\n    fontWeight: 900,\r\n    textTransform: 'uppercase',\r\n    height: '48px',\r\n    padding: '0 32px',\r\n    boxShadow: '4px 4px 0px #000',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  };\r\n\r\n  if (isSubmitting) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#fff'\r\n      }}>\r\n        <div style={{ textAlign: 'center', border: '4px solid #000', padding: '40px', boxShadow: '8px 8px 0px #000' }}>\r\n          <Spin size=\"large\" />\r\n          <Title level={4} style={{ marginTop: '24px', fontWeight: 900, textTransform: 'uppercase' }}>Natijalar hisoblanmoqda...</Title>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (submissionResult) {\r\n    const { success, score, error: submitError } = submissionResult;\r\n    // Score thresholds\r\n    const isHighScore = success && score >= 80;\r\n    const isPass = success && score >= 60;\r\n\r\n    // Colors based on score\r\n    const scoreColor = isHighScore ? '#16a34a' : (isPass ? '#2563eb' : '#dc2626');\r\n    const accentColor = isHighScore ? '#bbf7d0' : (isPass ? '#bfdbfe' : '#fecaca');\r\n\r\n    return (\r\n      <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000', fontFamily: 'Inter, sans-serif' } }}>\r\n        <div style={{\r\n          minHeight: '100vh',\r\n          backgroundColor: '#fff',\r\n          padding: '24px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center'\r\n        }}>\r\n          <Card\r\n            bordered={false}\r\n            style={{\r\n              maxWidth: '600px',\r\n              width: '100%',\r\n              border: '4px solid #000',\r\n              boxShadow: '12px 12px 0px #000',\r\n              borderRadius: 0,\r\n              backgroundColor: success ? '#fff' : '#fff5f5'\r\n            }}\r\n            bodyStyle={{ padding: '48px 24px', textAlign: 'center' }}\r\n          >\r\n            {success ? (\r\n              <>\r\n                <div style={{\r\n                  width: '100px',\r\n                  height: '100px',\r\n                  margin: '0 auto 24px auto',\r\n                  backgroundColor: accentColor,\r\n                  border: '3px solid #000',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  boxShadow: '4px 4px 0px #000'\r\n                }}>\r\n                  {isHighScore ?\r\n                    <TrophyOutlined style={{ fontSize: '48px', color: '#000' }} /> :\r\n                    (isPass ? <CheckCircleOutlined style={{ fontSize: '48px', color: '#000' }} /> : <CloseCircleOutlined style={{ fontSize: '48px', color: '#000' }} />)\r\n                  }\r\n                </div>\r\n\r\n                <Text style={{ fontSize: '14px', fontWeight: 900, textTransform: 'uppercase', letterSpacing: '0.1em', color: '#666' }}>Test Natijasi</Text>\r\n\r\n                <Title level={1} style={{\r\n                  fontSize: '5rem',\r\n                  fontWeight: 900,\r\n                  lineHeight: 1,\r\n                  margin: '16px 0 8px 0',\r\n                  color: '#000' // Black score for brutalism, or use scoreColor if preferred\r\n                }}>\r\n                  {score}%\r\n                </Title>\r\n\r\n                <Title level={3} style={{ fontWeight: 900, margin: '0 0 32px 0', textTransform: 'uppercase' }}>\r\n                  {isHighScore ? \"Qoyilmaqom!\" : (isPass ? \"Yaxshi natija!\" : \"Afsuski, o'tmadingiz\")}\r\n                </Title>\r\n\r\n                <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n                  <Button\r\n                    onClick={handleViewResults}\r\n                    style={{\r\n                      ...commonButtonStyle,\r\n                      backgroundColor: '#000',\r\n                      color: '#fff'\r\n                    }}\r\n                  >\r\n                    Natijalar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleBackToTests}\r\n                    style={{\r\n                      ...commonButtonStyle,\r\n                      backgroundColor: '#fff',\r\n                      color: '#000'\r\n                    }}\r\n                  >\r\n                    Testlarga qaytish\r\n                  </Button>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div style={{\r\n                  width: '80px',\r\n                  height: '80px',\r\n                  margin: '0 auto 24px auto',\r\n                  backgroundColor: '#fee2e2',\r\n                  border: '3px solid #000',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  boxShadow: '4px 4px 0px #000'\r\n                }}>\r\n                  <FrownOutlined style={{ fontSize: '40px', color: '#000' }} />\r\n                </div>\r\n                <Title level={2} style={{ fontWeight: 900, textTransform: 'uppercase', color: '#dc2626' }}>Xatolik</Title>\r\n                <Text style={{ fontSize: '1.1rem', fontWeight: 700, display: 'block', marginBottom: '32px' }}>\r\n                  {submitError || \"Tizimda xatolik yuz berdi.\"}\r\n                </Text>\r\n\r\n                <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', flexWrap: 'wrap', marginTop: '24px' }}>\r\n                  <Button\r\n                    icon={<ReloadOutlined />}\r\n                    onClick={handleSubmit}\r\n                    style={{\r\n                      ...commonButtonStyle,\r\n                      backgroundColor: '#fff',\r\n                      color: '#000'\r\n                    }}\r\n                  >\r\n                    Qayta urinib ko'rish\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleBackToTests}\r\n                    style={{\r\n                      ...commonButtonStyle,\r\n                      backgroundColor: '#000',\r\n                      color: '#fff',\r\n                      border: '3px solid #000'\r\n                    }}\r\n                  >\r\n                    Chiqish\r\n                  </Button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </Card>\r\n        </div>\r\n      </ConfigProvider>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      <Spin />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubmitTest;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\TakeTest.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[35,48],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isLoading' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":51,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLoading"},"fix":{"range":[1139,1155],"text":""},"desc":"Remove unused variable 'isLoading'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'continueTestSession' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":55,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"continueTestSession"},"fix":{"range":[1211,1237],"text":""},"desc":"Remove unused variable 'continueTestSession'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'submitTest' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":57,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"submitTest"},"fix":{"range":[1257,1274],"text":""},"desc":"Remove unused variable 'submitTest'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'isSessionActive' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":61,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"isSessionActive"},"fix":{"range":[1335,1357],"text":""},"desc":"Remove unused variable 'isSessionActive'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'location' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":66,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"location"},"fix":{"range":[1456,1487],"text":""},"desc":"Remove unused variable 'location'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'teacherTests' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":69,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"teacherTests"},"fix":{"range":[1582,1594],"text":""},"desc":"Remove unused variable 'teacherTests'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'testCompleted' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":75,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"testCompleted"},"fix":{"range":[1926,1939],"text":""},"desc":"Remove unused variable 'testCompleted'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'score' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":76,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"score"},"fix":{"range":[1988,1993],"text":""},"desc":"Remove unused variable 'score'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTeachers'. Either include it or remove the dependency array.","line":133,"column":6,"nodeType":"ArrayExpression","endLine":133,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser, loadTeachers]","fix":{"range":[3979,3992],"text":"[currentUser, loadTeachers]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":147,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkActiveSession'. Either include it or remove the dependency array.","line":156,"column":6,"nodeType":"ArrayExpression","endLine":156,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [allTests, checkActiveSession, currentUser]","fix":{"range":[4584,4607],"text":"[allTests, checkActiveSession, currentUser]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'clearSession', 'continueTestFromSession', and 'startTest'. Either include them or remove the dependency array.","line":198,"column":6,"nodeType":"ArrayExpression","endLine":198,"endColumn":73,"suggestions":[{"desc":"Update the dependencies array to be: [searchParams, teachers, navigate, checkActiveSession, currentUser, continueTestFromSession, startTest, clearSession]","fix":{"range":[6020,6087],"text":"[searchParams, teachers, navigate, checkActiveSession, currentUser, continueTestFromSession, startTest, clearSession]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentSession' and 'handleSubmitTest'. Either include them or remove the dependency array.","line":204,"column":6,"nodeType":"ArrayExpression","endLine":204,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [currentSession, handleSubmitTest, hasTimeRemaining, sessionStarted]","fix":{"range":[6228,6262],"text":"[currentSession, handleSubmitTest, hasTimeRemaining, sessionStarted]"}}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useSearchParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Card,\r\n  Typography,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Tag,\r\n  Avatar,\r\n  Radio,\r\n  Input,\r\n  Progress,\r\n  Modal,\r\n  Alert,\r\n  Select,\r\n  Table,\r\n  Space,\r\n  Checkbox,\r\n  ConfigProvider,\r\n  Spin,\r\n  Divider\r\n} from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  ClockCircleOutlined,\r\n  CheckCircleOutlined,\r\n  PlayCircleOutlined,\r\n  SortAscendingOutlined,\r\n  SearchOutlined,\r\n  InfoCircleOutlined,\r\n  WarningOutlined,\r\n  TrophyOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useServerTest } from '../../context/ServerTestContext';\r\nimport apiService from '../../data/apiService';\r\nimport LaTeXPreview from '../../components/LaTeXPreview';\r\nimport MathSymbols from '../../components/MathSymbols';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nconst TakeTest = () => {\r\n  const { currentUser } = useAuth();\r\n  const {\r\n    currentSession,\r\n    timeRemaining,\r\n    isLoading,\r\n    error,\r\n    sessionStarted,\r\n    startTestSession,\r\n    continueTestSession,\r\n    updateAnswers,\r\n    submitTest,\r\n    checkActiveSession,\r\n    clearSession,\r\n    formatTime,\r\n    isSessionActive,\r\n    hasTimeRemaining,\r\n  } = useServerTest();\r\n\r\n  const [searchParams] = useSearchParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [teacherTests, setTeacherTests] = useState({});\r\n  const [allTests, setAllTests] = useState([]);\r\n  const [takenTests, setTakenTests] = useState(new Set());\r\n  const [selectedTest, setSelectedTest] = useState(null);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [answers, setAnswers] = useState({});\r\n  const [testCompleted, setTestCompleted] = useState(false);\r\n  const [score, setScore] = useState(0);\r\n  const [sortBy, setSortBy] = useState('date');\r\n  const [exitDialogOpen, setExitDialogOpen] = useState(false);\r\n  const [urgentSubmitDialogOpen, setUrgentSubmitDialogOpen] = useState(false);\r\n  const [sessionRecovering, setSessionRecovering] = useState(false);\r\n  const [activeTestSessions, setActiveTestSessions] = useState({});\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [mathSymbolsOpen, setMathSymbolsOpen] = useState(false);\r\n  const [pageSize, setPageSize] = useState(10);\r\n\r\n\r\n\r\n  const difficultyLabels = {\r\n    easy: 'Oson',\r\n    medium: 'O\\'rtacha',\r\n    hard: 'Qiyin'\r\n  };\r\n\r\n  const getSortedTests = () => {\r\n    let filteredTests = allTests.filter(test => test.is_active);\r\n\r\n    if (sortBy === 'easy' || sortBy === 'medium' || sortBy === 'hard') {\r\n      filteredTests = filteredTests.filter(test => test.difficulty === sortBy);\r\n    }\r\n\r\n    if (sortBy === 'difficulty') {\r\n      const difficultyOrder = { easy: 1, medium: 2, hard: 3 };\r\n      filteredTests.sort((a, b) => (difficultyOrder[a.difficulty] || 0) - (difficultyOrder[b.difficulty] || 0));\r\n    } else if (sortBy === 'name') {\r\n      filteredTests.sort((a, b) => a.title.localeCompare(b.title));\r\n    } else {\r\n      filteredTests.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n    }\r\n\r\n    return filteredTests;\r\n  };\r\n\r\n  const getFilteredTests = () => {\r\n    const sortedTests = getSortedTests();\r\n    if (!searchTerm) return sortedTests;\r\n\r\n    const searchLower = searchTerm.toLowerCase();\r\n    return sortedTests.filter(test => {\r\n      const title = test.title || '';\r\n      const subject = test.subject || '';\r\n      const teacherName = test.teacherName || '';\r\n\r\n      return title.toLowerCase().includes(searchLower) ||\r\n        subject.toLowerCase().includes(searchLower) ||\r\n        teacherName.toLowerCase().includes(searchLower);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      loadTeachers();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  useEffect(() => {\r\n    const checkAllActiveSessions = async () => {\r\n      if (allTests.length === 0 || !currentUser) return;\r\n\r\n      const sessionsMap = {};\r\n\r\n      for (const test of allTests) {\r\n        try {\r\n          const activeSession = await checkActiveSession(test.id);\r\n          if (activeSession) {\r\n            sessionsMap[test.id] = activeSession;\r\n          }\r\n        } catch (error) {\r\n          console.debug(`No active session for test ${test.id}`);\r\n        }\r\n      }\r\n\r\n      setActiveTestSessions(sessionsMap);\r\n    };\r\n\r\n    checkAllActiveSessions();\r\n  }, [allTests, currentUser]);\r\n\r\n  useEffect(() => {\r\n    const testIdFromParams = searchParams.get('testId');\r\n\r\n    if (testIdFromParams && teachers.length > 0 && currentUser) {\r\n      const checkAndHandleTest = async () => {\r\n        try {\r\n          setSessionRecovering(true);\r\n\r\n          const attempts = await apiService.getAttempts({ student: currentUser.id, test: testIdFromParams });\r\n          const hasAttempt = attempts && attempts.length > 0;\r\n\r\n          if (hasAttempt) {\r\n            navigate('/student/results');\r\n            return;\r\n          }\r\n\r\n          const activeSession = await checkActiveSession(testIdFromParams);\r\n\r\n          if (activeSession) {\r\n            await continueTestFromSession(activeSession, testIdFromParams);\r\n          } else {\r\n            const test = await apiService.getTest(testIdFromParams);\r\n            if (test && test.is_active) {\r\n              startTest(test);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to handle test from URL:', error);\r\n          if (error.message && (error.message.includes('Test already completed') || error.message.includes('400') || error.message.includes('already completed'))) {\r\n            navigate('/student/results');\r\n            return;\r\n          }\r\n          clearSession();\r\n        } finally {\r\n          setSessionRecovering(false);\r\n        }\r\n      };\r\n\r\n      checkAndHandleTest();\r\n    }\r\n  }, [searchParams, teachers, navigate, checkActiveSession, currentUser]);\r\n\r\n  useEffect(() => {\r\n    if (currentSession && hasTimeRemaining === false && sessionStarted) {\r\n      handleSubmitTest();\r\n    }\r\n  }, [hasTimeRemaining, sessionStarted]);\r\n\r\n  const continueTestFromSession = async (session, testId) => {\r\n    if (!session || !testId) {\r\n      alert(\"Sessiya yoki test ID topilmadi. Iltimos, sahifani yangilang yoki administratorga murojaat qiling.\");\r\n      return;\r\n    }\r\n    try {\r\n      const test = await apiService.getTest(testId);\r\n      if (!test) {\r\n        alert('Test topilmadi.');\r\n        return;\r\n      }\r\n      const questionsData = await apiService.getQuestions({ test: test.id });\r\n      const questionsList = questionsData.results || questionsData;\r\n      setSelectedTest({ ...test, questions: questionsList });\r\n      setAnswers(session.answers || {});\r\n      setCurrentQuestionIndex(0);\r\n    } catch (error) {\r\n      alert('Sessiyani tiklashda muammo yuz berdi.');\r\n      console.error('Failed to continue test session:', error);\r\n      clearSession();\r\n    }\r\n  };\r\n\r\n  const loadTeachers = async () => {\r\n    try {\r\n      // Load teachers from API\r\n      const allUsers = await apiService.getUsers();\r\n      const allTeachers = allUsers.filter(user => user.role === 'teacher');\r\n      setTeachers(allTeachers);\r\n\r\n      // Load tests for each teacher\r\n      const testsMap = {};\r\n      const allTestsArray = [];\r\n\r\n      for (const teacher of allTeachers) {\r\n        try {\r\n          const tests = await apiService.getTests({ teacher: teacher.id });\r\n          const activeTests = tests.filter(test => test.is_active);\r\n          testsMap[teacher.id] = activeTests;\r\n\r\n          // Add tests to allTests array with teacher info\r\n          activeTests.forEach(test => {\r\n            allTestsArray.push({\r\n              ...test,\r\n              teacherName: teacher.name || teacher.username,\r\n              teacherId: teacher.id\r\n            });\r\n          });\r\n        } catch (error) {\r\n          console.error(`Failed to load tests for teacher ${teacher.id}:`, error);\r\n          testsMap[teacher.id] = [];\r\n        }\r\n      }\r\n      setTeacherTests(testsMap);\r\n      setAllTests(allTestsArray);\r\n\r\n      // Load student's taken tests\r\n      try {\r\n        const attempts = await apiService.getAttempts({ student: currentUser.id });\r\n        const takenTestIds = new Set(attempts.map(attempt => attempt.test));\r\n        setTakenTests(takenTestIds);\r\n      } catch (error) {\r\n        console.error('Failed to load taken tests:', error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load teachers:', error);\r\n    }\r\n  };\r\n\r\n  const hasStudentTakenTest = (testId) => {\r\n    return takenTests.has(testId);\r\n  };\r\n\r\n  const startTest = async (test) => {\r\n    if (!test || !test.id) {\r\n      alert(\"Test ma'lumotlari to'liq emas yoki noto'g'ri. Iltimos, boshqa test tanlang yoki administratorga murojaat qiling.\");\r\n      return;\r\n    }\r\n    try {\r\n      const session = await startTestSession(test.id);\r\n      if (!session) throw new Error('Test session yaratilmagan.');\r\n      const questionsData = await apiService.getQuestions({ test: test.id });\r\n      const questionsList = questionsData.results || questionsData;\r\n      setSelectedTest({ ...test, questions: questionsList });\r\n      setCurrentQuestionIndex(0);\r\n      setAnswers({});\r\n    } catch (error) {\r\n      console.error('Failed to start test:', error);\r\n      if (error.message && (error.message.includes('Test already completed') || error.message.includes('400'))) {\r\n        setTakenTests(prev => new Set([...prev, test.id]));\r\n        navigate('/student/results');\r\n      } else {\r\n        alert('Testni boshlashda muammo yuz berdi. Keyinroq qayta urinib koтАШring.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const continueTest = async (test) => {\r\n    if (!test || !test.id) {\r\n      alert(\"Davom ettirish uchun test ma'lumotlari to'liq emas!\");\r\n      return;\r\n    }\r\n    const existingSession = activeTestSessions[test.id];\r\n    if (existingSession) {\r\n      try {\r\n        await continueTestFromSession(existingSession, test.id);\r\n      } catch (error) {\r\n        alert('Davom etuvchilar sessiyasini yuklashda muammo!');\r\n        console.error('Failed to continue test from existing session:', error);\r\n        const updatedSessions = { ...activeTestSessions };\r\n        delete updatedSessions[test.id];\r\n        setActiveTestSessions(updatedSessions);\r\n      }\r\n    } else {\r\n      try {\r\n        const activeSession = await checkActiveSession(test.id);\r\n        if (activeSession) {\r\n          await continueTestFromSession(activeSession, test.id);\r\n        } else {\r\n          await startTest(test);\r\n        }\r\n      } catch (error) {\r\n        alert('Sessiyani davom ettirishda muammo. Keyinroq urinib koтАШring.');\r\n        console.error('Failed to continue test:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAnswerChange = async (questionId, answer) => {\r\n    const newAnswers = {\r\n      ...answers,\r\n      [questionId]: answer\r\n    };\r\n    setAnswers(newAnswers);\r\n\r\n    try {\r\n      await updateAnswers({ [questionId]: answer });\r\n    } catch (error) {\r\n      console.error('Failed to save answer:', error);\r\n      const revertedAnswers = { ...answers };\r\n      delete revertedAnswers[questionId];\r\n      setAnswers(revertedAnswers);\r\n      alert('Javob saqlanmadi. Internet yoki serverda muammo bo\\'lishi mumkin.');\r\n    }\r\n  };\r\n\r\n  const handleExitTest = () => {\r\n    setExitDialogOpen(false);\r\n    clearSession();\r\n    resetTest();\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (selectedTest && currentQuestionIndex < selectedTest.total_questions - 1) {\r\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (currentQuestionIndex > 0) {\r\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\r\n    }\r\n  };\r\n\r\n  const handleQuestionNavigation = (index) => {\r\n    setCurrentQuestionIndex(index);\r\n  };\r\n\r\n  const handleSymbolSelect = (symbol) => {\r\n    if (selectedTest && currentQuestionIndex >= 0) {\r\n      const currentAnswer = answers[selectedTest.questions[currentQuestionIndex].id] || '';\r\n      const newAnswer = currentAnswer + symbol;\r\n      handleAnswerChange(selectedTest.questions[currentQuestionIndex].id, newAnswer);\r\n    }\r\n    setMathSymbolsOpen(false);\r\n  };\r\n\r\n  const handleSubmitTest = () => {\r\n    navigate('/student/submit-test');\r\n  };\r\n\r\n  const resetTest = () => {\r\n    setSelectedTest(null);\r\n    setTestCompleted(false);\r\n    setCurrentQuestionIndex(0);\r\n    setAnswers({});\r\n    setScore(0);\r\n    clearSession();\r\n  };\r\n\r\n  if (!currentUser) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 700, textTransform: 'uppercase' }}>Yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show loading during session recovery\r\n  if (sessionRecovering) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 900, textTransform: 'uppercase' }}>Test seansingiz tiklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n\r\n  if (sessionStarted && selectedTest) {\r\n    const testQuestions = selectedTest.questions || [];\r\n    const currentQuestion = testQuestions[currentQuestionIndex];\r\n\r\n    if (!testQuestions.length || !currentQuestion) {\r\n      return (\r\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n          <Spin size=\"large\" />\r\n          <Text style={{ marginTop: 16, fontWeight: 700, textTransform: 'uppercase' }}>Savollar yuklanmoqda...</Text>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n        <div style={{ padding: '40px 0' }}>\r\n          {error && <Alert message={error} type=\"error\" style={{ border: '3px solid #000', boxShadow: '4px 4px 0px #000', fontWeight: 700, marginBottom: '24px' }} showIcon />}\r\n\r\n          {/* Test Header */}\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px', padding: '16px', backgroundColor: '#4f46e5', color: '#fff', border: '4px solid #000', boxShadow: '8px 8px 0px #000' }}>\r\n            <div>\r\n              <Text style={{ color: '#e0e7ff', fontSize: '11px', fontWeight: 900, textTransform: 'uppercase', display: 'block', letterSpacing: '1px' }}>Hozirgi test</Text>\r\n              <Title level={4} style={{ color: '#fff', margin: 0, textTransform: 'uppercase', fontWeight: 900, fontSize: '1.4rem', textShadow: '2px 2px 0px #000' }}>{selectedTest.title}</Title>\r\n            </div>\r\n            <div style={{ textAlign: 'right' }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px', justifyContent: 'flex-end' }}>\r\n                <ClockCircleOutlined style={{ fontSize: '20px' }} />\r\n                <Text style={{ color: '#fff', fontSize: '24px', fontWeight: 900, letterSpacing: '1px', textShadow: '2px 2px 0px #000' }}>{formatTime(timeRemaining)}</Text>\r\n              </div>\r\n              <Tag color=\"volcano\" style={{ margin: 0, border: '2px solid #000', fontWeight: 800 }}>{selectedTest.subject}</Tag>\r\n              <Text style={{ color: '#fff', fontSize: '12px', fontWeight: 700, display: 'block', marginTop: '4px' }}>{currentQuestionIndex + 1} / {selectedTest.total_questions} SAVOL</Text>\r\n            </div>\r\n          </div>\r\n\r\n          <Progress\r\n            percent={((currentQuestionIndex + 1) / selectedTest.total_questions) * 100}\r\n            strokeColor=\"#fbbf24\"\r\n            trailColor=\"#e2e8f0\"\r\n            strokeWidth={16}\r\n            style={{ borderRadius: 0, marginBottom: '32px', filter: 'drop-shadow(4px 4px 0px #000)' }}\r\n            showInfo={false}\r\n          />\r\n\r\n          <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '12px 12px 0px #000', marginBottom: '32px' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '24px' }}>\r\n              <Button danger onClick={() => setExitDialogOpen(true)} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, textTransform: 'uppercase', height: '36px' }}>\r\n                Testdan chiqish\r\n              </Button>\r\n            </div>\r\n\r\n            {currentQuestion.image && (\r\n              <div style={{ marginBottom: '32px', textAlign: 'center', backgroundColor: '#f8fafc', padding: '16px', border: '2px dashed #000' }}>\r\n                <img src={currentQuestion.image} alt=\"Question\" style={{ maxWidth: '100%', maxHeight: '500px', border: '4px solid #000', objectFit: 'contain' }} />\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ marginBottom: '32px' }}>\r\n              <div style={{ backgroundColor: '#4f46e5', color: '#fff', display: 'inline-block', padding: '4px 12px', fontWeight: 900, textTransform: 'uppercase', fontSize: '12px', marginBottom: '12px', border: '2px solid #000', boxShadow: '4px 4px 0px #000' }}>Savol</div>\r\n              <LaTeXPreview text={currentQuestion.question_text} style={{ fontSize: '1.3rem', lineHeight: 1.5, color: '#000', fontWeight: 600 }} />\r\n            </div>\r\n\r\n            {currentQuestion.question_type === 'multiple_choice' && (\r\n              <Radio.Group value={answers[currentQuestion.id] || ''} onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)} style={{ width: '100%' }}>\r\n                <Row gutter={[16, 16]}>\r\n                  {currentQuestion.options.map((option, index) => {\r\n                    const isSelected = answers[currentQuestion.id] === option.text;\r\n                    const optionImageField = ['option_a_image', 'option_b_image', 'option_c_image', 'option_d_image'][index];\r\n                    const optionImage = currentQuestion[optionImageField];\r\n\r\n                    return (\r\n                      <Col xs={24} key={index}>\r\n                        <Radio value={option.text} className=\"brutalist-radio\" style={{ width: '100%', margin: 0 }}>\r\n                          <div style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '16px',\r\n                            padding: '16px',\r\n                            backgroundColor: isSelected ? '#4f46e5' : '#fff',\r\n                            color: isSelected ? '#fff' : '#000',\r\n                            border: '4px solid #000',\r\n                            transition: 'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                            transform: isSelected ? 'translate(-4px, -4px)' : 'none',\r\n                            boxShadow: isSelected ? '8px 8px 0px #000' : '4px 4px 0px #000'\r\n                          }}>\r\n                            <div style={{\r\n                              fontWeight: 900,\r\n                              fontSize: '1.1rem',\r\n                              backgroundColor: isSelected ? '#fff' : '#e2e8f0',\r\n                              color: isSelected ? '#4f46e5' : '#000',\r\n                              width: '32px',\r\n                              height: '32px',\r\n                              display: 'flex',\r\n                              alignItems: 'center',\r\n                              justifyContent: 'center',\r\n                              border: '2px solid #000'\r\n                            }}>{String.fromCharCode(65 + index)}</div>\r\n                            <div style={{ flex: 1 }}>\r\n                              <LaTeXPreview text={option.text} />\r\n                            </div>\r\n                            {optionImage && <img src={optionImage} alt={`Option ${String.fromCharCode(65 + index)}`} style={{ maxWidth: '80px', maxHeight: '50px', border: '2px solid #000', objectFit: 'contain', backgroundColor: '#fff' }} />}\r\n                          </div>\r\n                        </Radio>\r\n                      </Col>\r\n                    );\r\n                  })}\r\n                </Row>\r\n              </Radio.Group>\r\n            )}\r\n\r\n            {currentQuestion.question_type === 'short_answer' && (\r\n              <div style={{ marginTop: '24px' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\r\n                  <Text style={{ fontWeight: 900, textTransform: 'uppercase', fontSize: '12px' }}>Sizning javobingiz:</Text>\r\n                  <Button size=\"small\" onClick={() => setMathSymbolsOpen(true)} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800, backgroundColor: '#fbbf24', color: '#000' }}>ЁЯзо Belgilar</Button>\r\n                </div>\r\n                <Input.TextArea\r\n                  placeholder=\"Javobingizni kiriting...\"\r\n                  value={answers[currentQuestion.id] || ''}\r\n                  onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)}\r\n                  rows={4}\r\n                  style={{ borderRadius: 0, border: '4px solid #000', fontWeight: 600, fontSize: '1.2rem', padding: '16px', backgroundColor: '#f8fafc' }}\r\n                />\r\n                {(answers[currentQuestion.id] || '').trim() && (\r\n                  <div style={{ marginTop: '16px', padding: '16px', backgroundColor: '#e0e7ff', border: '2px dashed #4f46e5' }}>\r\n                    <Text style={{ display: 'block', fontSize: '10px', fontWeight: 900, textTransform: 'uppercase', color: '#4f46e5', marginBottom: '8px' }}>Preview:</Text>\r\n                    <LaTeXPreview text={answers[currentQuestion.id]} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <Divider style={{ borderTop: '4px solid #000', margin: '40px 0' }} />\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', gap: '16px' }}>\r\n              <Button size=\"large\" onClick={handlePrevious} disabled={currentQuestionIndex === 0} style={{ borderRadius: 0, border: '4px solid #000', boxShadow: currentQuestionIndex === 0 ? 'none' : '6px 6px 0px #000', fontWeight: 900, textTransform: 'uppercase', height: '56px', flex: 1, backgroundColor: '#fff' }}>Oldingi</Button>\r\n\r\n              {currentQuestionIndex === selectedTest.total_questions - 1 ? (\r\n                <div style={{ display: 'flex', gap: '12px', flex: 1 }}>\r\n                  <Button size=\"large\" type=\"primary\" onClick={handleSubmitTest} style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, textTransform: 'uppercase', height: '56px', flex: 1, backgroundColor: '#16a34a' }}>Tugatish (Finish)</Button>\r\n                  <Button size=\"large\" onClick={() => setUrgentSubmitDialogOpen(true)} style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, textTransform: 'uppercase', height: '56px', backgroundColor: '#fff', color: '#d97706', borderColor: '#000' }}>Tezkor</Button>\r\n                </div>\r\n              ) : (\r\n                <Button size=\"large\" type=\"primary\" onClick={handleNext} style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 900, textTransform: 'uppercase', height: '56px', flex: 1, backgroundColor: '#4f46e5' }}>Keyingi</Button>\r\n              )}\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Nav Panel */}\r\n          <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}>\r\n            <Title level={5} style={{ fontWeight: 900, textTransform: 'uppercase', marginBottom: '16px', fontSize: '12px' }}>Savollar navigatsiyasi</Title>\r\n            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\r\n              {testQuestions.map((_, index) => {\r\n                const isCurrent = currentQuestionIndex === index;\r\n                const hasAnswer = !!answers[testQuestions[index].id];\r\n                return (\r\n                  <Button\r\n                    key={index}\r\n                    onClick={() => handleQuestionNavigation(index)}\r\n                    style={{\r\n                      borderRadius: 0,\r\n                      border: '2px solid #000',\r\n                      width: '44px',\r\n                      height: '44px',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontWeight: 900,\r\n                      backgroundColor: isCurrent ? '#4f46e5' : (hasAnswer ? '#bbf7d0' : '#fff'),\r\n                      color: isCurrent ? '#fff' : '#000',\r\n                      boxShadow: isCurrent ? 'none' : '3px 3px 0px #000',\r\n                      transform: isCurrent ? 'translate(2px, 2px)' : 'none'\r\n                    }}\r\n                  >\r\n                    {index + 1}\r\n                  </Button>\r\n                );\r\n              })}\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Modals */}\r\n          <Modal\r\n            title={<Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase' }}>Testdan chiqish</Title>}\r\n            open={exitDialogOpen}\r\n            onCancel={() => setExitDialogOpen(false)}\r\n            centered\r\n            styles={{ mask: { backdropFilter: 'blur(4px)' } }}\r\n            footer={[\r\n              <Button key=\"no\" onClick={() => setExitDialogOpen(false)} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900 }}>BEKOR QILISH</Button>,\r\n              <Button key=\"yes\" danger onClick={handleExitTest} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, backgroundColor: '#000', color: '#fff' }}>CHIQUV</Button>\r\n            ]}\r\n          >\r\n            <Paragraph style={{ fontWeight: 600, fontSize: '1.1rem', margin: '20px 0' }}>Agar testdan chiqsangiz, vaqt davom etaveradi. Rostdan ham chiqmoqchimisiz?</Paragraph>\r\n          </Modal>\r\n\r\n          <Modal\r\n            title={<Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase', color: '#d97706' }}>Tezkor tugatish</Title>}\r\n            open={urgentSubmitDialogOpen}\r\n            onCancel={() => setUrgentSubmitDialogOpen(false)}\r\n            centered\r\n            styles={{ mask: { backdropFilter: 'blur(4px)' } }}\r\n            footer={[\r\n              <Button key=\"no\" onClick={() => setUrgentSubmitDialogOpen(false)} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900 }}>BEKOR QILISH</Button>,\r\n              <Button key=\"yes\" onClick={() => { setUrgentSubmitDialogOpen(false); handleSubmitTest(); }} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, backgroundColor: '#d97706', color: '#fff' }}>TASDIQLASH</Button>\r\n            ]}\r\n          >\r\n            <Paragraph style={{ fontWeight: 600, fontSize: '1.1rem', margin: '20px 0' }}>Testni hoziroq yakunlamoqchimisiz? Barcha javoblaringiz tekshiruvga yuboriladi.</Paragraph>\r\n          </Modal>\r\n\r\n          <MathSymbols open={mathSymbolsOpen} onClose={() => setMathSymbolsOpen(false)} onSymbolSelect={handleSymbolSelect} />\r\n\r\n          <style>{`\r\n            .brutalist-radio .ant-radio { display: none; }\r\n            .brutalist-radio .ant-radio-wrapper { padding: 0; margin: 0; width: 100%; }\r\n            .brutalist-radio { margin: 0 !important; }\r\n          `}</style>\r\n        </div>\r\n      </ConfigProvider>\r\n    );\r\n  }\r\n\r\n  const testColumns = [\r\n    {\r\n      title: 'Test',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n      render: (title, test) => (\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 900 }}>T</div>\r\n          <div>\r\n            <Text style={{ fontWeight: 700, fontSize: '0.9rem' }}>{title}</Text>\r\n            {test.description && <div style={{ fontSize: '11px', color: '#666' }}>{test.description}</div>}\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Fan',\r\n      dataIndex: 'subject',\r\n      key: 'subject',\r\n      render: (subject) => (\r\n        <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, backgroundColor: '#fff', color: '#000', textTransform: 'uppercase', fontSize: '10px' }}>{subject}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Qiyinchilik',\r\n      dataIndex: 'difficulty',\r\n      key: 'difficulty',\r\n      render: (difficulty) => (\r\n        <Tag color={difficulty === 'easy' ? 'green' : difficulty === 'medium' ? 'orange' : 'red'} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 800, textTransform: 'uppercase', fontSize: '10px' }}>\r\n          {difficultyLabels[difficulty] || difficulty}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'O\\'qituvchi',\r\n      dataIndex: 'teacherName',\r\n      key: 'teacherName',\r\n      render: (name) => <Text style={{ fontWeight: 600 }}>{name}</Text>,\r\n    },\r\n    {\r\n      title: 'Vaqt / Savol',\r\n      key: 'info',\r\n      render: (_, test) => (\r\n        <div style={{ display: 'flex', gap: '4px', alignItems: 'center' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', padding: '4px 8px', fontWeight: 900, fontSize: '11px', border: '2px solid #000' }}>{test.time_limit}M</div>\r\n          <div style={{ backgroundColor: '#fff', color: '#000', padding: '4px 8px', fontWeight: 900, fontSize: '11px', border: '2px solid #000' }}>{test.total_questions}Q</div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakat',\r\n      key: 'actions',\r\n      width: 150,\r\n      render: (_, test) => {\r\n        const alreadyTaken = hasStudentTakenTest(test.id);\r\n        const hasActive = !!activeTestSessions[test.id];\r\n\r\n        if (alreadyTaken) {\r\n          return (\r\n            <Button\r\n              onClick={() => navigate(`/student/results?highlight=${test.id}`)}\r\n              style={{\r\n                borderRadius: 0,\r\n                border: '3px solid #000',\r\n                backgroundColor: '#e0e7ff', // Light indigo/blue\r\n                color: '#000',\r\n                fontWeight: 900,\r\n                textTransform: 'uppercase',\r\n                fontSize: '11px',\r\n                height: '36px',\r\n                width: '100%',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n              }}\r\n            >\r\n              TOPShIRILGAN\r\n            </Button>\r\n          );\r\n        }\r\n\r\n        return (\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={hasActive ? () => continueTest(test) : () => startTest(test)}\r\n            style={{\r\n              borderRadius: 0,\r\n              border: '3px solid #000',\r\n              boxShadow: '4px 4px 0px #000',\r\n              backgroundColor: hasActive ? '#f59e0b' : '#4f46e5',\r\n              color: '#fff',\r\n              fontWeight: 900,\r\n              textTransform: 'uppercase',\r\n              fontSize: '11px',\r\n              height: '36px',\r\n              width: '100%'\r\n            }}\r\n            icon={hasActive ? <PlayCircleOutlined /> : <PlayCircleOutlined />}\r\n          >\r\n            {hasActive ? 'Davom etish' : 'Boshlash'}\r\n          </Button>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div style={{ padding: '40px 0' }}>\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Testlar\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '2.5rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#000' }}>\r\n            Test topshirish\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#000', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Bilimingizni sinab ko'ring. Mavjud testlardan birini tanlang va topshirishni boshlang.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {error && <Alert message={error} type=\"error\" showIcon style={{ border: '3px solid #000', boxShadow: '6px 6px 0px #000', fontWeight: 700, marginBottom: '40px' }} />}\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '40px' }}>\r\n          <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}>\r\n            <Row gutter={[24, 16]} align=\"middle\">\r\n              <Col xs={24} md={18}>\r\n                <Search\r\n                  placeholder=\"Test nomi, fan yoki o'qituvchini qidirish...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  style={{ borderRadius: 0, width: '100%' }}\r\n                  size=\"large\"\r\n                />\r\n              </Col>\r\n              <Col xs={24} md={6}>\r\n                <div style={{ display: 'flex', gap: '12px', alignItems: 'center', justifyContent: 'flex-end', width: '100%' }}>\r\n                  <SortAscendingOutlined style={{ fontSize: '20px' }} />\r\n                  <Select value={sortBy} onChange={setSortBy} style={{ width: '100%' }} size=\"large\">\r\n                    <Option value=\"date\">Sana</Option>\r\n                    <Option value=\"name\">Nomi</Option>\r\n                    <Option value=\"difficulty\">Qiyinchilik</Option>\r\n                    <Option value=\"easy\">Osonlar</Option>\r\n                    <Option value=\"medium\">O'rtachalar</Option>\r\n                    <Option value=\"hard\">Qiyinlar</Option>\r\n                  </Select>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </div>\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '0.3s' }}>\r\n          <Table\r\n            columns={testColumns}\r\n            dataSource={getFilteredTests().map(test => ({ ...test, key: test.id }))}\r\n            pagination={{\r\n              pageSize: pageSize,\r\n              showSizeChanger: true,\r\n              pageSizeOptions: ['10', '20', '50'],\r\n              onShowSizeChange: (_, size) => setPageSize(size),\r\n            }}\r\n            rowHoverable={false}\r\n            style={{ border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}\r\n            scroll={{ x: 800 }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default TakeTest;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\TeacherDetails.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":50,"column":6,"nodeType":"ArrayExpression","endLine":50,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [loadData, teacherId]","fix":{"range":[1470,1481],"text":"[loadData, teacherId]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":114,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Button,\r\n  Card,\r\n  Tag,\r\n  Row,\r\n  Col,\r\n  Table,\r\n  Alert,\r\n  Avatar,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  UserOutlined,\r\n  BarChartOutlined,\r\n  CheckCircleOutlined,\r\n  PlayCircleOutlined,\r\n  ReloadOutlined,\r\n  BookOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useServerTest } from '../../context/ServerTestContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\n// TeacherDetails Component - Student view for individual teacher and their tests\r\n// Shows teacher information and allows students to take or retake tests\r\nconst TeacherDetails = () => {\r\n  // URL parameters and navigation\r\n  const { teacherId } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const { currentUser } = useAuth();\r\n  const { checkActiveSession } = useServerTest();\r\n\r\n  // Component state management\r\n  const [teacher, setTeacher] = useState(null);\r\n  const [tests, setTests] = useState([]);\r\n  const [studentAttempts, setStudentAttempts] = useState([]);\r\n  const [activeTestSessions, setActiveTestSessions] = useState({}); // Track active sessions for each test\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [teacherId]);\r\n\r\n  // Load teacher data, tests, and student attempts\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Fetch all required data\r\n      const [usersData, testsData, attemptsData] = await Promise.all([\r\n        apiService.getUsers(),\r\n        apiService.getTests(),\r\n        apiService.getAttempts({ student: currentUser.id })\r\n      ]);\r\n\r\n      // Extract results from API responses\r\n      const users = usersData.results || usersData;\r\n      const tests = testsData.results || testsData;\r\n      const attempts = attemptsData.results || attemptsData;\r\n\r\n      // Find the specific teacher\r\n      const foundTeacher = users.find(user =>\r\n        user.id === parseInt(teacherId) && user.role === 'teacher'\r\n      );\r\n\r\n      console.log('Teacher details loading:', {\r\n        teacherId,\r\n        foundTeacher,\r\n        totalUsers: users.length,\r\n        totalTests: tests.length,\r\n        userAttempts: attempts.length\r\n      });\r\n\r\n      if (!foundTeacher) {\r\n        setError('O\\'qituvchi topilmadi');\r\n        return;\r\n      }\r\n\r\n      setTeacher(foundTeacher);\r\n      setTests(tests);\r\n      setStudentAttempts(attempts);\r\n\r\n      // Check for active sessions for all tests\r\n      await checkActiveSessions(tests);\r\n\r\n    } catch (error) {\r\n      console.error('Error loading teacher details:', error);\r\n      setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Check for active sessions for all tests\r\n  const checkActiveSessions = async (allTests) => {\r\n    if (allTests.length === 0) return;\r\n\r\n    const sessionsMap = {};\r\n\r\n    for (const test of allTests) {\r\n      try {\r\n        const activeSession = await checkActiveSession(test.id);\r\n        if (activeSession) {\r\n          sessionsMap[test.id] = activeSession;\r\n        }\r\n      } catch (error) {\r\n        // Silently handle errors for each test\r\n        console.debug(`No active session for test ${test.id}`);\r\n      }\r\n    }\r\n\r\n    setActiveTestSessions(sessionsMap);\r\n  };\r\n\r\n  // Get tests for the current teacher\r\n  const getTeacherTests = () => {\r\n    return tests.filter(test => test.teacher === parseInt(teacherId));\r\n  };\r\n\r\n  // Get test completion status and attempt history\r\n  const getTestCompletionStatus = (testId) => {\r\n    const attempts = studentAttempts.filter(attempt => attempt.test === testId);\r\n    return {\r\n      hasCompleted: attempts.length > 0,\r\n      attempts: attempts,\r\n      lastScore: attempts.length > 0 ? Math.max(...attempts.map(a => a.score)) : 0,\r\n      attemptCount: attempts.length\r\n    };\r\n  };\r\n\r\n  // Navigate back to search teachers\r\n  const handleBack = () => {\r\n    navigate('/student/search');\r\n  };\r\n\r\n  // Loading state display\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        paddingTop: '24px',\r\n        paddingBottom: '24px',\r\n        backgroundColor: '#ffffff'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '24px' }}>\r\n          <Button\r\n            onClick={handleBack}\r\n            icon={<ArrowLeftOutlined />}\r\n            style={{ marginRight: '8px', color: '#64748b' }}\r\n          >\r\n            Orqaga qaytish\r\n          </Button>\r\n        </div>\r\n        <div style={{ textAlign: 'center', padding: '48px 0' }}>\r\n          <ReloadOutlined style={{ fontSize: '32px', color: '#2563eb' }} spin />\r\n          <Title level={4} style={{ marginTop: '16px', color: '#64748b' }}>\r\n            Ma'lumotlar yuklanmoqda...\r\n          </Title>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state display\r\n  if (error || !teacher) {\r\n    return (\r\n      <div style={{\r\n        paddingTop: '24px',\r\n        paddingBottom: '24px',\r\n        backgroundColor: '#ffffff'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '24px' }}>\r\n          <Button\r\n            onClick={handleBack}\r\n            icon={<ArrowLeftOutlined />}\r\n            style={{ marginRight: '8px', color: '#64748b' }}\r\n          >\r\n            Orqaga qaytish\r\n          </Button>\r\n        </div>\r\n        <Alert\r\n          message={error || 'O\\'qituvchi topilmadi'}\r\n          type=\"error\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const teacherTests = getTeacherTests();\r\n\r\n  // Table columns for tests\r\n  const testColumns = [\r\n    {\r\n      title: 'Test nomi',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n      render: (text, record) => (\r\n        <div>\r\n          <Text style={{\r\n            fontWeight: 600,\r\n            color: '#1e293b',\r\n            fontSize: '0.875rem'\r\n          }}>\r\n            {text || 'Test nomi ko\\'rsatilmagan'}\r\n          </Text>\r\n          {record.description && (\r\n            <Text style={{\r\n              fontSize: '0.75rem',\r\n              color: '#64748b',\r\n              display: 'block',\r\n              marginTop: '4px'\r\n            }}>\r\n              {record.description.length > 50 ? record.description.substring(0, 50) + '...' : record.description}\r\n            </Text>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Fan',\r\n      dataIndex: 'subject',\r\n      key: 'subject',\r\n      render: (subject) => (\r\n        <div\r\n          style={{\r\n            backgroundColor: '#eff6ff',\r\n            color: '#2563eb',\r\n            fontWeight: 800,\r\n            fontSize: '0.75rem',\r\n            padding: '4px 12px',\r\n            border: '2px solid #2563eb',\r\n            display: 'inline-block'\r\n          }}\r\n        >\r\n          {subject || 'Noma\\'lum'}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Qiyinlik',\r\n      dataIndex: 'difficulty',\r\n      key: 'difficulty',\r\n      render: (difficulty) => {\r\n        if (!difficulty) return null;\r\n\r\n        const getDifficultyStyle = (level) => {\r\n          switch (level) {\r\n            case 'Oson':\r\n              return { bg: '#dcfce7', color: '#166534', border: '#166534' };\r\n            case 'O\\'rta':\r\n              return { bg: '#fef3c7', color: '#92400e', border: '#92400e' };\r\n            default:\r\n              return { bg: '#fee2e2', color: '#991b1b', border: '#991b1b' };\r\n          }\r\n        };\r\n\r\n        const style = getDifficultyStyle(difficulty);\r\n\r\n        return (\r\n          <div\r\n            style={{\r\n              backgroundColor: style.bg,\r\n              color: style.color,\r\n              fontWeight: 800,\r\n              fontSize: '0.75rem',\r\n              padding: '4px 12px',\r\n              border: `2px solid ${style.border}`,\r\n              display: 'inline-block'\r\n            }}\r\n          >\r\n            {difficulty}\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Status',\r\n      key: 'status',\r\n      render: (_, record) => {\r\n        const completionStatus = getTestCompletionStatus(record.id);\r\n        const isCompleted = completionStatus.hasCompleted;\r\n        const hasActiveSession = !!activeTestSessions[record.id];\r\n\r\n        if (hasActiveSession) {\r\n          return (\r\n            <div\r\n              style={{\r\n                backgroundColor: '#ecfdf5',\r\n                color: '#059669',\r\n                fontWeight: 900,\r\n                fontSize: '0.75rem',\r\n                padding: '4px 12px',\r\n                border: '2px solid #059669',\r\n                display: 'inline-block'\r\n              }}\r\n            >\r\n              FAOL SEANS\r\n            </div>\r\n          );\r\n        } else if (isCompleted) {\r\n          return (\r\n            <div>\r\n              <div\r\n                style={{\r\n                  backgroundColor: '#10b981',\r\n                  color: '#ffffff',\r\n                  fontWeight: 900,\r\n                  fontSize: '0.75rem',\r\n                  padding: '4px 12px',\r\n                  border: '2px solid #064e3b',\r\n                  display: 'inline-block',\r\n                  marginBottom: '4px'\r\n                }}\r\n              >\r\n                ISHLANGAN\r\n              </div>\r\n              <div>\r\n                <Text style={{\r\n                  fontSize: '0.75rem',\r\n                  fontWeight: 800,\r\n                  color: '#64748b'\r\n                }}>\r\n                  Ball: {completionStatus.lastScore}%\r\n                </Text>\r\n              </div>\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div\r\n              style={{\r\n                backgroundColor: '#f3f4f6',\r\n                color: '#6b7280',\r\n                fontWeight: 900,\r\n                fontSize: '0.75rem',\r\n                padding: '4px 12px',\r\n                border: '2px solid #6b7280',\r\n                display: 'inline-block'\r\n              }}\r\n            >\r\n              ISHLANMAGAN\r\n            </div>\r\n          );\r\n        }\r\n      },\r\n    },\r\n    {\r\n      title: 'Harakatlar',\r\n      key: 'actions',\r\n      render: (_, record) => {\r\n        const completionStatus = getTestCompletionStatus(record.id);\r\n        const isCompleted = completionStatus.hasCompleted;\r\n        const hasActiveSession = !!activeTestSessions[record.id];\r\n\r\n        const getButtonStyle = () => {\r\n          if (hasActiveSession) {\r\n            return { bg: '#059669', border: '#064e3b' };\r\n          } else if (isCompleted) {\r\n            return { bg: '#94a3b8', border: '#475569' };\r\n          } else {\r\n            return { bg: '#2563eb', border: '#1e3a8a' };\r\n          }\r\n        };\r\n\r\n        const buttonStyle = getButtonStyle();\r\n\r\n        return (\r\n          <Button\r\n            size=\"small\"\r\n            type=\"primary\"\r\n            onClick={() => {\r\n              if (hasActiveSession) {\r\n                navigate(`/student/take-test?testId=${record.id}`);\r\n              } else if (!isCompleted) {\r\n                navigate(`/student/take-test?testId=${record.id}`);\r\n              }\r\n            }}\r\n            disabled={!hasActiveSession && isCompleted}\r\n            style={{\r\n              fontSize: '0.875rem',\r\n              fontWeight: 900,\r\n              padding: '8px 16px',\r\n              height: 'auto',\r\n              borderRadius: 0,\r\n              backgroundColor: buttonStyle.bg,\r\n              border: `2px solid ${buttonStyle.border}`,\r\n              boxShadow: '4px 4px 0px rgba(0,0,0,0.1)',\r\n              textTransform: 'uppercase'\r\n            }}\r\n            icon={hasActiveSession ? <PlayCircleOutlined /> : (isCompleted ? <CheckCircleOutlined /> : <PlayCircleOutlined />)}\r\n          >\r\n            {hasActiveSession ? 'Davom ettirish' : (isCompleted ? 'Ishlangan' : 'Boshlash')}\r\n          </Button>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"animate__animated animate__fadeIn\" style={{\r\n      paddingTop: '24px',\r\n      paddingBottom: '24px',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{ marginBottom: '60px' }}>\r\n        <div style={{ backgroundColor: '#2563eb', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n          O'qituvchi\r\n        </div>\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexWrap: 'wrap', gap: '24px' }}>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '3rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#1e293b', margin: 0 }}>\r\n            O'qituvchi <span style={{ color: '#2563eb' }}>Ma'lumotlari</span>\r\n          </Title>\r\n          <Button\r\n            icon={<ArrowLeftOutlined />}\r\n            onClick={handleBack}\r\n            style={{\r\n              borderColor: '#e2e8f0',\r\n              borderWidth: '2px',\r\n              color: '#64748b',\r\n              fontWeight: 900,\r\n              borderRadius: 0,\r\n              boxShadow: '4px 4px 0px rgba(0,0,0,0.05)',\r\n              height: 'auto',\r\n              padding: '12px 24px',\r\n              textTransform: 'uppercase'\r\n            }}\r\n          >\r\n            ORQAGA QAYTISH\r\n          </Button>\r\n        </div>\r\n        <div style={{ width: '80px', height: '10px', backgroundColor: '#2563eb', margin: '24px 0' }}></div>\r\n        <Text style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px', display: 'block' }}>\r\n          O'qituvchi bilan tanishing, ularning fanlari va o'quvchilarga taqdim etgan testlari haqida to'liq ma'lumot oling.\r\n        </Text>\r\n      </div>\r\n\r\n      {/* Teacher information section */}\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '200ms' }}>\r\n        <Card style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '4px solid #2563eb',\r\n          borderRadius: 0,\r\n          boxShadow: '12px 12px 0px rgba(37, 99, 235, 0.1)',\r\n          marginBottom: '32px',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <Row gutter={[24, 24]} align=\"middle\">\r\n            <Col xs={24} md={8} style={{ textAlign: { xs: 'center', md: 'left' } }}>\r\n              <div style={{ position: 'relative', display: 'inline-block', marginBottom: '20px' }}>\r\n                <Avatar size={140} style={{\r\n                  fontSize: '4rem',\r\n                  backgroundColor: '#2563eb',\r\n                  borderRadius: 0,\r\n                  border: '6px solid #2563eb',\r\n                  boxShadow: '8px 8px 0px rgba(0,0,0,0.1)'\r\n                }}>\r\n                  ЁЯСитАНЁЯПл\r\n                </Avatar>\r\n              </div>\r\n              <Title level={2} style={{\r\n                fontWeight: 900,\r\n                color: '#1e293b',\r\n                marginBottom: '16px',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '-0.02em'\r\n              }}>\r\n                {teacher.name || 'Ismi ko\\'rsatilmagan'}\r\n              </Title>\r\n              <div\r\n                style={{\r\n                  backgroundColor: '#eff6ff',\r\n                  color: '#2563eb',\r\n                  fontWeight: 900,\r\n                  fontSize: '1rem',\r\n                  padding: '8px 16px',\r\n                  border: '3px solid #2563eb',\r\n                  display: 'inline-block',\r\n                  textTransform: 'uppercase'\r\n                }}\r\n              >\r\n                O'qituvchi\r\n              </div>\r\n            </Col>\r\n\r\n            <Col xs={24} md={16}>\r\n              {teacher.bio && (\r\n                <div style={{ marginBottom: '24px' }}>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '12px' }}>\r\n                    <EditOutlined style={{ color: '#2563eb', fontSize: '20px' }} />\r\n                    <Text style={{ fontWeight: 900, color: '#1e293b', fontSize: '1.1rem', textTransform: 'uppercase' }}>\r\n                      Biografiya\r\n                    </Text>\r\n                  </div>\r\n                  <div style={{ borderLeft: '6px solid #2563eb', paddingLeft: '16px', backgroundColor: '#f8fafc', padding: '16px' }}>\r\n                    <Text style={{ color: '#334155', fontSize: '1.1rem', lineHeight: 1.6, fontWeight: 500 }}>\r\n                      {teacher.bio}\r\n                    </Text>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div style={{ marginBottom: '24px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '12px' }}>\r\n                  <BookOutlined style={{ color: '#2563eb', fontSize: '20px' }} />\r\n                  <Text style={{ fontWeight: 900, color: '#1e293b', fontSize: '1.1rem', textTransform: 'uppercase' }}>\r\n                    O'qitiladigan fanlar\r\n                  </Text>\r\n                </div>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '12px' }}>\r\n                  {teacher.subjects?.map((subject) => (\r\n                    <div\r\n                      key={subject}\r\n                      style={{\r\n                        backgroundColor: '#fff',\r\n                        color: '#2563eb',\r\n                        fontWeight: 900,\r\n                        fontSize: '0.875rem',\r\n                        padding: '8px 16px',\r\n                        border: '3px solid #2563eb',\r\n                        boxShadow: '4px 4px 0px rgba(37, 99, 235, 0.1)'\r\n                      }}\r\n                    >\r\n                      {subject}\r\n                    </div>\r\n                  )) || (\r\n                      <Text style={{ color: '#94a3b8', fontSize: '1rem', fontWeight: 600 }}>\r\n                        Fanlar ko'rsatilmagan\r\n                      </Text>\r\n                    )}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '16px' }}>\r\n                  <BarChartOutlined style={{ color: '#2563eb', fontSize: '20px' }} />\r\n                  <Text style={{ fontWeight: 900, color: '#1e293b', fontSize: '1.1rem', textTransform: 'uppercase' }}>\r\n                    Statistika\r\n                  </Text>\r\n                </div>\r\n                <Row gutter={[24, 24]}>\r\n                  <Col xs={12} md={8}>\r\n                    <div style={{\r\n                      backgroundColor: '#fff',\r\n                      border: '4px solid #2563eb',\r\n                      borderRadius: 0,\r\n                      textAlign: 'center',\r\n                      padding: '20px',\r\n                      boxShadow: '8px 8px 0px rgba(37, 99, 235, 0.1)'\r\n                    }}>\r\n                      <Title level={2} style={{ fontSize: '2.5rem', fontWeight: 900, color: '#2563eb', marginBottom: '4px', lineHeight: 1 }}>\r\n                        {teacherTests.length}\r\n                      </Title>\r\n                      <Text style={{ color: '#64748b', fontWeight: 900, fontSize: '0.75rem', textTransform: 'uppercase' }}>\r\n                        Jami testlar\r\n                      </Text>\r\n                    </div>\r\n                  </Col>\r\n                  <Col xs={12} md={8}>\r\n                    <div style={{\r\n                      backgroundColor: '#fff',\r\n                      border: '4px solid #10b981',\r\n                      borderRadius: 0,\r\n                      textAlign: 'center',\r\n                      padding: '20px',\r\n                      boxShadow: '8px 8px 0px rgba(16, 185, 129, 0.1)'\r\n                    }}>\r\n                      <Title level={2} style={{ fontSize: '2.5rem', fontWeight: 900, color: '#10b981', marginBottom: '4px', lineHeight: 1 }}>\r\n                        {teacher.subjects?.length || 0}\r\n                      </Title>\r\n                      <Text style={{ color: '#64748b', fontWeight: 900, fontSize: '0.75rem', textTransform: 'uppercase' }}>\r\n                        Fanlar soni\r\n                      </Text>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Tests section */}\r\n      <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '400ms', marginBottom: '40px' }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '24px' }}>\r\n          <BookOutlined style={{ color: '#2563eb', fontSize: '24px' }} />\r\n          <Title level={2} style={{\r\n            fontSize: '1.8rem',\r\n            fontWeight: 900,\r\n            color: '#1e293b',\r\n            margin: 0,\r\n            textTransform: 'uppercase'\r\n          }}>\r\n            {teacher.name}ning <span style={{ color: '#2563eb' }}>testlari</span>\r\n          </Title>\r\n        </div>\r\n\r\n        {teacherTests.length > 0 ? (\r\n          <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '600ms' }}>\r\n            <Card style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '4px solid #000',\r\n              borderRadius: 0,\r\n              boxShadow: '12px 12px 0px rgba(0,0,0,0.05)',\r\n              overflow: 'hidden',\r\n              padding: 0\r\n            }}>\r\n              <Table\r\n                columns={testColumns}\r\n                dataSource={teacherTests.map(test => ({ ...test, key: test.id }))}\r\n                pagination={false}\r\n              />\r\n            </Card>\r\n          </div>\r\n        ) : (\r\n          <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '800ms' }}>\r\n            <Card style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '4px solid #e2e8f0',\r\n              borderRadius: 0,\r\n              boxShadow: '8px 8px 0px rgba(0,0,0,0.02)',\r\n              textAlign: 'center',\r\n              padding: '48px 24px'\r\n            }}>\r\n              <Text style={{ fontSize: '3rem', marginBottom: '16px', display: 'block' }}>ЁЯУЭ</Text>\r\n              <Title level={4} style={{\r\n                color: '#64748b',\r\n                fontWeight: 900,\r\n                marginBottom: '16px',\r\n                textTransform: 'uppercase'\r\n              }}>\r\n                Bu o'qituvchining hali testlari yo'q\r\n              </Title>\r\n              <Text style={{ color: '#94a3b8', fontWeight: 600 }}>\r\n                Tez orada yangi testlar qo'shilishi mumkin\r\n              </Text>\r\n            </Card>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TeacherDetails;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\TestDetails.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTestData'. Either include it or remove the dependency array.","line":51,"column":6,"nodeType":"ArrayExpression","endLine":51,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadTestData, testId]","fix":{"range":[1438,1446],"text":"[loadTestData, testId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSubmitTest'. Either include it or remove the dependency array.","line":60,"column":6,"nodeType":"ArrayExpression","endLine":60,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [timeLeft, testStarted, testCompleted, handleSubmitTest]","fix":{"range":[1732,1770],"text":"[timeLeft, testStarted, testCompleted, handleSubmitTest]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  Button,\r\n  Tag,\r\n  Avatar,\r\n  Progress,\r\n  Radio,\r\n  Input,\r\n  Alert,\r\n  Row,\r\n  Col,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined,\r\n  UserOutlined,\r\n  FileTextOutlined,\r\n  ClockCircleOutlined,\r\n  QuestionCircleOutlined,\r\n  CheckCircleOutlined,\r\n  PlayCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { TextArea } = Input;\r\n\r\nconst TestDetails = () => {\r\n  const { testId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n  \r\n  const [test, setTest] = useState(null);\r\n  const [teacher, setTeacher] = useState(null);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [testStarted, setTestStarted] = useState(false);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [answers, setAnswers] = useState({});\r\n  const [timeLeft, setTimeLeft] = useState(0);\r\n  const [testCompleted, setTestCompleted] = useState(false);\r\n  const [score, setScore] = useState(0);\r\n  const [hasTakenTest, setHasTakenTest] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadTestData();\r\n  }, [testId]);\r\n\r\n  useEffect(() => {\r\n    if (testStarted && timeLeft > 0) {\r\n      const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);\r\n      return () => clearTimeout(timer);\r\n    } else if (timeLeft === 0 && testStarted && !testCompleted) {\r\n      handleSubmitTest();\r\n    }\r\n  }, [timeLeft, testStarted, testCompleted]);\r\n\r\n  const loadTestData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Load test details\r\n      const testData = await apiService.getTest(testId);\r\n      setTest(testData);\r\n      \r\n      // Load teacher info\r\n      const usersData = await apiService.getUsers();\r\n      const users = usersData.results || usersData;\r\n      const teacherData = users.find(user => user.id === testData.teacher);\r\n      setTeacher(teacherData);\r\n      \r\n      // Load questions\r\n      const questionsData = await apiService.getQuestions({ test: testId });\r\n      const questionsList = questionsData.results || questionsData;\r\n      setQuestions(questionsList);\r\n      \r\n      // Check if student has already taken this test\r\n      if (currentUser) {\r\n        try {\r\n          const attempts = await apiService.getAttempts({ student: currentUser.id, test: testId });\r\n          const attemptsList = attempts.results || attempts;\r\n          setHasTakenTest(attemptsList.length > 0);\r\n        } catch (error) {\r\n          console.error('Failed to check test attempts:', error);\r\n        }\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading test data:', error);\r\n      setError('Test ma\\'lumotlarini yuklashda xatolik yuz berdi');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const startTest = () => {\r\n    if (hasTakenTest) {\r\n      return; // Don't start test if already taken\r\n    }\r\n\r\n    // Go directly to test taking page\r\n    navigate(`/student/take-test?testId=${testId}`);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handleAnswerChange = (questionId, answer) => {\r\n    setAnswers({\r\n      ...answers,\r\n      [questionId]: answer\r\n    });\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (currentQuestionIndex < questions.length - 1) {\r\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (currentQuestionIndex > 0) {\r\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\r\n    }\r\n  };\r\n\r\n  const handleSubmitTest = async () => {\r\n    // Calculate score\r\n    let correctAnswers = 0;\r\n    \r\n    console.log('=== TEST SCORING DEBUG ===');\r\n    console.log('Questions:', questions.length);\r\n    console.log('Answers given:', answers);\r\n    console.log('Total questions in test:', questions.length);\r\n\r\n    questions.forEach((question, index) => {\r\n      const userAnswer = answers[question.id] || '';\r\n      const correctAnswer = question.correct_answer || '';\r\n      \r\n      // Clean and normalize answers for comparison\r\n      const normalizedUserAnswer = userAnswer.toString().trim().toLowerCase();\r\n      const normalizedCorrectAnswer = correctAnswer.toString().trim().toLowerCase();\r\n      \r\n      console.log(`Q${index + 1}: User=\"${normalizedUserAnswer}\" | Correct=\"${normalizedCorrectAnswer}\" | Match: ${normalizedUserAnswer === normalizedCorrectAnswer}`);\r\n      \r\n      // Check if the answer matches the correct answer\r\n      if (normalizedUserAnswer && normalizedCorrectAnswer && normalizedUserAnswer === normalizedCorrectAnswer) {\r\n        correctAnswers++;\r\n        console.log(`тЬЕ Question ${index + 1}: CORRECT`);\r\n      } else {\r\n        console.log(`тЭМ Question ${index + 1}: INCORRECT`);\r\n      }\r\n    });\r\n\r\n    const finalScore = questions.length > 0 ? Math.round((correctAnswers / questions.length) * 100) : 0;\r\n    console.log(`Final Score: ${correctAnswers}/${questions.length} = ${finalScore}%`);\r\n    \r\n    setScore(finalScore);\r\n    setTestCompleted(true);\r\n    setHasTakenTest(true);\r\n\r\n    // Save result to API\r\n    try {\r\n      const timeTakenSeconds = test.time_limit * 60 - timeLeft;\r\n      await apiService.createAttempt({\r\n        student: currentUser.id,\r\n        test: testId,\r\n        score: finalScore, // Store as percentage (0-100)\r\n        answers: answers,\r\n        time_taken: Math.round(timeTakenSeconds / 60), // Convert back to minutes\r\n      });\r\n      console.log('Test result saved successfully');\r\n    } catch (error) {\r\n      console.error('Failed to save test result:', error);\r\n    }\r\n  };\r\n\r\n  const resetTest = () => {\r\n    setTestStarted(false);\r\n    setTestCompleted(false);\r\n    setCurrentQuestionIndex(0);\r\n    setAnswers({});\r\n    setTimeLeft(0);\r\n    setScore(0);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ \r\n        padding: '24px',\r\n        backgroundColor: '#ffffff'\r\n      }}>\r\n        <Text style={{ \r\n          fontSize: '1.125rem',\r\n          color: '#64748b',\r\n          display: 'block',\r\n          textAlign: 'center'\r\n        }}>\r\n          Ma'lumotlar yuklanmoqda...\r\n        </Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !test) {\r\n    return (\r\n      <div style={{ \r\n        padding: '24px',\r\n        backgroundColor: '#ffffff'\r\n      }}>\r\n        <Alert \r\n          message={error || 'Test topilmadi'}\r\n          type=\"error\"\r\n          style={{ \r\n            marginBottom: '16px',\r\n            backgroundColor: '#fef2f2',\r\n            border: '1px solid #fecaca',\r\n            color: '#991b1b'\r\n          }}\r\n        />\r\n        <Button\r\n          icon={<ArrowLeftOutlined />}\r\n          onClick={() => navigate('/student/search')}\r\n          style={{ \r\n            borderColor: '#2563eb',\r\n            color: '#2563eb',\r\n            fontWeight: 600,\r\n            textTransform: 'none'\r\n          }}\r\n        >\r\n          O'qituvchilarni qidirishga qaytish\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (testCompleted) {\r\n    return (\r\n      <div style={{\r\n        padding: '24px',\r\n        backgroundColor: '#ffffff'\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          marginBottom: '32px',\r\n          paddingBottom: '24px',\r\n          borderBottom: '1px solid #e2e8f0'\r\n        }}>\r\n          <Title level={2} style={{\r\n            fontSize: '2.5rem',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: 0\r\n          }}>\r\n            Test natijasi\r\n          </Title>\r\n        </div>\r\n\r\n        <Card style={{\r\n          textAlign: 'center',\r\n          background: score >= 70\r\n            ? 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)'\r\n            : 'linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)',\r\n          border: score >= 70 ? '1px solid #22c55e' : '1px solid #dc2626',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n          padding: '32px'\r\n        }}>\r\n          <CheckCircleOutlined style={{ \r\n            fontSize: '64px', \r\n            color: score >= 70 ? '#10b981' : '#dc2626', \r\n            marginBottom: '16px' \r\n          }} />\r\n          \r\n          <Title level={1} style={{\r\n            fontWeight: 700,\r\n            color: score >= 70 ? '#10b981' : '#dc2626',\r\n            marginBottom: '16px',\r\n            fontSize: '3rem'\r\n          }}>\r\n            {score}%\r\n          </Title>\r\n\r\n          <Title level={3} style={{ marginBottom: '16px' }}>\r\n            {test.title}\r\n          </Title>\r\n\r\n          <Text style={{ \r\n            fontSize: '1rem',\r\n            marginBottom: '24px',\r\n            display: 'block',\r\n            color: '#374151'\r\n          }}>\r\n            {score >= 70 ? 'ЁЯОЙ Tabriklaymiz! Testni muvaffaqiyatli topshirdingiz.' : 'ЁЯТк Testni qayta topshirib ko\\'ring.'}\r\n          </Text>\r\n\r\n          <div style={{ display: 'flex', gap: '12px', justifyContent: 'center' }}>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={resetTest}\r\n              size=\"large\"\r\n              style={{\r\n                backgroundColor: '#2563eb',\r\n                borderColor: '#2563eb',\r\n                fontWeight: 600,\r\n                borderRadius: '8px'\r\n              }}\r\n            >\r\n              Boshqa test topshirish\r\n            </Button>\r\n            <Button\r\n              onClick={() => navigate('/student/results')}\r\n              size=\"large\"\r\n              style={{\r\n                borderColor: '#e2e8f0',\r\n                color: '#64748b',\r\n                fontWeight: 600,\r\n                borderRadius: '8px'\r\n              }}\r\n            >\r\n              Natijalarimni ko'rish\r\n            </Button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '24px',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '32px',\r\n        paddingBottom: '24px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Title level={2} style={{\r\n          fontSize: '2.5rem',\r\n          fontWeight: 700,\r\n          color: '#1e293b',\r\n          marginBottom: '8px'\r\n        }}>\r\n          {test.title}\r\n        </Title>\r\n        <Text style={{\r\n          fontSize: '1.125rem',\r\n          color: '#64748b',\r\n          fontWeight: 400\r\n        }}>\r\n          Test haqida ma'lumot va testni boshlash\r\n        </Text>\r\n      </div>\r\n\r\n      <Row gutter={[24, 24]}>\r\n        {/* Left Side - Test Details */}\r\n        <Col xs={24} md={8}>\r\n          <Card style={{\r\n            height: 'fit-content',\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            position: 'sticky',\r\n            top: '20px'\r\n          }}>\r\n            <Title level={4} style={{ \r\n              fontWeight: 600,\r\n              marginBottom: '24px',\r\n              color: '#1e293b'\r\n            }}>\r\n              ЁЯУЛ Test ma'lumotlari\r\n            </Title>\r\n            \r\n            <div style={{ marginBottom: '24px' }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n                <UserOutlined style={{ marginRight: '8px', color: '#2563eb' }} />\r\n                <Text style={{ fontSize: '0.875rem' }}>\r\n                  <strong>O'qituvchi:</strong> {teacher?.name || 'Noma\\'lum'}\r\n                </Text>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n                <FileTextOutlined style={{ marginRight: '8px', color: '#2563eb' }} />\r\n                <Text style={{ fontSize: '0.875rem' }}>\r\n                  <strong>Fan:</strong> {test.subject}\r\n                </Text>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n                <QuestionCircleOutlined style={{ marginRight: '8px', color: '#2563eb' }} />\r\n                <Text style={{ fontSize: '0.875rem' }}>\r\n                  <strong>Savollar soni:</strong> {questions.length} ta\r\n                </Text>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '16px' }}>\r\n                <ClockCircleOutlined style={{ marginRight: '8px', color: '#2563eb' }} />\r\n                <Text style={{ fontSize: '0.875rem' }}>\r\n                  <strong>Vaqt:</strong> {test.time_limit} daqiqa\r\n                </Text>\r\n              </div>\r\n            </div>\r\n\r\n            {test.description && (\r\n              <div style={{ marginBottom: '24px' }}>\r\n                <Text style={{ \r\n                  fontSize: '0.875rem',\r\n                  fontWeight: 600,\r\n                  marginBottom: '8px',\r\n                  display: 'block'\r\n                }}>\r\n                  <strong>Test haqida:</strong>\r\n                </Text>\r\n                <Text style={{ \r\n                  fontSize: '0.875rem',\r\n                  color: '#64748b'\r\n                }}>\r\n                  {test.description}\r\n                </Text>\r\n              </div>\r\n            )}\r\n\r\n            {testStarted ? (\r\n              <div>\r\n                <Title level={5} style={{ \r\n                  fontWeight: 600,\r\n                  marginBottom: '16px'\r\n                }}>\r\n                  тП▒я╕П Test jarayonida\r\n                </Title>\r\n                \r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <Text style={{ \r\n                    fontSize: '0.875rem',\r\n                    color: '#64748b',\r\n                    marginBottom: '8px',\r\n                    display: 'block'\r\n                  }}>\r\n                    Progress: {currentQuestionIndex + 1} / {questions.length}\r\n                  </Text>\r\n                  <Progress\r\n                    percent={Math.round((currentQuestionIndex + 1) / questions.length * 100)}\r\n                    strokeColor=\"#2563eb\"\r\n                    showInfo={false}\r\n                    style={{ marginBottom: '16px' }}\r\n                  />\r\n                  \r\n                  <Tag\r\n                    icon={<ClockCircleOutlined />}\r\n                    color={timeLeft < 300 ? 'red' : 'blue'}\r\n                    style={{ fontSize: '0.75rem' }}\r\n                  >\r\n                    {formatTime(timeLeft)}\r\n                  </Tag>\r\n                </div>\r\n\r\n                <Text style={{ \r\n                  fontSize: '0.875rem',\r\n                  color: '#64748b'\r\n                }}>\r\n                  Testni to'liq boshlash uchun o'ng tomondagi savollarga javob bering.\r\n                </Text>\r\n              </div>\r\n            ) : hasTakenTest ? (\r\n              <Alert\r\n                message={\r\n                  <Text style={{ fontSize: '0.875rem' }}>\r\n                    <strong>Diqqat:</strong> Siz ushbu testni allaqachon topshirgansiz.\r\n                  </Text>\r\n                }\r\n                type=\"warning\"\r\n                showIcon={false}\r\n              />\r\n            ) : (\r\n              <Button\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                onClick={startTest}\r\n                block\r\n                style={{ \r\n                  padding: '16px',\r\n                  borderRadius: '8px',\r\n                  textTransform: 'none',\r\n                  fontWeight: 600,\r\n                  fontSize: '1.1rem',\r\n                  backgroundColor: '#2563eb',\r\n                  borderColor: '#2563eb'\r\n                }}\r\n                icon={<PlayCircleOutlined />}\r\n              >\r\n                Testni boshlash\r\n              </Button>\r\n            )}\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* Right Side - Test Taking */}\r\n        <Col xs={24} md={16}>\r\n          {testStarted && currentQuestion ? (\r\n            <Card style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n              padding: '32px'\r\n            }}>\r\n              <Title level={4} style={{\r\n                fontSize: '1.25rem',\r\n                fontWeight: 600,\r\n                color: '#1e293b',\r\n                marginBottom: '24px'\r\n              }}>\r\n                {currentQuestion.question_text}\r\n              </Title>\r\n\r\n              {currentQuestion.question_type === 'multiple_choice' && (\r\n                <Radio.Group\r\n                  value={answers[currentQuestion.id] || ''}\r\n                  onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)}\r\n                  style={{ width: '100%', marginTop: '16px' }}\r\n                >\r\n                  {currentQuestion.options?.map((option, index) => (\r\n                    <div\r\n                      key={index}\r\n                      style={{\r\n                        marginBottom: '8px',\r\n                        padding: '16px',\r\n                        border: '1px solid #f0f0f0',\r\n                        borderRadius: '8px',\r\n                        width: '100%',\r\n                        cursor: 'pointer',\r\n                        backgroundColor: '#fafafa',\r\n                        transition: 'background-color 0.2s'\r\n                      }}\r\n                      onClick={() => handleAnswerChange(currentQuestion.id, option.text)}\r\n                    >\r\n                      <Radio \r\n                        value={option.text}\r\n                        style={{ width: '100%' }}\r\n                      >\r\n                        {option.text}\r\n                      </Radio>\r\n                    </div>\r\n                  ))}\r\n                </Radio.Group>\r\n              )}\r\n\r\n              {currentQuestion.question_type === 'short_answer' && (\r\n                <TextArea\r\n                  placeholder=\"Javobingizni kiriting\"\r\n                  value={answers[currentQuestion.id] || ''}\r\n                  onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)}\r\n                  rows={4}\r\n                  style={{\r\n                    marginTop: '24px',\r\n                    borderRadius: '8px',\r\n                    backgroundColor: '#fafafa'\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                marginTop: '32px',\r\n                gap: '12px'\r\n              }}>\r\n                <Button\r\n                  onClick={handlePrevious}\r\n                  disabled={currentQuestionIndex === 0}\r\n                  style={{\r\n                    cursor: currentQuestionIndex === 0 ? 'not-allowed' : 'pointer',\r\n                    borderRadius: '8px',\r\n                    padding: '8px 24px',\r\n                    fontWeight: 600,\r\n                    borderColor: '#e2e8f0',\r\n                    color: '#64748b'\r\n                  }}\r\n                >\r\n                  Oldingi\r\n                </Button>\r\n\r\n                {currentQuestionIndex === questions.length - 1 ? (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    onClick={handleSubmitTest}\r\n                    style={{\r\n                      cursor: 'pointer',\r\n                      borderRadius: '8px',\r\n                      padding: '8px 24px',\r\n                      fontWeight: 600,\r\n                      backgroundColor: '#10b981',\r\n                      borderColor: '#10b981'\r\n                    }}\r\n                  >\r\n                    Testni topshirish\r\n                  </Button>\r\n                ) : (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    onClick={handleNext}\r\n                    style={{\r\n                      cursor: 'pointer',\r\n                      borderRadius: '8px',\r\n                      padding: '8px 24px',\r\n                      fontWeight: 600,\r\n                      backgroundColor: '#2563eb',\r\n                      borderColor: '#2563eb'\r\n                    }}\r\n                  >\r\n                    Keyingi\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </Card>\r\n          ) : (\r\n            <Card style={{\r\n              textAlign: 'center',\r\n              backgroundColor: '#f8f9fa',\r\n              border: '1px solid #e9ecef',\r\n              borderRadius: '12px',\r\n              padding: '48px 24px'\r\n            }}>\r\n              <QuestionCircleOutlined style={{ \r\n                fontSize: '64px', \r\n                color: '#2563eb', \r\n                marginBottom: '16px' \r\n              }} />\r\n              <Title level={3} style={{ \r\n                fontWeight: 600,\r\n                marginBottom: '16px',\r\n                color: '#1e293b'\r\n              }}>\r\n                Testni boshlashga tayyormisiz?\r\n              </Title>\r\n              <Text style={{ \r\n                fontSize: '1rem',\r\n                color: '#64748b',\r\n                marginBottom: '24px',\r\n                display: 'block'\r\n              }}>\r\n                \"Testni boshlash\" tugmasini bosib testni boshlang.\r\n                Test vaqt davomida davom etadi va natijalaringiz saqlanadi.\r\n              </Text>\r\n            </Card>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TestDetails;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\student\\TestResults.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadResults'. Either include it or remove the dependency array.","line":69,"column":6,"nodeType":"ArrayExpression","endLine":69,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser?.id, loadResults]","fix":{"range":[1892,1909],"text":"[currentUser?.id, loadResults]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Typography,\r\n  Tag,\r\n  Button,\r\n  Modal,\r\n  Space,\r\n  Alert,\r\n  Spin,\r\n  Input,\r\n  Select,\r\n  Row,\r\n  Col,\r\n  ConfigProvider,\r\n  Divider,\r\n} from 'antd';\r\nimport {\r\n  CheckCircleOutlined,\r\n  CloseCircleOutlined,\r\n  SearchOutlined,\r\n  SortAscendingOutlined,\r\n  EyeOutlined,\r\n  CalendarOutlined,\r\n  BookOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\nimport LaTeXPreview from '../../components/LaTeXPreview';\r\nimport 'animate.css';\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nconst TestResults = () => {\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n  const [results, setResults] = useState([]);\r\n  const [tests, setTests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedResult, setSelectedResult] = useState(null);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [questionsLoading, setQuestionsLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortBy, setSortBy] = useState('date');\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [searchParams] = useSearchParams();\r\n  const [highlightId, setHighlightId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const highlight = searchParams.get('highlight');\r\n    if (highlight) {\r\n      setHighlightId(highlight);\r\n      const timer = setTimeout(() => {\r\n        setHighlightId(null);\r\n      }, 2000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [searchParams]);\r\n\r\n  useEffect(() => {\r\n    if (currentUser?.id) {\r\n      loadResults();\r\n    }\r\n  }, [currentUser?.id]);\r\n\r\n  const loadResults = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const attemptsResponse = await apiService.getAttempts({ student: currentUser.id });\r\n      const studentAttempts = attemptsResponse.results || attemptsResponse;\r\n      setResults(studentAttempts);\r\n\r\n      const testsResponse = await apiService.getTests();\r\n      const allTests = testsResponse.results || testsResponse;\r\n      setTests(allTests);\r\n    } catch (error) {\r\n      console.error('Failed to load test results:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getTestById = (testId) => {\r\n    return tests.find(test => test.id === testId);\r\n  };\r\n\r\n  const loadQuestions = async (testId) => {\r\n    try {\r\n      setQuestionsLoading(true);\r\n      const questionsResponse = await apiService.getQuestions({ test: testId });\r\n      const testQuestions = questionsResponse.results || questionsResponse;\r\n      setQuestions(testQuestions);\r\n    } catch (error) {\r\n      console.error('Failed to load questions:', error);\r\n      setQuestions([]);\r\n    } finally {\r\n      setQuestionsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleViewDetails = async (result) => {\r\n    setSelectedResult(result);\r\n    setDialogOpen(true);\r\n    await loadQuestions(result.test);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setDialogOpen(false);\r\n    setSelectedResult(null);\r\n  };\r\n\r\n  const getScoreColor = (score) => {\r\n    if (score >= 90) return '#059669'; // Green\r\n    if (score >= 70) return '#2563eb'; // Blue\r\n    if (score >= 50) return '#d97706'; // Orange\r\n    return '#dc2626'; // Red\r\n  };\r\n\r\n  const getScoreLabel = (score) => {\r\n    if (score >= 90) return 'A\\'lo';\r\n    if (score >= 70) return 'Yaxshi';\r\n    if (score >= 50) return 'Qoniqarli';\r\n    return 'Qoniqarsiz';\r\n  };\r\n\r\n  const getFilteredResults = () => {\r\n    if (!searchTerm) return results;\r\n    const searchLower = searchTerm.toLowerCase();\r\n    return results.filter(result => {\r\n      const test = getTestById(result.test);\r\n      const testTitle = test?.title || '';\r\n      const testSubject = test?.subject || '';\r\n      return testTitle.toLowerCase().includes(searchLower) ||\r\n        testSubject.toLowerCase().includes(searchLower);\r\n    });\r\n  };\r\n\r\n  const getSortedResults = () => {\r\n    const filteredResults = getFilteredResults();\r\n    if (sortBy === 'score_high') return filteredResults.sort((a, b) => b.score - a.score);\r\n    if (sortBy === 'score_low') return filteredResults.sort((a, b) => a.score - b.score);\r\n    if (sortBy === 'subject') {\r\n      return filteredResults.sort((a, b) => {\r\n        const testA = getTestById(a.test);\r\n        const testB = getTestById(b.test);\r\n        return (testA?.subject || '').localeCompare(testB?.subject || '');\r\n      });\r\n    }\r\n    if (sortBy === 'name') {\r\n      return filteredResults.sort((a, b) => {\r\n        const testA = getTestById(a.test);\r\n        const testB = getTestById(b.test);\r\n        return (testA?.title || '').localeCompare(testB?.title || '');\r\n      });\r\n    }\r\n    return filteredResults.sort((a, b) => new Date(b.submitted_at) - new Date(a.submitted_at));\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Test',\r\n      dataIndex: 'test',\r\n      key: 'test',\r\n      render: (testId) => {\r\n        const test = getTestById(testId);\r\n        return (\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n            <div style={{ backgroundColor: '#000', color: '#fff', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 900 }}>R</div>\r\n            <Text style={{ fontWeight: 700, fontSize: '0.9rem' }}>{test?.title || 'Noma\\'lum test'}</Text>\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Fan',\r\n      dataIndex: 'test',\r\n      key: 'subject',\r\n      render: (testId) => {\r\n        const test = getTestById(testId);\r\n        return (\r\n          <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 700, backgroundColor: '#fff', color: '#000', textTransform: 'uppercase', fontSize: '10px' }}>\r\n            {test?.subject || 'Noma\\'lum'}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Sana',\r\n      dataIndex: 'submitted_at',\r\n      key: 'date',\r\n      render: (date) => (\r\n        <div style={{\r\n          display: 'inline-flex',\r\n          alignItems: 'center',\r\n          gap: '8px',\r\n          border: '2px solid #000',\r\n          padding: '6px 12px',\r\n          backgroundColor: '#fff',\r\n          boxShadow: '4px 4px 0px #000',\r\n          fontWeight: 700,\r\n          fontSize: '12px'\r\n        }}>\r\n          <CalendarOutlined />\r\n          {new Date(date).toLocaleDateString('uz-UZ')}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Ball / Baho',\r\n      key: 'score_grade',\r\n      render: (_, record) => (\r\n        <div style={{\r\n          display: 'inline-flex',\r\n          alignItems: 'center',\r\n          gap: '8px',\r\n          border: '2px solid #000',\r\n          padding: '4px 8px',\r\n          backgroundColor: '#fff',\r\n          boxShadow: '4px 4px 0px #000'\r\n        }}>\r\n          <Text style={{ fontWeight: 900, fontSize: '1rem', color: getScoreColor(record.score) }}>{record.score}%</Text>\r\n          <div style={{\r\n            border: '2px solid #000',\r\n            padding: '1px 6px',\r\n            fontWeight: 900,\r\n            fontSize: '9px',\r\n            textTransform: 'uppercase',\r\n            backgroundColor: '#000',\r\n            color: '#fff'\r\n          }}>\r\n            {getScoreLabel(record.score)}\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakat',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Button\r\n          size=\"small\"\r\n          onClick={() => handleViewDetails(record)}\r\n          style={{\r\n            borderRadius: 0,\r\n            border: '2px solid #000',\r\n            boxShadow: '4px 4px 0px #000',\r\n            backgroundColor: '#fff',\r\n            color: '#000',\r\n            fontWeight: 900,\r\n            textTransform: 'uppercase',\r\n            fontSize: '11px',\r\n            height: '32px'\r\n          }}\r\n          icon={<EyeOutlined />}\r\n        >\r\n          Ko'rish\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '400px', flexDirection: 'column' }}>\r\n        <Spin size=\"large\" />\r\n        <Text style={{ marginTop: 16, fontWeight: 700, textTransform: 'uppercase' }}>Natijalar yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider theme={{ token: { borderRadius: 0, colorPrimary: '#000' } }}>\r\n      <div style={{ padding: '40px 0' }}>\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '60px' }}>\r\n          <div style={{ backgroundColor: '#000', color: '#fff', padding: '8px 16px', fontWeight: 700, fontSize: '14px', textTransform: 'uppercase', letterSpacing: '0.2em', marginBottom: '16px', display: 'inline-block' }}>\r\n            Natijalar\r\n          </div>\r\n          <Title level={1} style={{ fontWeight: 900, fontSize: '2.5rem', lineHeight: 0.9, textTransform: 'uppercase', letterSpacing: '-0.05em', color: '#000' }}>\r\n            Mening natijalarim\r\n          </Title>\r\n          <div style={{ width: '80px', height: '10px', backgroundColor: '#000', margin: '24px 0' }}></div>\r\n          <Paragraph style={{ fontSize: '1.2rem', fontWeight: 600, color: '#333', maxWidth: '600px' }}>\r\n            Barcha topshirilgan testlar natijalarini kuzatib boring va xatolaringiz ustida ishlang.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ marginBottom: '40px' }}>\r\n          <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}>\r\n            <Row gutter={[24, 16]} align=\"middle\">\r\n              <Col xs={24} md={18}>\r\n                <Search\r\n                  placeholder=\"Test nomi yoki fanini qidirish...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  style={{ borderRadius: 0, width: '100%' }}\r\n                  size=\"large\"\r\n                />\r\n              </Col>\r\n              <Col xs={24} md={6}>\r\n                <div style={{ display: 'flex', gap: '12px', alignItems: 'center', justifyContent: 'flex-end', width: '100%' }}>\r\n                  <SortAscendingOutlined style={{ fontSize: '20px' }} />\r\n                  <Select value={sortBy} onChange={setSortBy} style={{ width: '100%' }} size=\"large\">\r\n                    <Option value=\"date\">Sana</Option>\r\n                    <Option value=\"name\">Nomi</Option>\r\n                    <Option value=\"subject\">Fan</Option>\r\n                    <Option value=\"score_high\">Eng baland ball</Option>\r\n                    <Option value=\"score_low\">Eng past ball</Option>\r\n                  </Select>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </div>\r\n\r\n        <div className=\"animate__animated animate__fadeIn\" style={{ animationDelay: '0.3s' }}>\r\n          {results.length === 0 ? (\r\n            <Card style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '10px 10px 0px #000', textAlign: 'center', padding: '40px' }}>\r\n              <BookOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\r\n              <Title level={4} style={{ fontWeight: 800 }}>Siz hali test topshirmagansiz</Title>\r\n              <Button type=\"primary\" size=\"large\" onClick={() => navigate('/student/take-test')} style={{ borderRadius: 0, border: '4px solid #000', boxShadow: '5px 5px 0px #000', fontWeight: 900, marginTop: '20px', height: '56px' }}>Hozir topshirish</Button>\r\n            </Card>\r\n          ) : (\r\n            <Table\r\n              columns={columns}\r\n              dataSource={getSortedResults().map(r => ({ ...r, key: r.id }))}\r\n              pagination={{\r\n                pageSize: pageSize,\r\n                showSizeChanger: true,\r\n                pageSizeOptions: ['10', '20', '50'],\r\n                onShowSizeChange: (_, size) => setPageSize(size),\r\n              }}\r\n              rowHoverable={false}\r\n              style={{ border: '4px solid #000', boxShadow: '10px 10px 0px #000' }}\r\n              scroll={{ x: 800 }}\r\n              onRow={(record) => ({\r\n                style: record.test === highlightId ? {\r\n                  animation: 'brutalist-flash 0.5s infinite alternate',\r\n                  backgroundColor: '#fef9c3' // Light yellow\r\n                } : {}\r\n              })}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Details Modal */}\r\n        <Modal\r\n          title={<Title level={4} style={{ margin: 0, fontWeight: 900, textTransform: 'uppercase' }}>Natija tafsilotlari</Title>}\r\n          open={dialogOpen}\r\n          onCancel={handleCloseDialog}\r\n          width={900}\r\n          centered\r\n          styles={{ mask: { backdropFilter: 'blur(4px)' } }}\r\n          footer={[<Button key=\"close\" onClick={handleCloseDialog} style={{ borderRadius: 0, border: '3px solid #000', fontWeight: 900, height: '44px' }}>YOPISh</Button>]}\r\n        >\r\n          {selectedResult && (\r\n            <div style={{ padding: '20px 0' }}>\r\n              {(() => {\r\n                const test = getTestById(selectedResult.test);\r\n                return (\r\n                  <>\r\n                    <div style={{ backgroundColor: '#000', color: '#fff', padding: '24px', marginBottom: '24px', border: '4px solid #000' }}>\r\n                      <Row gutter={24} align=\"middle\">\r\n                        <Col span={16}>\r\n                          <Title level={3} style={{ color: '#fff', margin: 0, fontWeight: 900, textTransform: 'uppercase' }}>{test?.title || 'Noma\\'lum test'}</Title>\r\n                          <Text style={{ color: '#ccc', fontWeight: 700, fontSize: '14px' }}>FAN: {test?.subject || 'Noma\\'lum'}</Text>\r\n                        </Col>\r\n                        <Col span={8} style={{ textAlign: 'right' }}>\r\n                          <div style={{ fontSize: '3rem', fontWeight: 900, lineHeight: 1 }}>{selectedResult.score}%</div>\r\n                          <div style={{ fontWeight: 900, textTransform: 'uppercase', fontSize: '12px' }}>{getScoreLabel(selectedResult.score)}</div>\r\n                        </Col>\r\n                      </Row>\r\n                    </div>\r\n\r\n                    <Title level={4} style={{ fontWeight: 900, textTransform: 'uppercase', marginBottom: '24px', fontSize: '16px' }}>Savollar tahlili</Title>\r\n\r\n                    {questionsLoading ? (\r\n                      <div style={{ textAlign: 'center', padding: '40px' }}><Spin size=\"large\" /></div>\r\n                    ) : (\r\n                      <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n                        {questions.map((question, index) => {\r\n                          const studentAnswer = selectedResult.answers?.[question.id];\r\n                          const isCorrect = studentAnswer && question.correct_answer &&\r\n                            studentAnswer.toString().trim().toLowerCase() === question.correct_answer.toString().trim().toLowerCase();\r\n\r\n                          return (\r\n                            <Card\r\n                              key={question.id}\r\n                              style={{\r\n                                borderRadius: 0,\r\n                                border: '3px solid #000',\r\n                                borderLeft: `12px solid ${isCorrect ? '#059669' : '#dc2626'}`,\r\n                                backgroundColor: isCorrect ? '#f0fdf4' : '#fef2f2'\r\n                              }}\r\n                            >\r\n                              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '12px' }}>\r\n                                <Tag style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, backgroundColor: '#000', color: '#fff' }}>SAVOL {index + 1}</Tag>\r\n                                <Tag color={isCorrect ? 'green' : 'red'} style={{ borderRadius: 0, border: '2px solid #000', fontWeight: 900, textTransform: 'uppercase' }}>\r\n                                  {isCorrect ? 'TO\\'G\\'RI' : 'NOTO\\'G\\'RI'}\r\n                                </Tag>\r\n                              </div>\r\n\r\n                              <div style={{ marginBottom: '16px' }}>\r\n                                <LaTeXPreview text={question.question_text} style={{ fontSize: '1.1rem', fontWeight: 700, color: '#000' }} />\r\n                              </div>\r\n\r\n                              {question.image && (\r\n                                <div style={{ marginBottom: '16px', border: '2px solid #000', padding: '8px', display: 'inline-block', backgroundColor: '#fff' }}>\r\n                                  <img src={question.image} alt=\"Savol rasmi\" style={{ maxWidth: '100%', maxHeight: '300px' }} />\r\n                                </div>\r\n                              )}\r\n\r\n                              <div style={{ padding: '12px', border: '2px solid #000', backgroundColor: '#fff' }}>\r\n                                <Text style={{ display: 'block', fontSize: '10px', fontWeight: 900, textTransform: 'uppercase', color: '#666' }}>Sizning javobingiz:</Text>\r\n                                <Text style={{ fontWeight: 700, color: isCorrect ? '#059669' : '#dc2626' }}>{studentAnswer || 'Javob berilmagan'}</Text>\r\n                              </div>\r\n\r\n                              {question.explanation && (\r\n                                <div style={{ marginTop: '16px', padding: '12px', border: '2px dashed #000', backgroundColor: '#fff' }}>\r\n                                  <Text style={{ display: 'block', fontSize: '10px', fontWeight: 900, textTransform: 'uppercase', color: '#666', marginBottom: '4px' }}>Tushuntirish:</Text>\r\n                                  <Text style={{ fontWeight: 600 }}>{question.explanation}</Text>\r\n                                </div>\r\n                              )}\r\n                            </Card>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                );\r\n              })()}\r\n            </div>\r\n          )}\r\n        </Modal>\r\n        <style>{`\r\n          @keyframes brutalist-flash {\r\n            from { opacity: 1; transform: scale(1); }\r\n            to { opacity: 0.7; transform: scale(1.02); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default TestResults;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\CreateTest.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[35,43],"text":""},"desc":"Remove unused variable 'useRef'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[43,56],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTestForEditing'. Either include it or remove the dependency array.","line":80,"column":6,"nodeType":"ArrayExpression","endLine":80,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadTestForEditing, testId]","fix":{"range":[2401,2409],"text":"[loadTestForEditing, testId]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":168,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":168,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleChange"},"fix":{"range":[5434,5556],"text":""},"desc":"Remove unused variable 'handleChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'testFormSubmission' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":492,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":492,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"testFormSubmission"},"fix":{"range":[16981,17239],"text":""},"desc":"Remove unused variable 'testFormSubmission'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'values' is defined but never used.","line":501,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":501,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"values"},"fix":{"range":[17273,17279],"text":""},"desc":"Remove unused variable 'values'."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  Button,\r\n  Input,\r\n  Select,\r\n  Alert,\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Checkbox,\r\n  Space,\r\n  Divider,\r\n  Upload,\r\n  Modal,\r\n  message,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined as AddIcon,\r\n  DeleteOutlined as DeleteIcon,\r\n  CheckCircleOutlined as CorrectIcon,\r\n  ArrowLeftOutlined as ArrowBackIcon,\r\n  CameraOutlined as PhotoCameraIcon,\r\n  CloseOutlined as ClearIcon,\r\n  UploadOutlined as ImportIcon,\r\n  FileExcelOutlined,\r\n  DownloadOutlined,\r\n} from '@ant-design/icons';\r\nimport * as XLSX from 'xlsx';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\nimport MathSymbols from '../../components/MathSymbols';\r\nimport LaTeXPreview from '../../components/LaTeXPreview';\r\n\r\nconst CreateTest = () => {\r\n  const { currentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { testId } = useParams();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    subject: 'Matematika',\r\n    description: '',\r\n    time_limit: 30,\r\n    target_grades: [], // Empty array means all grades\r\n    difficulty: 'medium', // easy, medium, hard\r\n  });\r\n  const [questions, setQuestions] = useState([{\r\n    question_text: '',\r\n    question_type: 'multiple_choice',\r\n    question_image: null,\r\n    options: [\r\n      { text: 'A)', image: null },\r\n      { text: 'B)', image: null },\r\n      { text: 'C)', image: null },\r\n      { text: 'D)', image: null }\r\n    ],\r\n    correct_answer: '',\r\n    explanation: '',\r\n    formula: '',\r\n    code: ''\r\n  }]);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [mathSymbolsOpen, setMathSymbolsOpen] = useState(false);\r\n  const [currentField, setCurrentField] = useState({ questionIndex: null, field: null });\r\n  const [importModalVisible, setImportModalVisible] = useState(false);\r\n  const [importing, setImporting] = useState(false);\r\n\r\n  // Load test data if editing\r\n  useEffect(() => {\r\n    if (testId) {\r\n      console.log('Loading test for editing, testId:', testId);\r\n      loadTestForEditing();\r\n    }\r\n  }, [testId]);\r\n\r\n  // Log form data changes\r\n  useEffect(() => {\r\n    // Form data updated\r\n  }, [formData]);\r\n\r\n  const loadTestForEditing = async () => {\r\n    try {\r\n      console.log('Loading test for editing:', testId);\r\n      const test = await apiService.getTest(testId);\r\n      console.log('Test data loaded:', test);\r\n\r\n      if (test && test.teacher === currentUser.id) {\r\n        setIsEditing(true);\r\n\r\n        // Parse target_grades properly\r\n        let parsedGrades = [];\r\n        if (Array.isArray(test.target_grades)) {\r\n          parsedGrades = test.target_grades;\r\n        } else if (typeof test.target_grades === 'string') {\r\n          try {\r\n            parsedGrades = JSON.parse(test.target_grades);\r\n            if (!Array.isArray(parsedGrades)) {\r\n              parsedGrades = [];\r\n            }\r\n          } catch {\r\n            // If not JSON, treat as comma separated\r\n            parsedGrades = test.target_grades.split(',').map(g => g.trim()).filter(g => g);\r\n          }\r\n        }\r\n\r\n        const newFormData = {\r\n          title: test.title || '',\r\n          subject: test.subject || 'Matematika',\r\n          description: test.description || '',\r\n          time_limit: test.time_limit || 30,\r\n          target_grades: parsedGrades,\r\n          difficulty: test.difficulty || 'medium',\r\n        };\r\n\r\n        console.log('Setting form data:', newFormData);\r\n        setFormData(newFormData);\r\n\r\n        // Load questions\r\n        const questionsData = await apiService.getQuestions({ test: testId });\r\n        const questionsList = questionsData.results || questionsData;\r\n        setQuestions(questionsList.map(q => {\r\n          let parsedOptions = q.options || ['A)', 'B)', 'C)', 'D)'];\r\n          if (typeof parsedOptions === 'string') {\r\n            try {\r\n              parsedOptions = JSON.parse(parsedOptions);\r\n            } catch {\r\n              parsedOptions = ['A)', 'B)', 'C)', 'D)'];\r\n            }\r\n          }\r\n\r\n          return {\r\n            id: q.id,\r\n            question_text: q.question_text,\r\n            question_type: q.question_type,\r\n            question_image: null, // Will be loaded separately if needed\r\n            options: Array.isArray(parsedOptions) ? parsedOptions.map((opt, idx) => {\r\n              if (typeof opt === 'object' && opt !== null) {\r\n                return { text: opt.text || `(${String.fromCharCode(65 + idx)})` };\r\n              }\r\n              return { text: opt };\r\n            }) : [\r\n              { text: 'A)' },\r\n              { text: 'B)' },\r\n              { text: 'C)' },\r\n              { text: 'D)' }\r\n            ],\r\n            correct_answer: q.correct_answer,\r\n            explanation: q.explanation || '',\r\n            formula: q.formula || '',\r\n            code: q.code || ''\r\n          };\r\n        }));\r\n      } else {\r\n        setError('Test not found or access denied');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load test for editing:', err);\r\n      setError('Failed to load test for editing');\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleGradeChange = (classGroup) => {\r\n    const updatedGrades = formData.target_grades.includes(classGroup)\r\n      ? formData.target_grades.filter(g => g !== classGroup)\r\n      : [...formData.target_grades, classGroup];\r\n    setFormData({\r\n      ...formData,\r\n      target_grades: updatedGrades\r\n    });\r\n  };\r\n\r\n  const addQuestion = () => {\r\n    setQuestions([...questions, {\r\n      question_text: '',\r\n      question_type: 'multiple_choice',\r\n      question_image: null,\r\n      options: [\r\n        { text: 'A)', image: null },\r\n        { text: 'B)', image: null },\r\n        { text: 'C)', image: null },\r\n        { text: 'D)', image: null }\r\n      ],\r\n      correct_answer: '',\r\n      explanation: '',\r\n      formula: '',\r\n      code: ''\r\n    }]);\r\n  };\r\n\r\n  const updateQuestion = (index, field, value) => {\r\n    const updatedQuestions = [...questions];\r\n    updatedQuestions[index][field] = value;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n  const updateQuestionOption = (questionIndex, optionIndex, value) => {\r\n    const updatedQuestions = [...questions];\r\n    updatedQuestions[questionIndex].options[optionIndex].text = value;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n  const handleOptionImageUpload = (questionIndex, optionIndex, file) => {\r\n    const updatedQuestions = [...questions];\r\n    updatedQuestions[questionIndex].options[optionIndex].image = file;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n  const removeOptionImage = (questionIndex, optionIndex) => {\r\n    const updatedQuestions = [...questions];\r\n    updatedQuestions[questionIndex].options[optionIndex].image = null;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n  const handleQuestionImageUpload = (questionIndex, file) => {\r\n    const updatedQuestions = [...questions];\r\n    updatedQuestions[questionIndex].question_image = file;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n  const removeQuestionImage = (questionIndex) => {\r\n    const updatedQuestions = [...questions];\r\n    updatedQuestions[questionIndex].question_image = null;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n\r\n  const toggleCorrectAnswer = (questionIndex, optionIndex) => {\r\n    const updatedQuestions = [...questions];\r\n    const question = updatedQuestions[questionIndex];\r\n    const optionValue = question.options[optionIndex].text;\r\n\r\n    question.correct_answer = optionValue;\r\n    setQuestions(updatedQuestions);\r\n  };\r\n\r\n  const removeQuestion = (index) => {\r\n    if (questions.length > 1) {\r\n      setQuestions(questions.filter((_, i) => i !== index));\r\n    }\r\n  };\r\n\r\n  const handleOpenMathSymbols = (questionIndex, field) => {\r\n    setCurrentField({ questionIndex, field });\r\n    setMathSymbolsOpen(true);\r\n  };\r\n\r\n  const handleSymbolSelect = (symbol) => {\r\n    if (currentField.questionIndex !== null && currentField.field) {\r\n      if (currentField.questionIndex === 'form') {\r\n        // For form fields (title, description)\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          [currentField.field]: prev[currentField.field] + symbol\r\n        }));\r\n      } else if (currentField.field.startsWith('option_')) {\r\n        // For option fields\r\n        const optionIndex = parseInt(currentField.field.split('_')[1]);\r\n        updateQuestionOption(currentField.questionIndex, optionIndex, questions[currentField.questionIndex].options[optionIndex].text + symbol);\r\n      } else {\r\n        // For question fields\r\n        updateQuestion(currentField.questionIndex, currentField.field, questions[currentField.questionIndex][currentField.field] + symbol);\r\n      }\r\n    }\r\n    setMathSymbolsOpen(false);\r\n  };\r\n\r\n  // Import functionality\r\n  const downloadSampleTemplate = () => {\r\n    console.log('Download template function called');\r\n    try {\r\n      const sampleData = [\r\n        {\r\n          'Savol tartib raqami': 1,\r\n          'Savol matni': '2 + 2 nechaga teng?',\r\n          'Variant A': '3',\r\n          'Variant B': '4',\r\n          'Variant C': '5',\r\n          'Variant D': '6',\r\n          'To\\'g\\'ri javob': 'B',\r\n          'Tushuntirish': '2 + 2 = 4',\r\n          'Savol turi': 'multiple_choice',\r\n          'Formula': '',\r\n          'Kod': ''\r\n        },\r\n        {\r\n          'Savol tartib raqami': 2,\r\n          'Savol matni': 'Matematik formula yozing: a kvadrat + b kvadrat',\r\n          'Variant A': '',\r\n          'Variant B': '',\r\n          'Variant C': '',\r\n          'Variant D': '',\r\n          'To\\'g\\'ri javob': 'a┬▓ + b┬▓',\r\n          'Tushuntirish': 'Pifagor teoremasi',\r\n          'Savol turi': 'formula',\r\n          'Formula': 'a^2 + b^2',\r\n          'Kod': ''\r\n        }\r\n      ];\r\n\r\n      const ws = XLSX.utils.json_to_sheet(sampleData);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Test namuna');\r\n      XLSX.writeFile(wb, 'test_import_namuna.xlsx');\r\n      message.success('Namuna fayl yuklab olindi!');\r\n      console.log('Template downloaded successfully');\r\n    } catch (error) {\r\n      console.error('Error downloading template:', error);\r\n      message.error('Fayl yuklab olishda xatolik yuz berdi');\r\n    }\r\n  };\r\n\r\n  const handleImportFromExcel = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      setImporting(true);\r\n      setError('');\r\n\r\n      const data = await file.arrayBuffer();\r\n      const workbook = XLSX.read(data);\r\n      const sheetName = workbook.SheetNames[0];\r\n      const worksheet = workbook.Sheets[sheetName];\r\n      const jsonData = XLSX.utils.sheet_to_json(worksheet);\r\n\r\n      if (jsonData.length === 0) {\r\n        setError('Excel faylda ma\\'lumotlar topilmadi');\r\n        return;\r\n      }\r\n\r\n      const importedQuestions = [];\r\n      let successCount = 0;\r\n      let errorCount = 0;\r\n      const errors = [];\r\n\r\n      for (const row of jsonData) {\r\n        try {\r\n          const questionNumber = row['Savol tartib raqami'] || row['тДЦ'] || importedQuestions.length + 1;\r\n          const questionText = row['Savol matni'] || row['Question'];\r\n          const optionA = row['Variant A'] || row['Option A'] || row['A)'];\r\n          const optionB = row['Variant B'] || row['Option B'] || row['B)'];\r\n          const optionC = row['Variant C'] || row['Option C'] || row['C)'];\r\n          const optionD = row['Variant D'] || row['Option D'] || row['D)'];\r\n          const correctAnswer = row['To\\'g\\'ri javob'] || row['Correct Answer'];\r\n          const explanation = row['Tushuntirish'] || row['Explanation'] || '';\r\n          const questionType = row['Savol turi'] || row['Question Type'] || 'multiple_choice';\r\n          const formula = row['Formula'] || '';\r\n          const code = row['Kod'] || row['Code'] || '';\r\n\r\n          // Validate required fields\r\n          if (!questionText) {\r\n            errors.push(`Qator ${questionNumber}: Savol matni talab qilinadi`);\r\n            errorCount++;\r\n            continue;\r\n          }\r\n\r\n          let questionData = {\r\n            question_text: questionText,\r\n            question_type: questionType,\r\n            question_image: null,\r\n            correct_answer: '',\r\n            explanation: explanation,\r\n            formula: formula,\r\n            code: code\r\n          };\r\n\r\n          if (questionType === 'multiple_choice') {\r\n            if (!optionA || !optionB || !optionC || !optionD) {\r\n              errors.push(`Qator ${questionNumber}: Barcha variantlar (A, B, C, D) talab qilinadi`);\r\n              errorCount++;\r\n              continue;\r\n            }\r\n\r\n            if (!correctAnswer) {\r\n              errors.push(`Qator ${questionNumber}: To'g'ri javob belgilash kerak`);\r\n              errorCount++;\r\n              continue;\r\n            }\r\n\r\n            const options = [\r\n              { text: optionA, image: null },\r\n              { text: optionB, image: null },\r\n              { text: optionC, image: null },\r\n              { text: optionD, image: null }\r\n            ];\r\n\r\n            // Find correct answer and format it\r\n            let correctAnswerFormatted = '';\r\n            if (correctAnswer.toLowerCase() === 'a' || correctAnswer === 'A)') {\r\n              correctAnswerFormatted = 'A)';\r\n            } else if (correctAnswer.toLowerCase() === 'b' || correctAnswer === 'B)') {\r\n              correctAnswerFormatted = 'B)';\r\n            } else if (correctAnswer.toLowerCase() === 'c' || correctAnswer === 'C)') {\r\n              correctAnswerFormatted = 'C)';\r\n            } else if (correctAnswer.toLowerCase() === 'd' || correctAnswer === 'D)') {\r\n              correctAnswerFormatted = 'D)';\r\n            } else {\r\n              // If it's the actual answer text, find matching option\r\n              const matchingOption = options.find(opt =>\r\n                opt.text.toLowerCase().trim() === correctAnswer.toLowerCase().trim()\r\n              );\r\n              if (matchingOption) {\r\n                correctAnswerFormatted = options.indexOf(matchingOption) === 0 ? 'A)' :\r\n                  options.indexOf(matchingOption) === 1 ? 'B)' :\r\n                    options.indexOf(matchingOption) === 2 ? 'C)' : 'D)';\r\n              }\r\n            }\r\n\r\n            questionData.options = options;\r\n            questionData.correct_answer = correctAnswerFormatted;\r\n          } else if (questionType === 'short_answer') {\r\n            if (!correctAnswer) {\r\n              errors.push(`Qator ${questionNumber}: To'g'ri javob talab qilinadi`);\r\n              errorCount++;\r\n              continue;\r\n            }\r\n            questionData.correct_answer = correctAnswer;\r\n          } else if (questionType === 'formula') {\r\n            if (!formula) {\r\n              errors.push(`Qator ${questionNumber}: Formula talab qilinadi`);\r\n              errorCount++;\r\n              continue;\r\n            }\r\n            questionData.correct_answer = formula;\r\n          } else if (questionType === 'code') {\r\n            if (!code) {\r\n              errors.push(`Qator ${questionNumber}: Kod namunasi talab qilinadi`);\r\n              errorCount++;\r\n              continue;\r\n            }\r\n            questionData.correct_answer = code;\r\n          }\r\n\r\n          importedQuestions.push(questionData);\r\n          successCount++;\r\n\r\n        } catch (error) {\r\n          errors.push(`Qator ${jsonData.indexOf(row) + 2}: ${error.message || 'Xatolik'}`);\r\n          errorCount++;\r\n        }\r\n      }\r\n\r\n      if (importedQuestions.length > 0) {\r\n        // Set imported questions\r\n        setQuestions(importedQuestions);\r\n\r\n        // Auto-fill form data if not already filled\r\n        if (!formData.title) {\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            title: `Import qilingan test - ${new Date().toLocaleDateString('uz-UZ')}`\r\n          }));\r\n        }\r\n\r\n        message.success(`Muvaffaqiyatli import qilindi! ${successCount} ta savol qo'shildi.`);\r\n        setImportModalVisible(false);\r\n      }\r\n\r\n      if (errors.length > 0) {\r\n        let errorMessage = `${errorCount} ta xatolik:\\n${errors.slice(0, 3).join('\\n')}`;\r\n        if (errors.length > 3) {\r\n          errorMessage += `\\n...va yana ${errors.length - 3} ta xatolik`;\r\n        }\r\n        setError(errorMessage);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Import error:', error);\r\n      setError('Excel faylini o\\'qishda xatolik yuz berdi: ' + error.message);\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n\r\n    // Clear file input\r\n    event.target.value = '';\r\n  };\r\n\r\n  // Manual test function for debugging\r\n  const testFormSubmission = async () => {\r\n    console.log('Manual test function called');\r\n    // Create a mock event\r\n    const mockEvent = {\r\n      preventDefault: () => console.log('preventDefault called')\r\n    };\r\n    await handleSubmit(mockEvent);\r\n  };\r\n\r\n  const handleSubmit = async (values) => {\r\n    // e.preventDefault(); // Not needed for Ant Design onFinish\r\n\r\n    // Check authentication\r\n    if (!currentUser) {\r\n      setError('Siz tizimga kirmagansiz');\r\n      return;\r\n    }\r\n\r\n    if (currentUser.role !== 'teacher' && currentUser.role !== 'admin') {\r\n      setError('Faqat o\\'qituvchilar test yarata oladi');\r\n      return;\r\n    }\r\n\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    // Validation\r\n    if (!formData.title || !formData.title.trim()) {\r\n      setError('Test nomi talab qilinadi');\r\n      return;\r\n    }\r\n\r\n    if (!formData.subject || !formData.subject.trim()) {\r\n      setError('Fan tanlash talab qilinadi');\r\n      return;\r\n    }\r\n\r\n    if (questions.length === 0) {\r\n      setError('Kamida bitta savol kerak');\r\n      return;\r\n    }\r\n\r\n    if (questions.some(q => !q.question_text || !q.question_text.trim())) {\r\n      setError('Barcha savollar uchun savol matni talab qilinadi');\r\n      return;\r\n    }\r\n\r\n    // Validate questions (only multiple choice)\r\n    for (let i = 0; i < questions.length; i++) {\r\n      const q = questions[i];\r\n      if (!q.question_text.trim()) {\r\n        setError(`Savol ${i + 1} matni talab qilinadi`);\r\n        return;\r\n      }\r\n      // Only multiple choice questions are allowed\r\n      if (q.options.some(opt => !opt.text || opt.text.trim() === '')) {\r\n        setError(`Savol ${i + 1} barcha variantlarni to'ldirish kerak`);\r\n        return;\r\n      }\r\n      if (!q.correct_answer || q.correct_answer.trim() === '') {\r\n        setError(`Savol ${i + 1} to'g'ri javobni belgilash kerak`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    // TEMPORARY: Mock test to check if frontend works\r\n    if (formData.title === 'TEST_FRONTEND_ONLY') {\r\n      console.log('Mock test submission successful!');\r\n      setSuccess('Mock test yaratildi (frontend test)');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (isEditing) {\r\n        // Update existing test\r\n        await apiService.updateTest(testId, {\r\n          title: formData.title,\r\n          subject: formData.subject,\r\n          description: formData.description,\r\n          time_limit: parseInt(formData.time_limit),\r\n          target_grades: Array.isArray(formData.target_grades) ? formData.target_grades.join(',') : formData.target_grades,\r\n          total_questions: questions.length,\r\n          difficulty: formData.difficulty,\r\n        });\r\n\r\n        // Update questions (delete old ones and create new ones)\r\n        const questionsData = await apiService.getQuestions({ test: testId });\r\n        const existingQuestions = questionsData.results || questionsData;\r\n\r\n        // Delete existing questions\r\n        for (const question of existingQuestions) {\r\n          await apiService.deleteQuestion(question.id);\r\n        }\r\n\r\n        // Create new questions\r\n        for (const question of questions) {\r\n          const questionData = new FormData();\r\n          questionData.append('test', testId);\r\n          questionData.append('question_text', question.question_text);\r\n          questionData.append('question_type', question.question_type);\r\n          questionData.append('options', JSON.stringify(question.options.map(opt =>\r\n            typeof opt === 'object' ? { text: opt.text } : { text: opt }\r\n          )));\r\n          questionData.append('correct_answer', question.correct_answer);\r\n          questionData.append('explanation', question.explanation || '');\r\n          if (question.formula) questionData.append('formula', question.formula);\r\n          if (question.code) questionData.append('code', question.code);\r\n\r\n          // Add question image\r\n          if (question.question_image) {\r\n            questionData.append('image', question.question_image);\r\n          }\r\n\r\n          // Add option images\r\n          question.options.forEach((option, index) => {\r\n            if (option.image) {\r\n              const imageFieldName = `option_${String.fromCharCode(97 + index)}_image`; // option_a_image, option_b_image, etc.\r\n              questionData.append(imageFieldName, option.image);\r\n            }\r\n          });\r\n\r\n          await apiService.createQuestion(questionData);\r\n        }\r\n\r\n        setSuccess('Test muvaffaqiyatli yangilandi!');\r\n        setTimeout(() => {\r\n          navigate('/teacher/my-tests');\r\n        }, 2000);\r\n\r\n      } else {\r\n        // Create new test\r\n        console.log('Creating test with data:', {\r\n          subject: formData.subject,\r\n          title: formData.title,\r\n          description: formData.description,\r\n          time_limit: parseInt(formData.time_limit),\r\n          target_grades: formData.target_grades,\r\n          total_questions: questions.length,\r\n        });\r\n\r\n        console.log('target_grades type:', typeof formData.target_grades, 'value:', formData.target_grades);\r\n\r\n        const testData = await apiService.createTest({\r\n          subject: formData.subject,\r\n          title: formData.title,\r\n          description: formData.description,\r\n          time_limit: parseInt(formData.time_limit),\r\n          target_grades: Array.isArray(formData.target_grades) ? formData.target_grades.join(',') : formData.target_grades,\r\n          total_questions: questions.length,\r\n          difficulty: formData.difficulty,\r\n        });\r\n\r\n        console.log('Test created successfully:', testData);\r\n        const newTestId = testData.id;\r\n\r\n        // Create questions for the new test\r\n        for (const question of questions) {\r\n          const questionData = new FormData();\r\n          questionData.append('test', newTestId);\r\n          questionData.append('question_text', question.question_text);\r\n          questionData.append('question_type', question.question_type);\r\n          questionData.append('options', JSON.stringify(question.options.map(opt =>\r\n            typeof opt === 'object' ? { text: opt.text } : { text: opt }\r\n          )));\r\n          questionData.append('correct_answer', question.correct_answer);\r\n          questionData.append('explanation', question.explanation || '');\r\n          if (question.formula) questionData.append('formula', question.formula);\r\n          if (question.code) questionData.append('code', question.code);\r\n\r\n          // Add question image\r\n          if (question.question_image) {\r\n            questionData.append('image', question.question_image);\r\n          }\r\n\r\n          // Add option images\r\n          question.options.forEach((option, index) => {\r\n            if (option.image) {\r\n              const imageFieldName = `option_${String.fromCharCode(97 + index)}_image`; // option_a_image, option_b_image, etc.\r\n              questionData.append(imageFieldName, option.image);\r\n            }\r\n          });\r\n\r\n          await apiService.createQuestion(questionData);\r\n        }\r\n\r\n        setSuccess(`\"${formData.title}\" testi muvaffaqiyatli yaratildi!`);\r\n        setTimeout(() => {\r\n          navigate('/teacher/my-tests');\r\n        }, 2000);\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Failed to save test:', err);\r\n      console.error('Error details:', {\r\n        message: err.message,\r\n        stack: err.stack,\r\n        response: err.response,\r\n        status: err.status\r\n      });\r\n\r\n      let errorMessage = 'Noma\\'lum xatolik';\r\n\r\n      if (err.response && err.response.data) {\r\n        // Prioritize server validation errors\r\n        errorMessage = typeof err.response.data === 'object'\r\n          ? JSON.stringify(err.response.data, null, 2)\r\n          : String(err.response.data);\r\n      } else if (err.message) {\r\n        errorMessage = err.message;\r\n      } else if (typeof err === 'string') {\r\n        errorMessage = err;\r\n      }\r\n\r\n      setError(isEditing ? `Testni yangilashda xatolik: ${errorMessage}` : `Test yaratishda xatolik: ${errorMessage}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      padding: '32px 0',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div style={{\r\n        marginBottom: '48px',\r\n        paddingBottom: '32px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Typography.Title\r\n          level={1}\r\n          style={{\r\n            fontSize: '40px',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '16px',\r\n            margin: 0\r\n          }}\r\n        >\r\n          {isEditing ? 'Testni tahrirlash' : 'Yangi test yaratish'}\r\n        </Typography.Title>\r\n        <Typography.Text\r\n          style={{\r\n            fontSize: '18px',\r\n            color: '#64748b',\r\n            fontWeight: 400\r\n          }}\r\n        >\r\n          {isEditing ? 'Mavjud testni o\\'zgartiring va yangilang' : 'Yangi test yarating va o\\'quvchilarga taqdim eting'}\r\n        </Typography.Text>\r\n      </div>\r\n\r\n      {/* Import Section */}\r\n      {!isEditing && (\r\n        <Card\r\n          style={{\r\n            width: '100%',\r\n            marginBottom: '24px',\r\n            backgroundColor: '#f8fafc',\r\n            border: '2px dashed #cbd5e1',\r\n            borderRadius: '12px',\r\n          }}\r\n        >\r\n          <div style={{ padding: '24px', textAlign: 'center' }}>\r\n            <Typography.Title level={4} style={{ color: '#475569', marginBottom: '16px' }}>\r\n              ЁЯУе Testni import qilish\r\n            </Typography.Title>\r\n            <Typography.Text style={{ color: '#64748b', display: 'block', marginBottom: '20px' }}>\r\n              Excel fayldan test savollarini avtomatik import qiling\r\n            </Typography.Text>\r\n            <Space size=\"large\">\r\n              <Button\r\n                type=\"primary\"\r\n                icon={<ImportIcon />}\r\n                size=\"large\"\r\n                onClick={() => {\r\n                  console.log('Import button clicked, setting modal to visible');\r\n                  setImportModalVisible(true);\r\n                  console.log('ImportModalVisible state set to true');\r\n                }}\r\n                style={{\r\n                  backgroundColor: '#2563eb',\r\n                  borderColor: '#2563eb',\r\n                  fontWeight: 600,\r\n                }}\r\n              >\r\n                Excel fayldan import\r\n              </Button>\r\n              <Button\r\n                icon={<DownloadOutlined />}\r\n                size=\"large\"\r\n                onClick={downloadSampleTemplate}\r\n                style={{\r\n                  borderColor: '#059669',\r\n                  color: '#059669',\r\n                  fontWeight: 600,\r\n                }}\r\n              >\r\n                Namuna fayl yuklab olish\r\n              </Button>\r\n            </Space>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      <Card\r\n        style={{\r\n          width: '100%',\r\n          minHeight: '600px',\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n        }}\r\n      >\r\n        {error && (\r\n          <Alert\r\n            message={error}\r\n            type=\"error\"\r\n            style={{ marginBottom: '16px' }}\r\n          />\r\n        )}\r\n\r\n        {success && (\r\n          <Alert\r\n            message={success}\r\n            type=\"success\"\r\n            style={{ marginBottom: '16px' }}\r\n          />\r\n        )}\r\n\r\n        <div style={{ padding: '32px' }}>\r\n          <Form onFinish={handleSubmit} layout=\"vertical\">\r\n            <Row gutter={24}>\r\n              <Col xs={24} md={12}>\r\n                <Form.Item\r\n                  label=\"Test nomi\"\r\n                  name=\"title\"\r\n                  rules={[{ required: true, message: 'Test nomi talab qilinadi' }]}\r\n                >\r\n                  <Input\r\n                    value={formData.title}\r\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                    placeholder=\"Test nomini kiriting\"\r\n                  />\r\n                </Form.Item>\r\n              </Col>\r\n\r\n              <Col xs={24} md={12}>\r\n                <Form.Item\r\n                  label=\"Fan\"\r\n                  name=\"subject\"\r\n                  rules={[{ required: true, message: 'Fan tanlash talab qilinadi' }]}\r\n                >\r\n                  <Select\r\n                    value={formData.subject}\r\n                    onChange={(value) => setFormData({ ...formData, subject: value })}\r\n                  >\r\n                    <Select.Option value=\"Matematika\">Matematika</Select.Option>\r\n                    <Select.Option value=\"O'zbek tili\">O'zbek tili</Select.Option>\r\n                    <Select.Option value=\"Ingliz tili\">Ingliz tili</Select.Option>\r\n                    <Select.Option value=\"Rus tili\">Rus tili</Select.Option>\r\n                    <Select.Option value=\"Fizika\">Fizika</Select.Option>\r\n                    <Select.Option value=\"Kimyo\">Kimyo</Select.Option>\r\n                    <Select.Option value=\"Biologiya\">Biologiya</Select.Option>\r\n                    <Select.Option value=\"Tarix\">Tarix</Select.Option>\r\n                    <Select.Option value=\"Geografiya\">Geografiya</Select.Option>\r\n                    <Select.Option value=\"Adabiyot\">Adabiyot</Select.Option>\r\n                    <Select.Option value=\"Informatika\">Informatika</Select.Option>\r\n                    <Select.Option value=\"Tasviriy san'at\">Tasviriy san'at</Select.Option>\r\n                    <Select.Option value=\"Musiqa\">Musiqa</Select.Option>\r\n                    <Select.Option value=\"Jismoniy tarbiya\">Jismoniy tarbiya</Select.Option>\r\n                    <Select.Option value=\"Texnologiya\">Texnologiya</Select.Option>\r\n                  </Select>\r\n                </Form.Item>\r\n              </Col>\r\n\r\n              <Col xs={24}>\r\n                <Form.Item label=\"Tavsif\" name=\"description\">\r\n                  <Input.TextArea\r\n                    value={formData.description}\r\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                    placeholder=\"Test mazmuni haqida qisqa ma'lumot\"\r\n                    rows={3}\r\n                  />\r\n                </Form.Item>\r\n              </Col>\r\n\r\n              <Col xs={24} md={12}>\r\n                <Form.Item\r\n                  label=\"Vaqt limiti (daqiqa)\"\r\n                  name=\"time_limit\"\r\n                  rules={[{ required: true, message: 'Vaqt limiti talab qilinadi' }]}\r\n                >\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={formData.time_limit}\r\n                    onChange={(e) => setFormData({ ...formData, time_limit: parseInt(e.target.value) || 30 })}\r\n                    min={5}\r\n                    max={180}\r\n                    placeholder=\"30\"\r\n                  />\r\n                </Form.Item>\r\n              </Col>\r\n\r\n              <Col xs={24} md={12}>\r\n                <Form.Item label=\"Test qiyinligi\" name=\"difficulty\">\r\n                  <Select\r\n                    value={formData.difficulty}\r\n                    onChange={(value) => setFormData({ ...formData, difficulty: value })}\r\n                  >\r\n                    <Select.Option value=\"easy\">Oson</Select.Option>\r\n                    <Select.Option value=\"medium\">O'rtacha</Select.Option>\r\n                    <Select.Option value=\"hard\">Qiyin</Select.Option>\r\n                  </Select>\r\n                </Form.Item>\r\n              </Col>\r\n\r\n            </Row>\r\n\r\n            <div style={{ marginTop: '24px' }}>\r\n              <Typography.Text strong style={{ display: 'block', marginBottom: '16px' }}>\r\n                Maqsadlangan sinf guruhlari (barcha guruhlar uchun test yaratish uchun hech narsa tanlamang)\r\n              </Typography.Text>\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '12px' }}>\r\n                {[5, 6, 7, 8, 9, 10, 11].flatMap((grade) =>\r\n                  [1, 2, 3, 4].map((num) => {\r\n                    const classGroup = `${grade}-${String(num).padStart(2, '0')}`;\r\n                    return (\r\n                      <Checkbox\r\n                        key={classGroup}\r\n                        checked={formData.target_grades.includes(classGroup)}\r\n                        onChange={() => handleGradeChange(classGroup)}\r\n                        style={{\r\n                          color: currentUser.curator_class === classGroup ? '#f59e0b' : undefined,\r\n                        }}\r\n                      >\r\n                        {classGroup}\r\n                      </Checkbox>\r\n                    );\r\n                  })\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <Divider style={{ margin: '24px 0' }} />\r\n\r\n            <Typography.Title level={4} style={{ marginBottom: '16px' }}>\r\n              Savollar ({questions.length})\r\n            </Typography.Title>\r\n\r\n            {questions.map((question, index) => (\r\n              <Card key={index} style={{ marginBottom: '24px' }}>\r\n                <div style={{ padding: '24px' }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                    <Typography.Title level={5} style={{ margin: 0 }}>Savol {index + 1}</Typography.Title>\r\n                    <Button\r\n                      type=\"text\"\r\n                      danger\r\n                      icon={<DeleteIcon />}\r\n                      onClick={() => removeQuestion(index)}\r\n                      disabled={questions.length === 1}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '16px' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\r\n                      <Typography.Text style={{ flex: 1 }}>\r\n                        Savol matni\r\n                      </Typography.Text>\r\n                      <Space>\r\n                        <Button\r\n                          size=\"small\"\r\n                          onClick={() => handleOpenMathSymbols(index, 'question_text')}\r\n                          style={{\r\n                            minWidth: 'auto',\r\n                            padding: '4px 8px',\r\n                            fontSize: '12px'\r\n                          }}\r\n                        >\r\n                          ЁЯзо Belgilar\r\n                        </Button>\r\n                        <Upload\r\n                          accept=\"image/*\"\r\n                          showUploadList={false}\r\n                          beforeUpload={(file) => {\r\n                            handleQuestionImageUpload(index, file);\r\n                            return false; // Prevent automatic upload\r\n                          }}\r\n                        >\r\n                          <Button\r\n                            size=\"small\"\r\n                            icon={<PhotoCameraIcon />}\r\n                            style={{ padding: '4px' }}\r\n                          />\r\n                        </Upload>\r\n                        {question.question_image && (\r\n                          <Button\r\n                            size=\"small\"\r\n                            danger\r\n                            icon={<ClearIcon />}\r\n                            onClick={() => removeQuestionImage(index)}\r\n                            style={{ padding: '4px' }}\r\n                          />\r\n                        )}\r\n                      </Space>\r\n                    </div>\r\n\r\n                    {/* Question Image Preview */}\r\n                    {question.question_image && (\r\n                      <div style={{ marginBottom: '16px' }}>\r\n                        <img\r\n                          src={URL.createObjectURL(question.question_image)}\r\n                          alt={`Question ${index + 1}`}\r\n                          style={{\r\n                            maxWidth: '100%',\r\n                            maxHeight: '200px',\r\n                            borderRadius: '8px',\r\n                            border: '1px solid #e2e8f0',\r\n                            objectFit: 'contain'\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    )}\r\n\r\n                    <Input.TextArea\r\n                      rows={2}\r\n                      value={question.question_text}\r\n                      onChange={(e) => updateQuestion(index, 'question_text', e.target.value)}\r\n                      placeholder=\"Savol matnini kiriting... (LaTeX uchun $...$ yoki $$...$$ dan foydalaning)\"\r\n                    />\r\n                    {question.question_text && (\r\n                      <Card size=\"small\" style={{\r\n                        marginTop: '8px',\r\n                        backgroundColor: '#f8fafc',\r\n                        border: '1px solid #e2e8f0'\r\n                      }}>\r\n                        <Typography.Text style={{ color: '#64748b', fontWeight: 500, marginBottom: '8px', display: 'block' }}>\r\n                          LaTeX ko'rinishi:\r\n                        </Typography.Text>\r\n                        <LaTeXPreview text={question.question_text} />\r\n                      </Card>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div style={{ marginBottom: '16px' }}>\r\n                    <Select\r\n                      style={{ width: '100%' }}\r\n                      value={question.question_type}\r\n                      onChange={(value) => updateQuestion(index, 'question_type', value)}\r\n                      placeholder=\"Savol turini tanlang\"\r\n                    >\r\n                      <Select.Option value=\"multiple_choice\">Ko'p variantli</Select.Option>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  {question.question_type === 'multiple_choice' && (\r\n                    <>\r\n                      <Typography.Text strong style={{ display: 'block', marginBottom: '16px' }}>\r\n                        Variantlar (A, B, C, D):\r\n                      </Typography.Text>\r\n\r\n                      {question.options.map((option, optionIndex) => (\r\n                        <div key={optionIndex} style={{ marginBottom: '16px', padding: '16px', border: '1px solid #e2e8f0', borderRadius: '8px' }}>\r\n                          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\r\n                            <Button\r\n                              type={question.correct_answer === option.text ? \"primary\" : \"text\"}\r\n                              size=\"small\"\r\n                              icon={<CorrectIcon />}\r\n                              onClick={() => toggleCorrectAnswer(index, optionIndex)}\r\n                              style={{ marginRight: '8px' }}\r\n                            />\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\r\n                              <Input\r\n                                size=\"small\"\r\n                                value={option.text}\r\n                                onChange={(e) => updateQuestionOption(index, optionIndex, e.target.value)}\r\n                                placeholder={`Variant ${String.fromCharCode(65 + optionIndex)} (LaTeX uchun $...$)`}\r\n                                style={{ flex: 1 }}\r\n                              />\r\n                              <Button\r\n                                size=\"small\"\r\n                                onClick={() => handleOpenMathSymbols(index, `option_${optionIndex}`)}\r\n                                style={{ padding: '4px' }}\r\n                              >\r\n                                ЁЯзо\r\n                              </Button>\r\n                              <Button\r\n                                size=\"small\"\r\n                                icon={<PhotoCameraIcon />}\r\n                                style={{ padding: '4px' }}\r\n                              >\r\n                                <input\r\n                                  type=\"file\"\r\n                                  accept=\"image/*\"\r\n                                  style={{ display: 'none' }}\r\n                                  onChange={(e) => {\r\n                                    const file = e.target.files[0];\r\n                                    if (file) {\r\n                                      handleOptionImageUpload(index, optionIndex, file);\r\n                                    }\r\n                                  }}\r\n                                />\r\n                              </Button>\r\n                              {option.image && (\r\n                                <Button\r\n                                  size=\"small\"\r\n                                  danger\r\n                                  icon={<ClearIcon />}\r\n                                  onClick={() => removeOptionImage(index, optionIndex)}\r\n                                  style={{ padding: '4px' }}\r\n                                />\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Image Preview */}\r\n                          {option.image && (\r\n                            <div style={{ marginBottom: '8px' }}>\r\n                              <img\r\n                                src={URL.createObjectURL(option.image)}\r\n                                alt={`Option ${String.fromCharCode(65 + optionIndex)}`}\r\n                                style={{\r\n                                  maxWidth: '100px',\r\n                                  maxHeight: '60px',\r\n                                  borderRadius: '4px',\r\n                                  border: '1px solid #e2e8f0',\r\n                                  objectFit: 'contain'\r\n                                }}\r\n                              />\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* LaTeX Preview */}\r\n                          {option.text && option.text.trim() && (\r\n                            <Card size=\"small\" style={{\r\n                              backgroundColor: '#f8fafc',\r\n                              border: '1px solid #e2e8f0'\r\n                            }}>\r\n                              <Typography.Text style={{ color: '#64748b', fontWeight: 500, marginBottom: '4px', display: 'block' }}>\r\n                                Ko'rinishi:\r\n                              </Typography.Text>\r\n                              <LaTeXPreview text={option.text} />\r\n                            </Card>\r\n                          )}\r\n                        </div>\r\n                      ))}\r\n\r\n                      <Typography.Text style={{ fontSize: '12px', color: '#64748b', marginTop: '8px', display: 'block' }}>\r\n                        To'g'ri javobni belgilash uchun checkbox belgisini bosing\r\n                      </Typography.Text>\r\n                    </>\r\n                  )}\r\n\r\n\r\n\r\n                  <Input.TextArea\r\n                    rows={2}\r\n                    value={question.explanation}\r\n                    onChange={(e) => updateQuestion(index, 'explanation', e.target.value)}\r\n                    placeholder=\"Tushuntirish (ixtiyoriy)\"\r\n                    style={{ marginTop: '16px' }}\r\n                  />\r\n                </div>\r\n              </Card>\r\n            ))}\r\n\r\n            <Button\r\n              type=\"dashed\"\r\n              icon={<AddIcon />}\r\n              onClick={addQuestion}\r\n              style={{ marginBottom: '24px', width: '100%' }}\r\n            >\r\n              Savol qo'shish\r\n            </Button>\r\n\r\n            <div style={{ display: 'flex', gap: '16px' }}>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                loading={loading}\r\n                style={{ flex: 1 }}\r\n              >\r\n                {loading ? (isEditing ? 'Yangilanmoqda...' : 'Yaratilmoqda...') : (isEditing ? 'Testni yangilash' : 'Test yaratish')}\r\n              </Button>\r\n              <Button\r\n                onClick={() => navigate('/teacher/my-tests')}\r\n                style={{ flex: 1 }}\r\n              >\r\n                Bekor qilish\r\n              </Button>\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Import Modal */}\r\n      <Modal\r\n        title=\"Excel fayldan test import qilish\"\r\n        open={importModalVisible}\r\n        onCancel={() => setImportModalVisible(false)}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <div style={{ padding: '16px 0' }}>\r\n          <Alert\r\n            message=\"Import qoidalari\"\r\n            description={\r\n              <ul style={{ marginBottom: 0, paddingLeft: '20px' }}>\r\n                <li>Excel fayl .xlsx yoki .xls formatida bo'lishi kerak</li>\r\n                <li>Birinchi qator ustun nomlari bo'lishi kerak</li>\r\n                <li>Majburiy ustunlar: Savol matni, Variant A, Variant B, Variant C, Variant D, To'g'ri javob</li>\r\n                <li>To'g'ri javob A, B, C, D harflaridan biri yoki javob matni bo'lishi mumkin</li>\r\n              </ul>\r\n            }\r\n            type=\"info\"\r\n            style={{ marginBottom: '16px' }}\r\n          />\r\n\r\n          <div style={{ textAlign: 'center', padding: '20px 0' }}>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".xlsx,.xls\"\r\n              onChange={handleImportFromExcel}\r\n              style={{ display: 'none' }}\r\n              id=\"excel-file-input\"\r\n            />\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              icon={<ImportIcon />}\r\n              loading={importing}\r\n              onClick={() => document.getElementById('excel-file-input').click()}\r\n              style={{ marginBottom: '12px' }}\r\n            >\r\n              {importing ? 'Import qilinyapti...' : 'Excel faylni tanlang'}\r\n            </Button>\r\n            <br />\r\n            <Button\r\n              icon={<DownloadOutlined />}\r\n              onClick={downloadSampleTemplate}\r\n              size=\"small\"\r\n            >\r\n              Namuna fayl yuklab olish\r\n            </Button>\r\n          </div>\r\n\r\n          {error && (\r\n            <Alert\r\n              message={error}\r\n              type=\"error\"\r\n              style={{ marginTop: '16px' }}\r\n              closable\r\n              onClose={() => setError('')}\r\n            />\r\n          )}\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Math Symbols Dialog */}\r\n      <MathSymbols\r\n        open={mathSymbolsOpen}\r\n        onClose={() => setMathSymbolsOpen(false)}\r\n        onSymbolSelect={handleSymbolSelect}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateTest;\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\MyTests.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'snackbar' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":49,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"snackbar"},"fix":{"range":[1353,1361],"text":""},"desc":"Remove unused variable 'snackbar'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":70,"column":6,"nodeType":"ArrayExpression","endLine":70,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadData]","fix":{"range":[2387,2389],"text":"[loadData]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleOpenTestDetails' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":72,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleOpenTestDetails"},"fix":{"range":[2397,2508],"text":""},"desc":"Remove unused variable 'handleOpenTestDetails'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'getScoreColor' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":291,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":291,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"getScoreColor"},"fix":{"range":[9022,9163],"text":""},"desc":"Remove unused variable 'getScoreColor'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'handleTodoTasksChange' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":297,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleTodoTasksChange"},"fix":{"range":[9169,9315],"text":""},"desc":"Remove unused variable 'handleTodoTasksChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'addTestSuggestions' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":343,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":343,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"addTestSuggestions"},"fix":{"range":[10603,11082],"text":""},"desc":"Remove unused variable 'addTestSuggestions'."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":409,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":409,"endColumn":125,"suggestions":[{"messageId":"addBrackets","fix":{"range":[13525,13907],"text":"{ const aMinGrade = a.target_grades.length > 0 ? Math.min(...a.target_grades.map(g => parseInt(g.split('-')[0]))) : 0;\r\n        const bMinGrade = b.target_grades.length > 0 ? Math.min(...b.target_grades.map(g => parseInt(g.split('-')[0]))) : 0;\r\n        if (aMinGrade !== bMinGrade) {\r\n          return aMinGrade - bMinGrade;\r\n        }\r\n        return a.title.localeCompare(b.title); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":410,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":410,"endColumn":125,"suggestions":[{"messageId":"addBrackets","fix":{"range":[13525,13907],"text":"{ const aMinGrade = a.target_grades.length > 0 ? Math.min(...a.target_grades.map(g => parseInt(g.split('-')[0]))) : 0;\r\n        const bMinGrade = b.target_grades.length > 0 ? Math.min(...b.target_grades.map(g => parseInt(g.split('-')[0]))) : 0;\r\n        if (aMinGrade !== bMinGrade) {\r\n          return aMinGrade - bMinGrade;\r\n        }\r\n        return a.title.localeCompare(b.title); }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Tag,\r\n  Modal,\r\n  Alert,\r\n  Table,\r\n  Select,\r\n  Space,\r\n  Avatar,\r\n  Badge,\r\n  Tooltip,\r\n  List,\r\n  Divider,\r\n  Spin,\r\n  Input,\r\n} from 'antd';\r\nimport {\r\n  PlusOutlined as AddIcon,\r\n  EditOutlined as EditIcon,\r\n  DeleteOutlined as DeleteIcon,\r\n  BarChartOutlined as AssessmentIcon,\r\n  ReloadOutlined as RefreshIcon,\r\n  EyeOutlined as ViewIcon,\r\n  TeamOutlined as PeopleIcon,\r\n  BookOutlined as SchoolIcon,\r\n  UserOutlined as PersonIcon,\r\n  BookOutlined as BookmarkIcon,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\nimport SendLessonModal from '../../components/SendLessonModal';\r\nimport TodoList from '../../components/TodoList';\r\n\r\nconst MyTests = () => {\r\n  const { currentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [tests, setTests] = useState([]);\r\n  const [testAttempts, setTestAttempts] = useState({});\r\n  const [students, setStudents] = useState([]);\r\n  const [selectedTest, setSelectedTest] = useState(null);\r\n  const [studentDetailDialogOpen, setStudentDetailDialogOpen] = useState(false);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [lessonModalOpen, setLessonModalOpen] = useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [selectedAttempt, setSelectedAttempt] = useState(null);\r\n  const [testDetailsModalOpen, setTestDetailsModalOpen] = useState(false);\r\n  const [sortBy, setSortBy] = useState('created_at');\r\n  const [filterSubject, setFilterSubject] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [filterGrade, setFilterGrade] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [todoTasks, setTodoTasks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    // Load saved todo tasks from localStorage\r\n    const savedTasks = localStorage.getItem('teacher-todo-tasks');\r\n    if (savedTasks) {\r\n      setTodoTasks(JSON.parse(savedTasks));\r\n    }\r\n  }, []);\r\n\r\n  const handleOpenTestDetails = (test) => {\r\n    setSelectedTest(test);\r\n    setTestDetailsModalOpen(true);\r\n  };\r\n\r\n  const handleCloseTestDetails = () => {\r\n    setTestDetailsModalOpen(false);\r\n    setSelectedTest(null);\r\n  };\r\n\r\n  const loadData = async (showRefreshLoader = false) => {\r\n    try {\r\n      if (showRefreshLoader) setRefreshing(true);\r\n      else setLoading(true);\r\n\r\n      // Load tests from API\r\n      const response = await apiService.getTests({ teacher: currentUser.id });\r\n      const teacherTests = response.results || response;\r\n      const teacherTestsFiltered = teacherTests.filter(test =>\r\n        test.teacher === currentUser.id\r\n      ).map(test => {\r\n        let parsedGrades = [];\r\n        if (Array.isArray(test.target_grades)) {\r\n          parsedGrades = test.target_grades;\r\n        } else if (typeof test.target_grades === 'string') {\r\n          try {\r\n            parsedGrades = JSON.parse(test.target_grades);\r\n            if (!Array.isArray(parsedGrades)) {\r\n              parsedGrades = [parsedGrades];\r\n            }\r\n          } catch {\r\n            // If not JSON, treat as comma separated\r\n            parsedGrades = test.target_grades.split(',').map(g => g.trim()).filter(g => g);\r\n          }\r\n        }\r\n        return {\r\n          ...test,\r\n          target_grades: parsedGrades\r\n        };\r\n      });\r\n      setTests(teacherTestsFiltered);\r\n\r\n      // Load all users to get student information\r\n      const usersResponse = await apiService.getUsers();\r\n      const allUsers = usersResponse.results || usersResponse;\r\n      const studentUsers = allUsers.filter(user => user.role === 'student');\r\n      setStudents(studentUsers);\r\n\r\n      // Load all attempts to calculate statistics\r\n      const attemptsResponse = await apiService.getAttempts();\r\n      const allAttempts = attemptsResponse.results || attemptsResponse;\r\n      \r\n      // Group attempts by test for quick lookup\r\n      const attemptsByTest = {};\r\n      allAttempts.forEach(attempt => {\r\n        if (!attemptsByTest[attempt.test]) {\r\n          attemptsByTest[attempt.test] = [];\r\n        }\r\n        attemptsByTest[attempt.test].push(attempt);\r\n      });\r\n      setTestAttempts(attemptsByTest);\r\n\r\n      console.log('Loaded data:', {\r\n        tests: teacherTestsFiltered.length,\r\n        students: studentUsers.length,\r\n        attempts: allAttempts.length\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to load data:', error);\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Ma\\'lumotlarni yuklashda xatolik yuz berdi',\r\n        severity: 'error'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const getTestStats = (testId) => {\r\n    const attempts = testAttempts[testId] || [];\r\n    const uniqueStudents = new Set(attempts.map(a => a.student)).size;\r\n    const averageScore = attempts.length > 0 \r\n      ? Math.round(attempts.reduce((sum, a) => sum + a.score, 0) / attempts.length)\r\n      : 0;\r\n    const maxScore = attempts.length > 0 ? Math.max(...attempts.map(a => a.score)) : 0;\r\n    \r\n    return {\r\n      totalAttempts: attempts.length,\r\n      uniqueStudents,\r\n      averageScore,\r\n      maxScore,\r\n      completionRate: Math.round((uniqueStudents / students.length) * 100) || 0\r\n    };\r\n  };\r\n\r\n  const getStudentDetails = (testId) => {\r\n    const attempts = testAttempts[testId] || [];\r\n    return attempts.map(attempt => {\r\n      const student = students.find(s => s.id === attempt.student);\r\n      return {\r\n        ...attempt,\r\n        studentName: student?.name || 'Noma\\'lum o\\'quvchi',\r\n        studentId: student?.display_id || student?.username || 'N/A'\r\n      };\r\n    }).sort((a, b) => b.score - a.score); // Sort by score descending\r\n  };\r\n\r\n  const handleDeleteTest = (test) => {\r\n    setSelectedTest(test);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!selectedTest) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      await apiService.updateTest(selectedTest.id, { is_active: false });\r\n      await apiService.deleteTest(selectedTest.id);\r\n\r\n      setTests(prevTests => prevTests.filter(test => test.id !== selectedTest.id));\r\n      \r\n      setSnackbar({\r\n        open: true,\r\n        message: `\"${selectedTest.title}\" testi muvaffaqiyatli o'chirildi`,\r\n        severity: 'success'\r\n      });\r\n\r\n      setDeleteDialogOpen(false);\r\n      setSelectedTest(null);\r\n      \r\n      setTimeout(() => loadData(), 500);\r\n      \r\n    } catch (error) {\r\n      console.error('Failed to delete test:', error);\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Testni o\\'chirishda xatolik yuz berdi',\r\n        severity: 'error'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleTestStatus = async (testId) => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const test = tests.find(t => t.id === testId);\r\n      if (test) {\r\n        const newStatus = !test.is_active;\r\n        \r\n        await apiService.updateTest(testId, { is_active: newStatus });\r\n        \r\n        setTests(prevTests => \r\n          prevTests.map(t => \r\n            t.id === testId ? { ...t, is_active: newStatus } : t\r\n          )\r\n        );\r\n        \r\n        setSnackbar({\r\n          open: true,\r\n          message: `Test ${newStatus ? 'faollashtirildi' : 'nofaollashtirildi'}`,\r\n          severity: 'success'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to toggle test status:', error);\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Test holatini o\\'zgartirishda xatolik yuz berdi',\r\n        severity: 'error'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStudentDetails = (test) => {\r\n    setSelectedTest(test);\r\n    setStudentDetailDialogOpen(true);\r\n  };\r\n\r\n  const handleOpenLessonModal = (student, attempt, test) => {\r\n    setSelectedStudent(student);\r\n    setSelectedAttempt({\r\n      ...attempt,\r\n      test: test\r\n    });\r\n    setSelectedTest(test);\r\n    setLessonModalOpen(true);\r\n  };\r\n\r\n  const handleCloseLessonModal = () => {\r\n    setLessonModalOpen(false);\r\n    setSelectedStudent(null);\r\n    setSelectedAttempt(null);\r\n  };\r\n\r\n  const getSubjectColor = (subject) => {\r\n    const colors = {\r\n      'Matematika': 'primary',\r\n      'Fizika': 'secondary',\r\n      'Kimyo': 'success',\r\n      'Biologiya': 'info',\r\n      'Tarix': 'warning',\r\n      'Geografiya': 'error',\r\n      'O\\'zbek tili': 'primary',\r\n      'Ingliz tili': 'secondary',\r\n      'Adabiyot': 'success',\r\n      'Informatika': 'info',\r\n    };\r\n    return colors[subject] || 'default';\r\n  };\r\n\r\n  const getScoreColor = (score) => {\r\n    if (score >= 80) return 'success';\r\n    if (score >= 60) return 'warning';\r\n    return 'error';\r\n  };\r\n\r\n  const handleTodoTasksChange = (tasks) => {\r\n    setTodoTasks(tasks);\r\n    localStorage.setItem('teacher-todo-tasks', JSON.stringify(tasks));\r\n  };\r\n\r\n  // Generate test-related todo suggestions\r\n  const generateTestSuggestions = () => {\r\n    const suggestions = [];\r\n    \r\n    tests.forEach(test => {\r\n      const stats = getTestStats(test.id);\r\n      if (stats.averageScore < 60) {\r\n        suggestions.push({\r\n          id: `suggestion-${test.id}-1`,\r\n          text: `\"${test.title}\" testi uchun o'quvchilarga qo'shimcha dars tashkil qiling`,\r\n          completed: false,\r\n          priority: 'high',\r\n          createdAt: new Date().toISOString(),\r\n          type: 'suggestion'\r\n        });\r\n      }\r\n      if (stats.completionRate < 50) {\r\n        suggestions.push({\r\n          id: `suggestion-${test.id}-2`,\r\n          text: `\"${test.title}\" testini ko'proq o'quvchilarga tarqating`,\r\n          completed: false,\r\n          priority: 'medium',\r\n          createdAt: new Date().toISOString(),\r\n          type: 'suggestion'\r\n        });\r\n      }\r\n      if (!test.is_active) {\r\n        suggestions.push({\r\n          id: `suggestion-${test.id}-3`,\r\n          text: `\"${test.title}\" testini qayta faollashtiring yoki o'chiring`,\r\n          completed: false,\r\n          priority: 'low',\r\n          createdAt: new Date().toISOString(),\r\n          type: 'suggestion'\r\n        });\r\n      }\r\n    });\r\n\r\n    return suggestions;\r\n  };\r\n\r\n  const addTestSuggestions = () => {\r\n    const suggestions = generateTestSuggestions();\r\n    const existingIds = todoTasks.map(task => task.id);\r\n    const newSuggestions = suggestions.filter(suggestion => !existingIds.includes(suggestion.id));\r\n    \r\n    if (newSuggestions.length > 0) {\r\n      const updatedTasks = [...todoTasks, ...newSuggestions];\r\n      setTodoTasks(updatedTasks);\r\n      localStorage.setItem('teacher-todo-tasks', JSON.stringify(updatedTasks));\r\n    }\r\n  };\r\n\r\n  // Compute filtered and sorted tests\r\n  const uniqueSubjects = [...new Set(tests.map(test => test.subject))];\r\n  const filteredTests = tests.filter(test => {\r\n    // Search filter\r\n    if (searchTerm) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      const titleMatch = test.title?.toLowerCase().includes(searchLower);\r\n      const descriptionMatch = test.description?.toLowerCase().includes(searchLower);\r\n      const subjectMatch = test.subject?.toLowerCase().includes(searchLower);\r\n      if (!titleMatch && !descriptionMatch && !subjectMatch) return false;\r\n    }\r\n\r\n    if (filterSubject && test.subject !== filterSubject) return false;\r\n    if (filterStatus === 'active' && !test.is_active) return false;\r\n    if (filterStatus === 'inactive' && test.is_active) return false;\r\n\r\n    // Class filter - check if test is for the selected grade\r\n    if (filterGrade) {\r\n      // If test has no target grades, it should be included (available to all grades)\r\n      if (!test.target_grades || test.target_grades.length === 0) return true;\r\n\r\n      // Check if any of the test's target grades match the selected grade\r\n      const hasMatchingGrade = test.target_grades.some(grade => {\r\n        // Handle different grade formats: \"9\", \"9-A\", \"9-01\", etc.\r\n        const gradeStr = String(grade).trim();\r\n        const filterNum = filterGrade;\r\n\r\n        // Debug logging (remove in production)\r\n        console.log(`Checking test \"${test.title}\": grade \"${gradeStr}\" against filter \"${filterNum}\"`);\r\n\r\n        return gradeStr === filterNum ||\r\n               gradeStr.startsWith(filterNum + '-') ||\r\n               gradeStr.startsWith(filterNum + ' ') ||\r\n               gradeStr.split('-')[0] === filterNum ||\r\n               gradeStr.split(' ')[0] === filterNum;\r\n      });\r\n\r\n      console.log(`Test \"${test.title}\" with grades ${JSON.stringify(test.target_grades)}: ${hasMatchingGrade ? 'INCLUDED' : 'FILTERED OUT'}`);\r\n\r\n      if (!hasMatchingGrade) return false;\r\n    }\r\n\r\n    return true;\r\n  });\r\n  const sortedTests = [...filteredTests].sort((a, b) => {\r\n    switch (sortBy) {\r\n      case 'created_at':\r\n        return new Date(b.created_at) - new Date(a.created_at);\r\n      case 'title':\r\n        return a.title.localeCompare(b.title);\r\n      case 'subject':\r\n        return a.subject.localeCompare(b.subject);\r\n      case 'class':\r\n        // Sort by the minimum target grade number ascending, then by title\r\n        const aMinGrade = a.target_grades.length > 0 ? Math.min(...a.target_grades.map(g => parseInt(g.split('-')[0]))) : 0;\r\n        const bMinGrade = b.target_grades.length > 0 ? Math.min(...b.target_grades.map(g => parseInt(g.split('-')[0]))) : 0;\r\n        if (aMinGrade !== bMinGrade) {\r\n          return aMinGrade - bMinGrade;\r\n        }\r\n        return a.title.localeCompare(b.title);\r\n      case 'average_score':\r\n        return getTestStats(b.id).averageScore - getTestStats(a.id).averageScore;\r\n      case 'attempts':\r\n        return getTestStats(b.id).totalAttempts - getTestStats(a.id).totalAttempts;\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      padding: '32px 0',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div style={{\r\n        marginBottom: '48px',\r\n        paddingBottom: '32px',\r\n        borderBottom: '1px solid #e2e8f0',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        flexWrap: 'wrap',\r\n        gap: '16px'\r\n      }}>\r\n        <div>\r\n          <Typography.Title\r\n            level={1}\r\n            style={{\r\n              fontSize: '40px',\r\n              fontWeight: 700,\r\n              color: '#1e293b',\r\n              marginBottom: '16px',\r\n              margin: 0\r\n            }}\r\n          >\r\n            Mening testlarim ({sortedTests.length})\r\n          </Typography.Title>\r\n          <Typography.Text\r\n            style={{\r\n              fontSize: '18px',\r\n              color: '#64748b',\r\n              fontWeight: 400\r\n            }}\r\n          >\r\n            Barcha testlaringizni boshqaring, o'quvchilarning natijalarini kuzating\r\n          </Typography.Text>\r\n        </div>\r\n        <Space>\r\n          <Tooltip title=\"Yangilash\">\r\n            <Button\r\n              type=\"text\"\r\n              icon={<RefreshIcon />}\r\n              onClick={() => loadData(true)}\r\n              disabled={refreshing}\r\n              style={{\r\n                color: '#64748b'\r\n              }}\r\n            />\r\n          </Tooltip>\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<AddIcon />}\r\n            onClick={() => navigate('/teacher/create-test')}\r\n            style={{\r\n              backgroundColor: '#2563eb',\r\n              borderColor: '#2563eb',\r\n              fontWeight: 600,\r\n              minWidth: '200px'\r\n            }}\r\n          >\r\n            Yangi test yaratish\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n\r\n      {/* Filters and Sort */}\r\n      <div style={{ display: 'flex', gap: '16px', marginBottom: '24px', flexWrap: 'wrap', alignItems: 'center' }}>\r\n        <Input\r\n          placeholder=\"Test nomini, tavsifini yoki fanini qidirish...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          style={{ minWidth: '250px', flex: 1 }}\r\n          allowClear\r\n        />\r\n        <Select\r\n          value={sortBy}\r\n          onChange={(value) => setSortBy(value)}\r\n          placeholder=\"Sort qilish\"\r\n          style={{ minWidth: '140px' }}\r\n        >\r\n          <Select.Option value=\"created_at\">Yangi avval</Select.Option>\r\n          <Select.Option value=\"title\">Sarlavha</Select.Option>\r\n          <Select.Option value=\"subject\">Fan</Select.Option>\r\n          <Select.Option value=\"class\">Sinf</Select.Option>\r\n          <Select.Option value=\"average_score\">O'rtacha ball</Select.Option>\r\n          <Select.Option value=\"attempts\">Urinishlar</Select.Option>\r\n        </Select>\r\n\r\n        <Select\r\n          value={filterSubject}\r\n          onChange={(value) => setFilterSubject(value)}\r\n          placeholder=\"Fan\"\r\n          style={{ minWidth: '120px' }}\r\n        >\r\n          <Select.Option value=\"\">Barcha</Select.Option>\r\n          {uniqueSubjects.map(sub => <Select.Option key={sub} value={sub}>{sub}</Select.Option>)}\r\n        </Select>\r\n\r\n        <Select\r\n          value={filterStatus}\r\n          onChange={(value) => setFilterStatus(value)}\r\n          placeholder=\"Status\"\r\n          style={{ minWidth: '120px' }}\r\n        >\r\n          <Select.Option value=\"all\">Barcha</Select.Option>\r\n          <Select.Option value=\"active\">Faol</Select.Option>\r\n          <Select.Option value=\"inactive\">Nofaol</Select.Option>\r\n        </Select>\r\n\r\n        <Select\r\n          value={filterGrade}\r\n          onChange={(value) => setFilterGrade(value)}\r\n          placeholder=\"Sinf\"\r\n          style={{ minWidth: '120px' }}\r\n        >\r\n          <Select.Option value=\"\">Barcha</Select.Option>\r\n          {Array.from({ length: 7 }, (_, i) => i + 5).map(g => (\r\n            <Select.Option key={g} value={g}>{g}-sinf</Select.Option>\r\n          ))}\r\n        </Select>\r\n      </div>\r\n\r\n      {/* Search Results Info */}\r\n      {searchTerm && (\r\n        <Typography.Text style={{ marginBottom: '16px', color: '#64748b' }}>\r\n          {filteredTests.length} ta test topildi\r\n        </Typography.Text>\r\n      )}\r\n\r\n      {loading && sortedTests.length === 0 ? (\r\n        <div style={{ textAlign: 'center', padding: '64px 0' }}>\r\n          <Spin size=\"large\" />\r\n          <Typography.Text style={{ display: 'block', marginTop: '16px', color: '#64748b' }}>\r\n            Testlar yuklanmoqda...\r\n          </Typography.Text>\r\n        </div>\r\n      ) : sortedTests.length === 0 ? (\r\n        <Card style={{ textAlign: 'center', backgroundColor: '#f8fafc', border: '1px solid #e2e8f0' }}>\r\n          <div style={{ padding: '32px' }}>\r\n            <AssessmentIcon style={{ fontSize: '64px', color: '#94a3b8', marginBottom: '16px' }} />\r\n            <Typography.Title level={4} style={{ marginBottom: '8px' }}>\r\n              {tests.length === 0 ? 'Siz hali test yaratmagansiz' : 'Testlar topilmadi'}\r\n            </Typography.Title>\r\n            <Typography.Text style={{ color: '#64748b' }}>\r\n              {tests.length === 0 ? '\"Yangi test yaratish\" tugmasini bosib boshlang' : 'Testlar mavjud emas'}\r\n            </Typography.Text>\r\n          </div>\r\n        </Card>\r\n      ) : (\r\n        <div>\r\n          <Alert\r\n            message={`Siz ${sortedTests.length} ta test yaratgansiz`}\r\n            type=\"info\"\r\n            style={{ marginBottom: '24px' }}\r\n          />\r\n          <Table\r\n            dataSource={sortedTests}\r\n            rowKey=\"id\"\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n            }}\r\n            columns={[\r\n              {\r\n                title: 'Sarlavha',\r\n                dataIndex: 'title',\r\n                key: 'title',\r\n                render: (text, record) => (\r\n                  <div>\r\n                    <Typography.Text strong style={{ color: '#1e293b' }}>\r\n                      {text}\r\n                    </Typography.Text>\r\n                    {record.description && (\r\n                      <div style={{ marginTop: '4px' }}>\r\n                        <Typography.Text style={{ fontSize: '12px', color: '#64748b' }}>\r\n                          {record.description.length > 50 ? record.description.substring(0, 50) + '...' : record.description}\r\n                        </Typography.Text>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Fan',\r\n                dataIndex: 'subject',\r\n                key: 'subject',\r\n                render: (subject) => (\r\n                  <Tag\r\n                    style={{\r\n                      backgroundColor: subject === 'Ingliz tili' ? '#3b82f6' : undefined,\r\n                      color: subject === 'Ingliz tili' ? '#ffffff' : undefined,\r\n                      borderColor: subject === 'Ingliz tili' ? '#3b82f6' : undefined,\r\n                    }}\r\n                  >\r\n                    {subject}\r\n                  </Tag>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Sinflar',\r\n                dataIndex: 'target_grades',\r\n                key: 'target_grades',\r\n                render: (grades) => {\r\n                  if (!grades || grades.length === 0) {\r\n                    return <Tag color=\"green\">Barcha</Tag>;\r\n                  }\r\n                  return (\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px' }}>\r\n                      {grades.slice(0, 3).map((grade) => (\r\n                        <Tag key={grade} color=\"blue\" size=\"small\">\r\n                          {grade}\r\n                        </Tag>\r\n                      ))}\r\n                      {grades.length > 3 && (\r\n                        <Tag size=\"small\" style={{ backgroundColor: '#e2e8f0' }}>\r\n                          +{grades.length - 3}\r\n                        </Tag>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                },\r\n              },\r\n              {\r\n                title: 'Savollar',\r\n                dataIndex: 'total_questions',\r\n                key: 'total_questions',\r\n                render: (value) => (\r\n                  <Typography.Text strong style={{ color: '#2563eb' }}>\r\n                    {value || 0}\r\n                  </Typography.Text>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Vaqt',\r\n                dataIndex: 'time_limit',\r\n                key: 'time_limit',\r\n                render: (value) => (\r\n                  <Typography.Text style={{ color: '#1e293b' }}>\r\n                    {value} daq\r\n                  </Typography.Text>\r\n                ),\r\n              },\r\n              {\r\n                title: 'O\\'quvchilar',\r\n                key: 'students',\r\n                render: (_, record) => {\r\n                  const stats = getTestStats(record.id);\r\n                  return (\r\n                    <Typography.Text strong style={{ color: '#059669' }}>\r\n                      {stats.uniqueStudents}\r\n                    </Typography.Text>\r\n                  );\r\n                },\r\n              },\r\n              {\r\n                title: 'O\\'rtacha ball',\r\n                key: 'average_score',\r\n                render: (_, record) => {\r\n                  const stats = getTestStats(record.id);\r\n                  return (\r\n                    <Typography.Text strong style={{ color: stats.averageScore >= 60 ? '#059669' : '#dc2626' }}>\r\n                      {stats.averageScore}%\r\n                    </Typography.Text>\r\n                  );\r\n                },\r\n              },\r\n              {\r\n                title: 'Status',\r\n                dataIndex: 'is_active',\r\n                key: 'status',\r\n                render: (isActive) => (\r\n                  <Tag\r\n                    color={isActive ? 'green' : 'default'}\r\n                    style={{\r\n                      backgroundColor: isActive ? '#ecfdf5' : '#f1f5f9',\r\n                      color: isActive ? '#059669' : '#64748b',\r\n                      fontWeight: 600,\r\n                      borderRadius: '6px',\r\n                    }}\r\n                  >\r\n                    {isActive ? 'Faol' : 'Nofaol'}\r\n                  </Tag>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Harakatlar',\r\n                key: 'actions',\r\n                render: (_, record) => (\r\n                  <Space>\r\n                    <Tooltip title=\"Batafsil ko'rish\">\r\n                      <Button\r\n                        type=\"text\"\r\n                        icon={<ViewIcon />}\r\n                        onClick={() => navigate(`/teacher/test-details/${record.id}`)}\r\n                        style={{ color: '#2563eb' }}\r\n                      />\r\n                    </Tooltip>\r\n                    <Tooltip title=\"Tahrirlash\">\r\n                      <Button\r\n                        type=\"text\"\r\n                        icon={<EditIcon />}\r\n                        onClick={() => navigate(`/teacher/edit-test/${record.id}`)}\r\n                        style={{ color: '#f59e0b' }}\r\n                      />\r\n                    </Tooltip>\r\n                    <Tooltip title={record.is_active ? 'Nofaollashtirish' : 'Faollashtirish'}>\r\n                      <Button\r\n                        type=\"text\"\r\n                        icon={<AssessmentIcon />}\r\n                        onClick={() => toggleTestStatus(record.id)}\r\n                        disabled={loading}\r\n                        style={{ color: record.is_active ? '#64748b' : '#059669' }}\r\n                      />\r\n                    </Tooltip>\r\n                    <Tooltip title=\"O'chirish\">\r\n                      <Button\r\n                        type=\"text\"\r\n                        icon={<DeleteIcon />}\r\n                        onClick={() => handleDeleteTest(record)}\r\n                        style={{ color: '#dc2626' }}\r\n                      />\r\n                    </Tooltip>\r\n                  </Space>\r\n                ),\r\n              },\r\n            ]}\r\n            pagination={{\r\n              pageSize: 10,\r\n              showSizeChanger: true,\r\n              showQuickJumper: true,\r\n              showTotal: (total) => `Jami ${total} ta test`,\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Student Details Modal */}\r\n      <Modal\r\n        open={studentDetailDialogOpen}\r\n        onCancel={() => setStudentDetailDialogOpen(false)}\r\n        title={`${selectedTest?.title} - O'quvchi natijalari`}\r\n        width={800}\r\n        footer={null}\r\n      >\r\n        <List>\r\n          {selectedTest && getStudentDetails(selectedTest.id).map((attempt, index) => {\r\n            const student = students.find(s => s.id === attempt.student);\r\n            return (\r\n              <List.Item key={`${attempt.student}-${attempt.id}`}>\r\n                <List.Item.Meta\r\n                  avatar={\r\n                    <Badge count={index + 1}>\r\n                      <Avatar>{attempt.studentName.charAt(0).toUpperCase()}</Avatar>\r\n                    </Badge>\r\n                  }\r\n                  title={\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <Typography.Text>{attempt.studentName}</Typography.Text>\r\n                      <Tag color={attempt.score >= 80 ? 'green' : attempt.score >= 60 ? 'orange' : 'red'}>\r\n                        {attempt.score}%\r\n                      </Tag>\r\n                    </div>\r\n                  }\r\n                  description={\r\n                    <div>\r\n                      <Typography.Text type=\"secondary\">ID: {attempt.studentId}</Typography.Text>\r\n                      <br />\r\n                      <Typography.Text type=\"secondary\">\r\n                        Topshirilgan: {new Date(attempt.submitted_at).toLocaleString('uz-UZ')}\r\n                      </Typography.Text>\r\n                    </div>\r\n                  }\r\n                />\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                  <Button\r\n                    size=\"small\"\r\n                    onClick={() => navigate(`/teacher/test-details/${selectedTest.id}`)}\r\n                  >\r\n                    Batafsil\r\n                  </Button>\r\n                  {attempt.score < 60 && student && (\r\n                    <Button\r\n                      size=\"small\"\r\n                      type=\"primary\"\r\n                      danger\r\n                      onClick={() => handleOpenLessonModal(student, attempt, selectedTest)}\r\n                    >\r\n                      Dars chaqirish\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </List.Item>\r\n            );\r\n          })}\r\n        </List>\r\n        {selectedTest && getStudentDetails(selectedTest.id).length === 0 && (\r\n          <Typography.Text type=\"secondary\" style={{ textAlign: 'center', display: 'block', padding: '24px' }}>\r\n            Hali hech kim bu testni topshirmagan\r\n          </Typography.Text>\r\n        )}\r\n      </Modal>\r\n\r\n      {/* Test Details Modal */}\r\n      <Modal\r\n        open={testDetailsModalOpen}\r\n        onCancel={handleCloseTestDetails}\r\n        title={\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <Typography.Text>{selectedTest?.title} - To'liq ma'lumotlar</Typography.Text>\r\n            <Tag color={selectedTest?.is_active ? 'green' : 'default'}>\r\n              {selectedTest?.is_active ? 'Faol' : 'Nofaol'}\r\n            </Tag>\r\n          </div>\r\n        }\r\n        width={1000}\r\n        footer={null}\r\n      >\r\n          {selectedTest && (\r\n            <Box>\r\n              {/* Basic Test Information */}\r\n              <Box mb={3}>\r\n                <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n                  Test ma'lumotlari\r\n                </Typography>\r\n                <Typography variant=\"body1\" paragraph>\r\n                  {selectedTest.description || 'Tavsif mavjud emas'}\r\n                </Typography>\r\n                \r\n                <Box display=\"flex\" gap={2} mb={2} flexWrap=\"wrap\">\r\n                  <Chip\r\n                    label={selectedTest.subject}\r\n                    color={getSubjectColor(selectedTest.subject)}\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Chip\r\n                    label={`${selectedTest.total_questions} savol`}\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Chip\r\n                    label={`${selectedTest.time_limit} daqiqa`}\r\n                    color=\"secondary\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                </Box>\r\n\r\n                {/* Target Grades */}\r\n                {selectedTest.target_grades && selectedTest.target_grades.length > 0 && (\r\n                  <Box mb={2}>\r\n                    <Typography variant=\"subtitle2\" gutterBottom>\r\n                      Maqsadli sinflar:\r\n                    </Typography>\r\n                    <Box display=\"flex\" flexWrap=\"wrap\" gap={0.5}>\r\n                      {selectedTest.target_grades.map((grade) => (\r\n                        <Chip\r\n                          key={grade}\r\n                          label={`${grade.replace(/^\\[|\"|\\]$/g, '')}-sinf`}\r\n                          size=\"small\"\r\n                          color=\"info\"\r\n                        />\r\n                      ))}\r\n                    </Box>\r\n                  </Box>\r\n                )}\r\n\r\n                {/* All Grades Available */}\r\n                {(!selectedTest.target_grades || selectedTest.target_grades.length === 0) && (\r\n                  <Box mb={2}>\r\n                    <Chip\r\n                      label=\"Barcha sinflar uchun\"\r\n                      size=\"small\"\r\n                      color=\"success\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                )}\r\n\r\n                <Typography variant=\"body2\" color=\"textSecondary\" paragraph>\r\n                  Yaratilgan: {new Date(selectedTest.created_at).toLocaleString('uz-UZ')}\r\n                </Typography>\r\n                \r\n                {selectedTest.updated_at && selectedTest.updated_at !== selectedTest.created_at && (\r\n                  <Typography variant=\"body2\" color=\"textSecondary\">\r\n                    Yangilangan: {new Date(selectedTest.updated_at).toLocaleString('uz-UZ')}\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n\r\n              <Divider sx={{ my: 3 }} />\r\n\r\n              {/* Statistics */}\r\n              <Box mb={3}>\r\n                <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n                  O'quvchi statistikasi\r\n                </Typography>\r\n                <Grid container spacing={3}>\r\n                  <Grid item xs={12} sm={6} md={3}>\r\n                    <Box sx={{ p: 2, bgcolor: 'primary.light', borderRadius: 1, textAlign: 'center' }}>\r\n                      <PeopleIcon fontSize=\"large\" color=\"primary\" />\r\n                      <Typography variant=\"h4\" color=\"primary\">\r\n                        {getTestStats(selectedTest.id).uniqueStudents}\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        O'quvchi\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6} md={3}>\r\n                    <Box sx={{ p: 2, bgcolor: 'success.light', borderRadius: 1, textAlign: 'center' }}>\r\n                      <AssessmentIcon fontSize=\"large\" color=\"success\" />\r\n                      <Typography variant=\"h4\" color=\"success\">\r\n                        {getTestStats(selectedTest.id).averageScore}%\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        O'rtacha ball\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6} md={3}>\r\n                    <Box sx={{ p: 2, bgcolor: 'warning.light', borderRadius: 1, textAlign: 'center' }}>\r\n                      <BookmarkIcon fontSize=\"large\" color=\"warning\" />\r\n                      <Typography variant=\"h4\" color=\"warning\">\r\n                        {getTestStats(selectedTest.id).completionRate}%\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        Tugallangan\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6} md={3}>\r\n                    <Box sx={{ p: 2, bgcolor: 'info.light', borderRadius: 1, textAlign: 'center' }}>\r\n                      <SchoolIcon fontSize=\"large\" color=\"info\" />\r\n                      <Typography variant=\"h4\" color=\"info\">\r\n                        {getTestStats(selectedTest.id).totalAttempts}\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        Urinish\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n\r\n              <Divider sx={{ my: 3 }} />\r\n\r\n              {/* Action Buttons */}\r\n              <Box>\r\n                <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n                  Amallar\r\n                </Typography>\r\n                <Box display=\"flex\" gap={2} flexWrap=\"wrap\">\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<ViewIcon />}\r\n                    onClick={() => navigate(`/teacher/test-details/${selectedTest.id}`)}\r\n                  >\r\n                    To'liq ko'rish\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<EditIcon />}\r\n                    onClick={() => navigate(`/teacher/edit-test/${selectedTest.id}`)}\r\n                  >\r\n                    Tahrirlash\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<PeopleIcon />}\r\n                    onClick={() => {\r\n                      handleStudentDetails(selectedTest);\r\n                      handleCloseTestDetails();\r\n                    }}\r\n                    color=\"primary\"\r\n                  >\r\n                    O'quvchilar natijalari\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    onClick={() => toggleTestStatus(selectedTest.id)}\r\n                    color={selectedTest.is_active ? 'warning' : 'success'}\r\n                    disabled={loading}\r\n                  >\r\n                    {selectedTest.is_active ? 'Nofaollashtirish' : 'Faollashtirish'}\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"error\"\r\n                    startIcon={<DeleteIcon />}\r\n                    onClick={() => handleDeleteTest(selectedTest)}\r\n                  >\r\n                    O'chirish\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n      </Modal>\r\n\r\n      {/* Lesson Modal */}\r\n      <SendLessonModal\r\n        open={lessonModalOpen}\r\n        onClose={handleCloseLessonModal}\r\n        student={selectedStudent}\r\n        testResult={selectedAttempt}\r\n        teacherInfo={currentUser}\r\n      />\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <Modal\r\n        open={deleteDialogOpen}\r\n        onCancel={() => setDeleteDialogOpen(false)}\r\n        title=\"Testni o'chirish\"\r\n        footer={[\r\n          <Button key=\"cancel\" onClick={() => setDeleteDialogOpen(false)}>\r\n            Bekor qilish\r\n          </Button>,\r\n          <Button\r\n            key=\"delete\"\r\n            type=\"primary\"\r\n            danger\r\n            loading={loading}\r\n            onClick={confirmDelete}\r\n          >\r\n            {loading ? 'O\\'chirilmoqda...' : 'O\\'chirish'}\r\n          </Button>\r\n        ]}\r\n      >\r\n        <Typography.Text>\r\n          \"{selectedTest?.title}\" testini o'chirishni xohlaysizmi?\r\n          Bu amalni ortga qaytarib bo'lmaydi.\r\n        </Typography.Text>\r\n        <Alert\r\n          message=\"O'chirilgan test o'quvchilar tomonidan ko'rinmaydi va barcha ma'lumotlar o'chiriladi.\"\r\n          type=\"warning\"\r\n          style={{ marginTop: '16px' }}\r\n        />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyTests;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\SentLessons.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadSentLessons'. Either include it or remove the dependency array.","line":35,"column":6,"nodeType":"ArrayExpression","endLine":35,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser.id, loadSentLessons]","fix":{"range":[920,936],"text":"[currentUser.id, loadSentLessons]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  Button,\r\n  Modal,\r\n  Alert,\r\n  Table,\r\n  Tag,\r\n  Space,\r\n  Tooltip,\r\n  Spin,\r\n  Input,\r\n  Select,\r\n} from 'antd';\r\nimport {\r\n  BookOutlined as SchoolIcon,\r\n  CheckCircleOutlined as CheckCircleIcon,\r\n  CloseCircleOutlined as UncheckedIcon,\r\n  CheckOutlined as DoneIcon,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst SentLessons = () => {\r\n  const { currentUser } = useAuth();\r\n  const [sentLessons, setSentLessons] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [confirmDialog, setConfirmDialog] = useState({ open: false, lesson: null });\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortBy, setSortBy] = useState('createdAt');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n\r\n  useEffect(() => {\r\n    loadSentLessons();\r\n  }, [currentUser.id]);\r\n\r\n  const loadSentLessons = () => {\r\n    try {\r\n      const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');\r\n      const teacherLessons = notifications.filter(n =>\r\n        n.type === 'lesson_reminder' && n.teacherId === currentUser.id\r\n      );\r\n      setSentLessons(teacherLessons);\r\n    } catch (error) {\r\n      console.error('Error loading sent lessons:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('uz-UZ', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const markLessonCompleted = (lessonId) => {\r\n    // Remove the notification from localStorage\r\n    const allNotifications = JSON.parse(localStorage.getItem('notifications') || '[]');\r\n    const updatedNotifications = allNotifications.filter(n => n.id !== lessonId);\r\n    localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n\r\n    // Update local state\r\n    setSentLessons(prevLessons => prevLessons.filter(lesson => lesson.id !== lessonId));\r\n  };\r\n\r\n  // Filter and sort lessons\r\n  const filteredAndSortedLessons = sentLessons\r\n    .filter(lesson => {\r\n      // Search filter\r\n      if (searchTerm) {\r\n        const searchLower = searchTerm.toLowerCase();\r\n        const topicMatch = lesson.lessonTopic?.toLowerCase().includes(searchLower);\r\n        const studentMatch = lesson.studentName?.toLowerCase().includes(searchLower);\r\n        const subjectMatch = lesson.subject?.toLowerCase().includes(searchLower);\r\n        if (!topicMatch && !studentMatch && !subjectMatch) return false;\r\n      }\r\n\r\n      // Status filter\r\n      if (filterStatus === 'read' && !lesson.isRead) return false;\r\n      if (filterStatus === 'unread' && lesson.isRead) return false;\r\n\r\n      return true;\r\n    })\r\n    .sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'createdAt':\r\n          return new Date(b.createdAt) - new Date(a.createdAt);\r\n        case 'lessonDate':\r\n          return new Date(b.lessonDate) - new Date(a.lessonDate);\r\n        case 'studentName':\r\n          return a.studentName?.localeCompare(b.studentName || '');\r\n        case 'subject':\r\n          return a.subject?.localeCompare(b.subject || '');\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        padding: '32px 0',\r\n        backgroundColor: '#ffffff',\r\n        textAlign: 'center'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Typography.Text style={{ display: 'block', marginTop: '16px', color: '#64748b' }}>\r\n          Yuklanmoqda...\r\n        </Typography.Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      padding: '32px 0',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div style={{\r\n        marginBottom: '48px',\r\n        paddingBottom: '32px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Typography.Title\r\n          level={1}\r\n          style={{\r\n            fontSize: '40px',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '16px',\r\n            margin: 0\r\n          }}\r\n        >\r\n          Yuborilgan darslar ({filteredAndSortedLessons.length})\r\n        </Typography.Title>\r\n        <Typography.Text\r\n          style={{\r\n            fontSize: '18px',\r\n            color: '#64748b',\r\n            fontWeight: 400\r\n          }}\r\n        >\r\n          O'quvchilarga yuborilgan qo'shimcha darslar ro'yxati\r\n          </Typography.Text>\r\n        </div>\r\n  \r\n        {/* Search and Filters */}\r\n        <div style={{ display: 'flex', gap: '16px', marginBottom: '24px', flexWrap: 'wrap', alignItems: 'center' }}>\r\n          <Input\r\n            placeholder=\"Dars mavzusi, o'quvchi yoki fanini qidirish...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            style={{ minWidth: '300px', flex: 1 }}\r\n            allowClear\r\n          />\r\n          <Select\r\n            value={sortBy}\r\n            onChange={(value) => setSortBy(value)}\r\n            placeholder=\"Saralash\"\r\n            style={{ minWidth: '140px' }}\r\n          >\r\n            <Select.Option value=\"createdAt\">Yangi avval</Select.Option>\r\n            <Select.Option value=\"lessonDate\">Dars sanasi</Select.Option>\r\n            <Select.Option value=\"studentName\">O'quvchi</Select.Option>\r\n            <Select.Option value=\"subject\">Fan</Select.Option>\r\n          </Select>\r\n          <Select\r\n            value={filterStatus}\r\n            onChange={(value) => setFilterStatus(value)}\r\n            placeholder=\"Status\"\r\n            style={{ minWidth: '120px' }}\r\n          >\r\n            <Select.Option value=\"all\">Barcha</Select.Option>\r\n            <Select.Option value=\"read\">Ko'rilgan</Select.Option>\r\n            <Select.Option value=\"unread\">Ko'rilmagan</Select.Option>\r\n          </Select>\r\n        </div>\r\n  \r\n        {/* Search Results Info */}\r\n        {searchTerm && (\r\n          <Typography.Text style={{ marginBottom: '16px', color: '#64748b' }}>\r\n            {filteredAndSortedLessons.length} ta dars topildi\r\n          </Typography.Text>\r\n        )}\r\n  \r\n        {sentLessons.length === 0 ? (\r\n          <Card style={{ textAlign: 'center', backgroundColor: '#f8fafc', border: '1px solid #e2e8f0' }}>\r\n            <div style={{ padding: '32px' }}>\r\n              <SchoolIcon style={{ fontSize: '64px', color: '#94a3b8', marginBottom: '16px' }} />\r\n              <Typography.Title level={4} style={{ marginBottom: '8px' }}>\r\n                Hozircha darsga chaqirish yuborilmagan\r\n              </Typography.Title>\r\n              <Typography.Text style={{ color: '#64748b' }}>\r\n                O'quvchilarga qo'shimcha dars yuborish uchun test natijalarini ko'ring\r\n              </Typography.Text>\r\n            </div>\r\n          </Card>\r\n        ) : (\r\n        <div>\r\n          <Alert\r\n            message={`Siz ${sentLessons.length} ta darsga chaqirish yuborgansiz`}\r\n            type=\"info\"\r\n            style={{ marginBottom: '24px' }}\r\n          />\r\n\r\n          <Table\r\n            dataSource={filteredAndSortedLessons}\r\n            rowKey=\"id\"\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n            }}\r\n            columns={[\r\n              {\r\n                title: 'Dars mavzusi',\r\n                dataIndex: 'lessonTopic',\r\n                key: 'lessonTopic',\r\n                render: (text, record) => (\r\n                  <div>\r\n                    <Typography.Text strong style={{ color: '#1e293b' }}>\r\n                      {text}\r\n                    </Typography.Text>\r\n                    {record.lessonDescription && (\r\n                      <div style={{ marginTop: '4px' }}>\r\n                        <Typography.Text style={{ fontSize: '12px', color: '#64748b' }}>\r\n                          {record.lessonDescription.length > 50 ? record.lessonDescription.substring(0, 50) + '...' : record.lessonDescription}\r\n                        </Typography.Text>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'O\\'quvchi',\r\n                key: 'student',\r\n                render: (_, record) => (\r\n                  <div>\r\n                    <Typography.Text style={{ color: '#1e293b' }}>\r\n                      {record.studentName || 'O\\'quvchi'}\r\n                    </Typography.Text>\r\n                    {record.studentClass && (\r\n                      <div style={{ marginTop: '4px' }}>\r\n                        <Typography.Text style={{ fontSize: '12px', color: '#64748b' }}>\r\n                          {record.studentClass}-sinf\r\n                        </Typography.Text>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Fan',\r\n                dataIndex: 'subject',\r\n                key: 'subject',\r\n                render: (subject) => (\r\n                  <Tag style={{ fontWeight: 500 }}>\r\n                    {subject}\r\n                  </Tag>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Sana va vaqt',\r\n                key: 'datetime',\r\n                render: (_, record) => (\r\n                  <div>\r\n                    <Typography.Text style={{ color: '#1e293b' }}>\r\n                      {record.lessonDate}\r\n                    </Typography.Text>\r\n                    <div style={{ marginTop: '4px' }}>\r\n                      <Typography.Text style={{ fontSize: '12px', color: '#64748b' }}>\r\n                        {record.lessonTime}\r\n                      </Typography.Text>\r\n                    </div>\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Hona',\r\n                dataIndex: 'room',\r\n                key: 'room',\r\n                render: (room) => (\r\n                  <Typography.Text style={{ color: '#1e293b' }}>\r\n                    {room}\r\n                  </Typography.Text>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Status',\r\n                key: 'status',\r\n                render: (_, record) => (\r\n                  <div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\r\n                      {record.isRead ? (\r\n                        <CheckCircleIcon style={{ color: '#059669', fontSize: '16px' }} />\r\n                      ) : (\r\n                        <UncheckedIcon style={{ color: '#d97706', fontSize: '16px' }} />\r\n                      )}\r\n                      <Typography.Text style={{ color: record.isRead ? '#059669' : '#d97706' }}>\r\n                        {record.isRead ? 'Ko\\'rilgan' : 'Ko\\'rilmagan'}\r\n                      </Typography.Text>\r\n                    </div>\r\n                    <Typography.Text style={{ fontSize: '12px', color: '#64748b' }}>\r\n                      {formatDate(record.createdAt)}\r\n                    </Typography.Text>\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Harakatlar',\r\n                key: 'actions',\r\n                render: (_, record) => (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    icon={<DoneIcon />}\r\n                    onClick={() => setConfirmDialog({ open: true, lesson: record })}\r\n                    style={{\r\n                      backgroundColor: '#059669',\r\n                      borderColor: '#059669',\r\n                      fontWeight: 600\r\n                    }}\r\n                  >\r\n                    Dars o'tildi\r\n                  </Button>\r\n                ),\r\n              },\r\n            ]}\r\n            pagination={{\r\n              pageSize: 10,\r\n              showSizeChanger: true,\r\n              showQuickJumper: true,\r\n              showTotal: (total) => `Jami ${total} ta dars`,\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Confirmation Modal */}\r\n      <Modal\r\n        open={confirmDialog.open}\r\n        onCancel={() => setConfirmDialog({ open: false, lesson: null })}\r\n        title=\"Darsni tugagan deb belgilash\"\r\n        footer={[\r\n          <Button key=\"cancel\" onClick={() => setConfirmDialog({ open: false, lesson: null })}>\r\n            Bekor qilish\r\n          </Button>,\r\n          <Button\r\n            key=\"confirm\"\r\n            type=\"primary\"\r\n            onClick={() => {\r\n              if (confirmDialog.lesson) {\r\n                markLessonCompleted(confirmDialog.lesson.id);\r\n              }\r\n              setConfirmDialog({ open: false, lesson: null });\r\n            }}\r\n            style={{ backgroundColor: '#059669', borderColor: '#059669' }}\r\n          >\r\n            Tasdiqlash\r\n          </Button>\r\n        ]}\r\n      >\r\n        <Typography.Text>\r\n          \"{confirmDialog.lesson?.lessonTopic}\" mavzusidagi darsni tugagan deb belgilamoqchimisiz?\r\n          Bu amal o'quvchi bildirishnomasini o'chiradi va ortga qaytarib bo'lmaydi.\r\n        </Typography.Text>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SentLessons;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\StudentResult.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\TeacherOverview.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":20,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[583,614],"text":""},"desc":"Remove unused variable 'navigate'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, Typography, Row, Col, Statistic, Spin, Alert, Button, List } from 'antd';\r\nimport {\r\n  BookOutlined,\r\n  TrophyOutlined,\r\n  BarChartOutlined,\r\n  TeamOutlined,\r\n  UserOutlined,\r\n  ClockCircleOutlined,\r\n  CheckCircleOutlined,\r\n  RiseOutlined,\r\n  CrownOutlined,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nconst TeacherOverview = () => {\r\n  const { currentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalTests: 0,\r\n    activeTests: 0,\r\n    totalAttempts: 0,\r\n    uniqueStudents: 0,\r\n    averageScore: 0,\r\n    highestScore: 0,\r\n    lowestScore: 0,\r\n    curatorClass: '',\r\n    curatorClassStudents: 0,\r\n    curatorClassAverageScore: 0,\r\n    recentActivity: [],\r\n    allRecentActivity: []\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch real statistics from the database\r\n  useEffect(() => {\r\n    const fetchStatistics = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Load teacher's tests from API\r\n        const testsResponse = await apiService.getTests({ teacher: currentUser.id });\r\n        const teacherTests = testsResponse.results || testsResponse;\r\n\r\n        // Load all test attempts and filter for teacher's tests\r\n        const attemptsResponse = await apiService.getAttempts();\r\n        const allAttempts = attemptsResponse.results || attemptsResponse;\r\n        const teacherAttempts = allAttempts.filter(attempt =>\r\n          teacherTests.some(test => test.id === attempt.test)\r\n        );\r\n\r\n        // Load all users to get student information\r\n        const usersResponse = await apiService.getUsers();\r\n        const allUsers = usersResponse.results || usersResponse;\r\n        const studentUsers = allUsers.filter(user => user.role === 'student');\r\n\r\n        // Calculate statistics\r\n        const totalTests = teacherTests.length;\r\n        const activeTests = teacherTests.filter(test => test.is_active !== false).length;\r\n        const totalAttempts = teacherAttempts.length;\r\n        const uniqueStudents = new Set(teacherAttempts.map(attempt => attempt.student)).size;\r\n\r\n        // Calculate score statistics\r\n        const scores = teacherAttempts.map(attempt => attempt.score || 0);\r\n        const averageScore = scores.length > 0\r\n          ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n          : 0;\r\n        const highestScore = scores.length > 0\r\n          ? Math.round(Math.max(...scores))\r\n          : 0;\r\n        const lowestScore = scores.length > 0\r\n          ? Math.round(Math.min(...scores))\r\n          : 0;\r\n\r\n        // Get curator class information\r\n        const curatorClass = currentUser.curator_class || '';\r\n        let curatorClassStudents = 0;\r\n        let curatorClassAverageScore = 0;\r\n\r\n        if (curatorClass) {\r\n          // Find students in curator class\r\n          const curatorStudents = studentUsers.filter(student =>\r\n            student.class_group && student.class_group.startsWith(curatorClass.split('-').slice(0, 2).join('-'))\r\n          );\r\n          curatorClassStudents = curatorStudents.length;\r\n\r\n          // Calculate average score for curator class students\r\n          if (curatorStudents.length > 0) {\r\n            const curatorStudentIds = curatorStudents.map(s => s.id);\r\n            const curatorAttempts = teacherAttempts.filter(attempt =>\r\n              curatorStudentIds.includes(attempt.student)\r\n            );\r\n            const curatorScores = curatorAttempts.map(attempt => attempt.score || 0);\r\n            curatorClassAverageScore = curatorScores.length > 0\r\n              ? Math.round(curatorScores.reduce((sum, score) => sum + score, 0) / curatorScores.length)\r\n              : 0;\r\n          }\r\n        }\r\n\r\n        // Get recent activity (last 10 attempts for modal, 3 for overview)\r\n        const allRecentActivity = teacherAttempts\r\n          .sort((a, b) => new Date(b.submitted_at) - new Date(a.submitted_at))\r\n          .slice(0, 10)\r\n          .map(attempt => {\r\n            const student = studentUsers.find(s => s.id === attempt.student);\r\n            const test = teacherTests.find(t => t.id === attempt.test);\r\n            return {\r\n              id: attempt.id,\r\n              action: `Test yakunlandi: ${test?.title || 'Noma\\'lum test'}`,\r\n              user: student?.name || 'Noma\\'lum o\\'quvchi',\r\n              time: new Date(attempt.submitted_at).toLocaleDateString('uz-UZ'),\r\n              score: attempt.score\r\n            };\r\n          });\r\n\r\n        const recentActivity = allRecentActivity.slice(0, 3);\r\n\r\n        setStats({\r\n          totalTests,\r\n          activeTests,\r\n          totalAttempts,\r\n          uniqueStudents,\r\n          averageScore,\r\n          highestScore,\r\n          lowestScore,\r\n          curatorClass,\r\n          curatorClassStudents,\r\n          curatorClassAverageScore,\r\n          recentActivity,\r\n          allRecentActivity\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching statistics:', error);\r\n        setError('Ma\\'lumotlarni yuklashda xatolik yuz berdi');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStatistics();\r\n  }, [currentUser]);\r\n\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix }) => (\r\n    <Col xs={24} sm={12} md={6}>\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n        }}\r\n        hoverable\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Typography.Text\r\n              style={{\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#64748b',\r\n                display: 'block',\r\n                marginBottom: '8px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Typography.Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              valueStyle={{\r\n                fontSize: '32px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n                lineHeight: 1.2\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              backgroundColor: color,\r\n              borderRadius: '12px',\r\n              padding: '12px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '16px'\r\n            }}\r\n          >\r\n            {React.cloneElement(icon, {\r\n              style: {\r\n                fontSize: '24px',\r\n                color: '#ffffff'\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </Col>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        padding: '32px 0',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Typography.Text style={{ marginLeft: '16px' }}>\r\n          Ma'lumotlar yuklanmoqda...\r\n        </Typography.Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '32px' }}>\r\n        <Alert\r\n          message={error}\r\n          type=\"error\"\r\n          showIcon\r\n          style={{ marginTop: '16px' }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      padding: '32px 0',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div style={{\r\n        marginBottom: '48px',\r\n        paddingBottom: '32px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Typography.Title\r\n          level={1}\r\n          style={{\r\n            fontSize: '40px',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '16px',\r\n            margin: 0\r\n          }}\r\n        >\r\n          O'qituvchi umumiy ko'rinishi\r\n        </Typography.Title>\r\n        <Typography.Text\r\n          style={{\r\n            fontSize: '18px',\r\n            color: '#64748b',\r\n            fontWeight: 400\r\n          }}\r\n        >\r\n          Testlaringiz va o'quvchilar faoliyati statistikasi\r\n        </Typography.Text>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <StatCard\r\n          title=\"Jami testlar\"\r\n          value={stats.totalTests}\r\n          icon={<BookOutlined />}\r\n          color=\"#2563eb\"\r\n        />\r\n        <StatCard\r\n          title=\"Faol testlar\"\r\n          value={stats.activeTests}\r\n          icon={<CheckCircleOutlined />}\r\n          color=\"#16a34a\"\r\n        />\r\n        <StatCard\r\n          title=\"Jami urinishlar\"\r\n          value={stats.totalAttempts}\r\n          icon={<ClockCircleOutlined />}\r\n          color=\"#7c3aed\"\r\n        />\r\n        <StatCard\r\n          title=\"Faol o'quvchilar\"\r\n          value={stats.uniqueStudents}\r\n          icon={<TeamOutlined />}\r\n          color=\"#d97706\"\r\n        />\r\n        <StatCard\r\n          title=\"O'rtacha ball\"\r\n          value={stats.averageScore}\r\n          suffix=\"%\"\r\n          icon={<RiseOutlined />}\r\n          color=\"#059669\"\r\n        />\r\n        <StatCard\r\n          title=\"Eng yuqori ball\"\r\n          value={stats.highestScore}\r\n          suffix=\"%\"\r\n          icon={<TrophyOutlined />}\r\n          color=\"#dc2626\"\r\n        />\r\n        {stats.curatorClass && (\r\n          <StatCard\r\n            title=\"Kurator sinf\"\r\n            value={stats.curatorClass}\r\n            icon={<UserOutlined />}\r\n            color=\"#8b5cf6\"\r\n          />\r\n        )}\r\n        {stats.curatorClass && (\r\n          <StatCard\r\n            title=\"Sinf o'quvchilari\"\r\n            value={stats.curatorClassStudents}\r\n            icon={<TeamOutlined />}\r\n            color=\"#06b6d4\"\r\n          />\r\n        )}\r\n        {stats.curatorClass && stats.curatorClassStudents > 0 && (\r\n          <StatCard\r\n            title=\"Sinf o'rtacha ball\"\r\n            value={stats.curatorClassAverageScore}\r\n            suffix=\"%\"\r\n            icon={<BarChartOutlined />}\r\n            color=\"#f59e0b\"\r\n          />\r\n        )}\r\n        <StatCard\r\n          title=\"Eng past ball\"\r\n          value={stats.lowestScore}\r\n          suffix=\"%\"\r\n          icon={<RiseOutlined />}\r\n          color=\"#ef4444\"\r\n        />\r\n        <StatCard\r\n          title=\"Test muvaffaqiyati\"\r\n          value={stats.totalAttempts > 0 ? Math.round((stats.uniqueStudents / Math.max(stats.totalAttempts, 1)) * 100) : 0}\r\n          suffix=\"%\"\r\n          icon={<CheckCircleOutlined />}\r\n          color=\"#10b981\"\r\n        />\r\n        <StatCard\r\n          title=\"Faol test foizi\"\r\n          value={stats.totalTests > 0 ? Math.round((stats.activeTests / stats.totalTests) * 100) : 0}\r\n          suffix=\"%\"\r\n          icon={<BarChartOutlined />}\r\n          color=\"#3b82f6\"\r\n        />\r\n      </Row>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TeacherOverview;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\TeacherStatistics.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadStatistics'. Either include it or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser.id, loadStatistics]","fix":{"range":[1161,1177],"text":"[currentUser.id, loadStatistics]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'testCreationData' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":197,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":197,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"testCreationData"},"fix":{"range":[5775,6133],"text":""},"desc":"Remove unused variable 'testCreationData'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport 'animate.css';\r\nimport { Typography, Card, Row, Col, Statistic, Spin } from 'antd';\r\nimport {\r\n  BarChartOutlined as AssessmentIcon,\r\n  TeamOutlined as PeopleIcon,\r\n  RiseOutlined as TrendingUpIcon,\r\n  BookOutlined as SchoolIcon,\r\n  FileTextOutlined as QuizIcon,\r\n  UserOutlined as EmojiPeopleIcon,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement,\r\n  LineElement,\r\n  PointElement,\r\n} from 'chart.js';\r\nimport { Bar, Pie, Line } from 'react-chartjs-2';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ArcElement,\r\n  LineElement,\r\n  PointElement\r\n);\r\n\r\nconst TeacherStatistics = () => {\r\n  const { currentUser } = useAuth();\r\n  const [myTests, setMyTests] = useState([]);\r\n  const [myTestAttempts, setMyTestAttempts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadStatistics();\r\n  }, [currentUser.id]);\r\n\r\n  const loadStatistics = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Load teacher's tests from API\r\n      const testsResponse = await apiService.getTests({ teacher: currentUser.id });\r\n      const teacherTests = testsResponse.results || testsResponse;\r\n      setMyTests(teacherTests);\r\n\r\n      // Load all test attempts and filter for teacher's tests\r\n      const attemptsResponse = await apiService.getAttempts();\r\n      const allAttempts = attemptsResponse.results || attemptsResponse;\r\n      const teacherAttempts = allAttempts.filter(attempt =>\r\n        teacherTests.some(test => test.id === attempt.test)\r\n      );\r\n      setMyTestAttempts(teacherAttempts);\r\n\r\n      console.log('Teacher statistics loaded:', {\r\n        tests: teacherTests.length,\r\n        attempts: teacherAttempts.length\r\n      });\r\n    } catch (error) {\r\n      console.error('Error loading statistics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Calculate comprehensive statistics\r\n  const totalTestsCreated = myTests.length;\r\n  const activeTests = myTests.filter(test => test.is_active).length;\r\n  const totalAttempts = myTestAttempts.length;\r\n  const uniqueStudents = new Set(myTestAttempts.map(attempt => attempt.student)).size;\r\n\r\n  // Calculate score statistics for teacher's tests\r\n  const scores = myTestAttempts.map(attempt => attempt.score || 0);\r\n\r\n  const averageScore = scores.length > 0\r\n    ? Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length)\r\n    : 0;\r\n\r\n  const highestScore = scores.length > 0\r\n    ? Math.round(Math.max(...scores))\r\n    : 0;\r\n\r\n  const lowestScore = scores.length > 0\r\n    ? Math.round(Math.min(...scores))\r\n    : 0;\r\n\r\n  // Basic activity data\r\n  const subjectStats = {};\r\n  myTestAttempts.forEach(attempt => {\r\n    const test = myTests.find(t => t.id === attempt.test);\r\n    if (test) {\r\n      subjectStats[test.subject] = (subjectStats[test.subject] || 0) + 1;\r\n    }\r\n  });\r\n\r\n  // Score distribution data\r\n  const scoreRanges = {\r\n    '0-20': 0,\r\n    '21-40': 0,\r\n    '41-60': 0,\r\n    '61-80': 0,\r\n    '81-100': 0\r\n  };\r\n\r\n  scores.forEach(score => {\r\n    if (score <= 20) scoreRanges['0-20']++;\r\n    else if (score <= 40) scoreRanges['21-40']++;\r\n    else if (score <= 60) scoreRanges['41-60']++;\r\n    else if (score <= 80) scoreRanges['61-80']++;\r\n    else scoreRanges['81-100']++;\r\n  });\r\n\r\n  const scoreDistributionData = {\r\n    labels: Object.keys(scoreRanges),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'quvchilar soni',\r\n        data: Object.values(scoreRanges),\r\n        backgroundColor: [\r\n          'rgba(255, 99, 132, 0.6)',\r\n          'rgba(255, 159, 64, 0.6)',\r\n          'rgba(255, 205, 86, 0.6)',\r\n          'rgba(75, 192, 192, 0.6)',\r\n          'rgba(54, 162, 235, 0.6)',\r\n        ],\r\n        borderColor: [\r\n          'rgba(255, 99, 132, 1)',\r\n          'rgba(255, 159, 64, 1)',\r\n          'rgba(255, 205, 86, 1)',\r\n          'rgba(75, 192, 192, 1)',\r\n          'rgba(54, 162, 235, 1)',\r\n        ],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // Subject performance data\r\n  const subjectPerformanceStats = {};\r\n  myTestAttempts.forEach(attempt => {\r\n    const test = myTests.find(t => t.id === attempt.test);\r\n    if (test) {\r\n      const subject = test.subject;\r\n      if (!subjectPerformanceStats[subject]) {\r\n        subjectPerformanceStats[subject] = { total: 0, sum: 0 };\r\n      }\r\n      subjectPerformanceStats[subject].total++;\r\n      subjectPerformanceStats[subject].sum += attempt.score || 0;\r\n    }\r\n  });\r\n\r\n  const subjectPerformanceData = {\r\n    labels: Object.keys(subjectPerformanceStats),\r\n    datasets: [\r\n      {\r\n        label: 'O\\'rtacha ball',\r\n        data: Object.values(subjectPerformanceStats).map(stat => Math.round(stat.sum / stat.total)),\r\n        backgroundColor: [\r\n          'rgba(255, 99, 132, 0.6)',\r\n          'rgba(54, 162, 235, 0.6)',\r\n          'rgba(255, 205, 86, 0.6)',\r\n          'rgba(75, 192, 192, 0.6)',\r\n          'rgba(153, 102, 255, 0.6)',\r\n        ],\r\n        borderColor: [\r\n          'rgba(255, 99, 132, 1)',\r\n          'rgba(54, 162, 235, 1)',\r\n          'rgba(255, 205, 86, 1)',\r\n          'rgba(75, 192, 192, 1)',\r\n          'rgba(153, 102, 255, 1)',\r\n        ],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // Test creation timeline\r\n  const testsByMonth = {};\r\n  myTests.forEach(test => {\r\n    const date = new Date(test.created_at);\r\n    const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\r\n    testsByMonth[monthKey] = (testsByMonth[monthKey] || 0) + 1;\r\n  });\r\n\r\n  const testCreationData = {\r\n    labels: Object.keys(testsByMonth).slice(-6), // Last 6 months\r\n    datasets: [\r\n      {\r\n        label: 'Yaratilgan testlar',\r\n        data: Object.values(testsByMonth).slice(-6),\r\n        borderColor: 'rgba(75, 192, 192, 1)',\r\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n        tension: 0.1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n      },\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: true,\r\n        ticks: {\r\n          stepSize: 1\r\n        }\r\n      }\r\n    },\r\n    animation: {\r\n      duration: 2000,\r\n      easing: 'easeOutBounce',\r\n      delay: (context) => {\r\n        if (context.type === 'data' && context.mode === 'default') {\r\n          return context.dataIndex * 100;\r\n        }\r\n        return 0;\r\n      },\r\n    },\r\n  };\r\n\r\n  const StatCard = ({ title, value, icon, color, suffix }) => (\r\n    <Col xs={24} sm={12} md={6}>\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n        }}\r\n        hoverable\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Typography.Text\r\n              style={{\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px',\r\n                color: '#64748b',\r\n                display: 'block',\r\n                marginBottom: '8px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Typography.Text>\r\n            <Statistic\r\n              value={value}\r\n              suffix={suffix}\r\n              valueStyle={{\r\n                fontSize: '32px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n                lineHeight: 1.2\r\n              }}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              backgroundColor: color,\r\n              borderRadius: '12px',\r\n              padding: '12px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '16px'\r\n            }}\r\n          >\r\n            {React.cloneElement(icon, {\r\n              style: {\r\n                fontSize: '24px',\r\n                color: '#ffffff'\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </Col>\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        padding: '32px 0',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '400px'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <Typography.Text style={{ marginLeft: '16px' }}>\r\n          Ma'lumotlar yuklanmoqda...\r\n        </Typography.Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      padding: '32px 0',\r\n      backgroundColor: '#ffffff'\r\n    }}>\r\n      <div style={{\r\n        marginBottom: '48px',\r\n        paddingBottom: '32px',\r\n        borderBottom: '1px solid #e2e8f0'\r\n      }}>\r\n        <Typography.Title\r\n          level={1}\r\n          style={{\r\n            fontSize: '40px',\r\n            fontWeight: 700,\r\n            color: '#1e293b',\r\n            marginBottom: '16px',\r\n            margin: 0\r\n          }}\r\n        >\r\n          O'qituvchi statistikasi\r\n        </Typography.Title>\r\n        <Typography.Text\r\n          style={{\r\n            fontSize: '18px',\r\n            color: '#64748b',\r\n            fontWeight: 400\r\n          }}\r\n        >\r\n          Testlaringiz va o'quvchilaringizning batafsil statistikasi\r\n        </Typography.Text>\r\n      </div>\r\n\r\n      {/* Main Statistics Cards with Entrance Animations */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '24px' }}>\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '100ms' }}>\r\n          <StatCard\r\n            title=\"Jami yaratilgan testlar\"\r\n            value={totalTestsCreated}\r\n            icon={<AssessmentIcon />}\r\n            color=\"#2563eb\"\r\n            suffix={` (${activeTests} faol)`}\r\n          />\r\n        </div>\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '200ms' }}>\r\n          <StatCard\r\n            title=\"Jami urinishlar\"\r\n            value={totalAttempts}\r\n            icon={<EmojiPeopleIcon />}\r\n            color=\"#16a34a\"\r\n            suffix={` (${uniqueStudents} o'quvchi)`}\r\n          />\r\n        </div>\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '300ms' }}>\r\n          <StatCard\r\n            title=\"O'rtacha ball\"\r\n            value={averageScore}\r\n            suffix=\"%\"\r\n            icon={<TrendingUpIcon />}\r\n            color=\"#0ea5e9\"\r\n          />\r\n        </div>\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '400ms' }}>\r\n          <StatCard\r\n            title=\"Eng yuqori ball\"\r\n            value={highestScore}\r\n            suffix=\"%\"\r\n            icon={<TrendingUpIcon />}\r\n            color=\"#059669\"\r\n          />\r\n        </div>\r\n        <div className=\"animate__animated animate__zoomIn\" style={{ animationDelay: '500ms' }}>\r\n          <StatCard\r\n            title=\"Eng past ball\"\r\n            value={lowestScore}\r\n            suffix=\"%\"\r\n            icon={<TrendingUpIcon />}\r\n            color=\"#d97706\"\r\n          />\r\n        </div>\r\n      </Row>\r\n\r\n      <Row gutter={[24, 24]}>\r\n        {/* Score Distribution Chart */}\r\n        <Col xs={24} md={12}>\r\n          <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '200ms' }}>\r\n            <Card\r\n              style={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e2e8f0',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n                height: '400px',\r\n                padding: '24px'\r\n              }}\r\n            >\r\n              <Typography.Title level={4} style={{ marginBottom: '24px' }}>\r\n                Ballar taqsimoti\r\n              </Typography.Title>\r\n            <Bar \r\n              data={scoreDistributionData} \r\n              options={{\r\n                ...chartOptions,\r\n                animation: {\r\n                  ...chartOptions.animation,\r\n                  delay: (context) => {\r\n                    if (context.type === 'data' && context.mode === 'default') {\r\n                      return context.dataIndex * 150;\r\n                    }\r\n                    return 0;\r\n                  },\r\n                },\r\n              }} \r\n            />\r\n            </Card>\r\n          </div>\r\n        </Col>\r\n\r\n        {/* Subject Performance Chart */}\r\n        <Col xs={24} md={12}>\r\n          <div className=\"animate__animated animate__fadeInUp\" style={{ animationDelay: '400ms' }}>\r\n            <Card\r\n              style={{\r\n                backgroundColor: '#ffffff',\r\n                border: '1px solid #e2e8f0',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n                height: '400px',\r\n                padding: '24px'\r\n              }}\r\n            >\r\n              <Typography.Title level={4} style={{ marginBottom: '24px' }}>\r\n                Fanlar bo'yicha natijalar\r\n              </Typography.Title>\r\n              <Pie\r\n                data={subjectPerformanceData}\r\n                options={{\r\n                  responsive: true,\r\n                  plugins: {\r\n                    legend: {\r\n                      position: 'bottom',\r\n                    },\r\n                  },\r\n                  animation: {\r\n                    animateRotate: true,\r\n                    animateScale: true,\r\n                    duration: 2500,\r\n                    easing: 'easeOutElastic(1, .6)',\r\n                  },\r\n                }}\r\n              />\r\n            </Card>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TeacherStatistics;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\pages\\teacher\\TestDetails.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'message' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[256,268],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTestDetails'. Either include it or remove the dependency array.","line":53,"column":6,"nodeType":"ArrayExpression","endLine":53,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadTestDetails, testId]","fix":{"range":[1608,1616],"text":"[loadTestDetails, testId]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  Table,\r\n  Button,\r\n  Tag,\r\n  Alert,\r\n  Row,\r\n  Col,\r\n  Avatar,\r\n  Space,\r\n  Statistic,\r\n  Divider,\r\n  Modal,\r\n  message,\r\n} from 'antd';\r\nimport {\r\n  ArrowLeftOutlined as ArrowBackIcon,\r\n  BarChartOutlined as AssessmentIcon,\r\n  UserOutlined as PersonIcon,\r\n  CheckCircleOutlined as CheckCircleIcon,\r\n  CloseCircleOutlined as CancelIcon,\r\n  TeamOutlined as PeopleIcon,\r\n  ArrowUpOutlined as TrendingUpIcon,\r\n  TrophyOutlined as EmojiEventsIcon,\r\n  ArrowDownOutlined as TrendingDownIcon,\r\n} from '@ant-design/icons';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport apiService from '../../data/apiService';\r\nimport SendLessonModal from '../../components/SendLessonModal';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst TestDetails = () => {\r\n  const { testId } = useParams();\r\n  const { currentUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [test, setTest] = useState(null);\r\n  const [attempts, setAttempts] = useState([]);\r\n  const [allStudents, setAllStudents] = useState([]);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [lessonModalOpen, setLessonModalOpen] = useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [selectedAttempt, setSelectedAttempt] = useState(null);\r\n  const [notifications, setNotifications] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadTestDetails();\r\n  }, [testId]);\r\n\r\n  const loadTestDetails = async () => {\r\n    try {\r\n      // Load test data from API\r\n      const foundTest = await apiService.getTest(testId);\r\n\r\n      if (!foundTest) {\r\n        setError('Test not found');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Check if teacher owns this test\r\n      if (foundTest.teacher !== currentUser.id) {\r\n        setError('Access denied');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setTest(foundTest);\r\n\r\n      // Load attempts for this test from API\r\n      const attemptsResponse = await apiService.getAttempts({ test: testId });\r\n      const testAttempts = attemptsResponse.results || attemptsResponse;\r\n      setAttempts(testAttempts);\r\n\r\n      // Load questions for this test from API\r\n      const questionsResponse = await apiService.getQuestions({ test: testId });\r\n      const testQuestions = questionsResponse.results || questionsResponse;\r\n      setQuestions(testQuestions);\r\n\r\n      // Load only students from API\r\n      const usersResponse = await apiService.getUsers();\r\n      const allUsers = usersResponse.results || usersResponse;\r\n      const storedStudents = allUsers.filter(user => user.role === 'student');\r\n      setAllStudents(storedStudents);\r\n\r\n      // Load notifications to check lesson invitations\r\n      const allNotifications = JSON.parse(localStorage.getItem('notifications') || '[]');\r\n      const lessonNotifications = allNotifications.filter(n => n.type === 'lesson_reminder' && n.testId === testId);\r\n      setNotifications(lessonNotifications);\r\n\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('Failed to load test details:', err);\r\n      setError('Failed to load test details');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getScoreColor = (score) => {\r\n    if (score >= 90) return 'success';\r\n    if (score >= 70) return 'warning';\r\n    return 'error';\r\n  };\r\n\r\n  const getScoreText = (score) => {\r\n    if (score >= 90) return 'Ajoyib';\r\n    if (score >= 80) return 'Yaxshi';\r\n    if (score >= 70) return 'Qoniqarli';\r\n    if (score >= 60) return 'Qoniqarsiz';\r\n    return 'Yomon';\r\n  };\r\n\r\n  const getDirectionLabel = (direction) => {\r\n    return direction === 'natural' ? 'Tabiiy fanlar' : direction === 'exact' ? 'Aniq fanlar' : 'Yo\\'nalish kiritilmagan';\r\n  };\r\n\r\n  const handleOpenLessonModal = (studentId, attempt) => {\r\n    const student = allStudents.find(s => s.id === studentId);\r\n    if (student) {\r\n      setSelectedStudent(student);\r\n      setSelectedAttempt({\r\n        ...attempt,\r\n        test: test\r\n      });\r\n      setLessonModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const reloadNotifications = () => {\r\n    const allNotifications = JSON.parse(localStorage.getItem('notifications') || '[]');\r\n    const lessonNotifications = allNotifications.filter(n => n.type === 'lesson_reminder' && n.testId === testId);\r\n    setNotifications(lessonNotifications);\r\n  };\r\n\r\n  const handleCloseLessonModal = () => {\r\n    setLessonModalOpen(false);\r\n    setSelectedStudent(null);\r\n    setSelectedAttempt(null);\r\n    reloadNotifications();\r\n  };\r\n\r\n  // Get student's answers for a question\r\n  const getStudentAnswer = (attempt, questionId) => {\r\n    return attempt.answers?.[questionId] || '';\r\n  };\r\n\r\n  // Check if answer is correct\r\n  const isAnswerCorrect = (attempt, question) => {\r\n    const studentAnswer = getStudentAnswer(attempt, question.id);\r\n    return studentAnswer === question.correct_answer || studentAnswer === question.correctAnswer;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        padding: '32px',\r\n        backgroundColor: '#ffffff',\r\n        minHeight: '100vh'\r\n      }}>\r\n        <Title level={1} style={{ color: '#1e293b', marginBottom: '16px' }}>\r\n          Test tafsilotlari\r\n        </Title>\r\n        <Text style={{ color: '#64748b' }}>Yuklanmoqda...</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !test) {\r\n    return (\r\n      <div style={{\r\n        padding: '32px',\r\n        backgroundColor: '#ffffff',\r\n        minHeight: '100vh'\r\n      }}>\r\n        <Title level={1} style={{ color: '#1e293b', marginBottom: '24px' }}>\r\n          Xatolik\r\n        </Title>\r\n        <Alert\r\n          message={error || 'Test topilmadi'}\r\n          type=\"error\"\r\n          style={{ marginBottom: '24px' }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<ArrowBackIcon />}\r\n          onClick={() => navigate('/teacher/my-tests')}\r\n          size=\"large\"\r\n          style={{\r\n            backgroundColor: '#2563eb',\r\n            borderColor: '#2563eb',\r\n            fontWeight: 600,\r\n          }}\r\n        >\r\n          Orqaga\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Calculate statistics\r\n  const totalAttempts = attempts.length;\r\n  const averageScore = totalAttempts > 0\r\n    ? Math.round(attempts.reduce((sum, a) => sum + a.score, 0) / totalAttempts)\r\n    : 0;\r\n  const highestScore = totalAttempts > 0 ? Math.max(...attempts.map(a => a.score)) : 0;\r\n  const lowestScore = totalAttempts > 0 ? Math.min(...attempts.map(a => a.score)) : 0;\r\n\r\n  // Table columns\r\n  const columns = [\r\n    {\r\n      title: 'O\\'quvchi ismi va yo\\'nalishi',\r\n      key: 'student',\r\n      render: (attempt) => {\r\n        const student = allStudents.find(s => s.id === attempt.student);\r\n        return (\r\n          <Space>\r\n            {student?.is_premium && student?.profile_photo ? (\r\n              <Avatar\r\n                src={student.profile_photo.startsWith('http') ? student.profile_photo : `${apiService.baseURL.replace('/api', '')}${student.profile_photo}`}\r\n                style={{\r\n                  border: '2px solid #f59e0b'\r\n                }}\r\n              />\r\n            ) : (\r\n              <Avatar icon={<PersonIcon />} style={{ backgroundColor: '#1890ff' }} />\r\n            )}\r\n            <div>\r\n              <div\r\n                style={{\r\n                  cursor: 'pointer',\r\n                  fontWeight: 500,\r\n                  color: '#1890ff'\r\n                }}\r\n                onClick={() => navigate(`/teacher/student-profile/${student?.id}`)}\r\n              >\r\n                {student?.name || student?.first_name || 'Noma\\'lum'} {student?.last_name || ''}\r\n                {student?.is_premium && (\r\n                  <Tag color=\"orange\" style={{ marginLeft: 8, fontSize: '10px' }}>\r\n                    Premium\r\n                  </Tag>\r\n                )}\r\n              </div>\r\n              <Text type=\"secondary\" style={{ fontSize: '12px' }}>\r\n                {getDirectionLabel(student?.direction) || 'Yo\\'nalish kiritilmagan'}\r\n              </Text>\r\n            </div>\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Ball',\r\n      dataIndex: 'score',\r\n      key: 'score',\r\n      render: (score) => (\r\n        <Text strong style={{ color: score >= 90 ? '#52c41a' : score >= 70 ? '#faad14' : '#ff4d4f' }}>\r\n          {score}%\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'To\\'g\\'ri / Noto\\'g\\'ri',\r\n      key: 'answers',\r\n      render: (attempt) => {\r\n        let correctCount = 0;\r\n        let incorrectCount = 0;\r\n        questions.forEach(question => {\r\n          if (isAnswerCorrect(attempt, question)) {\r\n            correctCount++;\r\n          } else {\r\n            incorrectCount++;\r\n          }\r\n        });\r\n        return (\r\n          <Space>\r\n            <Tag icon={<CheckCircleIcon />} color=\"success\">\r\n              {correctCount}\r\n            </Tag>\r\n            <Tag icon={<CancelIcon />} color=\"error\">\r\n              {incorrectCount}\r\n            </Tag>\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Baho',\r\n      dataIndex: 'score',\r\n      key: 'grade',\r\n      render: (score) => (\r\n        <Tag color={getScoreColor(score)}>\r\n          {getScoreText(score)}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Vaqt',\r\n      dataIndex: 'time_taken',\r\n      key: 'time',\r\n      render: (time) => (\r\n        <Text>{`${Math.floor(time / 60)}:${(time % 60).toString().padStart(2, '0')}`}</Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Sana',\r\n      dataIndex: 'submitted_at',\r\n      key: 'date',\r\n      render: (date) => (\r\n        <Text>{new Date(date).toLocaleDateString('uz-UZ')}</Text>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Harakatlar',\r\n      key: 'actions',\r\n      render: (attempt) => {\r\n        const student = allStudents.find(s => s.id === attempt.student);\r\n        const lessonInvitation = notifications.find(n => n.studentId === attempt.student);\r\n\r\n        if (lessonInvitation) {\r\n          return (\r\n            <div style={{ minWidth: '200px' }}>\r\n              <Text strong style={{ color: '#d97706', display: 'block', marginBottom: 4 }}>\r\n                Qo'shimcha dars yuborilgan\r\n              </Text>\r\n              <Text style={{ color: '#1e293b', display: 'block', marginBottom: 4 }}>\r\n                {lessonInvitation.lessonTopic}\r\n              </Text>\r\n              <Text type=\"secondary\" style={{ display: 'block', marginBottom: 4, fontSize: '11px' }}>\r\n                {lessonInvitation.lessonDate} тАв {lessonInvitation.lessonTime}\r\n              </Text>\r\n              <Text type=\"secondary\" style={{ display: 'block', marginBottom: 4, fontSize: '11px' }}>\r\n                {lessonInvitation.room}\r\n              </Text>\r\n              <Text type=\"danger\" style={{ fontSize: '11px', fontWeight: 500 }}>\r\n                Dars hali o'tilmagan\r\n              </Text>\r\n            </div>\r\n          );\r\n        } else if (attempt.score < 60 && student) {\r\n          return (\r\n            <Button\r\n              size=\"small\"\r\n              danger\r\n              onClick={() => handleOpenLessonModal(student.id, attempt)}\r\n              style={{ cursor: 'pointer' }}\r\n            >\r\n              Qo'shimcha dars\r\n            </Button>\r\n          );\r\n        } else if (attempt.score >= 60) {\r\n          return (\r\n            <Button\r\n              size=\"small\"\r\n              disabled\r\n              style={{\r\n                backgroundColor: '#ecfdf5',\r\n                color: '#059669',\r\n                borderColor: '#10b981',\r\n              }}\r\n            >\r\n              Qo'shimcha dars kerak emas\r\n            </Button>\r\n          );\r\n        }\r\n        return null;\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      padding: '32px',\r\n      backgroundColor: '#ffffff',\r\n      minHeight: '100vh'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        marginBottom: '48px',\r\n        paddingBottom: '32px',\r\n        borderBottom: '1px solid #e2e8f0',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Button\r\n          icon={<ArrowBackIcon />}\r\n          onClick={() => navigate('/teacher/my-tests')}\r\n          style={{\r\n            borderColor: '#e2e8f0',\r\n            color: '#64748b',\r\n          }}\r\n        >\r\n          Mening testlarimga qaytish\r\n        </Button>\r\n        <Title level={1} style={{ color: '#1e293b', margin: 0 }}>\r\n          Test tafsilotlari\r\n        </Title>\r\n      </div>\r\n\r\n      {/* Test Info */}\r\n      <Card\r\n        style={{\r\n          backgroundColor: '#ffffff',\r\n          border: '1px solid #e2e8f0',\r\n          borderRadius: '12px',\r\n          marginBottom: '24px',\r\n          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)'\r\n        }}\r\n      >\r\n        <div style={{ padding: '24px' }}>\r\n          <Title level={2} style={{ color: '#1e293b', marginBottom: '16px' }}>\r\n            {test.title}\r\n          </Title>\r\n          <Text style={{\r\n            color: '#64748b',\r\n            fontSize: '16px',\r\n            lineHeight: 1.5,\r\n            display: 'block',\r\n            marginBottom: '24px'\r\n          }}>\r\n            {test.description || 'Tavsif mavjud emas'}\r\n          </Text>\r\n\r\n          <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n            <Tag color=\"blue\">\r\n              Fan: {test.subject}\r\n            </Tag>\r\n            <Tag color=\"green\">\r\n              {test.total_questions} ta savol\r\n            </Tag>\r\n            <Tag color=\"orange\">\r\n              {test.time_limit} daqiqa\r\n            </Tag>\r\n\r\n            {/* Target Grades Display */}\r\n            {test.target_grades && test.target_grades.length > 0 ? (\r\n              <div style={{ display: 'flex', gap: '4px', flexWrap: 'wrap', alignItems: 'center' }}>\r\n                <Tag color=\"default\" style={{ fontSize: '11px' }}>\r\n                  Maqsadlangan sinflar:\r\n                </Tag>\r\n                {test.target_grades.map((grade) => (\r\n                  <Tag\r\n                    key={grade}\r\n                    color=\"blue\"\r\n                    style={{\r\n                      fontSize: '11px',\r\n                      height: '20px',\r\n                      lineHeight: '18px'\r\n                    }}\r\n                  >\r\n                    {grade}-sinf\r\n                  </Tag>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <Tag color=\"success\">\r\n                Barcha sinflar uchun\r\n              </Tag>\r\n            )}\r\n\r\n            <Tag color={test.is_active ? 'success' : 'default'}>\r\n              {test.is_active ? 'Faol' : 'Nofaol'}\r\n            </Tag>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Statistics */}\r\n      <Row gutter={[24, 24]} style={{ marginBottom: '32px' }}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Statistic\r\n              title={\r\n                <Text style={{\r\n                  fontSize: '12px',\r\n                  fontWeight: 600,\r\n                  textTransform: 'uppercase',\r\n                  letterSpacing: '0.5px',\r\n                  color: '#64748b'\r\n                }}>\r\n                  Test topshirganlar\r\n                </Text>\r\n              }\r\n              value={totalAttempts}\r\n              valueStyle={{\r\n                fontSize: '40px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n              }}\r\n              prefix={\r\n                <div style={{\r\n                  backgroundColor: '#eff6ff',\r\n                  borderRadius: '12px',\r\n                  padding: '16px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                }}>\r\n                  <PeopleIcon style={{ fontSize: '24px', color: '#2563eb' }} />\r\n                </div>\r\n              }\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Statistic\r\n              title={\r\n                <Text style={{\r\n                  fontSize: '12px',\r\n                  fontWeight: 600,\r\n                  textTransform: 'uppercase',\r\n                  letterSpacing: '0.5px',\r\n                  color: '#64748b'\r\n                }}>\r\n                  O'rtacha ball\r\n                </Text>\r\n              }\r\n              value={averageScore}\r\n              suffix=\"%\"\r\n              valueStyle={{\r\n                fontSize: '40px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n              }}\r\n              prefix={\r\n                <div style={{\r\n                  backgroundColor: '#ecfdf5',\r\n                  borderRadius: '12px',\r\n                  padding: '16px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                }}>\r\n                  <TrendingUpIcon style={{ fontSize: '24px', color: '#059669' }} />\r\n                </div>\r\n              }\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Statistic\r\n              title={\r\n                <Text style={{\r\n                  fontSize: '12px',\r\n                  fontWeight: 600,\r\n                  textTransform: 'uppercase',\r\n                  letterSpacing: '0.5px',\r\n                  color: '#64748b'\r\n                }}>\r\n                  Eng yuqori ball\r\n                </Text>\r\n              }\r\n              value={highestScore}\r\n              suffix=\"%\"\r\n              valueStyle={{\r\n                fontSize: '40px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n              }}\r\n              prefix={\r\n                <div style={{\r\n                  backgroundColor: '#f0fdf4',\r\n                  borderRadius: '12px',\r\n                  padding: '16px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                }}>\r\n                  <EmojiEventsIcon style={{ fontSize: '24px', color: '#16a34a' }} />\r\n                </div>\r\n              }\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card\r\n            style={{\r\n              backgroundColor: '#ffffff',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '12px',\r\n              boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)',\r\n            }}\r\n          >\r\n            <Statistic\r\n              title={\r\n                <Text style={{\r\n                  fontSize: '12px',\r\n                  fontWeight: 600,\r\n                  textTransform: 'uppercase',\r\n                  letterSpacing: '0.5px',\r\n                  color: '#64748b'\r\n                }}>\r\n                  Eng past ball\r\n                </Text>\r\n              }\r\n              value={lowestScore}\r\n              suffix=\"%\"\r\n              valueStyle={{\r\n                fontSize: '40px',\r\n                fontWeight: 700,\r\n                color: '#1e293b',\r\n              }}\r\n              prefix={\r\n                <div style={{\r\n                  backgroundColor: '#fffbeb',\r\n                  borderRadius: '12px',\r\n                  padding: '16px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                }}>\r\n                  <TrendingDownIcon style={{ fontSize: '24px', color: '#d97706' }} />\r\n                </div>\r\n              }\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Students Who Took the Test */}\r\n      <Title level={3} style={{ marginBottom: '24px' }}>\r\n        Test topshirgan o'quvchilar ({attempts.length})\r\n      </Title>\r\n\r\n      {attempts.length === 0 ? (\r\n        <Alert\r\n          message=\"Hozircha hech kim bu testni topshirmagan.\"\r\n          type=\"info\"\r\n          style={{ marginBottom: '24px' }}\r\n        />\r\n      ) : (\r\n        <Card\r\n          style={{\r\n            backgroundColor: '#ffffff',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '12px',\r\n          }}\r\n        >\r\n          <Table\r\n            columns={columns}\r\n            dataSource={attempts}\r\n            rowKey=\"id\"\r\n            pagination={{\r\n              pageSize: 10,\r\n              showSizeChanger: true,\r\n              showQuickJumper: true,\r\n              showTotal: (total, range) => `${range[0]}-${range[1]} / ${total} ta`,\r\n            }}\r\n            scroll={{ x: 1200 }}\r\n          />\r\n        </Card>\r\n      )}\r\n\r\n      {/* Lesson Modal */}\r\n      <SendLessonModal\r\n        open={lessonModalOpen}\r\n        onClose={handleCloseLessonModal}\r\n        student={selectedStudent}\r\n        testResult={selectedAttempt}\r\n        teacherInfo={currentUser}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TestDetails;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\utils\\antdNotification.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\utils\\cacheManager.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'swUtils' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"swUtils"},"fix":{"range":[57,99],"text":""},"desc":"Remove unused variable 'swUtils'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":186,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":186,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":239,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":239,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'now' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":273,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":273,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"now"},"fix":{"range":[7652,7675],"text":""},"desc":"Remove unused variable 'now'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":292,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":292,"endColumn":21},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":314,"column":15,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":314,"endColumn":61,"suggestions":[{"messageId":"addBrackets","fix":{"range":[8829,8942],"text":"{ const pricing = await apiService.getPricing();\r\n              this.set('pricing', pricing);\r\n              break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":318,"column":15,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":318,"endColumn":71,"suggestions":[{"messageId":"addBrackets","fix":{"range":[8992,9125],"text":"{ const starPackages = await apiService.getStarPackages();\r\n              this.set('starPackages', starPackages);\r\n              break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'cacheDuration' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":386,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":386,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"cacheDuration"},"fix":{"range":[11019,11033],"text":""},"desc":"Remove unused variable 'cacheDuration'."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Data Cache Manager - Memory and localStorage caching\r\nimport { swUtils } from './serviceWorker';\r\n\r\nclass CacheManager {\r\n  constructor() {\r\n    this.memoryCache = new Map();\r\n    this.cacheConfig = {\r\n      // Cache durations in milliseconds\r\n      durations: {\r\n        // User data - 5 minutes\r\n        user: 5 * 60 * 1000,\r\n        profile: 5 * 60 * 1000,\r\n        \r\n        // Test data - 10 minutes\r\n        tests: 10 * 60 * 1000,\r\n        questions: 10 * 60 * 1000,\r\n        attempts: 10 * 60 * 1000,\r\n        \r\n        // Session data - 2 minutes (more dynamic)\r\n        sessions: 2 * 60 * 1000,\r\n        activeSession: 30 * 1000, // 30 seconds\r\n        \r\n        // Static data - 30 minutes\r\n        pricing: 30 * 60 * 1000,\r\n        starPackages: 30 * 60 * 1000,\r\n        gifts: 30 * 60 * 1000,\r\n        configurations: 30 * 60 * 1000,\r\n        \r\n        // Statistics - 1 minute\r\n        statistics: 1 * 60 * 1000,\r\n        dashboardStats: 1 * 60 * 1000,\r\n        \r\n        // Contact messages - 5 minutes\r\n        contactMessages: 5 * 60 * 1000,\r\n        \r\n        // Default duration\r\n        default: 5 * 60 * 1000\r\n      },\r\n      \r\n      // Maximum memory cache size\r\n      maxMemoryCacheSize: 100,\r\n      \r\n      // localStorage keys prefix\r\n      storagePrefix: 'testapp_cache_'\r\n    };\r\n    \r\n    this.cleanupInterval = null;\r\n    this.startCleanup();\r\n  }\r\n\r\n  // Get cache key for localStorage\r\n  getStorageKey(key) {\r\n    return `${this.cacheConfig.storagePrefix}${key}`;\r\n  }\r\n\r\n  // Determine cache type based on key\r\n  getCacheType(key) {\r\n    if (key.includes('user') || key.includes('profile')) return 'user';\r\n    if (key.includes('test')) return 'tests';\r\n    if (key.includes('question')) return 'questions';\r\n    if (key.includes('attempt')) return 'attempts';\r\n    if (key.includes('session')) return 'sessions';\r\n    if (key.includes('pricing') || key.includes('plan')) return 'pricing';\r\n    if (key.includes('star') || key.includes('gift')) return 'starPackages';\r\n    if (key.includes('stat') || key.includes('dashboard')) return 'statistics';\r\n    if (key.includes('contact')) return 'contactMessages';\r\n    return 'default';\r\n  }\r\n\r\n  // Get cache duration for a key\r\n  getCacheDuration(key) {\r\n    const type = this.getCacheType(key);\r\n    return this.cacheConfig.durations[type] || this.cacheConfig.durations.default;\r\n  }\r\n\r\n  // Set data in cache (memory + localStorage)\r\n  set(key, data, options = {}) {\r\n    const { \r\n      duration = this.getCacheDuration(key),\r\n      forceMemoryOnly = false \r\n    } = options;\r\n    \r\n    const cacheItem = {\r\n      data,\r\n      timestamp: Date.now(),\r\n      duration,\r\n      key\r\n    };\r\n\r\n    // Store in memory cache\r\n    this.setMemoryCache(key, cacheItem);\r\n    \r\n    // Store in localStorage if not memory-only and data is serializable\r\n    if (!forceMemoryOnly && this.isSerializable(data)) {\r\n      this.setLocalStorageCache(key, cacheItem);\r\n    }\r\n\r\n    return cacheItem;\r\n  }\r\n\r\n  // Get data from cache (memory first, then localStorage)\r\n  get(key, options = {}) {\r\n    const { useMemoryOnly = false } = options;\r\n    \r\n    // Try memory cache first\r\n    const memoryData = this.getMemoryCache(key);\r\n    if (memoryData && !this.isExpired(memoryData)) {\r\n      return {\r\n        data: memoryData.data,\r\n        source: 'memory',\r\n        age: Date.now() - memoryData.timestamp\r\n      };\r\n    }\r\n    \r\n    // Try localStorage cache if not memory-only\r\n    if (!useMemoryOnly) {\r\n      const storageData = this.getLocalStorageCache(key);\r\n      if (storageData && !this.isExpired(storageData)) {\r\n        // Update memory cache with fresh data\r\n        this.setMemoryCache(key, storageData);\r\n        return {\r\n          data: storageData.data,\r\n          source: 'localStorage',\r\n          age: Date.now() - storageData.timestamp\r\n        };\r\n      }\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  // Check if cache item is expired\r\n  isExpired(cacheItem) {\r\n    if (!cacheItem || !cacheItem.timestamp || !cacheItem.duration) {\r\n      return true;\r\n    }\r\n    return Date.now() - cacheItem.timestamp > cacheItem.duration;\r\n  }\r\n\r\n  // Memory cache operations\r\n  setMemoryCache(key, cacheItem) {\r\n    // Remove oldest items if cache is full\r\n    if (this.memoryCache.size >= this.cacheConfig.maxMemoryCacheSize) {\r\n      const firstKey = this.memoryCache.keys().next().value;\r\n      this.memoryCache.delete(firstKey);\r\n    }\r\n    \r\n    this.memoryCache.set(key, cacheItem);\r\n  }\r\n\r\n  getMemoryCache(key) {\r\n    return this.memoryCache.get(key);\r\n  }\r\n\r\n  // localStorage cache operations\r\n  setLocalStorageCache(key, cacheItem) {\r\n    try {\r\n      const storageKey = this.getStorageKey(key);\r\n      const serializedData = JSON.stringify(cacheItem);\r\n      localStorage.setItem(storageKey, serializedData);\r\n    } catch (error) {\r\n      console.warn('[Cache] Failed to store in localStorage:', error);\r\n      // If localStorage is full, clear old cache entries\r\n      this.cleanupLocalStorage();\r\n    }\r\n  }\r\n\r\n  getLocalStorageCache(key) {\r\n    try {\r\n      const storageKey = this.getStorageKey(key);\r\n      const serializedData = localStorage.getItem(storageKey);\r\n      if (!serializedData) return null;\r\n      \r\n      return JSON.parse(serializedData);\r\n    } catch (error) {\r\n      console.warn('[Cache] Failed to read from localStorage:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Check if data is serializable for localStorage\r\n  isSerializable(data) {\r\n    try {\r\n      JSON.stringify(data);\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Remove item from all caches\r\n  remove(key) {\r\n    this.memoryCache.delete(key);\r\n    \r\n    try {\r\n      const storageKey = this.getStorageKey(key);\r\n      localStorage.removeItem(storageKey);\r\n    } catch (error) {\r\n      console.warn('[Cache] Failed to remove from localStorage:', error);\r\n    }\r\n  }\r\n\r\n  // Clear all caches\r\n  clear(options = {}) {\r\n    const { memoryOnly = false } = options;\r\n    \r\n    // Clear memory cache\r\n    this.memoryCache.clear();\r\n    \r\n    // Clear localStorage cache if not memory-only\r\n    if (!memoryOnly) {\r\n      this.clearLocalStorage();\r\n    }\r\n  }\r\n\r\n  // Clear localStorage cache\r\n  clearLocalStorage() {\r\n    const keys = Object.keys(localStorage);\r\n    const cacheKeys = keys.filter(key => key.startsWith(this.cacheConfig.storagePrefix));\r\n    \r\n    cacheKeys.forEach(key => {\r\n      localStorage.removeItem(key);\r\n    });\r\n  }\r\n\r\n  // Get cache statistics\r\n  getStats() {\r\n    const memoryCount = this.memoryCache.size;\r\n    \r\n    // Count localStorage entries\r\n    const keys = Object.keys(localStorage);\r\n    const cacheKeys = keys.filter(key => key.startsWith(this.cacheConfig.storagePrefix));\r\n    const storageCount = cacheKeys.length;\r\n    \r\n    // Calculate memory cache usage\r\n    let memoryUsage = 0;\r\n    try {\r\n      memoryUsage = JSON.stringify([...this.memoryCache.values()]).length;\r\n    } catch (error) {\r\n      memoryUsage = 0;\r\n    }\r\n    \r\n    return {\r\n      memory: {\r\n        count: memoryCount,\r\n        size: memoryUsage,\r\n        maxSize: this.cacheConfig.maxMemoryCacheSize\r\n      },\r\n      localStorage: {\r\n        count: storageCount,\r\n        prefix: this.cacheConfig.storagePrefix\r\n      }\r\n    };\r\n  }\r\n\r\n  // Start periodic cleanup\r\n  startCleanup() {\r\n    this.cleanupInterval = setInterval(() => {\r\n      this.cleanup();\r\n    }, 5 * 60 * 1000); // Every 5 minutes\r\n  }\r\n\r\n  // Stop periodic cleanup\r\n  stopCleanup() {\r\n    if (this.cleanupInterval) {\r\n      clearInterval(this.cleanupInterval);\r\n      this.cleanupInterval = null;\r\n    }\r\n  }\r\n\r\n  // Cleanup expired cache items\r\n  cleanup() {\r\n    const now = Date.now();\r\n    \r\n    // Cleanup memory cache\r\n    for (const [key, cacheItem] of this.memoryCache.entries()) {\r\n      if (this.isExpired(cacheItem)) {\r\n        this.memoryCache.delete(key);\r\n      }\r\n    }\r\n    \r\n    // Cleanup localStorage\r\n    const keys = Object.keys(localStorage);\r\n    const cacheKeys = keys.filter(key => key.startsWith(this.cacheConfig.storagePrefix));\r\n    \r\n    cacheKeys.forEach(storageKey => {\r\n      try {\r\n        const cacheItem = JSON.parse(localStorage.getItem(storageKey));\r\n        if (this.isExpired(cacheItem)) {\r\n          localStorage.removeItem(storageKey);\r\n        }\r\n      } catch (error) {\r\n        // Remove corrupted entries\r\n        localStorage.removeItem(storageKey);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Preload common data\r\n  async preloadCommonData(apiService) {\r\n    const preloadKeys = [\r\n      'pricing',\r\n      'starPackages',\r\n      'configurations'\r\n    ];\r\n    \r\n    const promises = preloadKeys.map(async (key) => {\r\n      try {\r\n        // Only preload if not already cached\r\n        const cached = this.get(key);\r\n        if (!cached) {\r\n          switch (key) {\r\n            case 'pricing':\r\n              const pricing = await apiService.getPricing();\r\n              this.set('pricing', pricing);\r\n              break;\r\n            case 'starPackages':\r\n              const starPackages = await apiService.getStarPackages();\r\n              this.set('starPackages', starPackages);\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.warn(`[Cache] Failed to preload ${key}:`, error);\r\n      }\r\n    });\r\n    \r\n    await Promise.allSettled(promises);\r\n  }\r\n\r\n  // Cache API response with automatic key generation\r\n  cacheApiResponse(endpoint, data, method = 'GET') {\r\n    if (method !== 'GET') return; // Only cache GET requests\r\n    \r\n    const key = this.generateApiCacheKey(endpoint);\r\n    this.set(key, data);\r\n  }\r\n\r\n  // Generate cache key for API endpoint\r\n  generateApiCacheKey(endpoint) {\r\n    // Remove query parameters and normalize the endpoint\r\n    const cleanEndpoint = endpoint.split('?')[0];\r\n    return `api_${cleanEndpoint.replace(/\\//g, '_')}`;\r\n  }\r\n\r\n  // Get cached API response\r\n  getCachedApiResponse(endpoint) {\r\n    const key = this.generateApiCacheKey(endpoint);\r\n    return this.get(key);\r\n  }\r\n\r\n  // Invalidate cache for related endpoints\r\n  invalidateRelated(pattern) {\r\n    const keys = [...this.memoryCache.keys()];\r\n    const matchingKeys = keys.filter(key => key.includes(pattern));\r\n    \r\n    matchingKeys.forEach(key => {\r\n      this.remove(key);\r\n    });\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nconst cacheManager = new CacheManager();\r\n\r\n// React hooks for cache management\r\nexport const useCache = () => {\r\n  return {\r\n    set: (key, data, options) => cacheManager.set(key, data, options),\r\n    get: (key, options) => cacheManager.get(key, options),\r\n    remove: (key) => cacheManager.remove(key),\r\n    clear: (options) => cacheManager.clear(options),\r\n    getStats: () => cacheManager.getStats(),\r\n    invalidateRelated: (pattern) => cacheManager.invalidateRelated(pattern)\r\n  };\r\n};\r\n\r\n// API response caching hook\r\nexport const useApiCache = (apiService) => {\r\n  const cache = useCache();\r\n  \r\n  const cachedRequest = async (endpoint, options = {}) => {\r\n    const { \r\n      cacheDuration, \r\n      forceRefresh = false,\r\n      useCache = true \r\n    } = options;\r\n    \r\n    // Try to get from cache first\r\n    if (useCache && !forceRefresh) {\r\n      const cached = cache.getCachedApiResponse(endpoint);\r\n      if (cached) {\r\n        return {\r\n          data: cached.data,\r\n          fromCache: true,\r\n          source: cached.source,\r\n          age: cached.age\r\n        };\r\n      }\r\n    }\r\n    \r\n    // Make API request\r\n    const response = await apiService.get(endpoint);\r\n    \r\n    // Cache the response\r\n    if (useCache) {\r\n      cache.cacheApiResponse(endpoint, response);\r\n    }\r\n    \r\n    return {\r\n      data: response,\r\n      fromCache: false,\r\n      source: 'network',\r\n      age: 0\r\n    };\r\n  };\r\n  \r\n  return { cachedRequest, cache };\r\n};\r\n\r\nexport default cacheManager;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\utils\\notificationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\utils\\premiumVisibility.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\src\\utils\\serviceWorker.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\User\\Desktop\\Test-App\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
